<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-12-11 Fri 14:14 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ - Preprocessor and Macros</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp c++ code examples preprocessor macros define assertion"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ - Preprocessor and Macros</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org362a96e">1. Preprocessor and macros</a>
<ul>
<li><a href="#orgd09fbf7">1.1. Enable and disable macros during compilation</a></li>
<li><a href="#org871c7fa">1.2. Temporarily disable a code block</a></li>
<li><a href="#orgee47372">1.3. Custom Assertion Macro</a>
<ul>
<li><a href="#orgdbcf101">1.3.1. Simple assertion macro</a></li>
<li><a href="#org1fa14e9">1.3.2. Improved assertion macro</a></li>
<li><a href="#org10a532e">1.3.3. Type equality assertion macro</a></li>
</ul>
</li>
<li><a href="#org78c5a09">1.4. Tips and guidelines for writing macros</a>
<ul>
<li><a href="#org70480a6">1.4.1. DO NOT Use macros for defining constants</a></li>
<li><a href="#org8fd24a1">1.4.2. Use parenthesis within macros around parameter names</a></li>
<li><a href="#orgb2a6589">1.4.3. Dump all GCC's preprocessor defines</a></li>
<li><a href="#orgd18a364">1.4.4. Dump all preprocessor macros from a given header file</a></li>
</ul>
</li>
<li><a href="#orgd2ad373">1.5. Useful macros for debugging and tracing</a></li>
<li><a href="#org9eee74e">1.6. General Predefined Macros</a></li>
<li><a href="#org18f1af8">1.7. Macros for detecting platform or operating system</a></li>
<li><a href="#orga16989e">1.8. Macros for detecting compiler</a></li>
<li><a href="#org7cd50b1">1.9. Macros for detecting architecture</a></li>
<li><a href="#orga69a748">1.10. Macros for checking whether the compiler is 32 (x86) or 64 bits (x86-64)</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org362a96e" class="outline-2">
<h2 id="org362a96e"><span class="section-number-2">1</span> Preprocessor and macros</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgd09fbf7" class="outline-3">
<h3 id="orgd09fbf7"><span class="section-number-3">1.1</span> Enable and disable macros during compilation</h3>
<div class="outline-text-3" id="text-1-1">
<p>
This section is reminder about how to enable and disable macros during
compilation. This technique can be used for both C or C++. Note:
defining macros with -DMACRO=VALUE only works for GCC(G++) or
Clang. MSVC (Microsft Visual C++ compiler) uses '/' slash for defining
macros from command line. I this case the macro can be defined using
/DMACRO=VALUE. 
</p>

<p>
File: <span class="underline">macro-test.cpp</span> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#if</span><span class="org-negation-char"><span class="org-preprocessor">n</span></span><span class="org-preprocessor">def</span> CODE_VERSION
<span class="org-preprocessor">  #define</span> <span class="org-variable-name">CODE_VERSION</span> <span class="org-string">"0.1"</span> 
<span class="org-preprocessor">#endif</span> 

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span>
  <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-3">(</span>stderr,  <span class="org-string">" Product version: %s \n"</span>, CODE_VERSION<span class="org-rainbow-delimiters-depth-3">)</span>;
      <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-3">(</span>stderr, <span class="org-string">" Usage: %s &lt;NUMBER&gt; \n"</span>, argv<span class="org-rainbow-delimiters-depth-4">[</span>0<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>;
      <span class="org-keyword">return</span> EXIT_FAILURE;
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-type">int</span> <span class="org-variable-name">n</span>    = <span class="org-constant">std</span>::stoi<span class="org-rainbow-delimiters-depth-2">(</span>argv<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-type">int</span> <span class="org-variable-name">prod</span> = 1;

  <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 1; i &lt;= n; i++<span class="org-rainbow-delimiters-depth-2">){</span>
    prod *= i;

<span class="org-preprocessor">    #if</span> LOGGING 
      <span class="org-constant">std</span>::fprintf<span class="org-rainbow-delimiters-depth-3">(</span>stderr, <span class="org-string">" =&gt; i = %d ; prod = %d \n"</span>, i, prod<span class="org-rainbow-delimiters-depth-3">)</span>; 
<span class="org-preprocessor">    #endif</span> 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; product = %d \n"</span>, prod<span class="org-rainbow-delimiters-depth-2">)</span>; 

  <span class="org-comment-delimiter">// </span><span class="org-comment">Same as: return 0;</span>
  <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: <span class="underline">CMakeLists.txt</span> 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(MacroCmake)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON )

<span class="org-function-name">option</span>(ENABLE_LOGGING <span class="org-string">"Enable compilation with logging"</span> OFF)

<span class="org-comment">#============== Set targets =============================#</span>

            <span class="org-function-name">add_executable</span>( macro-test macro-test.cpp    )
<span class="org-function-name">target_compile_definitions</span>( macro-test PRIVATE
                                       CODE_VERSION=<span class="org-string">"\\"</span>0.25\\<span class="org-string">""</span>
                           )

<span class="org-keyword">IF</span>(ENABLE_LOGGING)
  <span class="org-function-name">target_compile_definitions</span>( macro-test PRIVATE LOGGING)
<span class="org-keyword">ENDIF</span>()
</pre>
</div>

<p>
<b>Building manually</b>  
</p>

<p>
Build without setting any preprocessor directive.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ &gt;&gt; g++ macro-test.cpp -o <span class="org-keyword">macro-test.bin</span> -std=c++1z -Wall -Wextra

$ &gt;&gt; ./macro-test.bin 
Product version: 0.1 
<span class="org-function-name">Usage</span>: ./macro-test.bin &lt;NUMBER&gt; 

$ &gt;&gt; ./macro-test.bin 10
=&gt; product = 3628800 
</pre>
</div>

<p>
Build defining the <span class="underline">LOGGING</span> macro. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ &gt;&gt; ./macro-test.bin
Product version: 0.1 
<span class="org-function-name">Usage</span>: ./macro-test.bin &lt;NUMBER&gt; 

$ &gt;&gt; g++ macro-test.cpp -o <span class="org-keyword">macro-test.bin</span> -std=c++1z -Wall -Wextra -DLOGGING

$ &gt;&gt; ./macro-test.bin 5
=&gt; i = 1 ; prod = 1 
=&gt; i = 2 ; prod = 2 
=&gt; i = 3 ; prod = 6 
=&gt; i = 4 ; prod = 24 
=&gt; i = 5 ; prod = 120 
=&gt; product = 120 
</pre>
</div>

<p>
<b>Building with CMake</b> 
</p>

<p>
Build defining a different value for the version macro. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ &gt;&gt; g++ macro-test.cpp -o <span class="org-keyword">macro-test.bin</span> -std=c++1z -Wall -Wextra -DLOGGING -DCODE_VERSION=<span class="org-string">'"1.5"'</span>

$ &gt;&gt; ./macro-test.bin
Product version: 1.5 
<span class="org-function-name">Usage</span>: ./macro-test.bin &lt;NUMBER&gt; 


$ &gt;&gt; ./macro-test.bin 6
=&gt; i = 1 ; prod = 1 
=&gt; i = 2 ; prod = 2 
=&gt; i = 3 ; prod = 6 
=&gt; i = 4 ; prod = 24 
=&gt; i = 5 ; prod = 120 
=&gt; i = 6 ; prod = 720 
=&gt; product = 720 
</pre>
</div>

<p>
Build without enabling logging. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ &gt;&gt; cmake -H. -B_build -DCMAKE_BUILD_TYPE=Debug  
$ &gt;&gt; cmake --build _build --target

$ &gt;&gt; _build/macro-test 
Product version: <span class="org-string">"0.25"</span> 
<span class="org-function-name">Usage</span>: _build/macro-test &lt;NUMBER&gt; 

$ &gt;&gt; _build/macro-test 6
=&gt; product = 720 
</pre>
</div>

<p>
Build enabling logging. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ &gt;&gt; cmake -H. -B_build -DCMAKE_BUILD_TYPE=Debug -DENABLE_LOGGING=ON
$ &gt;&gt; cmake --build _build --target

$ &gt;&gt; _build/macro-test 6
=&gt; i = 1 ; prod = 1 
=&gt; i = 2 ; prod = 2 
=&gt; i = 3 ; prod = 6 
=&gt; i = 4 ; prod = 24 
=&gt; i = 5 ; prod = 120 
=&gt; i = 6 ; prod = 720 
=&gt; product = 720 
</pre>
</div>

<p>
Build defining macros on command line: (Note: this procedure is not
portable, it will not work with MSVC - visual C++ compiler as the MSVC
macros uses '/D' slash instead of '-D' dash for setting macros.)
</p>

<div class="org-src-container">
<pre class="src src-sh">$ &gt;&gt; cmake -H. -B_build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_FLAGS=<span class="org-string">'-DLOGGING -DCODE_VERSION=\"3.0\"'</span>
$ &gt;&gt; cmake --build _build --target

$ &gt;&gt; _build/macro-test
Product version: 3.0 
<span class="org-function-name">Usage</span>: _build/macro-test &lt;NUMBER&gt; 

$ &gt;&gt; _build/macro-test 4
=&gt; i = 1 ; prod = 1 
=&gt; i = 2 ; prod = 2 
=&gt; i = 3 ; prod = 6 
=&gt; i = 4 ; prod = 24 
=&gt; product = 24 
</pre>
</div>
</div>
</div>

<div id="outline-container-org871c7fa" class="outline-3">
<h3 id="org871c7fa"><span class="section-number-3">1.2</span> Temporarily disable a code block</h3>
<div class="outline-text-3" id="text-1-2">
<p>
A useful technique for during development of C or C++ applications is
to surround a piece of code with macros ( <i>#if 1 &#x2026; #endif</i> ), for
enabling the compilation of this code block, or (<i>#if 0</i> <i>&#x2026; #endif</i>),
for disabling the compilation of this code block. This technique can
be used identifying and isolating a piece of code that causes
compile-time error or runtime error.
</p>

<ul class="org-ul">
<li>Case 1 - Enable code block =&gt; Code block surrounded by #if 1 &#x2026; #else enabled.</li>
</ul>

<p>
File: <span class="underline">macro-if-else.cpp</span>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">arc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-type">int</span> <span class="org-variable-name">n</span> = 10;
  <span class="org-type">int</span> <span class="org-variable-name">sum</span> = 0;

  <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; n; i++<span class="org-rainbow-delimiters-depth-2">){</span>
    sum += i;
<span class="org-preprocessor">    #if</span> 1
      <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" =&gt; i = %d ; sum = %d \n"</span>, i, sum<span class="org-rainbow-delimiters-depth-3">)</span>;
<span class="org-preprocessor">    #endif</span>
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; sum = %d \n"</span>, sum<span class="org-rainbow-delimiters-depth-2">)</span>;

  <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ &gt;&gt; g++ macro-if-else.cpp -o <span class="org-keyword">macro-if-else.bin</span> -std=c++1z -Wall -Wextra

$ &gt;&gt; ./macro-if-else.bin
=&gt; i = 0 ; sum = 0 
=&gt; i = 1 ; sum = 1 
=&gt; i = 2 ; sum = 3 
=&gt; i = 3 ; sum = 6 
=&gt; i = 4 ; sum = 10 
=&gt; i = 5 ; sum = 15 
=&gt; i = 6 ; sum = 21 
=&gt; i = 7 ; sum = 28 
=&gt; i = 8 ; sum = 36 
=&gt; i = 9 ; sum = 45 
=&gt; sum = 45 
</pre>
</div>

<ul class="org-ul">
<li>Case 2 - Code block Disabled =&gt; Coce block surrounded by #if 0 &#x2026; #else disabled.</li>
</ul>

<p>
File: <span class="underline">macro-if-else.cpp</span>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">arc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-type">int</span> <span class="org-variable-name">n</span> = 10;
  <span class="org-type">int</span> <span class="org-variable-name">sum</span> = 0;

  <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; n; i++<span class="org-rainbow-delimiters-depth-2">){</span>
    sum += i;
<span class="org-preprocessor">    #if</span> 0
      <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" =&gt; i = %d ; sum = %d \n"</span>, i, sum<span class="org-rainbow-delimiters-depth-3">)</span>; 
<span class="org-preprocessor">    #endif</span> 
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; sum = %d \n"</span>, sum<span class="org-rainbow-delimiters-depth-2">)</span>; 

  <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ &gt;&gt; g++ macro-if-else.cpp -o <span class="org-keyword">macro-if-else.bin</span> -std=c++1z -Wall -Wextra

$ &gt;&gt; ./macro-if-else.bin
=&gt; sum = 45 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgee47372" class="outline-3">
<h3 id="orgee47372"><span class="section-number-3">1.3</span> Custom Assertion Macro</h3>
<div class="outline-text-3" id="text-1-3">
</div>
<div id="outline-container-orgdbcf101" class="outline-4">
<h4 id="orgdbcf101"><span class="section-number-4">1.3.1</span> Simple assertion macro</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
Example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#define</span> <span class="org-variable-name">ASSERTION_ENABLED</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Requires header: &lt;cassert&gt;</span>
<span class="org-preprocessor">#ifdef</span>  ASSERTION_ENABLED
<span class="org-preprocessor">  #define</span> <span class="org-function-name">ASSERT</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">condition</span>, <span class="org-variable-name">text</span><span class="org-rainbow-delimiters-depth-1">)</span>    \
              <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">if</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span><span class="org-rainbow-delimiters-depth-3">(</span>condition<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>  \
                               <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ASSERTION] "</span> &lt;&lt;  __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">": "</span> \
                             &lt;&lt; text &lt;&lt; <span class="org-string">"\n"</span> ;  \
                               assert<span class="org-rainbow-delimiters-depth-3">(</span>condition<span class="org-rainbow-delimiters-depth-3">)</span>;   <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-preprocessor">#else</span>
<span class="org-preprocessor">  #define</span> <span class="org-function-name">ASSERT</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">condition</span>, <span class="org-variable-name">text</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">#endif</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-type">int</span> <span class="org-variable-name">x</span> = 100;
        ASSERT<span class="org-rainbow-delimiters-depth-2">(</span>x &gt; 200, <span class="org-string">"Assumption: x &gt; 200"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
When the assertion fails, it prints the message: 
</p>

<div class="org-src-container">
<pre class="src src-sh">g++ scractch.cpp -o <span class="org-keyword">scractch.bin</span> -g -std=c++1z -Wall -Wextra &amp;&amp; ./scractch.bin
 [ASSERTION] scractch.cpp:33: Assumption: x &gt; 200
<span class="org-function-name">scractch.bin</span>: scractch.cpp:33: int main(): Assertion <span class="org-sh-quoted-exec">`x &gt; 200' failed.</span>

</pre>
</div>
</div>
</div>
<div id="outline-container-org1fa14e9" class="outline-4">
<h4 id="org1fa14e9"><span class="section-number-4">1.3.2</span> Improved assertion macro</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
This assertion macro provides more context information than <b>assert</b> 
from &lt;cassert&gt; header. When the predicate of an assertion failure
happens, this assertion macro prints the file name, line, function and
assertion predicate where the failure happened and then terminates the
program calling std::terminate. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#define</span> <span class="org-variable-name">ENABLE_ASSERT</span>

<span class="org-preprocessor">#ifdef</span> ENABLE_ASSERT
<span class="org-preprocessor">#define</span> <span class="org-function-name">M_ASSERT</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span> \
      <span class="org-rainbow-delimiters-depth-1">{</span> \
         <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span><span class="org-rainbow-delimiters-depth-3">(</span>expr<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">){</span> \
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"ASSERTION FAILURE: \n"</span>; \
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" =&gt; Condition: "</span> &lt;&lt; #expr &lt;&lt; <span class="org-string">"\n"</span>; \
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" =&gt;  Function: "</span> &lt;&lt; __FUNCTION__ &lt;&lt; <span class="org-string">"\n"</span>; \
            <span class="org-constant">std</span>::cerr &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; <span class="org-string">"\n"</span>; \
            <span class="org-constant">std</span>::terminate<span class="org-rainbow-delimiters-depth-3">()</span>; \
         <span class="org-rainbow-delimiters-depth-2">}</span> \
      <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-preprocessor">#else</span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">M_ASSERT</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">#endif</span>
</pre>
</div>

<p>
Usage: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">XMLElement</span>* <span class="org-variable-name">node</span> = elem-&gt;FirstChildElement<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"CubeX"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
M_ASSERT<span class="org-rainbow-delimiters-depth-1">(</span>node != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Program output when assertion fails:  
</p>

<div class="org-src-container">
<pre class="src src-sh">... ... ... ... 
ASSERTION FAILURE: 
 =&gt; Condition: node != nullptr
 =&gt;  Function: main
<span class="org-function-name">tinyxml2-test.cpp</span>:64:
terminate called without an active exception
</pre>
</div>
</div>
</div>

<div id="outline-container-org10a532e" class="outline-4">
<h4 id="org10a532e"><span class="section-number-4">1.3.3</span> Type equality assertion macro</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
Compile-time static assertions that aborts compilation when types are
not equal. It is useful for checking assumptions about types at
compile-time. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#define</span> <span class="org-function-name">ASSERT_TYPE_EQUAL</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">type</span>, <span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span> \
   static_assert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-constant">is_same</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>type, expr<span class="org-rainbow-delimiters-depth-2">&gt;</span>::value, <span class="org-string">"Expected type equality"</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Usage example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">using</span> <span class="org-type">iter</span> = <span class="org-constant">std</span>::<span class="org-constant">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::iterator;

ASSERT_TYPE_EQUAL<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::random_access_iterator_tag,  <span class="org-constant">iter</span>::iterator_category<span class="org-rainbow-delimiters-depth-1">)</span>;

ASSERT_TYPE_EQUAL<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> ,      <span class="org-constant">iter</span>::value_type <span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org78c5a09" class="outline-3">
<h3 id="org78c5a09"><span class="section-number-3">1.4</span> Tips and guidelines for writing macros</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org70480a6" class="outline-4">
<h4 id="org70480a6"><span class="section-number-4">1.4.1</span> DO NOT Use macros for defining constants</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Unlike in C, in C++ is preferable to use const keyword approach for
defining constants instead of preprocessor define macros.
</p>

<p>
For instance, use: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">PI Number</span>
<span class="org-keyword">const</span> <span class="org-type">double</span> <span class="org-variable-name">PI</span> = 3.141592653589793; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Euler's number </span>
<span class="org-keyword">const</span> <span class="org-type">double</span>  <span class="org-variable-name">E</span> = 2.718281828459045;
<span class="org-comment-delimiter">// </span><span class="org-comment">Buffer size in bytes </span>
<span class="org-keyword">const</span> <span class="org-type">size_t</span> <span class="org-variable-name">BUFFER_SIZE</span> = 1024; 
</pre>
</div>

<p>
Instead of: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#define</span> <span class="org-variable-name">PI</span> 3.141592653589793
<span class="org-preprocessor">#define</span> <span class="org-variable-name">E</span>  2.718281828459045
<span class="org-preprocessor">#define</span> <span class="org-variable-name">BUFFER_SIZE</span> 1024
</pre>
</div>
</div>
</div>

<div id="outline-container-org8fd24a1" class="outline-4">
<h4 id="org8fd24a1"><span class="section-number-4">1.4.2</span> Use parenthesis within macros around parameter names</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
Reference:  <a href="https://wiki.sei.cmu.edu/confluence/display/c/PRE01-C.+Use+parentheses+within+macros+around+parameter+names">PRE01-C. Use parentheses within macros around parameter names - SEI CERT C Coding Standard - Confluence</a>
</p>

<p>
Example: The following code fails, if the macro argument is an
experession such as 2 + 1.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#define</span> <span class="org-function-name">CUBE</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>x * x * x<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
So, the result of the followign invokation will be: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Expected value 81 / 3^3 = 81/27 = 3</span>
<span class="org-type">int</span> <span class="org-variable-name">k</span> = 81 / CUBE<span class="org-rainbow-delimiters-depth-1">(</span>2 + 1<span class="org-rainbow-delimiters-depth-1">)</span>; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Remember the macro just does text substitution. </span>
<span class="org-type">int</span> <span class="org-variable-name">k</span> = 81 / <span class="org-rainbow-delimiters-depth-1">(</span> 2 + 1 * 2 + 1 * 2 + 1 <span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">int</span> <span class="org-variable-name">k</span> = 81 / <span class="org-rainbow-delimiters-depth-1">(</span> 2 + 2 + 2 + 1 <span class="org-rainbow-delimiters-depth-1">)</span> = 81/7 = 11;
<span class="org-comment-delimiter">// </span><span class="org-comment">Expected k = 3, but got k = 11 </span>
<span class="org-type">int</span> <span class="org-variable-name">k</span> = 11;
</pre>
</div>

<p>
The correct way to define this macro is to enclose the references to
the macro's arguments in its body. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#define</span> <span class="org-function-name">CUBE</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> * <span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> * <span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Now, it works: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">k</span> = 81 / CUBE<span class="org-rainbow-delimiters-depth-1">(</span>2 + 1<span class="org-rainbow-delimiters-depth-1">)</span>; 
<span class="org-type">int</span> <span class="org-variable-name">k</span> = 81 / <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>2 + 1<span class="org-rainbow-delimiters-depth-2">)</span> * <span class="org-rainbow-delimiters-depth-2">(</span>2 + 1<span class="org-rainbow-delimiters-depth-2">)</span> * <span class="org-rainbow-delimiters-depth-2">(</span>2 + 1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">int</span> <span class="org-variable-name">k</span> = 81 / 27;
<span class="org-type">int</span> <span class="org-variable-name">k</span> = 3;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb2a6589" class="outline-4">
<h4 id="orgb2a6589"><span class="section-number-4">1.4.3</span> Dump all GCC's preprocessor defines</h4>
<div class="outline-text-4" id="text-1-4-3">
<p>
Reference: 
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/2224334/gcc-dump-preprocessor-defines">g++ - GCC dump preprocessor defines - Stack Overflow</a></li>
<li><a href="http://nadeausoftware.com/articles/2011/12/c_c_tip_how_list_compiler_predefined_macros">C/C++ tip: How to list compiler predefined macros | Nadeau Software</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ gcc -dM -E - &lt; /dev/null
<span class="org-comment-delimiter">#</span><span class="org-comment">define __DBL_MIN_EXP__ (-1021)</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __FLT32X_MAX_EXP__ 1024</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __UINT_LEAST16_MAX__ 0xffff</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __ATOMIC_ACQUIRE 2</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __FLT128_MAX_10_EXP__ 4932</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __FLT_MIN__ 1.17549435082228750796873653722224568e-38F</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __GCC_IEC_559_COMPLEX 2</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __UINT_LEAST8_TYPE__ unsigned char</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __SIZEOF_FLOAT80__ 16</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __INTMAX_C(c) c ## L</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __CHAR_BIT__ 8</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __UINT8_MAX__ 0xff</span>
... ... ... ..
<span class="org-comment-delimiter">#</span><span class="org-comment">define __UINT_FAST16_MAX__ 0xffffffffffffffffUL</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __GCC_ATOMIC_SHORT_LOCK_FREE 2</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __INT_LEAST64_WIDTH__ 64</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __UINT_FAST8_TYPE__ unsigned char</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __ATOMIC_ACQ_REL 4</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __ATOMIC_RELEASE 3</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd18a364" class="outline-4">
<h4 id="orgd18a364"><span class="section-number-4">1.4.4</span> Dump all preprocessor macros from a given header file</h4>
<div class="outline-text-4" id="text-1-4-4">
<p>
Reference: <a href="https://stackoverflow.com/questions/2224334/gcc-dump-preprocessor-defines">g++ - GCC dump preprocessor defines - Stack Overflow</a>
</p>

<ul class="org-ul">
<li>GCC (C-Compiler) Dump</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ echo <span class="org-string">"#include &lt;sys/socket.h&gt;"</span> | gcc -E -dM - | tail -n 10
<span class="org-comment-delimiter">#</span><span class="org-comment">define SOL_LLC 268</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __DBL_MIN_EXP__ (-1021)</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define AF_LLC PF_LLC</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __FLT32X_MAX_EXP__ 1024</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define AF_MAX PF_MAX</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __UINT_LEAST16_MAX__ 0xffff</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __ATOMIC_ACQUIRE 2</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define CMSG_NXTHDR(mhdr,cmsg) __cmsg_nxthdr (mhdr, cmsg)</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __FLT128_MAX_10_EXP__ 4932</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __FLT_MIN__ 1.17549435082228750796873653722224568e-38F</span>

   ...  ...  ...  ...  ...  ...  ...  ...  ...  ...  ... 

<span class="org-comment-delimiter">#</span><span class="org-comment">define __P(args) args</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define PF_LOCAL 1</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __ATOMIC_ACQ_REL 4</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __ATOMIC_RELEASE 3</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __fsblkcnt_t_defined </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define _BITS_UIO_H 1</span>
</pre>
</div>

<ul class="org-ul">
<li>G++ (C++ Compiler) Dump</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ echo <span class="org-string">"#include &lt;cmath&gt;"</span> | gcc -x c++ -std=c++11 -dD -E - | head -n 10
<span class="org-comment-delimiter"># </span><span class="org-comment">1 "&lt;stdin&gt;"</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">1 "&lt;built-in&gt;"</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __STDC__ 1</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __cplusplus 201103L</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __STDC_UTF_16__ 1</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __STDC_UTF_32__ 1</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __STDC_HOSTED__ 1</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __GNUC__ 7</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __GNUC_MINOR__ 3</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">define __GNUC_PATCHLEVEL__ 1</span>

.. ... ... .. ... ... .. ... ... 

$ echo <span class="org-string">"#include &lt;cmath&gt;"</span> | gcc -x c++ -std=c++11 -dD -E - | tail -n 40
  constexpr float
  tgamma(float __x)
  { <span class="org-keyword">return</span> __builtin_tgammaf(__x); }

  constexpr long double
  tgamma(long double __x)
  { <span class="org-keyword">return</span> __builtin_tgammal(__x); }



  template&lt;typename _Tp&gt;
    constexpr typename __gnu_cxx::__enable_if&lt;__is_integer&lt;_Tp&gt;::__value,
                                              double&gt;::__type
    tgamma(_Tp __x)
    { <span class="org-keyword">return</span> __builtin_tgamma(__x); }



  constexpr float
  trunc(float __x)
  { <span class="org-keyword">return</span> __builtin_truncf(__x); }

  constexpr long double
  trunc(long double __x)
  { <span class="org-keyword">return</span> __builtin_truncl(__x); }



  template&lt;typename _Tp&gt;
    constexpr typename __gnu_cxx::__enable_if&lt;__is_integer&lt;_Tp&gt;::__value,
                                              double&gt;::__type
    trunc(_Tp __x)
    { <span class="org-keyword">return</span> __builtin_trunc(__x); }



}
<span class="org-comment-delimiter"># </span><span class="org-comment">1917 "/usr/include/c++/7/cmath" 3</span>
}
<span class="org-comment-delimiter"># </span><span class="org-comment">1 "&lt;stdin&gt;" 2</span>

</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd2ad373" class="outline-3">
<h3 id="orgd2ad373"><span class="section-number-3">1.5</span> Useful macros for debugging and tracing</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Usage: Put this block at the top of the file to debug or log or in a
separate header file and compile with the flag <code>-DDEBUG_MODE</code>, for
instance. <span class="underline">$ g++ file1.cpp fil2.cpp -DDEBUG_MODE</span> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#if</span> <span class="org-preprocessor">defined</span><span class="org-rainbow-delimiters-depth-1">(</span>DEBUG_MODE<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">  #define</span> <span class="org-function-name">disp</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-constant">std</span>::cerr &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">":"</span> \
      &lt;&lt; <span class="org-string">" ; "</span> &lt;&lt;  #expr &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>expr<span class="org-rainbow-delimiters-depth-1">)</span>  &lt;&lt;  <span class="org-constant">std</span>::endl

<span class="org-preprocessor">  #define</span> <span class="org-function-name">dbgloc</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">msg</span><span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-constant">std</span>::cerr &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; msg 
<span class="org-preprocessor">  #define</span> <span class="org-variable-name">dbgline</span> __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt;
<span class="org-preprocessor">  #define</span> <span class="org-function-name">dbgtrace</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">msg</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">std</span>::cerr &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">": TRACING "</span> &lt;&lt; msg &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-preprocessor">#else</span>
<span class="org-preprocessor">  #define</span> <span class="org-function-name">disp</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-preprocessor">  #define</span> <span class="org-function-name">dbgloc</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">msg</span><span class="org-rainbow-delimiters-depth-1">)</span>  
<span class="org-preprocessor">  #define</span> <span class="org-variable-name">dbgline</span> 
<span class="org-preprocessor">  #define</span> <span class="org-function-name">dbgtrace</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">msg</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-preprocessor">#endif</span> 
</pre>
</div>


<p>
Note: the program's stdout output is clickable in Emacs which allows
to go quickly to the code location that generated the output. To
compile and run a c++ program in Emacs use: 
</p>

<p>
$ <code>M-x compile g++ program1.cpp program2.cpp -o out.bin -DDEBUG_MODE &amp;&amp; ./out.bin</code>
</p>

<p>
<b>Macro dbgtrace</b>
</p>

<p>
The macro dbgtrace creates the message shown in the following code
block displaying the file and the line where the message was
generated:  
</p>

<p>
Sample usage:
</p>

<ul class="org-ul">
<li>dbtrace("invoking copy constructor")</li>
</ul>

<p>
Output example: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">gslLinalg.cpp</span>:46: TRACING invoking copy constructor
</pre>
</div>

<p>
<b>Macro disp</b>
</p>

<p>
The macro disp displays any expression in the way it is written, it is
useful to create C++ code demonstration and creating proof-of-concept
programs. 
</p>

<p>
Sample usage: 
</p>

<ul class="org-ul">
<li>disp(x * x + 10);</li>
</ul>

<p>
Output example: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">math1.cpp</span>:10: ; x * x + 10 = 19
</pre>
</div>
</div>
</div>
<div id="outline-container-org9eee74e" class="outline-3">
<h3 id="org9eee74e"><span class="section-number-3">1.6</span> General Predefined Macros</h3>
<div class="outline-text-3" id="text-1-6">
<p>
C++ Provides some useful predefined macros for debugging, logging,
compiler identification and detecting the version of C++ standard the
compiler is using. 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Macro</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Compiler</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>__LINE__</code></td>
<td class="org-left">Contains current line number of the program.</td>
<td class="org-left">all</td>
</tr>

<tr>
<td class="org-left"><code>__FILE__</code></td>
<td class="org-left">Name of current file.</td>
<td class="org-left">all</td>
</tr>

<tr>
<td class="org-left"><code>__DATE__</code></td>
<td class="org-left">Date in the format month/day/year</td>
<td class="org-left">all</td>
</tr>

<tr>
<td class="org-left"><code>__TIME__</code></td>
<td class="org-left">Contains a string in the format hour:minute:second</td>
<td class="org-left">all</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>__cplusplus</code></td>
<td class="org-left">Contains C++ standard Version string</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>__FUNCTION__</code></td>
<td class="org-left">Print name of current function or method (member function)</td>
<td class="org-left">all</td>
</tr>

<tr>
<td class="org-left"><code>__PRETTY_FUNCTION__</code></td>
<td class="org-left">Print name of current function or method with type signature.</td>
<td class="org-left">GGC/G++, Mingw(GCC for Windows) and Clang</td>
</tr>

<tr>
<td class="org-left"><code>__FUNCSIG__</code></td>
<td class="org-left">Print name of current function with type signature.</td>
<td class="org-left">MSVC(aka VC++)</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
The macro: <code>__cplusplus</code> is useful for identifying if the code is being
compiled with C or C++ compiler and also get the version C++ standard
the code is being compiled. 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Value of Macro <code>__cplusplus</code></th>
<th scope="col" class="org-left">C++ Version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Not defined.</td>
<td class="org-left">N/A the code is being compiled with a C-compiler.</td>
</tr>

<tr>
<td class="org-left">199711L</td>
<td class="org-left">C++98/C++03</td>
</tr>

<tr>
<td class="org-left">201103L</td>
<td class="org-left">C++11</td>
</tr>

<tr>
<td class="org-left">201402L</td>
<td class="org-left">C++14</td>
</tr>

<tr>
<td class="org-left">201703L</td>
<td class="org-left">C++17</td>
</tr>

<tr>
<td class="org-left">N/A</td>
<td class="org-left">C++20  - Still waiting</td>
</tr>

<tr>
<td class="org-left">N/A</td>
<td class="org-left">C++ with module system? - Only gosh knows!</td>
</tr>

<tr>
<td class="org-left">N/A</td>
<td class="org-left">C++ with a standardized ABI - "Keep on dreaming!"</td>
</tr>
</tbody>
</table>

<p>
Example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">cout &lt;&lt; <span class="org-string">" time = "</span> &lt;&lt; __TIME__
     &lt;&lt; <span class="org-string">" file = "</span> &lt;&lt; __FILE__
     &lt;&lt; <span class="org-string">" line = "</span> &lt;&lt; __LINE__
     &lt;&lt; <span class="org-string">"  variable  = "</span> &lt;&lt; value
     &lt;&lt; endl;
</pre>
</div>
</div>
</div>

<div id="outline-container-org18f1af8" class="outline-3">
<h3 id="org18f1af8"><span class="section-number-3">1.7</span> Macros for detecting platform or operating system</h3>
<div class="outline-text-3" id="text-1-7">
<p>
The preprocessor macros can be used for cross platform compilation,
creating cross platform libraries and isolating platform-specific 
code. 
</p>

<p>
<b>Macros for detecting Operating System and Platform</b> 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Operating System</th>
<th scope="col" class="org-left">OS Family</th>
<th scope="col" class="org-left">Macro</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Windows 32 and 64-bits</td>
<td class="org-left">WinNT</td>
<td class="org-left"><code>_WIN32</code></td>
<td class="org-left">Defined when compiling on Windows with Msvc(Visual C++) or Gcc</td>
</tr>

<tr>
<td class="org-left">Windows 64 bits</td>
<td class="org-left">WinNT</td>
<td class="org-left"><code>_WIN64</code></td>
<td class="org-left">Windows 64 bits.</td>
</tr>

<tr>
<td class="org-left">Windows CE</td>
<td class="org-left">WinCE</td>
<td class="org-left"><code>_WIN32_WCE</code></td>
<td class="org-left">Windows CE Kernel for embedded systems.</td>
</tr>

<tr>
<td class="org-left">MSDOS</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">MSDOS or <code>__MSDOS__</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">OS2</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">OS2 or <code>_OS2</code> or <code>__OS2__</code></td>
<td class="org-left">IBM's old OS2 Operating System.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Unix-like</td>
<td class="org-left">Unix</td>
<td class="org-left"><code>__unix__</code></td>
<td class="org-left">Check whether OS is unix-like (Linux, BSD-variant), Mac OSX)</td>
</tr>

<tr>
<td class="org-left">Linux</td>
<td class="org-left">Unix</td>
<td class="org-left"><code>__linux__</code></td>
<td class="org-left">Defined when compiling on Linux with Gcc or Clang</td>
</tr>

<tr>
<td class="org-left">Android</td>
<td class="org-left">Unix</td>
<td class="org-left"><code>__ANDROID__</code></td>
<td class="org-left">Android NDK.</td>
</tr>

<tr>
<td class="org-left">MacOSX and IOS (Darwin Kernel)</td>
<td class="org-left">Unix</td>
<td class="org-left"><code>__apple__</code>, <code>__APPLE__</code>, <code>__MACH__</code></td>
<td class="org-left">-</td>
</tr>

<tr>
<td class="org-left">BSD</td>
<td class="org-left">Unix</td>
<td class="org-left"><code>__bsd__</code></td>
<td class="org-left">-</td>
</tr>

<tr>
<td class="org-left">Free BDS</td>
<td class="org-left">Unix</td>
<td class="org-left"><code>__FreeBSD__</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Net BSD</td>
<td class="org-left">Unix</td>
<td class="org-left"><code>__NetBSD__</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">QNX</td>
<td class="org-left">Unix</td>
<td class="org-left"><code>__QNX__</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">VxWorks</td>
<td class="org-left">-</td>
<td class="org-left"><code>__VXWORKS__</code> or <code>__vxworks</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Minix</td>
<td class="org-left">Unix</td>
<td class="org-left"><code>__minix</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">NaCL</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>__native_client__</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">AsmJS</td>
<td class="org-left">&#xa0;</td>
<td class="org-left"><code>__asmjs__</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Usage example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">makeDirectory</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">path</span><span class="org-rainbow-delimiters-depth-1">){</span>
<span class="org-preprocessor">    #if</span> <span class="org-preprocessor">defined</span> __linux__ || <span class="org-preprocessor">defined</span> __apple__ || <span class="org-preprocessor">defined</span> __bsd__
      mkdir<span class="org-rainbow-delimiters-depth-2">(</span>path.c_str<span class="org-rainbow-delimiters-depth-3">()</span>, 0777<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-preprocessor">    #elif</span> _WIN32
      <span class="org-type">wchar_t</span>* <span class="org-variable-name">wtext</span> = <span class="org-constant">winUtils</span>::stringToLPWSTR<span class="org-rainbow-delimiters-depth-2">(</span>path<span class="org-rainbow-delimiters-depth-2">)</span>;
    CreateDirectoryW<span class="org-rainbow-delimiters-depth-2">(</span>wtext, <span class="org-constant">NULL</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-keyword">delete</span> <span class="org-rainbow-delimiters-depth-2">[]</span> wtext;
<span class="org-preprocessor">    #else</span>
<span class="org-preprocessor">      #error</span> <span class="org-string">"Unknown platform"</span>
<span class="org-preprocessor">    #endif</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orga16989e" class="outline-3">
<h3 id="orga16989e"><span class="section-number-3">1.8</span> Macros for detecting compiler</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Compiler detection: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Macro</th>
<th scope="col" class="org-left">Compiler</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Compiler</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>__GNUC__</code></td>
<td class="org-left">GNU C/C++ Compiler.</td>
</tr>

<tr>
<td class="org-left"><code>__MINGW32__</code></td>
<td class="org-left">Mingw or GNU C/C++ Compiler ported for Windows NT.</td>
</tr>

<tr>
<td class="org-left"><code>__MINGW64__</code></td>
<td class="org-left">Mingw or GNU C/C++ Compiler ported for Windows NT - 64 bits only.</td>
</tr>

<tr>
<td class="org-left"><code>__GFORTRAN__</code></td>
<td class="org-left">Fortran / GNU Fortran Compiler</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>__clang__</code></td>
<td class="org-left">Clang / LLVM Compiler</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>_MSC_VER</code></td>
<td class="org-left">Microsoft Visual Studio Compiler MSVC</td>
</tr>

<tr>
<td class="org-left"><code>_MANAGED</code> or <code>__cplusplus_cli</code></td>
<td class="org-left">Compilation to C++/CLI .NET (CLR) bytecode</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>__INTEL_COMPILER</code></td>
<td class="org-left">Intel C/C++ Compiler</td>
</tr>

<tr>
<td class="org-left"><code>__PGI</code> or <code>__PGIC__</code></td>
<td class="org-left">Portland Group C/C++ Compiler</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>__BORLANDC__</code></td>
<td class="org-left">Borland C++ Compiler [DEPRECATED]</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>__EMSCRIPTEN__</code></td>
<td class="org-left">emscripten (asm.js - web assembly)</td>
</tr>

<tr>
<td class="org-left"><code>__asmjs__</code></td>
<td class="org-left">asm.js</td>
</tr>

<tr>
<td class="org-left"><code>__wasm__</code></td>
<td class="org-left">WebAssembly</td>
</tr>

<tr>
<td class="org-left"><code>__NVCC__</code></td>
<td class="org-left">NVCC</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>__CLING__</code></td>
<td class="org-left">CERN's ROOT Cling C++ Interactive Shell</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>C/C++-library</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>__GLIBCXX__</code></td>
<td class="org-left">Libstdc++</td>
</tr>

<tr>
<td class="org-left"><code>_LBCPP_VERSION</code></td>
<td class="org-left">LibC++</td>
</tr>

<tr>
<td class="org-left"><code>_MSC_VER</code></td>
<td class="org-left">MSVC C++ Library (Runtime)</td>
</tr>

<tr>
<td class="org-left"><code>__GLIBC__</code></td>
<td class="org-left">GNU LibC runtime</td>
</tr>

<tr>
<td class="org-left"><code>__BIONIC__</code></td>
<td class="org-left">Bionic LibC runtime. (Android's C-library modified from BSD)</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
See also: 
</p>

<ul class="org-ul">
<li>GCC - <a href="https://gcc.gnu.org/onlinedocs/cpp/Common-Predefined-Macros.html">The C Preprocessor: Common Predefined Macros</a></li>
<li><a href="https://sourceforge.net/p/predef/wiki/OperatingSystems/">Pre-defined Compiler Macros / Wiki / OperatingSystems</a></li>
<li><a href="https://abseil.io/docs/cpp/platforms/macros">abseil / Platform Check Macros</a></li>
<li><a href="https://stackoverflow.com/questions/142508/how-do-i-check-os-with-a-preprocessor-directive">c - How do I check OS with a preprocessor directive? - Stack Overflow</a></li>
<li><a href="https://msdn.microsoft.com/en-us/library/468x0ea1.aspx">How to: Detect -clr Compilation</a></li>
<li><a href="https://stackoverflow.com/questions/9976194/find-programmatically-if-under-c-or-c-cli">compilation - Find programmatically if under C++ or C++/CLI - Stack Overflow</a></li>
</ul>
</div>
</div>

<div id="outline-container-org7cd50b1" class="outline-3">
<h3 id="org7cd50b1"><span class="section-number-3">1.9</span> Macros for detecting architecture</h3>
<div class="outline-text-3" id="text-1-9">
<p>
The following pre-defined macros are useful for checking the architecture which
the current application is being compiled. This compile-time checking
allows dealing with ISA specific (ISA Instruction-set Architecture)
features such as SIMD instructions, inline-assembly and sizes in bytes
of fundamental data types.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Architecture</th>
<th scope="col" class="org-left">Macro</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Intel x86</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">x86</td>
<td class="org-left"><code>_M_IX86</code> ; <code>__INTEL__</code> ; <code>__i386__</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Intel or AMD <b>X86-64</b> (64 bits)</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">AMD64 (x86-64)</td>
<td class="org-left"><code>__amd__64__</code></td>
</tr>

<tr>
<td class="org-left">AMD64</td>
<td class="org-left"><code>__amd_64</code></td>
</tr>

<tr>
<td class="org-left">AMD64</td>
<td class="org-left"><code>__x86_64__</code></td>
</tr>

<tr>
<td class="org-left">AMD64</td>
<td class="org-left"><code>__x86_64</code></td>
</tr>

<tr>
<td class="org-left">Intel Itanium 64 bits</td>
<td class="org-left"><code>__IA64__</code> , <code>__ia64__</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>ARM Core</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">ARM (general)</td>
<td class="org-left"><code>__arm__</code> , <code>_ARM</code>, <code>_M_ARM</code>, <code>M_ARMT</code></td>
</tr>

<tr>
<td class="org-left">ARM thumb extension</td>
<td class="org-left"><code>__thumb__</code></td>
</tr>

<tr>
<td class="org-left">ARM 2 CPU</td>
<td class="org-left"><code>__ARM_ARCH_2__</code></td>
</tr>

<tr>
<td class="org-left">ARM 3 CPU</td>
<td class="org-left"><code>__ARM_ARCH_3__</code></td>
</tr>

<tr>
<td class="org-left">ARM 4T CPU</td>
<td class="org-left"><code>__ARM_ARCH_4T__</code></td>
</tr>

<tr>
<td class="org-left">ARM 5  CPU</td>
<td class="org-left"><code>__ARM_ARCH_5__</code></td>
</tr>

<tr>
<td class="org-left">ARM 5T CPU</td>
<td class="org-left"><code>__ARM_ARCH_5T__</code></td>
</tr>

<tr>
<td class="org-left">ARM 6  CPU</td>
<td class="org-left"><code>__ARM_ARCH_6__</code></td>
</tr>

<tr>
<td class="org-left">ARM 7  CPU</td>
<td class="org-left"><code>__ARM_ARCH_7__</code></td>
</tr>

<tr>
<td class="org-left">ARM 7  CPU</td>
<td class="org-left"><code>__ARM_ARCH_7A__</code></td>
</tr>

<tr>
<td class="org-left">ARM 7  CPU</td>
<td class="org-left"><code>__ARM_ARCH_7R__</code></td>
</tr>

<tr>
<td class="org-left">ARM 7  CPU</td>
<td class="org-left"><code>__ARM__ARCH_7M__</code></td>
</tr>

<tr>
<td class="org-left">ARM 7  CPU</td>
<td class="org-left"><code>__ARM_ARCH_7S__</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">ARM64 (ARM 64 bits )</td>
<td class="org-left"><code>__aarch64__</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>PowerPC</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">PowerPC core</td>
<td class="org-left"><code>__powerpc</code> ;  <code>__powerpc__</code>  ;  <code>__POWERPC__</code>  ;  <code>_M_PPC</code></td>
</tr>

<tr>
<td class="org-left">PowerPC core</td>
<td class="org-left"><code>__powerpc64__</code></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>SuperH</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">SuperH core</td>
<td class="org-left"><code>__sh__</code> ;  <code>__sh1__</code> ;  <code>__sh2__</code> ;  <code>__sh3__</code></td>
</tr>

<tr>
<td class="org-left">SuperH core</td>
<td class="org-left"><code>__SH3__</code> ;  <code>__SH4__</code> ;  <code>__SH5__</code></td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Further reading: 
</p>

<ul class="org-ul">
<li><a href="https://developer.arm.com/documentation/dui0491/i/Compiler-specific-Features/Predefined-macros">ARM Compiler toolchain Compiler Reference</a></li>

<li><a href="https://abseil.io/docs/cpp/platforms/macros">abseil / Platform Check Macros</a></li>

<li><a href="https://docs.microsoft.com/en-us/cpp/preprocessor/predefined-macros?view=msvc-160">Predefined macros | Microsoft Docs</a></li>

<li><a href="https://www.keil.com/support/man/docs/armcc/armcc_chr1359125007083.htm">Compiler User Guide: Predefined macros</a>  (Keil Compiler)</li>
</ul>
</div>
</div>
<div id="outline-container-orga69a748" class="outline-3">
<h3 id="orga69a748"><span class="section-number-3">1.10</span> Macros for checking whether the compiler is 32 (x86) or 64 bits (x86-64)</h3>
<div class="outline-text-3" id="text-1-10">
<p>
The following macros, taken from <a href="https://stackoverflow.com/questions/1505582/determining-32-vs-64-bit-in-c">(SO 1505582)</a>, are useful for checking
whether the compiler is 32 bits (Intel x86 based-processor) or 64 bits
(Intel x86-64 based processor). 
</p>

<p>
Macros:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Check windows</span>
<span class="org-preprocessor">#if</span> _WIN32 || _WIN64
<span class="org-preprocessor">   #if</span> _WIN64
<span class="org-preprocessor">     #define</span> <span class="org-variable-name">ENV64BIT</span>
<span class="org-preprocessor">  #else</span>
<span class="org-preprocessor">    #define</span> <span class="org-variable-name">ENV32BIT</span>
<span class="org-preprocessor">  #endif</span>
<span class="org-preprocessor">#endif</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Check GCC</span>
<span class="org-preprocessor">#if</span> __GNUC__
<span class="org-preprocessor">  #if</span> __x86_64__ || __ppc64__
<span class="org-preprocessor">    #define</span> <span class="org-variable-name">ENV64BIT</span>
<span class="org-preprocessor">  #else</span>
<span class="org-preprocessor">    #define</span> <span class="org-variable-name">ENV32BIT</span>
<span class="org-preprocessor">  #endif</span>
<span class="org-preprocessor">#endif</span>
</pre>
</div>

<p>
Sample usage: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#if</span> <span class="org-preprocessor">defined</span><span class="org-rainbow-delimiters-depth-1">(</span>ENV64Bits<span class="org-rainbow-delimiters-depth-1">)</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] 64 Bits - x86_64 "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-preprocessor">#else</span> 
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] 32 Bits - x86"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-preprocessor">#endif</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2020-12-11 Fri 14:14</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
