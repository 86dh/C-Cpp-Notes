<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-11-08 Fri 14:17 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP/C++ Standard Library Input and Output</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp/c++ standard library io input output streams cout cerr files"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP/C++ Standard Library Input and Output</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orga67c478">1. C++ IO Input and Output System</a>
<ul>
<li><a href="#orgb3c241a">1.1. Process Inputs, Outputs and States</a></li>
<li><a href="#org0ebffc3">1.2. Environment Variables for Program Configuration</a></li>
<li><a href="#orgb98afc7">1.3. C-legacy IO functions - format specifiers and examples</a>
<ul>
<li><a href="#orgbddd355">1.3.1. Puts</a></li>
<li><a href="#orgca2c9ef">1.3.2. Printf-like Functions</a></li>
<li><a href="#org0bb3522">1.3.3. Specifiers for printf-like functions</a></li>
<li><a href="#orgfff7d30">1.3.4. Examples</a></li>
</ul>
</li>
<li><a href="#org974a799">1.4. IO Class Hierarchy</a></li>
<li><a href="#org9fb8ed9">1.5. IO Manipulators</a></li>
<li><a href="#orgf86aaee">1.6. IO stream redirection</a>
<ul>
<li><a href="#orgbff657f">1.6.1. Stdout (cout) and Stderr (cerr) stream redirection</a></li>
<li><a href="#org01b6776">1.6.2. Stdin (cin) stream redirection</a></li>
</ul>
</li>
<li><a href="#orgc624441">1.7. Reading data from generic Input Stream - read data from file, console and memory</a></li>
<li><a href="#org761f9fd">1.8. Reading ELF binary files</a>
<ul>
<li><a href="#orgad849fa">1.8.1. Overview</a></li>
<li><a href="#orge9bf1ee">1.8.2. Checking an ELF test file</a></li>
<li><a href="#orgea48462">1.8.3. Sample program</a></li>
<li><a href="#org7228dfd">1.8.4. References</a></li>
</ul>
</li>
<li><a href="#org6be8350">1.9. IO - Insertion &lt;&lt; and extraction &gt;&gt; operators</a>
<ul>
<li><a href="#org6c110fa">1.9.1. Operators insertion insertion for std::vector&lt;T&gt;</a></li>
<li><a href="#org6317d81">1.9.2. Operators insertion and extraction for used defined-type</a></li>
</ul>
</li>
<li><a href="#orgaec7d04">1.10. Custom IO manipulators</a></li>
<li><a href="#org92f632d">1.11. Redirect IO .rdbuf()</a></li>
<li><a href="#orgd10f73e">1.12. Read whole input stream to string</a></li>
<li><a href="#org11d6150">1.13. Saving and restoring IO flags</a>
<ul>
<li><a href="#org5d8deb8">1.13.1. Manual saving restoring</a></li>
<li><a href="#org2b4438d">1.13.2. Automatic saving and restoring IO flags with RAAI</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<ul class="org-ul">
<li><a href='index.html'>Index</a></li>
</ul>

<div id="outline-container-orga67c478" class="outline-2">
<h2 id="orga67c478"><span class="section-number-2">1</span> C++ IO Input and Output System</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgb3c241a" class="outline-3">
<h3 id="orgb3c241a"><span class="section-number-3">1.1</span> Process Inputs, Outputs and States</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Any process may have the following inputs, outputs and states: 
</p>


<p>
<b>Some Processes States:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Native executable</span> used for creating the process. Every
process has a native executable. A python process is the Python
interpreter (python.exe on Windows) running python scripts. A Java
process is the Java virtual machine (java.exe) running java
*.class bytecodes or *.jar java packages.</li>

<li><span class="underline">CWD</span> =&gt; Current Working Directory
<ul class="org-ul">
<li>There is a single current working directory for every
process. On Unix, the functions <a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/getcwd.html">getcwd()</a> and <a href="http://man7.org/linux/man-pages/man2/chdir.2.html">chdir()</a> gets and
sets the current working directory.</li>
</ul></li>

<li><span class="underline">IP</span> =&gt; Instruction Pointer (process context) =&gt; CPU registry that
stores the current machine instruction to be run.</li>

<li><span class="underline">SP</span> =&gt; Stack Poitner (process context) =&gt; CPU registry used for
keeping track of the process call stack.</li>

<li>Note: all thoses states can be viewed and manipulated with a
debugger, such as GDB, LLDB or Windows Debugger. A debugger can
monitor, explore and manipulate the virtual memory of any process.</li>
</ul>

<p>
<b>Inputs:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Stdin</span> (Standard Input) =&gt; User input read from console in some
shell (cmd.exe on Windows) or bash, zsh on Unix-like OSes.</li>

<li>Command line argument passed to main function</li>

<li>Environment variables set during the process instantiation with env
or export commands on Unix-like operating systems.</li>

<li>Configuration files =&gt; read at a default fixed location such as
<code>/.bashrc (bash configuration file at ~/home/user/.bashrc/</code> on Linux
); ~/.vimrc (vim configuration file)</li>

<li>Windows Registry entry for configuration during process
initialization</li>

<li>Input files read after initialization.</li>
</ul>

<p>
<b>Outputs:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Stdout</span> (Standard Output) =&gt; Process output print by functions such
as printf; std::cout &lt;&lt; &#x2026; visible in a terminal. (Unix heritage)</li>

<li><span class="underline">Stderr</span> (Standard Error Ouput) =&gt; Process error or logging output
print by default in a terminal. stderr exists for allowing
separating the output (stdout) from the error or logging output (stderr).</li>

<li>Statuds code =&gt; Value returned by function <span class="underline">int main(int argc, char** argv)</span>
<ul class="org-ul">
<li>Value 0 indicates success and that the process terminated
successfuly.</li>
<li>Value different than zero indicates that the process terminated
with errors.</li>
</ul></li>

<li>Output file(s)</li>
</ul>

<p>
<b>Both Input/Output:</b>
</p>

<ul class="org-ul">
<li>Sockets</li>

<li>IPC Inter Process Communication</li>

<li>GUI - Graphical User Interface</li>
</ul>


<div class="org-src-container">
<pre class="src src-text">         Command line arguments            
         int arc, char** argv (input)                  Configuration file: 
           &gt;&gt;-------+                         +--&lt;&lt;--  Input file read at fixed location
                     \                       /         Or Windows Registry entry 
                      \                      |
                      |                      |    
                      \/                    \ /   
                     +---------------------------------+
                     |   Process:                      |      
                     |                                 +---------&gt;&gt; Stdout (output)
         ----------&gt;&gt;|     EXE = /bin/some/executable  |            
       Stdin (input) |     PID = 9381 (Unique ID)      +---------&gt;&gt; Stderr (output)
                     |     CWD = /home/user/some/data  |       
                     |                                 |
                     |     IP - Instruction Pointer    +---------&gt;&gt;&gt; Process status code: (output)
         ----------&gt;&gt;|     SP - Stack pointer          |    
Environment          +-----------------------+--------+    int main(int argc, char** argv)
Variables (input)                            |              {
                                             |                  .... ... ...
export PATH=$PATH:/opt/bin/program/bin       |                  int status_code = 0 
export APP_LOG_LEVEL=INFO                    |                  return status_code;
                                            \ /              }
                                      Output File 
</pre>
</div>

<p>
<b>Example: View Process Information on Linux</b> 
</p>

<p>
All mentioned process internal states can be viewed with a debugger
such as GDB (GNU Debugger). On Linux, they can also be accessed with
the <b>/proc</b> pseudo-file system created by the Linux kernel which exposes
many processes informations. 
</p>

<p>
Example: View information about the process which the PID is <b>19529</b> 
</p>

<ul class="org-ul">
<li>Start a Kotlin REPL process and get a PID:</li>
</ul>

<div class="org-src-container">
<pre class="src src-java">$ kotlinc-jvm
Welcome to Kotlin version 1.3.50 <span class="org-rainbow-delimiters-depth-1">(</span>JRE 1.8.0_162-b12<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Type</span> :help <span class="org-keyword">for</span> help, :quit <span class="org-keyword">for</span> quit
&gt;&gt;&gt; 
&gt;&gt;&gt; <span class="org-constant">java</span>.<span class="org-constant">lang</span>.<span class="org-constant">management</span>.ManagementFactory.getRuntimeMXBean<span class="org-rainbow-delimiters-depth-1">()</span>.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">res1</span>: <span class="org-constant">kotlin</span>.String<span class="org-negation-char">!</span> = 23127@localhost.localdomain
&gt;&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Proc-File system for PID <span class="underline">23127</span></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ls /proc/23127
attr/       cmdline          loginuid       personality   statm
fd/         comm             maps           projid_map    status
fdinfo/     coredump_filter  mem            root@         syscall
map_files/  cpuset           mountinfo      sched         timers
net/        cwd@             mounts         schedstat     timerslack_ns
ns/         environ          mountstats     sessionid     uid_map
task/       exe@             numa_maps      setgroups     wchan
autogroup   gid_map          oom_adj        smaps
auxv        io               oom_score      smaps_rollup
cgroup      latency          oom_score_adj  stack
clear_refs  limits           pagemap        stat
</pre>
</div>

<ul class="org-ul">
<li>Get process executable: 
<ul class="org-ul">
<li>File: <span class="underline">/proc/&lt;PID&gt;/exe</span> is a symbolic link to the process' native executable.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ readlink /proc/23127/exe 
/home/archbox/opt/java/bin/java
</pre>
</div>

<ul class="org-ul">
<li>Get process current directory:
<ul class="org-ul">
<li>File: <span class="underline">/proc/&lt;PID&gt;/cwd</span> is a symbolic link to process' current directory.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ readlink /proc/23127/cwd
/home/archbox/projects/appdroid/build
</pre>
</div>

<ul class="org-ul">
<li>Get command line arguments used to start the process.
<ul class="org-ul">
<li>File: <span class="underline">/proc/&lt;PID&gt;/cmdline</span> contains the command line arguments
used to start the process, passed to main(int argc, char** argv).</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cat /proc/23127/cmdline | strings -1

/home/archbox/opt/java/bin/java
-Xmx256M
-Xms32M
-noverify
-cp
/home/archbox/.sdkman/candidates/kotlin/1.3.50/lib/kotlin-preloader.jar
org.jetbrains.kotlin.preloading.Preloader
-cp
/home/archbox/.sdkman/candidates/kotlin/1.3.50/lib/kotlin-compiler.jar
org.jetbrains.kotlin.cli.jvm.K2JVMCompiler
</pre>
</div>

<ul class="org-ul">
<li>Get process environment variables.
<ul class="org-ul">
<li>File: <span class="underline">/proc/&lt;PID&gt;/environ</span> contains process' environment
variables.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cat /proc/23127/environ | strings -1

<span class="org-variable-name">QTINC</span>=/usr/lib64/qt-3.3/include
<span class="org-variable-name">LC_ALL</span>=en_US.UTF-8
...    ...    ...    ...    ... 
...    ...    ...    ...    ... 
<span class="org-variable-name">USERNAME</span>=archbox
<span class="org-variable-name">JAVA_HOME</span>=/home/archbox/opt/java
<span class="org-variable-name">KDEDIRS</span>=/usr
<span class="org-variable-name">KOTLIN_HOME</span>=/home/archbox/.sdkman/candidates/kotlin/1.3.50
<span class="org-variable-name">XDG_VTNR</span>=2
<span class="org-variable-name">SSH_AUTH_SOCK</span>=/tmp/ssh-7z2L0gyqQeeP/agent.3961
<span class="org-variable-name">ROOTSYS</span>=/home/archbox/opt/root
<span class="org-variable-name">XDG_SESSION_ID</span>=2
<span class="org-variable-name">MODULES_CMD</span>=/usr/share/Modules/libexec/modulecmd.tcl
<span class="org-variable-name">ENV</span>=/usr/share/Modules/init/profile.sh
<span class="org-variable-name">DESKTOP_SESSION</span>=lxqt
<span class="org-variable-name">IMSETTINGS_MODULE</span>=none
<span class="org-variable-name">PWD</span>=/home/archbox/projects/appdroid/build
</pre>
</div>

<ul class="org-ul">
<li>List all process' file descriptors.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ls /proc/23127/fd
0@  10@  12@  14@  16@  18@  2@   21@  24@  28@  3@   31@  4@  6@  8@
1@  11@  13@  15@  17@  19@  20@  22@  27@  29@  30@  33@  5@  7@  9@

$ ls -l /proc/23127/fd
total 0
lrwx------ 1 archbox archbox 64 Nov  4 12:11 0 -&gt; /dev/pts/4
lrwx------ 1 archbox archbox 64 Nov  4 12:11 1 -&gt; /dev/pts/4
lr-x------ 1 archbox archbox 64 Nov  4 12:11 10 -&gt; /home/archbox/.sdkman/candidates/kotlin/1.3.50/lib/kotlin-script-runtime.jar
lr-x------ 1 archbox archbox 64 Nov  4 12:11 11 -&gt; /home/archbox/.sdkman/candidates/kotlin/1.3.50/lib/trove4j.jar
lr-x------ 1 archbox archbox 64 Nov  4 12:11 12 -&gt; /home/archbox/opt/java/jre/lib/jsse.jar
lr-x------ 1 archbox archbox 64 Nov  4 12:11 13 -&gt; /dev/random
lr-x------ 1 archbox archbox 64 Nov  4 12:11 14 -&gt; /dev/urandom
... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... 
... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... ... 
lr-x------ 1 archbox archbox 64 Nov  4 12:11 8 -&gt; /home/archbox/.sdkman/candidates/kotlin/1.3.50/lib/kotlin-stdlib.jar
lr-x------ 1 archbox archbox 64 Nov  4 12:11 9 -&gt; /home/archbox/.sdkman/candidates/kotlin/1.3.50/lib/kotlin-reflect.jar
</pre>
</div>

<ul class="org-ul">
<li>List shared libraries loaded by process: <a href="https://stackoverflow.com/questions/5103443/how-to-check-what-shared-libraries-are-loaded-at-run-time-for-a-given-process">(Reference 5103443)</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cat /proc/23127/maps | awk <span class="org-string">'{print $6}'</span> | grep <span class="org-string">'\.so'</span> | sort | uniq

/home/archbox/opt/java/jre/lib/amd64/libjava.so
/home/archbox/opt/java/jre/lib/amd64/libmanagement.so
...    ...    ...    ...    ...    ... 
...    ...    ...    ...    ...    ... 
/usr/lib64/libc-2.27.so
/usr/lib64/libdl-2.27.so
/usr/lib64/libm-2.27.so
/usr/lib64/libnss_files-2.27.so
/usr/lib64/libpthread-2.27.so
/usr/lib64/librt-2.27.so
/usr/lib64/libutil-2.27.so
</pre>
</div>

<p>
See also: 
</p>

<ul class="org-ul">
<li><a href="http://man7.org/linux/man-pages/man5/proc.5.html">proc(5) - Linux manual page</a></li>

<li><a href="https://www.tecmint.com/exploring-proc-file-system-in-linux/">Exploring /proc File System in Linux</a></li>

<li><a href="https://www.geeksforgeeks.org/proc-file-system-linux/">proc file system in Linux - GeeksforGeeks</a></li>

<li><a href="https://medium.com/@holdengrissett/linux-101-how-to-hack-your-process-memory-2514a3d0778d">Linux 101: How to hack your process’ memory - Holden Grissett - Medium</a></li>
</ul>
</div>
</div>

<div id="outline-container-org0ebffc3" class="outline-3">
<h3 id="org0ebffc3"><span class="section-number-3">1.2</span> Environment Variables for Program Configuration</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Environment variables are available in most operating systems such as
Linux, MacOSx, BSD and Windows. They can be used for setting program
configuration at initialization.
</p>

<p>
See: 
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Environment_variable">Environment variable - Wikipedia</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows/win32/procthread/environment-variables">Environment Variables - Windows applications | Microsoft Docs</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-read-and-set-environmental-and-shell-variables-on-a-linux-vps">How To Read and Set Environmental and Shell Variables on a Linux VPS | DigitalOcean</a></li>
<li><a href="https://opensource.com/article/19/8/what-are-environment-variables">What are environment variables in Bash? | Opensource.com</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Environment_variables">Environment variables - ArchWiki</a></li>
</ul>

<p>
File: envvar.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">T</span>
<span class="org-function-name">get_env_value</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">T</span> <span class="org-variable-name">default_value</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Template specialization for std::string</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span>
<span class="org-function-name">std</span>::<span class="org-type">string</span>
<span class="org-function-name">get_env_value</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">default_value</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">p</span> = <span class="org-constant">std</span>::getenv<span class="org-rainbow-delimiters-depth-2">(</span>name.c_str<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>p == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> default_value; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> p;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Template specialization for size_t</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span>
<span class="org-type">size_t</span>
<span class="org-function-name">get_env_value</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">size_t</span> <span class="org-variable-name">default_value</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">p</span> = <span class="org-constant">std</span>::getenv<span class="org-rainbow-delimiters-depth-2">(</span>name.c_str<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>p == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> default_value; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::stoul<span class="org-rainbow-delimiters-depth-2">(</span>p<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Template specialization for double</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span>
<span class="org-type">double</span>
<span class="org-function-name">get_env_value</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">double</span> <span class="org-variable-name">default_value</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">p</span> = <span class="org-constant">std</span>::getenv<span class="org-rainbow-delimiters-depth-2">(</span>name.c_str<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>p == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> default_value; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-2">(</span>p<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>* <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-2">[]</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Check whether environment variable "PROGRAM_USER_KEY" is set</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">env</span> = <span class="org-constant">std</span>::getenv<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"PROGRAM_USER_KEY"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [1] Environment vartiable set =&gt; PROGRAM_USER_KEY = "</span>
                  &lt;&lt; env &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">else</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt;<span class="org-string">" [1] Environment variable PROGRAM_USER_KEY not set."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-keyword">auto</span> <span class="org-variable-name">storage_path</span> = get_env_value<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"PROGRAM_STORAGE_PATH"</span>
                                                   , <span class="org-string">"/home/dummy/.data"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">number_of_threads</span> = get_env_value<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"PROGRAM_NTHREADS"</span>, 10<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">timeout</span> = get_env_value<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"PROGRAM_TIMEOUT"</span>, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ==== Program Runtime Configuration ======="</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ENV[PROGRAM_STORAGE_PATH] = "</span> &lt;&lt; storage_path &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ENV[PROGRAM_NTHREADS]     = "</span> &lt;&lt; number_of_threads &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ENV[PROGRAM_TIMEOUT]      = "</span> &lt;&lt; timeout &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Building: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ envvar.cpp -o <span class="org-keyword">envvars.bin</span> --std=c++1z -g -O0 -Wall -Wextra
</pre>
</div>

<p>
Running 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./envvars.bin 
 [1] Environment variable PROGRAM_USER_KEY not set.
 ==== Program Runtime Configuration =======
 ENV[PROGRAM_STORAGE_PATH] = /home/dummy/.data
 ENV[PROGRAM_NTHREADS]     = 10
 ENV[PROGRAM_TIMEOUT]      = 1
</pre>
</div>

<p>
Running 2: 
</p>
<ul class="org-ul">
<li>Set PROGRAM_USER_KEY environment variable for the current terminal
session.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ export <span class="org-variable-name">PROGRAM_USER_KEY</span>=87axk689fghyk

$ ./envvars.bin 
 [1] Environment vartiable set =&gt; PROGRAM_USER_KEY = 87axk689fghyk
 ==== Program Runtime Configuration =======
 ENV[PROGRAM_STORAGE_PATH] = /home/dummy/.data
 ENV[PROGRAM_NTHREADS]     = 10
 ENV[PROGRAM_TIMEOUT]      = 1


$ export <span class="org-variable-name">PROGRAM_USER_KEY</span>=void_password

$ ./envvars.bin 
 [1] Environment vartiable set =&gt; PROGRAM_USER_KEY = void_password
 ==== Program Runtime Configuration =======
 ENV[PROGRAM_STORAGE_PATH] = /home/dummy/.data
 ENV[PROGRAM_NTHREADS]     = 10
 ENV[PROGRAM_TIMEOUT]      = 1
</pre>
</div>


<p>
Running 3: 
</p>
<ul class="org-ul">
<li>Use the env <code>/usr/bin/env</code> for setting program environment variable.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ env <span class="org-variable-name">PROGRAM_NTHREADS</span>=15 ./envvars.bin 
 [1] Environment vartiable set =&gt; PROGRAM_USER_KEY = void_password
 ==== Program Runtime Configuration =======
 ENV[PROGRAM_STORAGE_PATH] = /home/dummy/.data
 ENV[PROGRAM_NTHREADS]     = 15
 ENV[PROGRAM_TIMEOUT]      = 1

$ ./envvars.bin 
 [1] Environment vartiable set =&gt; PROGRAM_USER_KEY = void_password
 ==== Program Runtime Configuration =======
 ENV[PROGRAM_STORAGE_PATH] = /home/dummy/.data
 ENV[PROGRAM_NTHREADS]     = 10
 ENV[PROGRAM_TIMEOUT]      = 1

</pre>
</div>

<p>
Running 4: 
</p>
<ul class="org-ul">
<li>Set multiple environment varaibles with "env" Unix program.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ env <span class="org-variable-name">PROGRAM_TIMEOUT</span>=2.551 <span class="org-variable-name">PROGRAM_STORAGE_PATH</span>=/var/www ./envvars.bin 
 [1] Environment vartiable set =&gt; PROGRAM_USER_KEY = void_password
 ==== Program Runtime Configuration =======
 ENV[PROGRAM_STORAGE_PATH] = /var/www
 ENV[PROGRAM_NTHREADS]     = 10
 ENV[PROGRAM_TIMEOUT]      = 2.551
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb98afc7" class="outline-3">
<h3 id="orgb98afc7"><span class="section-number-3">1.3</span> C-legacy IO functions - format specifiers and examples</h3>
<div class="outline-text-3" id="text-1-3">
</div>
<div id="outline-container-orgbddd355" class="outline-4">
<h4 id="orgbddd355"><span class="section-number-4">1.3.1</span> Puts</h4>
<div class="outline-text-4" id="text-1-3-1">
<p>
Print a string without any formatting - header: <a href="https://en.cppreference.com/w/cpp/header/cstdio">&lt;cstdio&gt;</a> for C++ and &lt;stdio.h&gt; for C.
</p>

<ul class="org-ul">
<li>puts - print a line to stdout followed by new line character.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">puts</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li>fputs - print line to file.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">fputs</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">FILE</span>* <span class="org-variable-name">fd</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Example: print line to stdout - standard output</span>
 <span class="org-constant">std</span>::fputs<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; hello world C++17 line\n"</span>, stdout<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Exmaple: print line to stderr - standard error output </span>
<span class="org-function-name">std</span>::fputs<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; hello world C++17 line\n"</span>, stderr<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgca2c9ef" class="outline-4">
<h4 id="orgca2c9ef"><span class="section-number-4">1.3.2</span> Printf-like Functions</h4>
<div class="outline-text-4" id="text-1-3-2">
<p>
The following functions are available in the header <a href="https://en.cppreference.com/w/cpp/header/cstdio">&lt;cstdio&gt;</a> for C++,
and in the header &lt;stdio.h&gt; for C. 
</p>

<ul class="org-ul">
<li>Printf - print to stdout - standard output.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">printf</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">format</span>, ...<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li>fprintf - print to file
<ul class="org-ul">
<li>stdout - file =&gt; standard output</li>
<li>stderr - file =&gt; standard error output.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">fprintf</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">FILE</span>* <span class="org-variable-name">fd</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">format</span>, ...<span class="org-rainbow-delimiters-depth-1">)</span>; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Example: Print to stdout, same as printf </span>
<span class="org-function-name">std</span>::fprintf<span class="org-rainbow-delimiters-depth-1">(</span>stdout, <span class="org-string">" text = '%s' x = %.3f "</span>, <span class="org-string">"square_root"</span>, 3.141598714<span class="org-rainbow-delimiters-depth-1">)</span>; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Example: Print to stderr</span>
<span class="org-function-name">std</span>::fprintf<span class="org-rainbow-delimiters-depth-1">(</span>stderr, <span class="org-string">" text = '%s' x = %.3f "</span>, <span class="org-string">"square_root"</span>, 3.141598714<span class="org-rainbow-delimiters-depth-1">)</span>; 
</pre>
</div>

<ul class="org-ul">
<li>dprintf - print to file descriptor</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">dprintf</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">fd</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">format</span>, ...<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li>sprintf - print to buffer - Note: function prone to buffer
overlflow.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">sprintf</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span>* <span class="org-variable-name">buffer</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">format</span>, ...<span class="org-rainbow-delimiters-depth-1">)</span>; 
</pre>
</div>

<ul class="org-ul">
<li>snprintf - print to buffer with bound checking - size is the
maximum number of characters that can be print to the buffer.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">snprintf</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span>* <span class="org-variable-name">buffer</span>, <span class="org-type">size_t</span> <span class="org-variable-name">size</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">format</span>, ...<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org0bb3522" class="outline-4">
<h4 id="org0bb3522"><span class="section-number-4">1.3.3</span> Specifiers for printf-like functions</h4>
<div class="outline-text-4" id="text-1-3-3">
<p>
Escacape sequences: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Sequence</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><b>New Line</b></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\n</code></td>
<td class="org-left">LF - Line Feed (Unix new line )</td>
</tr>

<tr>
<td class="org-left"><code>\r</code></td>
<td class="org-left">CR - Carriage Return</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><b>Tabs</b></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\t</code></td>
<td class="org-left">Horizontal Tab</td>
</tr>

<tr>
<td class="org-left"><code>\v</code></td>
<td class="org-left">Vertical Tab</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><b>Escape Characters</b></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">%%</td>
<td class="org-left">Print a percent sign (%)</td>
</tr>

<tr>
<td class="org-left">\\</td>
<td class="org-left">Print backlash, aka backward slash</td>
</tr>

<tr>
<td class="org-left">\"</td>
<td class="org-left">Print a single double quote</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left"><b>Special Characters</b></td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><code>\a</code></td>
<td class="org-left">Alert bell</td>
</tr>

<tr>
<td class="org-left"><code>\b</code></td>
<td class="org-left">Backspace</td>
</tr>

<tr>
<td class="org-left"><code>\c</code></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><code>\f</code></td>
<td class="org-left">Form feed</td>
</tr>

<tr>
<td class="org-left"><code>\e</code></td>
<td class="org-left">Escape</td>
</tr>
</tbody>
</table>


<p>
Specifiers: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Specifier</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Misc</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">%c</td>
<td class="org-left">Print a single character</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">%s</td>
<td class="org-left">Print a string</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">%p</td>
<td class="org-left">Print the address stored in a pointer in hexadecimal base.</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Integers</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">%u</td>
<td class="org-left">Print unsigned integer</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">%d  or %i</td>
<td class="org-left">Print signed integer in standard notation</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">%o</td>
<td class="org-left">Print signed integer in octal base</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">%x</td>
<td class="org-left">Print signed integer in hexadecimal base (lower case letters)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">%X</td>
<td class="org-left">Print signed integer in hexadecimal base (upper case letters)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Float Point</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">%f</td>
<td class="org-left">Print using standard notation</td>
<td class="org-left">12391.647808</td>
</tr>

<tr>
<td class="org-left">%a</td>
<td class="org-left">Print using hexadecimal notation</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">%e</td>
<td class="org-left">Print using scientific notation (lower case 'e)</td>
<td class="org-left">1.239165e+04</td>
</tr>

<tr>
<td class="org-left">%E</td>
<td class="org-left">Print using scientific notation (upper case 'E')</td>
<td class="org-left">1.239165E+04</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">%g</td>
<td class="org-left">Print using scientific notation only when needed (lower case 'e')</td>
<td class="org-left">1.239165e+04</td>
</tr>

<tr>
<td class="org-left">%G</td>
<td class="org-left">Print using scientific notation only when needed (upper case 'E')</td>
<td class="org-left">1.239165E+04</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">%.3f</td>
<td class="org-left">Print using std. notation with 3 digits precision</td>
<td class="org-left">12391.649</td>
</tr>

<tr>
<td class="org-left">%.3E</td>
<td class="org-left">Print using scientific notation with 3 digits precision</td>
<td class="org-left">1.240E+04</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
WARNING: Despite the simplicity, printf is not type-safe and has some
potential vulnerabilities:
</p>

<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Uncontrolled_format_string">Uncontrolled format string</a></li>
<li><a href="https://www.owasp.org/index.php/Format_string_attack">Format string attack</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgfff7d30" class="outline-4">
<h4 id="orgfff7d30"><span class="section-number-4">1.3.4</span> Examples</h4>
<div class="outline-text-4" id="text-1-3-4">
<p>
Headers:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">For C use &lt;stdio.h&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstdio</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>  <span class="org-comment-delimiter">// </span><span class="org-comment">for printf</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>   <span class="org-comment-delimiter">// </span><span class="org-comment">sin, cos, exp</span>
</pre>
</div>

<p>
Print integer:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">x</span> = 2951;

&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; x = %d\n"</span>, x<span class="org-rainbow-delimiters-depth-1">)</span>;
 =&gt; x = 2951

<span class="org-comment-delimiter">// </span><span class="org-comment">Print integer in octal format</span>
&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; x = %o [Octal format - base 8]\n"</span>, x<span class="org-rainbow-delimiters-depth-1">)</span>;
 =&gt; x = 5607 <span class="org-rainbow-delimiters-depth-1">[</span>Octal format - base 8<span class="org-rainbow-delimiters-depth-1">]</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Print integer in hexadecimal format (lower case)</span>
&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; x = 0x%x [Hexadecimal]\n"</span>, x<span class="org-rainbow-delimiters-depth-1">)</span>;
 =&gt; x = 0xb87 <span class="org-rainbow-delimiters-depth-1">[</span>Hexadecimal<span class="org-rainbow-delimiters-depth-1">]</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Print integer in hexadecimal format (upper case)</span>
&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; x = 0x%X [Hexadecimal]\n"</span>, x<span class="org-rainbow-delimiters-depth-1">)</span>;
 =&gt; x = 0xB87 <span class="org-rainbow-delimiters-depth-1">[</span>Hexadecimal<span class="org-rainbow-delimiters-depth-1">]</span>
</pre>
</div>

<p>
<b>Print address of a pointer</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" =&gt; address_of(x) = %p\n"</span>, &amp;x<span class="org-rainbow-delimiters-depth-1">)</span>
 =&gt; address_of<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 0x7f0279845010
</pre>
</div>

<p>
<b>Print float point</b>
</p>

<p>
Print float point in standard notation with any precision:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> PI = 4.0 * atan2<span class="org-rainbow-delimiters-depth-1">(</span>1, 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3.1415927

<span class="org-comment-delimiter">// </span><span class="org-comment">Print with any precision</span>
&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"PI = %f exp(3 * PI) = %f \n"</span>, PI, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-2">(</span>3 * PI<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
PI = 3.141593 exp<span class="org-rainbow-delimiters-depth-1">(</span>3 * PI<span class="org-rainbow-delimiters-depth-1">)</span> = 12391.647808
</pre>
</div>

<p>
Print float point in standard notation with 3 digits precision:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Print with 3 digits precision</span>
&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"PI = %.3f exp(3 * PI) = %.3f \n"</span>, PI, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-2">(</span>3 * PI<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
PI = 3.142 exp<span class="org-rainbow-delimiters-depth-1">(</span>3 * PI<span class="org-rainbow-delimiters-depth-1">)</span> = 12391.648
</pre>
</div>

<p>
Print in scientific notation with any precision:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"PI = %e exp(3 * PI) = %e \n"</span>, PI, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-2">(</span>3 * PI<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
PI = 3.141593e+00 exp<span class="org-rainbow-delimiters-depth-1">(</span>3 * PI<span class="org-rainbow-delimiters-depth-1">)</span> = 1.239165e+04
</pre>
</div>

<p>
Print in scientific notation with 3 digits precision:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"PI = %.3E exp(3 * PI) = %.3E \n"</span>, PI, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-2">(</span>3 * PI<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
PI = 3.142E+00 exp<span class="org-rainbow-delimiters-depth-1">(</span>3 * PI<span class="org-rainbow-delimiters-depth-1">)</span> = 1.239E+04
</pre>
</div>

<p>
Print with scientific only when needed (for large numbers).
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"PI = %G exp(2 + 3 * PI) = %G \n"</span>, PI, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-2">(</span>2 + 3 * PI<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
PI = 3.14159 exp<span class="org-rainbow-delimiters-depth-1">(</span>2 + 3 * PI<span class="org-rainbow-delimiters-depth-1">)</span> = 91562.6

&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"PI = %G exp(6 + 3 * PI) = %G \n"</span>, PI, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-2">(</span>6 + 3 * PI<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
PI = 3.14159 exp<span class="org-rainbow-delimiters-depth-1">(</span>6 + 3 * PI<span class="org-rainbow-delimiters-depth-1">)</span> = 4.99915E+06
</pre>
</div>

<p>
Print with scientific only when needed with 4 digits precision:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"PI = %.4G exp(2 + 3 * PI) = %.4G \n"</span>, PI, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-2">(</span>2 + 3 * PI<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
PI = 3.142 exp<span class="org-rainbow-delimiters-depth-1">(</span>2 + 3 * PI<span class="org-rainbow-delimiters-depth-1">)</span> = 9.156E+04
</pre>
</div>

<p>
Print with hexadecimal notation:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"PI = %a exp(PI) = %a \n"</span>, PI, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-2">(</span>PI<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
PI = 0x1.921fb54442d18p+1 exp<span class="org-rainbow-delimiters-depth-1">(</span>PI<span class="org-rainbow-delimiters-depth-1">)</span> = 0x1.724046eb09339p+4
</pre>
</div>

<p>
Print table of float points:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0; x &lt;= 10.0; x+= 1.0<span class="org-rainbow-delimiters-depth-1">)</span> printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"%8.3f %10.3f\n"</span>, x, exp<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
   0.000      1.000
   1.000      2.718
   2.000      7.389
   3.000     20.086
   4.000     54.598
   5.000    148.413
   6.000    403.429
   7.000   1096.633
   8.000   2980.958
   9.000   8103.084
  10.000  22026.466

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0; x &lt;= 10.0; x+= 1.0<span class="org-rainbow-delimiters-depth-1">)</span> printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"%8.3f %10.2E\n"</span>, x, exp<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
   0.000   1.00E+00
   1.000   2.72E+00
   2.000   7.39E+00
   3.000   2.01E+01
   4.000   5.46E+01
   5.000   1.48E+02
   6.000   4.03E+02
   7.000   1.10E+03
   8.000   2.98E+03
   9.000   8.10E+03
  10.000   2.20E+04

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0; x &lt;= 10.0; x+= 1.0<span class="org-rainbow-delimiters-depth-1">)</span> printf<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"%8.3f %10.5E\n"</span>, x, exp<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
   0.000 1.00000E+00
   1.000 2.71828E+00
   2.000 7.38906E+00
   3.000 2.00855E+01
   4.000 5.45982E+01
   5.000 1.48413E+02
   6.000 4.03429E+02
   7.000 1.09663E+03
   8.000 2.98096E+03
   9.000 8.10308E+03
  10.000 2.20265E+04
</pre>
</div>

<p>
Print table of string: 
</p>

<ul class="org-ul">
<li>file: main.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">using</span> <span class="org-type">table_row</span> = <span class="org-constant">std</span>::<span class="org-type">pair</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">table_row</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">table</span><span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"tristor"</span>, 10.23<span class="org-rainbow-delimiters-depth-3">}</span>
        ,<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"voltage regulator 5 volts"</span>, 1.25<span class="org-rainbow-delimiters-depth-3">}</span>
        ,<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"voltage regulator 12V"</span>, 9.50<span class="org-rainbow-delimiters-depth-3">}</span>
        ,<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"IMU sensor"</span>, 108.23<span class="org-rainbow-delimiters-depth-3">}</span>
        ,<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Pressure transducer"</span>, 205.90<span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n ==&gt;&gt;&gt; C++11 Table printing (First column right aligned) \n\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">r</span>: table<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"%25s %10.2f\n"</span>, r.first.c_str<span class="org-rainbow-delimiters-depth-3">()</span>, r.second<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n ==&gt;&gt;&gt; C++17 Table printing (First column left aligned) \n\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-rainbow-delimiters-depth-3">[</span><span class="org-constant">key</span>, <span class="org-constant">value</span><span class="org-rainbow-delimiters-depth-3">]</span>: table<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"%-25s %10.2f\n"</span>, key.c_str<span class="org-rainbow-delimiters-depth-3">()</span>, value<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">==&gt;&gt;&gt; C++11 Table printing (First column right aligned) 

                  tristor      10.23
voltage regulator 5 volts       1.25
    voltage regulator 12V       9.50
               IMU sensor     108.23
      Pressure transducer     205.90

 ==&gt;&gt;&gt; C++17 Table printing (First column left aligned) 

tristor                        10.23
voltage regulator 5 volts       1.25
voltage regulator 12V           9.50
IMU sensor                    108.23
Pressure transducer           205.90
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org974a799" class="outline-3">
<h3 id="org974a799"><span class="section-number-3">1.4</span> IO Class Hierarchy</h3>
<div class="outline-text-3" id="text-1-4">
<p>
<b>C++ IO Features:</b>
</p>

<ul class="org-ul">
<li>Object oriented and polymorphic</li>
<li>Stateful
<ul class="org-ul">
<li>The IO classes have internal states such as precision that float
point will be printed; base which numbers will be print such as
octal (base 8), hexadecimal (base 16) and decimal (default).</li>
</ul></li>
<li>Without exceptions
<ul class="org-ul">
<li>The C++ IO does not have exceptions, it indicates error through
error flags that must be checked by the calling code.</li>
</ul></li>
</ul>

<p>
<b>IO Classes:</b>
</p>

<ul class="org-ul">
<li>ios - base class for streams</li>
<li>istream - input stream base class
<ul class="org-ul">
<li>ifstream =&gt; Input file stream</li>
<li>istringstream =&gt; Input string stream</li>
</ul></li>
<li>ostream - output stream base class
<ul class="org-ul">
<li>ofstream =&gt; Output file stream</li>
<li>ostringstream =&gt; Output string stream</li>
</ul></li>
<li>iostream - input/output stream base class
<ul class="org-ul">
<li>fstream =&gt; Input/Output file stream.</li>
<li>sstringstream =&gt; String stream that can be used for reading and writing.</li>
</ul></li>
</ul>

<p>
<b>IO Global Objects</b>
</p>

<p>
Output stream global objects (instances of std::ostream): 
</p>
<ul class="org-ul">
<li>std::cout - Standard output stream (stdout)</li>
<li>std::cerr - Standard output error stream (stderr)</li>
<li>std::clog</li>
<li>std::wcout - Standard output stream (stdout) - wide character version.</li>
<li>std::wcerr</li>
<li>std::wclog</li>
</ul>

<p>
Input stream global objects (instances of std::istream): 
</p>
<ul class="org-ul">
<li>std::cin  - Standard input stream (stdin)</li>
<li>std::wcin - Standard input stream (stdin), wide character version.</li>
</ul>

<p>
<b>Header Files</b> 
</p>

<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/header/iostream">&lt;iostream&gt;</a> =&gt; Basic IO 
<ul class="org-ul">
<li><span class="underline">std::ostream</span>, <span class="underline">std::istream</span>, std::cout, std::cerr, std::clog, std::wcerr</li>
</ul></li>

<li><a href="https://en.cppreference.com/w/cpp/header/fstream">&lt;fstream&gt;</a> =&gt; File IO 
<ul class="org-ul">
<li>std::ifstream, std::ofstream, std::fstream</li>
</ul></li>

<li><a href="https://en.cppreference.com/w/cpp/header/sstream">&lt;sstream&gt;</a> =&gt; String / Memory IO
<ul class="org-ul">
<li>std::stringstream, std::istringstream, std::ostringstream</li>
</ul></li>

<li><a href="https://en.cppreference.com/w/cpp/header/iomanip">&lt;iomanip&gt;</a> =&gt; IO manipulation functions
<ul class="org-ul">
<li>std::setfill, std::setprecision, std::setw, std::right,
std::left, std::dec, std::hex, std::quoted (C++14)</li>
</ul></li>
</ul>

<p>
Full references at: 
</p>
<ul class="org-ul">
<li><a href="http://www.cplusplus.com/reference/iolibrary/">http://www.cplusplus.com/reference/iolibrary/</a></li>
</ul>


<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>C++ IO Class hierarchy</label><pre class="src src-text">                                ios
                                 +
                +----------------+--------------+
                |                               |
               \|/                             \|/
            +-------+                      +--------+
            |istream|                      |ostream |
            +--+----+                      +---+----+
               |                               |
              \|/       +-----------+         \|/
    +------------------&gt;+  iostream +&lt;------+--v--------+-----------+
    |          |        +-----+-----+       |           |           |
    v          v              |             v           v           v
*std::cin  ifstream           |         *std::cerr   ofstream   ostringstream
           istringstream      |          *std::cout
                              |          *std::clog
                        ------v------
                        |           |
                        v           v
                     fstream stringstream
</pre>
</div>


<p>
<b>Statefullness</b> 
</p>

<p>
The C++ IO streams are stateful, they have internal states for IO
configuration such as <a href="https://en.cppreference.com/w/cpp/io/ios_base/fmtflags">IO flags</a> and numerical precision. In the
following code, the IO manipulator std::boolalpha enables the IO flag
std::ios_base::boolalpha that makes the IO stream print booleans as
string instead of '0' or '1'. The flag can be disabled with the IO
manipulator std::noboolalpha.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"flag1 = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" flag2 = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;
flag1 = 1 flag2 = 0
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"flag1 = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" flag2 = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;
flag1 = 1 flag2 = 0
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">IO Manipulator that enables boolalpha flag which enables booleans</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">be print as strings instead of being print as numbers.</span>
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"flag1 = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" flag2 = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;
flag1 = <span class="org-constant">true</span> flag2 = <span class="org-constant">false</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Output continues in this way until the flag boolalpha is disabled. </span>
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"flag1 = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" flag2 = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;
flag1 = <span class="org-constant">true</span> flag2 = <span class="org-constant">false</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Disable flag </span>
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::noboolalpha;
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"flag1 = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" flag2 = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;
flag1 = 1 flag2 = 0
</pre>
</div>
</div>
</div>
<div id="outline-container-org9fb8ed9" class="outline-3">
<h3 id="org9fb8ed9"><span class="section-number-3">1.5</span> IO Manipulators</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>All mapipulators: <a href="https://en.cppreference.com/w/cpp/io/manip">documentation</a></li>
</ul>

<p>
Switch numeric representation of booleans
</p>

<ul class="org-ul">
<li>std::boolapha
<ul class="org-ul">
<li>=&gt; Print booleans as 'true' or 'false' rather than 0 or 1.</li>
</ul></li>
<li>std::noboolalpha
<ul class="org-ul">
<li>=&gt; Print boolean as number true as 1 and false as 0.</li>
</ul></li>
</ul>

<p>
Case manipulators:
</p>

<ul class="org-ul">
<li>std::uppercase =&gt; Print everything as uppercase.</li>
<li>std::nouppercase =&gt; Print without forcing uppercase.</li>
</ul>

<p>
Change numerical base used for printing integers (flag std::ios::basefield)
</p>

<ul class="org-ul">
<li>std::dec =&gt; Print integers as decimal</li>
<li>std::hex =&gt; Print integers as heaxdecimal</li>
<li>std::oct =&gt; Print integers as octal</li>
</ul>

<p>
Float point number formatting: (flag: std::ios::floatfield)
</p>

<ul class="org-ul">
<li>std::defaultflot (C++11)</li>
<li>std::fixed
<ul class="org-ul">
<li>Print float with fixed precision (fixed numbers of decimal places)</li>
</ul></li>
<li>std::scientific
<ul class="org-ul">
<li>Print float with scientific notation</li>
</ul></li>
<li>std::hexfloat (C++11)</li>
</ul>

<p>
Float point precision: 
</p>

<ul class="org-ul">
<li>std::setprecision(int N)</li>
</ul>

<p>
Field adjusting (flag: std::ios::adjustfield)
</p>

<ul class="org-ul">
<li>std::ios::left</li>
<li>std::ios::right</li>
<li>std::ios::internal</li>
</ul>

<p>
Flushing manipulators:
</p>

<ul class="org-ul">
<li>std::flush
<ul class="org-ul">
<li>Flush output stream, in other words, it forces the stream
buffer to be written to the IO, for instance, it can force the
buffer of a file output stream to be written to a file. TL;DR
synchronize stream buffer with output.</li>
</ul></li>

<li>std::endl
<ul class="org-ul">
<li>Insert new line character in the output stream <code>\n</code> and flushes
the stream (std::flush).</li>
</ul></li>

<li>std::unitbuf
<ul class="org-ul">
<li>=&gt; Automatically flushes the output stream after each
operation. Note: most output streams flushes by default.</li>
<li>Sets the flag: std::ios_base::unitbuf.</li>
</ul></li>

<li>std::nounitbuf
<ul class="org-ul">
<li>=&gt; Disables automatic output stream flushing.</li>
<li>=&gt; Disables the flag: std::ios_base::unitbuf</li>
</ul></li>
</ul>


<p>
<b>Examples Float point IO manipulators</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"sqrt(pi) = "</span> &lt;&lt; <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>M_PI<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; 2.50 &lt;&lt; <span class="org-string">"\n"</span>;
sqrt<span class="org-rainbow-delimiters-depth-1">(</span>pi<span class="org-rainbow-delimiters-depth-1">)</span> = 1.77245 x = 2.5
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Precision 3 decimal places </span>
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>3<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"sqrt(pi) = "</span> &lt;&lt; <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>M_PI<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; 2.50 &lt;&lt; <span class="org-string">"\n"</span>;
sqrt<span class="org-rainbow-delimiters-depth-1">(</span>pi<span class="org-rainbow-delimiters-depth-1">)</span> = 1.772 x = 2.500

<span class="org-comment-delimiter">// </span><span class="org-comment">Precision 6 decimal places </span>
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>6<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"sqrt(pi) = "</span> &lt;&lt; <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>M_PI<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; 2.50 &lt;&lt; <span class="org-string">"\n"</span>;
sqrt<span class="org-rainbow-delimiters-depth-1">(</span>pi<span class="org-rainbow-delimiters-depth-1">)</span> = 1.772454 x = 2.500000

<span class="org-comment-delimiter">// </span><span class="org-comment">Reset float IO</span>
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::defaultfloat;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"sqrt(pi) = "</span> &lt;&lt; <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>M_PI<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; 2.50 &lt;&lt; <span class="org-string">"\n"</span>;
sqrt<span class="org-rainbow-delimiters-depth-1">(</span>pi<span class="org-rainbow-delimiters-depth-1">)</span> = 1.77245 x = 2.5
&gt;&gt; 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf86aaee" class="outline-3">
<h3 id="orgf86aaee"><span class="section-number-3">1.6</span> IO stream redirection</h3>
<div class="outline-text-3" id="text-1-6">
</div>
<div id="outline-container-orgbff657f" class="outline-4">
<h4 id="orgbff657f"><span class="section-number-4">1.6.1</span> Stdout (cout) and Stderr (cerr) stream redirection</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
Every process, has the following standard streams: 
</p>

<ul class="org-ul">
<li><b>stdin</b> - Standard input (file descriptor 0) =&gt; encapsulated by
global object <b>std::cin</b> (derived class of std::istream)</li>

<li><b>stdout</b> - Standard output (file descriptor 1) =&gt; encapsulated by
global object <b>std::cout</b> (derived class of std::ostream)
<ul class="org-ul">
<li>Normal program console output should use std::cout.</li>
</ul></li>

<li><b>stderr</b> - Standard error output (file descriptor 2) =&gt; encapsulated
by global object <b>std::cerr</b> (derived class of std::ostream)
<ul class="org-ul">
<li>Diagnostics, error and logging should use std::cerr as this
approach allows separating logging and diagnostics from program
output and redirecting or discarding them.</li>
<li>Note: Stream redirection is also possible on Windows. Althoug, it
is not so usual as in Unix-like operating system due to low usage
of terminal application in Windows.</li>
<li>Note: A Windows application compiled for GUI subsystem will not
display any output stream even if it is run from the terminal.</li>
</ul></li>
</ul>

<p>
<b>Example:</b>
</p>

<ul class="org-ul">
<li>File: stream-redirect.cpp
<ul class="org-ul">
<li>Sample program that solves the equation f(x) = x^3 - a = 0 using
newton raphson method.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">std::cout, std::cerr ...</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>   <span class="org-comment-delimiter">// </span><span class="org-comment">std::stod </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>    <span class="org-comment-delimiter">// </span><span class="org-comment">std::sin, std::fabs, std::abs, ... </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>  <span class="org-comment-delimiter">// </span><span class="org-comment">std::seprecision, std::fixed </span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">1e-6 or 6 digits tolerance </span>
     <span class="org-type">double</span> <span class="org-variable-name">tolerance</span> = 0.000001;
     <span class="org-comment-delimiter">// </span><span class="org-comment">Maximum number of iterationrs </span>
     <span class="org-type">size_t</span> <span class="org-variable-name">itermax</span>   = 200;

     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span>
     <span class="org-rainbow-delimiters-depth-2">{</span>
          <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Solves equation x^3 - a = 0 using Newton Raphson Method"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
          <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: input parameter not provided"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
          <span class="org-keyword">return</span> EXIT_FAILURE;
     <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-comment-delimiter">//</span><span class="org-comment">------- Parse Input Argument --------------</span>
     <span class="org-type">double</span> <span class="org-variable-name">a</span>;
     <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
             a = <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-3">(</span>argv<span class="org-rainbow-delimiters-depth-4">[</span>1<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">exception</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
             <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
             <span class="org-keyword">return</span> EXIT_FAILURE;
     <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-type">double</span> <span class="org-variable-name">dx</span>, <span class="org-variable-name">x</span> = a;
     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>4<span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-type">int</span> <span class="org-variable-name">w</span> = 10;

     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] Solving equation f(x) = x^3 - a ; for a = "</span> &lt;&lt; a &lt;&lt; <span class="org-string">"\n\n"</span>;

     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>w<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"Iter"</span>
                       &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>w<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"x"</span>
                       &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>w<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"AbsErr"</span>
                       &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>w<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"RelErr%"</span>
                       &lt;&lt; <span class="org-constant">std</span>::endl;    

     <span class="org-comment-delimiter">// </span><span class="org-comment">Find the cubic root by solving the following equation with</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Newton Raphson method: </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt;&gt; F(x) = x^3 - a = 0</span>
     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">iter</span> = 0; iter &lt; itermax; iter++<span class="org-rainbow-delimiters-depth-2">)</span>
     <span class="org-rainbow-delimiters-depth-2">{</span>
         dx  = <span class="org-rainbow-delimiters-depth-3">(</span>x * x * x - a <span class="org-rainbow-delimiters-depth-3">)</span> / <span class="org-rainbow-delimiters-depth-3">(</span> 2.0 * x * x<span class="org-rainbow-delimiters-depth-3">)</span>;
         x   = x - dx;

         <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>w<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; iter
                   &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>w<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; x
                   &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>w<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::fabs<span class="org-rainbow-delimiters-depth-3">(</span>dx<span class="org-rainbow-delimiters-depth-3">)</span>
                   &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>w<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; 100.0 * <span class="org-constant">std</span>::fabs<span class="org-rainbow-delimiters-depth-3">(</span>dx / x<span class="org-rainbow-delimiters-depth-3">)</span>
                   &lt;&lt; <span class="org-constant">std</span>::endl;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::fabs<span class="org-rainbow-delimiters-depth-4">(</span>dx<span class="org-rainbow-delimiters-depth-4">)</span> &lt; tolerance * <span class="org-constant">std</span>::fabs<span class="org-rainbow-delimiters-depth-4">(</span>x<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Cubic root of a = "</span> &lt;&lt; a
                      &lt;&lt; <span class="org-string">" ; is approximately "</span> &lt;&lt; x
                      &lt;&lt; <span class="org-string">" number of iteratios is "</span> &lt;&lt; iter + 1
                      &lt;&lt; <span class="org-constant">std</span>::endl;
            <span class="org-keyword">return</span> EXIT_SUCCESS;
        <span class="org-rainbow-delimiters-depth-3">}</span>
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [FAILURE] Root does not converge"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
     <span class="org-keyword">return</span> EXIT_FAILURE;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Compiling: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">GCC</span>
$ g++     stream-redirect.cpp -o <span class="org-keyword">stream-redirect.bin</span> -std=c++1z -g -O0 -Wall
<span class="org-comment-delimiter"># </span><span class="org-comment">Clang / LLVM </span>
$ clang++ stream-redirect.cpp -o <span class="org-keyword">stream-redirect.bin</span> -std=c++1z -g -O0 -Wall
</pre>
</div>

<p>
Running: 
</p>

<ul class="org-ul">
<li>Print all results - the standard streams stdcout (std::cout) and
stderr are redirected to console by default.</li>
<li>Note: Stream redirectiion peformed on Bash shell on Linux.</li>
</ul>


<div class="org-src-container">
<pre class="src src-text">$ ./stream-redirection.bin 125.0
 [INFO] Solving equation f(x) = x^3 - a ; for a = 125.0000

      Iter         x    AbsErr   RelErr%
         0   62.5040   62.4960   99.9872
         1   31.2680   31.2360   99.8977
         2   15.6979   15.5701   99.1855
         3    8.1026    7.5953   93.7396
         4    5.0033    3.0993   61.9454
         5    4.9984    0.0049    0.0985
         6    5.0008    0.0025    0.0492
         7    4.9996    0.0012    0.0246
         8    5.0002    0.0006    0.0123
         9    4.9999    0.0003    0.0062
        10    5.0001    0.0002    0.0031
        11    5.0000    0.0001    0.0015
        12    5.0000    0.0000    0.0008
        13    5.0000    0.0000    0.0004
        14    5.0000    0.0000    0.0002
        15    5.0000    0.0000    0.0001
 Cubic root of a = 125 ; is approximately 5 number of iteratios is 16
</pre>
</div>


<ul class="org-ul">
<li>Discard stderr standard error stream by redirecting it to
/dev/null. Note: valid for Unix-like OSes (Linux, BSD, OSX, QNX &#x2026;): 
<ul class="org-ul">
<li>$ ./program 2&gt; /dev/null</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-text">$ ./stream-redirect.bin 125.0 2&gt; /dev/null
 Cubic root of a = 125 ; is approximately 5 number of iteratios is 16
</pre>
</div>

<ul class="org-ul">
<li>Discard stdout - standard output by redirecting it to /dev/null
(Unix-like OSes)
<ul class="org-ul">
<li>$ ./program &gt; /dev/null</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-text">$ ./stream-redirect.bin 125.0 &gt; /dev/null
 [INFO] Solving equation f(x) = x^3 - a ; for a = 125.0000

      Iter         x    AbsErr   RelErr%
         0   62.5040   62.4960   99.9872
         1   31.2680   31.2360   99.8977
         2   15.6979   15.5701   99.1855
         3    8.1026    7.5953   93.7396
         4    5.0033    3.0993   61.9454
         5    4.9984    0.0049    0.0985
         6    5.0008    0.0025    0.0492
         7    4.9996    0.0012    0.0246
         8    5.0002    0.0006    0.0123
         9    4.9999    0.0003    0.0062
        10    5.0001    0.0002    0.0031
        11    5.0000    0.0001    0.0015
        12    5.0000    0.0000    0.0008
        13    5.0000    0.0000    0.0004
        14    5.0000    0.0000    0.0002
        15    5.0000    0.0000    0.0001
</pre>
</div>

<ul class="org-ul">
<li>Discard both stdout and stderr by redirecting them to /dev/null
<ul class="org-ul">
<li>./prorgram &gt; /dev/null 2&gt;&amp;1</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./stream-redirect.bin 125.0 &gt; /dev/null 2&gt;&amp;1
</pre>
</div>

<ul class="org-ul">
<li>Redirect stdout - standard output stream to a file.
<ul class="org-ul">
<li>./program &gt; stdout.log</li>
<li>Only the stderr is printed, the stdout is redirected to the text
file stdout.log</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./stream-redirect.bin 125.0 &gt; stdout.log
 [INFO] Solving equation f(x) = x^3 - a ; <span class="org-keyword">for</span> a = 125.0000

      Iter         x    AbsErr   RelErr%
         0   62.5040   62.4960   99.9872
         1   31.2680   31.2360   99.8977
         2   15.6979   15.5701   99.1855
         3    8.1026    7.5953   93.7396
         4    5.0033    3.0993   61.9454
         5    4.9984    0.0049    0.0985
         6    5.0008    0.0025    0.0492
         7    4.9996    0.0012    0.0246
         8    5.0002    0.0006    0.0123
         9    4.9999    0.0003    0.0062
        10    5.0001    0.0002    0.0031
        11    5.0000    0.0001    0.0015
        12    5.0000    0.0000    0.0008
        13    5.0000    0.0000    0.0004
        14    5.0000    0.0000    0.0002
        15    5.0000    0.0000    0.0001

<span class="org-comment-delimiter"># </span><span class="org-comment">Check file </span>
$ cat stdout.log 
 Cubic root of a = 125 ; is approximately 5 number of iteratios is 16
</pre>
</div>

<ul class="org-ul">
<li>Redirect stderr (std::cerr) - standard error stream to file.
<ul class="org-ul">
<li>./program 2&gt; stderr.log</li>
<li>Only the stdout is printed and the stderr is redirect to the text
file stderr.log</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./stream-redirect.bin 125.0 2&gt; stderr.log
 Cubic root of a = 125 ; is approximately 5 number of iteratios is 16

<span class="org-comment-delimiter"># </span><span class="org-comment">Show first 5 lines of log file </span>
$ head -n 5 stderr.log 
 [INFO] Solving equation f(x) = x^3 - a ; <span class="org-keyword">for</span> a = 125.0000

      Iter         x    AbsErr   RelErr%
         0   62.5040   62.4960   99.9872
         1   31.2680   31.2360   99.8977

<span class="org-comment-delimiter"># </span><span class="org-comment">Show last 5 lines of log file </span>
$ tail -n 5 stderr.log 
        11    5.0000    0.0001    0.0015
        12    5.0000    0.0000    0.0008
        13    5.0000    0.0000    0.0004
        14    5.0000    0.0000    0.0002
        15    5.0000    0.0000    0.0001
</pre>
</div>

<ul class="org-ul">
<li>Redirect both streams to different files: stdcout (std::cout) and
stderr (std:cerr)
<ul class="org-ul">
<li>$ ./program &gt; stdout.txt 2&gt; stderr.txt</li>
<li>The stdout (std::cout) is redirected to the file stdout.txt and
the stderr (std::cerr) is redirected to the file stderr.txt</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./stream-redirect.bin 125.0 &gt; stdout.txt 2&gt; stderr.txt

<span class="org-comment-delimiter"># </span><span class="org-comment">Check stdout (std::cout) log file </span>
$ cat stdout.txt 
 Cubic root of a = 125 ; is approximately 5 number of iteratios is 16

<span class="org-comment-delimiter"># </span><span class="org-comment">Check stderr (std::cerr) log file </span>
$ tail -n 5 stderr.txt 
        11    5.0000    0.0001    0.0015
        12    5.0000    0.0000    0.0008
        13    5.0000    0.0000    0.0004
        14    5.0000    0.0000    0.0002
        15    5.0000    0.0000    0.0001
</pre>
</div>

<ul class="org-ul">
<li>Redirect both streams to the same log file.
<ul class="org-ul">
<li>./program &gt; log.txt 2&gt;&amp;1</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-text">$ ./stream-redirect.bin 125.0 &gt; log.txt 2&gt;&amp;1 

$ cat log.txt 
 [INFO] Solving equation f(x) = x^3 - a ; for a = 125.0000

      Iter         x    AbsErr   RelErr%
         0   62.5040   62.4960   99.9872
         1   31.2680   31.2360   99.8977
         2   15.6979   15.5701   99.1855
         3    8.1026    7.5953   93.7396
         4    5.0033    3.0993   61.9454
         5    4.9984    0.0049    0.0985
         6    5.0008    0.0025    0.0492
         7    4.9996    0.0012    0.0246
         8    5.0002    0.0006    0.0123
         9    4.9999    0.0003    0.0062
        10    5.0001    0.0002    0.0031
        11    5.0000    0.0001    0.0015
        12    5.0000    0.0000    0.0008
        13    5.0000    0.0000    0.0004
        14    5.0000    0.0000    0.0002
        15    5.0000    0.0000    0.0001
 Cubic root of a = 125 ; is approximately 5 number of iteratios is 16
</pre>
</div>

<p>
<b>Capturing process stdout and stderr with Python subprocess module</b> 
</p>

<p>
Run C++ program <span class="underline">stream-redirect.bin</span> as subprocess: 
</p>
<ul class="org-ul">
<li><a href="https://docs.python.org/3.6/library/subprocess.html">Subprocess documentation</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-python">$ python3
Python 3.6.8 (default, Mar 21 2019, 10:08:12) 
[GCC 8.3.1 20190223 (Red Hat 8.3.1-2)] on linux
Type <span class="org-string">"help"</span>, <span class="org-string">"copyright"</span>, <span class="org-string">"credits"</span> <span class="org-keyword">or</span> <span class="org-string">"license"</span> <span class="org-keyword">for</span> more information.
&gt;&gt;&gt; 

&gt;&gt;&gt; <span class="org-keyword">import</span> subprocess <span class="org-keyword">as</span> sp 

<span class="org-comment-delimiter">#  </span><span class="org-comment">Process result </span>
&gt;&gt;&gt; <span class="org-variable-name">r</span> = sp.run([<span class="org-string">"./stream-redirection.bin"</span>, <span class="org-string">"125"</span>], stdout = sp.PIPE, stderr = sp.PIPE)
&gt;&gt;&gt; 
</pre>
</div>

<p>
Check status code: 
</p>
<ul class="org-ul">
<li>Process status code =&gt; Numeric value returned by int main(&#x2026;.){ &#x2026; }</li>
<li>0 =&gt; Status code means successful return</li>
</ul>

<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; r.returncode
0
</pre>
</div>

<p>
Check captured stdout: 
</p>

<div class="org-src-container">
<pre class="src src-python"><span class="org-comment-delimiter"># </span><span class="org-comment">=============== Stdout =&gt; Standarde Output Stream =====================#</span>

&gt;&gt;&gt; <span class="org-builtin">type</span>(r.stdout)
&lt;<span class="org-keyword">class</span> <span class="org-string">'bytes'</span>&gt;

&gt;&gt;&gt; r.stdout
b<span class="org-string">' Cubic root of a = 125 ; is approximately 5 number of iteratios is 16\n'</span>
&gt;&gt;&gt; 

&gt;&gt;&gt; <span class="org-keyword">print</span>(r.stdout.decode(<span class="org-string">'utf-8'</span>))
 Cubic root of <span class="org-variable-name">a</span> = 125 ; <span class="org-keyword">is</span> approximately 5 number of iteratios <span class="org-keyword">is</span> 16
</pre>
</div>

<p>
Check captured stderr: 
</p>

<div class="org-src-container">
<pre class="src src-python"><span class="org-comment-delimiter"># </span><span class="org-comment">=&gt; Type is a byte array </span>
&gt;&gt;&gt; <span class="org-builtin">type</span>(r.stderr)
&lt;<span class="org-keyword">class</span> <span class="org-string">'bytes'</span>&gt;

<span class="org-comment-delimiter"># </span><span class="org-comment">=&gt; Type is a python string </span>
&gt;&gt;&gt; <span class="org-builtin">type</span>(r.stderr.decode(<span class="org-string">'utf-8'</span>))
&lt;<span class="org-keyword">class</span> <span class="org-string">'str'</span>&gt;
&gt;&gt;&gt; 

&gt;&gt;&gt; <span class="org-keyword">print</span>(r.stderr.decode(<span class="org-string">'utf-8'</span>))
 [INFO] Solving equation f(x) = x^3 - a ; <span class="org-keyword">for</span> <span class="org-variable-name">a</span> = 125.0000

      Iter         x    AbsErr   RelErr%
         0   62.5040   62.4960   99.9872
         1   31.2680   31.2360   99.8977
         2   15.6979   15.5701   99.1855

       ... ... .... .... ... ... ... .... .... 

        15    5.0000    0.0000    0.0001
</pre>
</div>
</div>
</div>

<div id="outline-container-org01b6776" class="outline-4">
<h4 id="org01b6776"><span class="section-number-4">1.6.2</span> Stdin (cin) stream redirection</h4>
<div class="outline-text-4" id="text-1-6-2">
<p>
<b>File:</b> input-redirection.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">Import: std::cout, std::cin, std::cerr </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Import: std::setw </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>   <span class="org-comment-delimiter">// </span><span class="org-comment">Import: std::string</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">Import: std::function </span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &gt; 1 &amp;&amp; <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-3">(</span>argv<span class="org-rainbow-delimiters-depth-4">[</span>1<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span> == <span class="org-string">"--help"</span><span class="org-rainbow-delimiters-depth-2">)</span>
     <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Count line numbers of some file."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Usage: \n"</span>
                   &lt;&lt; <span class="org-string">"  $  "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-string">" &lt; file.txt \n"</span>
                   &lt;&lt; <span class="org-string">"  $  cat file.txt | "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
         <span class="org-comment-delimiter">// </span><span class="org-comment">Early return </span>
         <span class="org-keyword">return</span> 0;
     <span class="org-rainbow-delimiters-depth-2">}</span>  

     <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span>;
     <span class="org-type">long</span> <span class="org-variable-name">counter</span>  = -1;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Self-executable lambda used for returning a value from the if-else </span>
     <span class="org-type">bool</span> <span class="org-variable-name">showLine</span> = <span class="org-rainbow-delimiters-depth-2">[</span>&amp;<span class="org-rainbow-delimiters-depth-2">]{</span>
                           <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>argc &gt; 1 &amp;&amp; <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-4">(</span>argv<span class="org-rainbow-delimiters-depth-5">[</span>1<span class="org-rainbow-delimiters-depth-5">]</span><span class="org-rainbow-delimiters-depth-4">)</span> == <span class="org-string">"--show-line"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                                   <span class="org-keyword">return</span> <span class="org-constant">true</span>;
                           <span class="org-keyword">return</span> <span class="org-constant">false</span>;
                   <span class="org-rainbow-delimiters-depth-2">}()</span>;

     <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-constant">std</span>::boolalpha &lt;&lt; <span class="org-string">" [INFO] showLine = "</span> &lt;&lt; showLine &lt;&lt; <span class="org-constant">std</span>::endl;

     <span class="org-comment-delimiter">/* </span><span class="org-comment">Note: The comma opeator evaluates first (counter++) and then </span>
<span class="org-comment">      * evaluates std::getline(std::cin, line) returning its value. </span>
<span class="org-comment">      */</span>
     <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span>counter++, <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cin, line<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">){</span>
          <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>showLine<span class="org-rainbow-delimiters-depth-3">)</span>
          <span class="org-rainbow-delimiters-depth-3">{</span>
                  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>4<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; counter
                                    &lt;&lt; <span class="org-string">" "</span>  &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>8<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt;  line;
          <span class="org-rainbow-delimiters-depth-3">}</span>
     <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n\n File has "</span> &lt;&lt; counter &lt;&lt; <span class="org-string">" lines "</span> &lt;&lt; <span class="org-constant">std</span>::endl;    
     <span class="org-keyword">return</span> 0; 
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
<b>Compiling:</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ input-redirection.cpp -o <span class="org-keyword">input-redirection.bin</span> -std=c++1z -g -O0 -Wall

<span class="org-comment-delimiter"># </span><span class="org-comment">GCC </span>
$ gcc++ input-redirection.cpp -o <span class="org-keyword">input-redirection.bin</span> -std=c++1z -g -O0 -Wall
</pre>
</div>

<p>
<b>Usage</b>: 
</p>

<p>
Display help: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./input-redirection.bin --help
Count line numbers of some file.
 Usage: 
  $  ./input-redirection.bin &lt; file.txt 
  $  cat file.txt | ./input-redirection.bin
</pre>
</div>

<p>
Count number of line in input stream stdin (std::cin) typed by user: 
</p>
<ul class="org-ul">
<li>Note: When the user is done, he types CTRL + D to send EOF (End Of
File) character to process.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./input-redirection.bin
 [INFO] showLine = false
DXY index 
  VIX implied volatility 
     VAR VALUE AT RISK 
     standard deviation commodity prices 
         monte carlo simulations stochastic volatility

  Finaly user types CTRL + D when he is done to send EOF signal character to process.

 File has 7 lines 
</pre>
</div>

<p>
Redirect output stream (stdout) of <b>echo</b> program to input stream
(stdin) of input-redirection.bin: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ echo -e <span class="org-string">" line0\n line1\n line2"</span> 
 line0
 line1
 line2

$ echo -e <span class="org-string">" line0\n line1\n line2"</span> | ./input-redirection.bin 
 [INFO] showLine = false


 File has 3 lines 


$ echo -e <span class="org-string">" line0\n line1\n line2"</span> | ./input-redirection.bin --show-line
 [INFO] showLine = true

   0    line0
   1    line1
   2    line2

 File has 3 lines 
</pre>
</div>

<p>
Redirect file to input stream (stdin) of process
input-redirection.bin: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Show test file </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-------------------------------------------------</span>
$ cat /etc/filesystems 
ext4
ext3
ext2
nodev proc
nodev devpts
iso9660
vfat
hfs
hfsplus
*

<span class="org-comment-delimiter"># </span><span class="org-comment">Redirect test file to process' input stream without displaying lines </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-------------------------------------------------</span>
$ ./input-redirection.bin &lt; /etc/filesystems 
 [INFO] showLine = false


 File has 10 lines 

<span class="org-comment-delimiter"># </span><span class="org-comment">Redirect test file to process' input stream displaying its lines </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-------------------------------------------------</span>
$ ./input-redirection.bin --show-line &lt; /etc/filesystems 
 [INFO] showLine = true

   0 ext4    
   1 ext3    
   2 ext2    
   3 nodev proc
   4 nodev devpts
   5 iso9660 
   6 vfat    
   7 hfs     
   8 hfsplus 
   9 *       

 File has 10 lines 
</pre>
</div>


<p>
<b>Input redirection with Python Subprocess Module</b> 
</p>

<div class="org-src-container">
<pre class="src src-python">$ python3
Python 3.6.8 (default, Mar 21 2019, 10:08:12) 
[GCC 8.3.1 20190223 (Red Hat 8.3.1-2)] on linux
Type <span class="org-string">"help"</span>, <span class="org-string">"copyright"</span>, <span class="org-string">"credits"</span> <span class="org-keyword">or</span> <span class="org-string">"license"</span> <span class="org-keyword">for</span> more information.

&gt;&gt;&gt; <span class="org-keyword">import</span> subprocess <span class="org-keyword">as</span> sp
&gt;&gt;&gt; 
&gt;&gt;&gt; <span class="org-builtin">input</span> = <span class="org-string">" ASM\n RUST \nC++  \n Lisp \n Ocaml\n Haskell\n --- Scala"</span>
&gt;&gt;&gt; 
</pre>
</div>

<p>
Redirect Python input string to process: 
</p>

<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span class="org-variable-name">r</span> = sp.run([<span class="org-string">"./input-redirection.bin"</span>], stdout = sp.PIPE, stderr = sp.PIPE, <span class="org-builtin">input</span> = <span class="org-builtin">input</span>.encode())

&gt;&gt;&gt; r
CompletedProcess(args=[<span class="org-string">'./input-redirection.bin'</span>], returncode=0, stdout=b<span class="org-string">'\n\n File has 7 lines \n'</span>, stderr=b<span class="org-string">' [INFO] showLine = false\n'</span>)
</pre>
</div>

<p>
Proces status code: numeric value returned by  <b>int main(&#x2026;)</b> function.
</p>

<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; r.returncode
0
</pre>
</div>

<p>
Process stdout: 
</p>

<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; r.stdout
b<span class="org-doc">'\n\n File has 7 lines \n'</span>
&gt;&gt;&gt; 

&gt;&gt;&gt; <span class="org-keyword">print</span>(r.stdout.decode())


 File has 7 lines 
</pre>
</div>

<p>
Proces stderr: 
</p>

<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; r.stderr.decode()
<span class="org-doc">' [INFO] showLine = false\n'</span>
&gt;&gt;&gt; 
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgc624441" class="outline-3">
<h3 id="orgc624441"><span class="section-number-3">1.7</span> Reading data from generic Input Stream - read data from file, console and memory</h3>
<div class="outline-text-3" id="text-1-7">
<p>
File: readInventory.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">std::cout, std::cin, std::istream, std::ostream ...</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>  <span class="org-comment-delimiter">// </span><span class="org-comment">std::ifstream, std::ofstream</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Import: std::stringstream</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>  <span class="org-comment-delimiter">// </span><span class="org-comment">Import: std::quoted</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-type">InventoryItem</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">/// </span><span class="org-comment">Database id</span>
    <span class="org-type">unsigned</span> <span class="org-type">int</span> <span class="org-variable-name">id</span>;
    <span class="org-comment-delimiter">/// </span><span class="org-comment">Produce name</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span>  <span class="org-variable-name">name</span>;
    <span class="org-comment-delimiter">/// </span><span class="org-comment">Price per unit</span>
    <span class="org-type">double</span>       <span class="org-variable-name">price</span>;
    <span class="org-comment-delimiter">/// </span><span class="org-comment">Quanity</span>
    <span class="org-type">unsigned</span> <span class="org-type">int</span> <span class="org-variable-name">quantity</span>;

    <span class="org-function-name">InventoryItem</span><span class="org-rainbow-delimiters-depth-2">()</span>: id<span class="org-rainbow-delimiters-depth-2">{</span>0<span class="org-rainbow-delimiters-depth-2">}</span>, name<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">""</span><span class="org-rainbow-delimiters-depth-2">}</span>, price<span class="org-rainbow-delimiters-depth-2">{</span>0.0<span class="org-rainbow-delimiters-depth-2">}</span>, quantity<span class="org-rainbow-delimiters-depth-2">{</span>0<span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">using</span> <span class="org-type">Inventory</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">InventoryItem</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-type">void</span>      <span class="org-function-name">showInventory</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Inventory</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">inventory</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">Inventory</span> <span class="org-function-name">readInventory</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">Inventory</span> <span class="org-function-name">readInventoryFromFile</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">file</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">sampleData</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Usage: "</span> &lt;&lt; <span class="org-string">"\n"</span>
                  &lt;&lt; <span class="org-string">"$ "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span>   &lt;&lt; <span class="org-string">" file [FILE] "</span> &lt;&lt; <span class="org-string">"\n"</span>
                  &lt;&lt; <span class="org-string">"$ "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span>   &lt;&lt; <span class="org-string">" memory"</span> &lt;&lt; <span class="org-string">"\n"</span>
                  &lt;&lt; <span class="org-string">"$ "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span>   &lt;&lt; <span class="org-string">" console"</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">cmd</span> = argv<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Self  test - read memory stream</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>cmd == <span class="org-string">"memory"</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">ss</span>        = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-3">{</span>sampleData<span class="org-rainbow-delimiters-depth-3">}</span>;
        <span class="org-keyword">auto</span> <span class="org-variable-name">inventory</span> = readInventory<span class="org-rainbow-delimiters-depth-3">(</span>ss<span class="org-rainbow-delimiters-depth-3">)</span>;
        showInventory<span class="org-rainbow-delimiters-depth-3">(</span>inventory<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Read user file</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc == 3 &amp;&amp; cmd == <span class="org-string">"file"</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">file</span> = argv<span class="org-rainbow-delimiters-depth-3">[</span>2<span class="org-rainbow-delimiters-depth-3">]</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Reading file: "</span> &lt;&lt; file &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-type">Inventory</span> <span class="org-variable-name">inventory</span> = readInventoryFromFile<span class="org-rainbow-delimiters-depth-3">(</span>file<span class="org-rainbow-delimiters-depth-3">)</span>;
        showInventory<span class="org-rainbow-delimiters-depth-3">(</span>inventory<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Read console</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>cmd == <span class="org-string">"console"</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Type the inventory and then type Ctlr + D when you are done."</span>
                  &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">auto</span> <span class="org-variable-name">inventory</span> = readInventory<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cin<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ---- Inventory Value ---------"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        showInventory<span class="org-rainbow-delimiters-depth-3">(</span>inventory<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] Invalid command line option."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">return</span> EXIT_FAILURE;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">--------------------------------------------------------------//</span>

<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">sampleData</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">297  "Current sensor"           9.60    300</span>
<span class="org-string">871  "Pressure transducer"     90.00     50</span>
<span class="org-string">751  "Temperature SPI sensor"  40.25     20</span>
<span class="org-string">652  "Gyroscope"              220.50     45</span>
<span class="org-string">)</span><span class="org-default">"</span>;


<span class="org-type">void</span> <span class="org-function-name">showInventory</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Inventory</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">inventory</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>2<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>  &lt;&lt; <span class="org-string">"ID"</span>
              &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>  &lt;&lt; <span class="org-string">" "</span>
              &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>30<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"Name"</span>
              &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span>  &lt;&lt; <span class="org-string">"Price"</span>
              &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>12<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"Quantity"</span>
              &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>12<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"Value"</span>
              &lt;&lt; <span class="org-string">"\n"</span>;

    <span class="org-type">double</span> <span class="org-variable-name">total</span> = 0.0;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">item</span>: inventory<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>5<span class="org-rainbow-delimiters-depth-3">)</span>  &lt;&lt; item.id
                  &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>5<span class="org-rainbow-delimiters-depth-3">)</span>  &lt;&lt; <span class="org-string">" "</span>
                  &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>30<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; item.name
                  &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span>  &lt;&lt; item.price
                  &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>12<span class="org-rainbow-delimiters-depth-3">)</span>  &lt;&lt; item.quantity
                  &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>12<span class="org-rainbow-delimiters-depth-3">)</span>  &lt;&lt; item.quantity * item.price
                  &lt;&lt; <span class="org-string">"\n"</span>;
        total += item.quantity * item.price;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n Total inventory value: "</span> &lt;&lt; total &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Read inventory from any input stream (derived class from std::istream) such</span>
<span class="org-comment"> *  as std::ifstream, std::cin, std::sstringstream.</span>
<span class="org-comment"> */</span>
<span class="org-type">Inventory</span>
<span class="org-function-name">readInventory</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">InventoryItem</span> <span class="org-variable-name">currentItem</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">InventoryItem</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">inventory</span>;

    <span class="org-constant">std</span>::<span class="org-type">string</span>       <span class="org-variable-name">line</span>;
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">sline</span>;
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span>is, line<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>line == <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-3">{</span> <span class="org-keyword">continue</span>; <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Reset sline status flags</span>
        sline.clear<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Reset the value of sline stringstream</span>
        sline.str<span class="org-rainbow-delimiters-depth-3">(</span>line<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Read line fields</span>
        sline &gt;&gt; currentItem.id &gt;&gt; <span class="org-constant">std</span>::quoted<span class="org-rainbow-delimiters-depth-3">(</span>currentItem.name<span class="org-rainbow-delimiters-depth-3">)</span>
            &gt;&gt; currentItem.price &gt;&gt; currentItem.quantity;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Check error flags and stop on error</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-negation-char">!</span>sline<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-keyword">auto</span> <span class="org-variable-name">error_message</span> =
                <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"Error: invalid line: "</span><span class="org-rainbow-delimiters-depth-4">)</span> + line;
            <span class="org-keyword">throw</span>  <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-4">(</span>error_message<span class="org-rainbow-delimiters-depth-4">)</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>
        inventory.push_back<span class="org-rainbow-delimiters-depth-3">(</span>currentItem<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> inventory;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">Inventory</span>
<span class="org-function-name">readInventoryFromFile</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">file</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">ifs</span> = <span class="org-constant">std</span>::ifstream<span class="org-rainbow-delimiters-depth-2">(</span>file<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>ifs<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" Error: file not found."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::terminate<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> readInventory<span class="org-rainbow-delimiters-depth-2">(</span>ifs<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
File: inventory1.txt 
</p>

<div class="org-src-container">
<pre class="src src-txt">200  "diode"                  3.40         100
300  "blue led"               5.10         200 
100  "power supply 5 Volts"  20.50          15
256  "battery 12 volts pack" 12.50          50
901  "light sensor"          60.00          40
</pre>
</div>

<p>
Building: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ readInventory.cpp -o <span class="org-keyword">readInventory.bin</span> -std=c++1z -O0 -g
</pre>
</div>

<p>
Show options: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./readInventory.bin 
<span class="org-function-name">Usage</span>: 
$ ./readInventory.bin file [FILE] 
$ ./readInventory.bin memory
$ ./readInventory.bin console
</pre>
</div>

<p>
Read and display inventory data from memory (std::stringstream): 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./readInventory.bin memory
   ID     Name                               Price    Quantity       Value
  297     Current sensor                      9.60         300     2880.00
  871     Pressure transducer                90.00          50     4500.00
  751     Temperature SPI sensor             40.25          20      805.00
  652     Gyroscope                         220.50          45     9922.50

 Total inventory value: 18107.50
</pre>
</div>

<p>
Read and display inventory data from console (stdin stream), the data
is typed by the user and when he is done, he types Ctrl + D sending
EOF (End Of File) character to the process: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./readInventory.bin console
Type the inventory and then type Ctlr + D when you are done.
982 <span class="org-string">"IMU 6 axis"</span> 300.0 25
751 <span class="org-string">"Temperature sensor I2C"</span> 45.0 200
231 <span class="org-string">"Current transducer XYZWK"</span> 78.50 35
 ---- Inventory Value ---------
   ID     Name                               Price    Quantity       Value
  982     IMU 6 axis                        300.00          25     7500.00
  751     Temperature sensor I2C             45.00         200     9000.00
  231     Current transducer XYZWK           78.50          35     2747.50

 Total inventory value: 19247.50
</pre>
</div>

<p>
Read and show inventory data obtained through stream redirection:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cat inventory1.txt | ./readInventory.bin console
Type the inventory and then type Ctlr + D when you are done.
 ---- Inventory Value ---------
   ID     Name                               Price    Quantity       Value
  200     diode                               3.40         100      340.00
  300     blue led                            5.10         200     1020.00
  100     power supply 5 Volts               20.50          15      307.50
  256     battery 12 volts pack              12.50          50      625.00
  901     light sensor                       60.00          40     2400.00

 Total inventory value: 4692.50
</pre>
</div>

<p>
Read and display inventory data from file: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./readInventory.bin file inventory1.txt 
 Reading file: inventory1.txt
   ID     Name                               Price    Quantity       Value
  200     diode                               3.40         100      340.00
  300     blue led                            5.10         200     1020.00
  100     power supply 5 Volts               20.50          15      307.50
  256     battery 12 volts pack              12.50          50      625.00
  901     light sensor                       60.00          40     2400.00

 Total inventory value: 4692.50
</pre>
</div>
</div>
</div>

<div id="outline-container-org761f9fd" class="outline-3">
<h3 id="org761f9fd"><span class="section-number-3">1.8</span> Reading ELF binary files</h3>
<div class="outline-text-3" id="text-1-8">
</div>
<div id="outline-container-orgad849fa" class="outline-4">
<h4 id="orgad849fa"><span class="section-number-4">1.8.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-8-1">
<p>
Most Unix-like operating systems such as Linux, Android, BSD Variants,
AIX and IRIX use <a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">ELF</a> Executable Linkable Format binary file format for
their executables and shared libraries (aka shared object). While the
following code is specific for ELF files, it can be reused with any
other type of binary file if the layout is known.
</p>

<ul class="org-ul">
<li>Note: Although Mac OSX is an Unix-like operating system, it does
not use ELF file format for its executables, instead it uses
<a href="https://en.wikipedia.org/wiki/Mach-O">Mach-O</a> file format.</li>
</ul>

<p>
Parts of an ELF object: 
</p>

<ol class="org-ol">
<li>File Header</li>
<li>Section Table*</li>
<li>Program Header Table</li>
<li>Sections and Segments</li>
</ol>

<p>
The most relevant sections for an ELF object-code file are: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Section</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>.text</b></td>
<td class="org-left">Contains the compiled machine code.</td>
</tr>

<tr>
<td class="org-left">.data</td>
<td class="org-left">Initialized data</td>
</tr>

<tr>
<td class="org-left">.bss</td>
<td class="org-left">Non-initialized data</td>
</tr>

<tr>
<td class="org-left">.got</td>
<td class="org-left">Global Offset Table</td>
</tr>

<tr>
<td class="org-left">.debug</td>
<td class="org-left">Debug Symbols</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orge9bf1ee" class="outline-4">
<h4 id="orge9bf1ee"><span class="section-number-4">1.8.2</span> Checking an ELF test file</h4>
<div class="outline-text-4" id="text-1-8-2">
<p>
Identify an ELF file: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ file /bin/bash
<span class="org-function-name">/bin/bash</span>: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter 
/lib64/l, for GNU/Linux 3.2.0, <span class="org-variable-name">BuildID</span>[sha1]=01497fbe04f926fce1493834b3d208f82ab29788, stripped, too many notes (256)
</pre>
</div>

<p>
<b>Check magic number</b>  
</p>

<p>
The first bytes must be <code>\0x7f ELF</code> or the sequence of bytes: 0x7f 0x45
0x4c 0x46.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ od -t x1 -N 8 /bin/bash
0000000 7f 45 4c 46 02 01 01 00
0000010

$  hexdump -C /bin/bash | head -n 2
00000000  7f 45 4c 46 02 01 01 00  00 00 00 00 00 00 00 00  |.ELF............|
00000010  03 00 3e 00 01 00 00 00  b0 e4 02 00 00 00 00 00  |..&gt;.............|
</pre>
</div>

<p>
<b>Show ELF header:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ readelf -h /bin/bash
ELF Header:
  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              2<span class="org-string">'s complement, little endian</span>
<span class="org-string">  Version:                           1 (current)</span>
<span class="org-string">  OS/ABI:                            UNIX - System V</span>
<span class="org-string">  ABI Version:                       0</span>
<span class="org-string">  Type:                              DYN (Shared object file)</span>
<span class="org-string">  Machine:                           Advanced Micro Devices X86-64</span>
<span class="org-string">  Version:                           0x1</span>
<span class="org-string">  Entry point address:               0x2e4b0</span>
<span class="org-string">  Start of program headers:          64 (bytes into file)</span>
<span class="org-string">  Start of section headers:          1192776 (bytes into file)</span>
<span class="org-string">  Flags:                             0x0</span>
<span class="org-string">  Size of this header:               64 (bytes)</span>
<span class="org-string">  Size of program headers:           56 (bytes)</span>
<span class="org-string">  Number of program headers:         11</span>
<span class="org-string">  Size of section headers:           64 (bytes)</span>
<span class="org-string">  Number of section headers:         30</span>
<span class="org-string">  Section header string table index: 29</span>
</pre>
</div>

<p>
<b>Show sections:</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ readelf --sections /bin/bash
There are 30 section headers, starting at offset 0x123348:

Section Headers:
  [Nr] Name              Type             Address           Offset
       Size              EntSize          Flags  Link  Info  Align
  [ 0]                   NULL             0000000000000000  00000000
       0000000000000000  0000000000000000           0     0     0
  [ 1] .interp           PROGBITS         00000000000002a8  000002a8
       000000000000001c  0000000000000000   A       0     0     1
  [ 2] .note.ABI-tag     NOTE             00000000000002c4  000002c4
       0000000000000020  0000000000000000   A       0     0     4
  [ 3] .note.gnu.propert NOTE             00000000000002e8  000002e8
       0000000000000030  0000000000000000   A       0     0     8
  [ 4] .note.gnu.build-i NOTE             0000000000000318  00000318
       0000000000000024  0000000000000000   A       0     0     4
  [ 5] .gnu.hash         GNU_HASH         0000000000000340  00000340
       00000000000049ac  0000000000000000   A       6     0     8
  [ 6] .dynsym           DYNSYM           0000000000004cf0  00004cf0
       000000000000de18  0000000000000018   A       7     1     8
  [ 7] .dynstr           STRTAB           0000000000012b08  00012b08
       00000000000092be  0000000000000000   A       0     0     1
  [ 8] .gnu.version      VERSYM           000000000001bdc6  0001bdc6
       0000000000001282  0000000000000002   A       6     0     2
  [ 9] .gnu.version_r    VERNEED          000000000001d048  0001d048
       00000000000000b0  0000000000000000   A       7     2     8
  [10] .rela.dyn         RELA             000000000001d0f8  0001d0f8
       000000000000da10  0000000000000018   A       6     0     8
  [11] .rela.plt         RELA             000000000002ab08  0002ab08
       0000000000001470  0000000000000018  AI       6    23     8
  [12] .init             PROGBITS         000000000002bf78  0002bf78
       0000000000000017  0000000000000000  AX       0     0     4
  [13] .plt              PROGBITS         000000000002bf90  0002bf90
       0000000000000db0  0000000000000010  AX       0     0     16
  [14] .text             PROGBITS         000000000002cd40  0002cd40
       00000000000a59e1  0000000000000000  AX       0     0     16
  [15] .fini             PROGBITS         00000000000d2724  000d2724
       0000000000000009  0000000000000000  AX       0     0     4
  [16] .rodata           PROGBITS         00000000000d2740  000d2740
       0000000000018fd8  0000000000000000   A       0     0     32
  [17] .eh_frame_hdr     PROGBITS         00000000000eb718  000eb718
       00000000000042dc  0000000000000000   A       0     0     4

  ... ...   ... ...   ... ...   ... ...   ... ...   ... ...   ... ... 

Key to Flags:
  W (write), A (alloc), X (execute), M (merge), S (strings), I (info),
  L (link order), O (extra OS processing required), G (group), T (TLS),
  C (compressed), x (unknown), o (OS specific), E (exclude),
  l (large), p (processor specific)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgea48462" class="outline-4">
<h4 id="orgea48462"><span class="section-number-4">1.8.3</span> Sample program</h4>
<div class="outline-text-4" id="text-1-8-3">
<p>
File: <b>read_elf.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstdint</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">using</span> <span class="org-type">ByteArray</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint8_t<span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Print byte array as string and non-printable chars as hexadecimal */</span>
<span class="org-function-name">std</span>::ostream&amp; <span class="org-keyword">operator</span>&lt;&lt;<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-keyword">const</span> <span class="org-type">ByteArray</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">==</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">ByteArray</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span>, <span class="org-type">ByteArray</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-keyword">auto</span> <span class="org-function-name">readbin_at</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span>, <span class="org-type">long</span> <span class="org-variable-name">offset</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">T</span>;
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-type">void</span> <span class="org-function-name">show_num_at</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span>, <span class="org-type">long</span> <span class="org-variable-name">offset</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">extern</span> <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">uint8_t</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-variable-name">isa_type_database</span>;

<span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">Endianess</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">little_endian</span> = 1
  , <span class="org-variable-name">big_endian</span>    = 2
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">enum</span> <span class="org-type">WordSize</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-variable-name">word32bits</span> = 1
   ,<span class="org-variable-name">word64bits</span> = 2
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">elf_file</span> = <span class="org-string">"/usr/bin/bash"</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Create input stream object to read ELF binary file</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">ifs</span> = <span class="org-constant">std</span>::ifstream <span class="org-rainbow-delimiters-depth-2">(</span>elf_file, <span class="org-constant">std</span>::<span class="org-constant">ios</span>::in | <span class="org-constant">std</span>::<span class="org-constant">ios</span>::binary <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>ifs<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] Unable to open file."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">==== Read magic header 0x7F ELF at offset 0x00 ===============================//</span>

    <span class="org-type">ByteArray</span> <span class="org-variable-name">elf_header</span><span class="org-rainbow-delimiters-depth-2">(</span>4, 0x00<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Read 4 bytes at offset 0x00</span>
    ifs.read<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-3">&gt;(</span>&amp;elf_header<span class="org-rainbow-delimiters-depth-4">[</span>0<span class="org-rainbow-delimiters-depth-4">]</span><span class="org-rainbow-delimiters-depth-3">)</span>
                 , elf_header.size<span class="org-rainbow-delimiters-depth-3">()</span> * <span class="org-keyword">sizeof</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::uint8_t<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" elf_header = "</span> &lt;&lt; elf_header &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Check wheter magic bytes are equal to '0x7f E L F'</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>elf_header != ByteArray<span class="org-rainbow-delimiters-depth-3">{</span> 0x7f, 0x45, 0x4c, 0x46 <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" Error: not an ELF unix executable file."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::exit<span class="org-rainbow-delimiters-depth-3">(</span>EXIT_FAILURE<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">==== Read field EI_CLASS at 0x04 ============================================//</span>
    <span class="org-comment-delimiter">//</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">ei_class</span> = readbin_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint8_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x04<span class="org-rainbow-delimiters-depth-2">)</span>;
    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ei_class = 0x%X \n"</span>, ei_class<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">WordSize</span> <span class="org-variable-name">wordsize</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">WordSize</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ei_class<span class="org-rainbow-delimiters-depth-2">)</span>;
    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" Executable type (word size): %s \n"</span>, <span class="org-rainbow-delimiters-depth-3">(</span>ei_class == 2 ? <span class="org-string">"64 bits"</span> : <span class="org-string">" 32 bits"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">==== Read field EI_DATA at offset 0x05 ====================================//</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">ei_data</span> = readbin_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint8_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x05<span class="org-rainbow-delimiters-depth-2">)</span>;
    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ei_data = 0x%X \n"</span>, ei_data<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">Endianess</span> <span class="org-variable-name">endianess</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Endianess</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ei_data<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>endianess == <span class="org-constant">Endianess</span>::big_endian<span class="org-rainbow-delimiters-depth-2">)</span>
        printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; Processor is BIG ENDIAN \n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>endianess == <span class="org-constant">Endianess</span>::little_endian<span class="org-rainbow-delimiters-depth-2">)</span>
        printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; Processor is LITTLE ENDIAN\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">==== Read field EI_OSABI at offset 0x07 ======================================//</span>
    <span class="org-comment-delimiter">//</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">ei_osabi</span> = readbin_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint8_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x07<span class="org-rainbow-delimiters-depth-2">)</span>;
    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ei_osabi = 0x%X \n"</span>, ei_osabi<span class="org-rainbow-delimiters-depth-2">)</span>;


    <span class="org-comment-delimiter">//</span><span class="org-comment">=== Read ISA - Instruction Set Architecture type ===========================//</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">ei_machine</span> = readbin_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint8_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x12<span class="org-rainbow-delimiters-depth-2">)</span>;
    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ei_machine = 0x%X \n"</span>, ei_machine<span class="org-rainbow-delimiters-depth-2">)</span>;
    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" Architecture(ISA): %s \n"</span>, isa_type_database.at<span class="org-rainbow-delimiters-depth-3">(</span>ei_machine<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">=== Read e_phnum, e_shentsize, e_shnum and e_shstrndx ====================//</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: assumes ELF 64 bits</span>
    <span class="org-comment-delimiter">//</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">e_shnum</span> = readbin_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint16_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x3C<span class="org-rainbow-delimiters-depth-2">)</span>;
    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" Number of sections of the ELF file = %d \n"</span>, e_shnum<span class="org-rainbow-delimiters-depth-2">)</span>;

    show_num_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint32_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x30, <span class="org-string">"e_hsize"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    show_num_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint16_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x36, <span class="org-string">"e_shentsize"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    show_num_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint16_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x38, <span class="org-string">"e_phnum"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    show_num_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint16_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x3A, <span class="org-string">"e_shentsize"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    show_num_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint16_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x3C, <span class="org-string">"e_shnum"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">=== Read entry point field ================================================//</span>
    <span class="org-type">uint64_t</span> <span class="org-variable-name">ei_entry</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>wordsize == <span class="org-constant">WordSize</span>::word32bits<span class="org-rainbow-delimiters-depth-2">)</span>
        ei_entry = readbin_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint32_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x18<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>wordsize == <span class="org-constant">WordSize</span>::word64bits<span class="org-rainbow-delimiters-depth-2">)</span>
        ei_entry = readbin_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint64_t</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>ifs, 0x18<span class="org-rainbow-delimiters-depth-2">)</span>;

    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" Entry point 0x%X \n"</span>, ei_entry<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">***************************************************************//</span>

<span class="org-function-name">std</span>::ostream&amp; <span class="org-keyword">operator</span>&lt;&lt;<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-keyword">const</span> <span class="org-type">ByteArray</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">ch</span>: str<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::isprint<span class="org-rainbow-delimiters-depth-4">(</span>ch<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            os &lt;&lt; ch &lt;&lt; <span class="org-string">""</span>;
        <span class="org-keyword">else</span>
            os &lt;&lt; <span class="org-string">"\\0x"</span> &lt;&lt; <span class="org-constant">std</span>::hex &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>2<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::setfill<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">'0'</span><span class="org-rainbow-delimiters-depth-3">)</span>
               &lt;&lt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>ch<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-string">" "</span>
               &lt;&lt; <span class="org-constant">std</span>::dec;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> os;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">==</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">ByteArray</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span>, <span class="org-type">ByteArray</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>rhs.size<span class="org-rainbow-delimiters-depth-3">()</span> != lhs.size<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> <span class="org-constant">false</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::equal<span class="org-rainbow-delimiters-depth-2">(</span>rhs.begin<span class="org-rainbow-delimiters-depth-3">()</span>, rhs.end<span class="org-rainbow-delimiters-depth-3">()</span>, lhs.begin<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">@brief Read some value T at some offset of a binary input stream.</span>
<span class="org-comment">  *</span>
<span class="org-comment">  * @tparam T      - type which will be read</span>
<span class="org-comment">  * @param  is     - Input stream opened in binary mode</span>
<span class="org-comment">  * @param  offset - Offset or position where data will be read.</span>
<span class="org-comment">  */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">readbin_at</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span>, <span class="org-type">long</span> <span class="org-variable-name">offset</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">T</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">T</span> <span class="org-variable-name">value</span><span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>offset &gt; 0<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> is.seekg<span class="org-rainbow-delimiters-depth-3">(</span>offset<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    is.read<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-3">&gt;(</span>&amp;value<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-keyword">sizeof</span> <span class="org-rainbow-delimiters-depth-3">(</span>T<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">return</span> value;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">show_num_at</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span>, <span class="org-type">long</span> <span class="org-variable-name">offset</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">T</span> <span class="org-variable-name">data</span> = readbin_at<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>is, offset<span class="org-rainbow-delimiters-depth-2">)</span>;
    printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =&gt; Field [%s] = %d \n"</span>, name, data<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Instruction set ISA type database</span>
<span class="org-function-name">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">uint8_t</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">&gt;</span> isa_type_database =
    <span class="org-rainbow-delimiters-depth-1">{</span>
         <span class="org-rainbow-delimiters-depth-2">{</span>0x00, <span class="org-string">"No specified"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0x02, <span class="org-string">"Sparc"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0x03, <span class="org-string">"x86"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0x08, <span class="org-string">"MIPS"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0x14, <span class="org-string">"Power PC"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0x16, <span class="org-string">"S390"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0x28, <span class="org-string">"ARM"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0x2A, <span class="org-string">"SuperH"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0x3E, <span class="org-string">"x86-64"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0xB7, <span class="org-string">"AArch64"</span><span class="org-rainbow-delimiters-depth-2">}</span>
        ,<span class="org-rainbow-delimiters-depth-2">{</span>0xF3, <span class="org-string">"RISC-V"</span><span class="org-rainbow-delimiters-depth-2">}</span>
   <span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Compile: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ read_elf.cpp -o <span class="org-keyword">read_elf.bin</span> -std=c++1z -Wall -g -O0 
</pre>
</div>

<p>
Running and sample output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./read_elf.bin 
 elf_header = \0x7f ELF
 ei_class = 0x2 
 Executable type (word size): 64 bits 
 ei_data = 0x1 
 =&gt; Processor is LITTLE ENDIAN
 ei_osabi = 0x0 
 ei_machine = 0x3E 
 Architecture(ISA): x86-64 
 Number of sections of the ELF file = 30 
 =&gt; Field [e_hsize] = 0 
 =&gt; Field [e_shentsize] = 56 
 =&gt; Field [e_phnum] = 11 
 =&gt; Field [e_shentsize] = 64 
 =&gt; Field [e_shnum] = 30 
 Entry point 0x2E4B0 
</pre>
</div>

<p>
<b>Highlights:</b> 
</p>

<p>
Open file in binary mode: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">ifs</span> = <span class="org-constant">std</span>::ifstream <span class="org-rainbow-delimiters-depth-1">(</span>elf_file, <span class="org-constant">std</span>::<span class="org-constant">ios</span>::in | <span class="org-constant">std</span>::<span class="org-constant">ios</span>::binary <span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Function for reading data at some offset from a input stream opened in
binary mode. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">@brief Read some value T at some offset of a binary input stream.</span>
<span class="org-comment">  *</span>
<span class="org-comment">  * @tparam T      - type which will be read</span>
<span class="org-comment">  * @param  is     - Input stream opened in binary mode</span>
<span class="org-comment">  * @param  offset - Offset or position where data will be read.</span>
<span class="org-comment">  */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">readbin_at</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span>, <span class="org-type">long</span> <span class="org-variable-name">offset</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">T</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">T</span> <span class="org-variable-name">value</span><span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>offset &gt; 0<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> is.seekg<span class="org-rainbow-delimiters-depth-3">(</span>offset<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
    is.read<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-3">&gt;(</span>&amp;value<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-keyword">sizeof</span> <span class="org-rainbow-delimiters-depth-3">(</span>T<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">return</span> value;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Relevant Member function of class std::istream for binary file: 
</p>

<ul class="org-ul">
<li><b>seekg</b> =&gt; Set current position/offset of input stream.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">istream</span>&amp; <span class="org-constant">istream</span>::<span class="org-function-name">seekg</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">streampos</span> <span class="org-variable-name">offset</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li><b>read</b> =&gt; Read n bytes from input stream.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">istream</span>&amp; <span class="org-constant">istream</span>::<span class="org-function-name">read</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span>* <span class="org-variable-name">buffer</span>, <span class="org-type">streamsize</span> <span class="org-variable-name">buffer_size</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org7228dfd" class="outline-4">
<h4 id="org7228dfd"><span class="section-number-4">1.8.4</span> References</h4>
<div class="outline-text-4" id="text-1-8-4">
<ul class="org-ul">
<li><b>Exectuable Linkable Format (ELF)</b>
<ul class="org-ul">
<li><a href="https://www.cs.cmu.edu/afs/cs/academic/class/15213-s00/doc/elf.pdf">https://www.cs.cmu.edu/afs/cs/academic/class/15213-s00/doc/elf.pdf</a></li>
</ul></li>

<li><b>Executable Linkable Format - wikpedia</b>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">https://en.wikipedia.org/wiki/Executable_and_Linkable_Format</a></li>
</ul></li>

<li><b>Executable and Linkable Format 101 - Part 1 Sections and Segments</b>
<ul class="org-ul">
<li><a href="https://www.intezer.com/executable-linkable-format-101-part1-sections-segments/">https://www.intezer.com/executable-linkable-format-101-part1-sections-segments/</a></li>
</ul></li>

<li><b>The 101 of ELF files on Linux: Understanding and Analysis</b> 
<ul class="org-ul">
<li><a href="https://linux-audit.com/elf-binaries-on-linux-understanding-and-analysis/">https://linux-audit.com/elf-binaries-on-linux-understanding-and-analysis/</a></li>
</ul></li>

<li><b>Chapter 8. Behind the process</b>
<ul class="org-ul">
<li><a href="https://www.bottomupcs.com/elf.xhtml">https://www.bottomupcs.com/elf.xhtml</a></li>
</ul></li>

<li><b>C compiler. Memory Map. Program in RAM</b>
<ul class="org-ul">
<li><a href="https://www.ele.uva.es/~jesus/hardware_empotrado/Compiler.pdf">https://www.ele.uva.es/~jesus/hardware_empotrado/Compiler.pdf</a></li>
</ul></li>

<li><b>Analyzing the Linker Map file with a little help from the ELF and the DWARF</b>
<ul class="org-ul">
<li><a href="https://www.embeddedrelated.com/showarticle/900.php">https://www.embeddedrelated.com/showarticle/900.php</a></li>
</ul></li>

<li><b>Lab 03 - Executables. Static Analysis</b>
<ul class="org-ul">
<li><a href="https://ocw.cs.pub.ro/courses/cns/labs/lab-03">https://ocw.cs.pub.ro/courses/cns/labs/lab-03</a></li>
</ul></li>

<li><b>Inside ELF Symbol Table</b>
<ul class="org-ul">
<li><a href="https://blogs.oracle.com/solaris/inside-elf-symbol-tables-v2">https://blogs.oracle.com/solaris/inside-elf-symbol-tables-v2</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org6be8350" class="outline-3">
<h3 id="org6be8350"><span class="section-number-3">1.9</span> IO - Insertion &lt;&lt; and extraction &gt;&gt; operators</h3>
<div class="outline-text-3" id="text-1-9">
</div>
<div id="outline-container-org6c110fa" class="outline-4">
<h4 id="org6c110fa"><span class="section-number-4">1.9.1</span> Operators insertion insertion for std::vector&lt;T&gt;</h4>
<div class="outline-text-4" id="text-1-9-1">
<ul class="org-ul">
<li>Code: <a href="https://wandbox.org/permlink/NQN0loqv21td60P3">Wandbox Online Compiler</a></li>
</ul>

<p>
Operator: (&lt;&lt;)
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Element</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-function-name">std</span>::<span class="org-type">ostream</span>&amp; 
<span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Element</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">xs</span> <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    os &lt;&lt; <span class="org-string">"["</span> &lt;&lt; xs.size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"]( "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp;  <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-2">)</span>
       os &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>;
    <span class="org-keyword">return</span> os &lt;&lt; <span class="org-string">" )"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Main function: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> xs;
xs = <span class="org-rainbow-delimiters-depth-1">{}</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"xs = "</span> &lt;&lt; xs &lt;&lt; <span class="org-constant">std</span>::endl;
xs = <span class="org-rainbow-delimiters-depth-1">{</span>1.0, 5.0, 4.6, 1e4, 9.8<span class="org-rainbow-delimiters-depth-1">}</span>;    
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"xs = "</span> &lt;&lt; xs &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> xa = <span class="org-rainbow-delimiters-depth-1">{</span>1, 3, 4, 5, 6<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"xa = "</span> &lt;&lt; xa &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-keyword">auto</span> <span class="org-variable-name">words</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;{</span><span class="org-string">"hello"</span>, <span class="org-string">"world"</span>, <span class="org-string">"C++"</span>, <span class="org-string">"new"</span>, <span class="org-string">"machine"</span><span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"words = "</span> &lt;&lt; words &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-keyword">return</span> 0;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">xs = [0](  )
xs = [5]( 1 5 4.6 10000 9.8  )
xa = [5]( 1 3 4 5 6  )
words = [5]( hello world C++ new machine  )
</pre>
</div>
</div>
</div>

<div id="outline-container-org6317d81" class="outline-4">
<h4 id="org6317d81"><span class="section-number-4">1.9.2</span> Operators insertion and extraction for used defined-type</h4>
<div class="outline-text-4" id="text-1-9-2">
<p>
This example shows how to overload the operators insertion (&lt;&lt;) and
extraction (&gt;&gt;) for an user defined type. Note: those operators are
not class methods, they are free functions.
</p>

<ul class="org-ul">
<li>File: <a href="src/insertionExtractionOverload.cpp">file:src/insertionExtractionOverload.cpp</a></li>
<li>Online Compile: <a href="https://wandbox.org/permlink/97fcclubA7KHWEry">https://wandbox.org/permlink/97fcclubA7KHWEry</a>  (No console input support)</li>
</ul>


<p>
Compiling and running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ inputOutput.cpp -o <span class="org-keyword">inputOutput.bin</span> -std=c++1z -O0 -Wall &amp;&amp; ./inputOutput.bin
</pre>
</div>

<p>
Class Product (file: Product.hpp):
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Product</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
    <span class="org-type">int</span>          <span class="org-variable-name">m_id</span>;
    <span class="org-constant">std</span>::<span class="org-type">string</span>  <span class="org-variable-name">m_name</span>;
    <span class="org-type">double</span>       <span class="org-variable-name">m_price</span>;
<span class="org-function-name">public</span>:
    <span class="org-function-name">Product</span><span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-function-name">Product</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">id</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">double</span> <span class="org-variable-name">price</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">int</span>         <span class="org-function-name">Id</span><span class="org-rainbow-delimiters-depth-2">()</span>    <span class="org-keyword">const</span>;
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">Name</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">const</span>;
    <span class="org-type">double</span>      <span class="org-function-name">Price</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;
    <span class="org-type">void</span> <span class="org-function-name">showProduct</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">const</span>;

    <span class="org-keyword">friend</span>
    <span class="org-keyword">auto</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">Product</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">prod</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-constant">std</span>::ostream&amp;;

    <span class="org-keyword">friend</span>
    <span class="org-keyword">auto</span> <span class="org-keyword">operator</span><span class="org-function-name">&gt;&gt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span>, <span class="org-type">Product</span>&amp; <span class="org-variable-name">prod</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-constant">std</span>::istream&amp;;  
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
<b>Methods implementation</b> (file: Product.hpp)
</p>

<p>
Constructors: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">Product</span>::Product<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">id</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">double</span> <span class="org-variable-name">price</span><span class="org-rainbow-delimiters-depth-1">)</span>:
   m_id<span class="org-rainbow-delimiters-depth-1">(</span>id<span class="org-rainbow-delimiters-depth-1">)</span>, m_name<span class="org-rainbow-delimiters-depth-1">(</span>name<span class="org-rainbow-delimiters-depth-1">)</span>, m_price<span class="org-rainbow-delimiters-depth-1">(</span>price<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">Product</span>::Product<span class="org-rainbow-delimiters-depth-1">()</span>: Product<span class="org-rainbow-delimiters-depth-1">(</span>-1, <span class="org-string">"unnamed"</span>, 0.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Operator insertion (&lt;&lt;) for printing a Product object to an output
stream, it means any derived class of <a href="http://www.cplusplus.com/reference/istream/iostream/">std::ostream</a> or std::cout,
std::stringstream, std::fstream.
</p>

<ul class="org-ul">
<li>Note: This operator is not a method of the class Product, it is
just a function of two arguments.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">Product</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">prod</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::ostream&amp;
<span class="org-rainbow-delimiters-depth-1">{</span>
     os &lt;&lt; <span class="org-string">" "</span> &lt;&lt; prod.m_id
        &lt;&lt; <span class="org-string">" "</span> &lt;&lt; <span class="org-constant">std</span>::quoted<span class="org-rainbow-delimiters-depth-2">(</span>prod.m_name<span class="org-rainbow-delimiters-depth-2">)</span>
        &lt;&lt; <span class="org-string">" "</span> &lt;&lt; prod.m_price;    
     <span class="org-keyword">return</span> os; 
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Operator extraction (&gt;&gt;) for reading a product object from an input
stream, it means, any derived class of the class <a href="http://www.cplusplus.com/reference/istream/istream/">std::istream</a> such as
std::cin, std::fstream, std::sstream and so on. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-keyword">operator</span><span class="org-function-name">&gt;&gt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span>, <span class="org-type">Product</span>&amp; <span class="org-variable-name">prod</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::istream&amp;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> is &gt;&gt; prod.m_id &gt;&gt; <span class="org-constant">std</span>::quoted<span class="org-rainbow-delimiters-depth-2">(</span>prod.m_name<span class="org-rainbow-delimiters-depth-2">)</span> &gt;&gt; prod.m_price; 
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Main function:</b>
</p>

<p>
Create sample products:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Product</span> <span class="org-variable-name">p1</span><span class="org-rainbow-delimiters-depth-1">{</span>200, <span class="org-string">"Arabica Coffee"</span>, 4.50<span class="org-rainbow-delimiters-depth-1">}</span>;    
<span class="org-type">Product</span> <span class="org-variable-name">p2</span><span class="org-rainbow-delimiters-depth-1">{</span>300, <span class="org-string">"Orange 1kg "</span>, 10.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-type">Product</span> <span class="org-variable-name">p3</span><span class="org-rainbow-delimiters-depth-1">{</span>126, <span class="org-string">"XYWZ soft drink"</span>, 15.60<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Experiment 1: print products to stdout.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" &gt;&gt;&gt; EXPERIMENT 1 == Print Products ==========="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Product p1 = {"</span> &lt;&lt; p1 &lt;&lt; <span class="org-string">" }"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Product p2 = {"</span> &lt;&lt; p2 &lt;&lt; <span class="org-string">" }"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Product p3 = {"</span> &lt;&lt; p3 &lt;&lt; <span class="org-string">" }"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh"> &gt;&gt;&gt; EXPERIMENT 1 == Print Products ===========
Product p1 = { 200 <span class="org-string">"Arabica Coffee"</span> 4.5 }
Product p2 = { 300 <span class="org-string">"Orange 1kg "</span> 10 }
Product p3 = { 126 <span class="org-string">"XYWZ soft drink"</span> 15.6 
</pre>
</div>

<p>
Experiment 2: Print Product to memory stream (memory file)
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" &gt;&gt;&gt; EXPERIMENT 2 == Print Products to memory stream (memory file) ===="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::stringstream ss;
ss &lt;&lt; p1 &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; p2 &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; p3;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"ss = \n"</span> &lt;&lt; ss.str<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> &gt;&gt;&gt; EXPERIMENT 2 == Print Products to memory stream (memory file) ====
ss = 
 200 "Arabica Coffee" 4.5
 300 "Orange 1kg " 10
 126 "XYWZ soft drink" 15.6
</pre>
</div>

<p>
Experiment 3: Read product from memory stream.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" &gt;&gt;&gt; EXPERIMENT 3 == Read products from memory stream ===="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">Product</span> <span class="org-variable-name">pr</span>;
ss &gt;&gt; pr;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" pr1 = "</span> &lt;&lt; pr &lt;&lt; <span class="org-constant">std</span>::endl;
ss &gt;&gt; pr;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" pr2 = "</span> &lt;&lt; pr &lt;&lt; <span class="org-constant">std</span>::endl;
ss &gt;&gt; pr;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" pr3 = "</span> &lt;&lt; pr &lt;&lt; <span class="org-constant">std</span>::endl;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">&gt;&gt;&gt; EXPERIMENT 3 == Read products from memory stream ====
pr1 =  200 <span class="org-string">"Arabica Coffee"</span> 4.5
pr2 =  300 <span class="org-string">"Orange 1kg "</span> 10
pr3 =  126 <span class="org-string">"XYWZ soft drink"</span> 15.6
</pre>
</div>

<p>
Experiment 4: Read products from console (user types the products) and
types Ctrl + D sending EOF (End Of File) character when he is done.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" &gt;&gt;&gt; EXPERIMENT 4 == Read products from console ===="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">Product</span> <span class="org-variable-name">prod</span>;
<span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-negation-char">!</span><span class="org-constant">std</span>::cin.eof<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter product: "</span>;
    <span class="org-constant">std</span>::cin &gt;&gt; prod;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" prod = "</span> &lt;&lt; prod &lt;&lt; <span class="org-string">" ; "</span>
              &lt;&lt; <span class="org-string">" price = "</span> &lt;&lt; prod.Price<span class="org-rainbow-delimiters-depth-2">()</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>       
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">Enter product: 451 Lemon 6.7
 prod =  451 <span class="org-string">"Lemon"</span> 6.7 ;  price = 6.7
Enter product: 234 <span class="org-string">"Fresh atum 1kg"</span> 25.90
 prod =  234 <span class="org-string">"Fresh atum 1kg"</span> 25.9 ;  price = 25.9
Enter product: 461 <span class="org-string">"Cappucino coffee"</span> 25.60        
 prod =  461 <span class="org-string">"Cappucino coffee"</span> 25.6 ;  price = 25.6
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaec7d04" class="outline-3">
<h3 id="orgaec7d04"><span class="section-number-3">1.10</span> Custom IO manipulators</h3>
<div class="outline-text-3" id="text-1-10">
<p>
<b>Example: 1</b> 
</p>

<p>
Custom IO manipulator to print integers in hexadecimal format without
affecting IO global state.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Numeric</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-keyword">struct</span> <span class="org-type">to_hex</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-type">Numeric</span> <span class="org-variable-name">m_value</span>;
     <span class="org-function-name">to_hex</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Numeric</span> <span class="org-variable-name">value</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_value</span><span class="org-rainbow-delimiters-depth-2">(</span>value<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">to_hex</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>
     <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-keyword">return</span> os &lt;&lt; <span class="org-string">"0x"</span> &lt;&lt; <span class="org-constant">std</span>::uppercase &lt;&lt; <span class="org-constant">std</span>::hex
                   &lt;&lt; rhs.m_value &lt;&lt; <span class="org-constant">std</span>::nouppercase &lt;&lt; <span class="org-constant">std</span>::dec ;
     <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Usage: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"x = "</span> &lt;&lt; to_hex<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>2561<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">" y = "</span> &lt;&lt; 246 &lt;&lt; <span class="org-string">"\n"</span>;
x = 0xA01 y = 246

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"x = "</span> &lt;&lt; to_hex<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>255<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">" y = "</span> &lt;&lt; 246 &lt;&lt; <span class="org-string">"\n"</span>;
x = 0xFF y = 246
</pre>
</div>

<p>
<b>Example 2</b> Custom IO manipulators for numerical tables. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">type_traits</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Requires headers:  &lt;iostream&gt;, &lt;iomanip&gt;, &lt;type_traits&gt;</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span> 
   <span class="org-keyword">typename</span> <span class="org-type">Numeric</span>,
   <span class="org-comment-delimiter">// </span><span class="org-comment">Used for restricting the types of arguments that can be used. </span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">It will generate a compiler error for non-float arguments. </span>
   <span class="org-keyword">typename</span> <span class="org-constant">std</span>::<span class="org-constant">enable_if</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-constant">is_floating_point</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">Numeric</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>::value, <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::<span class="org-type">type</span>* = <span class="org-constant">nullptr</span>
   <span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">to_fix</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">Numeric</span> <span class="org-variable-name">m_value</span>;
    <span class="org-type">size_t</span>  <span class="org-variable-name">m_precision</span>;
    <span class="org-type">size_t</span>  <span class="org-variable-name">m_field_size</span>;

    <span class="org-function-name">to_fix</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Numeric</span> <span class="org-variable-name">value</span>, <span class="org-type">size_t</span> <span class="org-variable-name">fieldSize</span> = 8, <span class="org-type">size_t</span> <span class="org-variable-name">precision</span> = 4<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        m_value       = value;
        m_field_size  = fieldSize;
        m_precision   = precision;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">to_fix</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">size_t</span> <span class="org-variable-name">prec</span> = os.precision<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-constant">std</span>::<span class="org-type">ios</span> <span class="org-variable-name">config</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-3">}</span>;
        config.copyfmt<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;  
        os &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-3">(</span>rhs.m_precision<span class="org-rainbow-delimiters-depth-3">)</span>
           &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>rhs.m_field_size<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; rhs.m_value;
        <span class="org-constant">std</span>::cout.copyfmt<span class="org-rainbow-delimiters-depth-3">(</span>config<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> os;
 <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Experiment 1: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0.0; x &lt; 4.0; x += 0.5<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-keyword">using</span> <span class="org-type">T</span> = <span class="org-type">double</span>;
     <span class="org-type">double</span> <span class="org-variable-name">y</span> = <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; to_fix<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; to_fix<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>y<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Experiment 1 Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">0.0000  0.0000
0.5000  0.7071
1.0000  1.0000
1.5000  1.2247
2.0000  1.4142
2.5000  1.5811
3.0000  1.7321
3.5000  1.8708
</pre>
</div>

<p>
Experiment 2: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0.0; x &lt; 100.0; x += 10.0<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-keyword">using</span> <span class="org-type">T</span> = <span class="org-type">double</span>;
     <span class="org-type">double</span> <span class="org-variable-name">y</span> = <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; to_fix<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>x, 8, 2<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; to_fix<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>y, 9, 5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Experiment 2 output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> 0.00  0.00000
10.00  3.16228
20.00  4.47214
30.00  5.47723
40.00  6.32456
50.00  7.07107
60.00  7.74597
70.00  8.36660
80.00  8.94427
90.00  9.48683
</pre>
</div>

<p>
Experiment 3: Print table to file.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::ofstream report<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/tmp/report.txt"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0.0; x &lt; 100.0; x += 10.0<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-keyword">using</span> <span class="org-type">T</span> = <span class="org-type">double</span>;
     <span class="org-type">double</span> <span class="org-variable-name">y</span> = <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>;
     report &lt;&lt; to_fix<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>x, 8, 2<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; to_fix<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>y, 9, 5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Sync buffer with IO </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">force buffer to be written to IO </span>
report.flush<span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Force close</span>
report.close<span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Run shell command to check file </span>
&gt;&gt; .<span class="org-negation-char">!</span> head -n 3 /tmp/report.txt
    0.00  0.00000
   10.00  3.16228
   20.00  4.47214
&gt;&gt; 

&gt;&gt; .<span class="org-negation-char">!</span> tail -n 3 /tmp/report.txt
   70.00  8.36660
   80.00  8.94427
   90.00  9.48683
&gt;&gt; 
</pre>
</div>
</div>
</div>
<div id="outline-container-org92f632d" class="outline-3">
<h3 id="org92f632d"><span class="section-number-3">1.11</span> Redirect IO .rdbuf()</h3>
<div class="outline-text-3" id="text-1-11">
<p>
See: <a href="http://www.cplusplus.com/reference/ios/ios/rdbuf/">ios::rdbuf - C++ Reference</a>
</p>

<ul class="org-ul">
<li>Overload 1: Return pointer to stream buffer attached to stream.</li>
<li>Overload 2: Set pointer to stream buffer attached to stream and
clears the error state flags.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/* </span><span class="org-comment">Overload 1 [get] */</span> 
 <span class="org-type">streambuf</span>* <span class="org-constant">ios</span>::<span class="org-function-name">rdbuf</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">const</span>;

<span class="org-comment-delimiter">/* </span><span class="org-comment">Overload 2 [set] */</span> 
 <span class="org-type">streambuf</span>* <span class="org-constant">ios</span>::<span class="org-function-name">rdbuf</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">streambuf</span>* <span class="org-variable-name">sb</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Example: <b>Redirect std::cerr to std::stringstream string IO</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-function-name">std</span>::stringstream ss;

&gt;&gt; <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" Stderr output \n"</span>;
 <span class="org-type">Stderr</span> <span class="org-variable-name">output</span> 
&gt;&gt; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Backup pointer to cout stream buffer </span>
&gt;&gt; <span class="org-keyword">auto</span> buf = <span class="org-constant">std</span>::cerr.rdbuf<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_streambuf</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> *<span class="org-rainbow-delimiters-depth-1">)</span> @0x7ffe4c3bc4d8
&gt;&gt; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Redirect stream </span>
<span class="org-function-name">std</span>::cerr.rdbuf<span class="org-rainbow-delimiters-depth-1">(</span>ss.rdbuf<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
The global object std::cerr prints to stringstream instead of process'
stderr (standard error output):
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"hello world "</span>;
&gt;&gt; <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"pi = "</span> &lt;&lt; M_PI &lt;&lt; <span class="org-string">" exp(3.5) "</span> &lt;&lt; <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-1">(</span>3.5<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
</pre>
</div>

<p>
Get content of stream ss: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Stream content </span>
&gt;&gt; ss
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">stringstream</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fa0341bb018
&gt;&gt; 
&gt;&gt; ss.str<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-string">"hello world pi = 3.14159 exp(3.5) 33.1155"</span>
&gt;&gt;   
</pre>
</div>

<p>
Restore buffer:  
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::cerr.rdbuf<span class="org-rainbow-delimiters-depth-1">(</span>buf<span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"pi = "</span> &lt;&lt; M_PI &lt;&lt; <span class="org-string">" exp(3.5) "</span> &lt;&lt; <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-1">(</span>3.5<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
pi = 3.14159 exp<span class="org-rainbow-delimiters-depth-1">(</span>3.5<span class="org-rainbow-delimiters-depth-1">)</span> 33.1155  

</pre>
</div>
</div>
</div>
<div id="outline-container-orgd10f73e" class="outline-3">
<h3 id="orgd10f73e"><span class="section-number-3">1.12</span> Read whole input stream to string</h3>
<div class="outline-text-3" id="text-1-12">
<p>
Note: It is advisable to not use the function istreamToString with
large files &gt;= 1GB, otherwise it can cost 1GB of RAM. Large files
should be processed chunk-by-chunk in order to not consume an
unnecessary amount of memory.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-comment-delimiter">/** </span><span class="org-comment">@brief Read whole input stream to a string and returns it </span>
<span class="org-comment">  * Requires headers: &lt;iostream&gt; and &lt;sstream&gt;</span>
<span class="org-comment">  */</span>
<span class="org-function-name">std</span>::string istreamToString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">istream</span>&amp; <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>is.bad<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span> 
        <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: stream has errors."</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">ss</span>;
    ss &lt;&lt; is.rdbuf<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> ss.str<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Read std::cin stream - console (stdin) 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Use types a text and types CTRL + D when he is done sending EOF character </span>
&gt;&gt; <span class="org-keyword">auto</span> text = istreamToString<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::cin<span class="org-rainbow-delimiters-depth-1">)</span>; 
 A stdin input stream works <span class="org-type">like</span> <span class="org-variable-name">a</span> <span class="org-string">"console file"</span>.      
 In UNIX everything has a file interface, <span class="org-variable-name">works</span> with a file API, <span class="org-variable-name">everything</span> is a file.
 Type CTRL + D to send EOF <span class="org-keyword">and</span> close <span class="org-keyword">this</span> stream.

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"text = "</span> &lt;&lt; text2 &lt;&lt; <span class="org-constant">std</span>::endl;
text =  A stdin input stream works like a <span class="org-string">"console file"</span>.
 In UNIX everything has a file interface, works with a <span class="org-type">file</span> <span class="org-variable-name">API</span>, everything is <span class="org-type">a</span> <span class="org-variable-name">file</span>.
 Type CTRL + D to send EOF <span class="org-keyword">and</span> close <span class="org-keyword">this</span> stream.
</pre>
</div>

<p>
Read file input stream: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> ifs = <span class="org-constant">std</span>::ifstream<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/proc/sys/kernel/osrelease"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_ifstream</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f3edbc0a688

&gt;&gt; <span class="org-keyword">auto</span> os_release = istreamToString<span class="org-rainbow-delimiters-depth-1">(</span>ifs<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-warning">"</span><span class="org-string">4.20.16-100.fc28.x86_64</span>
<span class="org-string">"</span>

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; Linux-OS Release = "</span> &lt;&lt; os_release &lt;&lt; <span class="org-constant">std</span>::endl;
 =&gt;&gt; Linux-OS Release = 4.20.16-100.fc28.x86_64
</pre>
</div>

<p>
Read stringstream - memory stream. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::stringstream ms;
&gt;&gt; ms &lt;&lt; <span class="org-string">" UNIX - Linux OS2 Mainframes AIX VxWorks QNX "</span>;
&gt;&gt; ms &lt;&lt; <span class="org-string">"\n network TCP IP UDP SOCKET packets"</span>;
&gt;&gt; ms &lt;&lt; <span class="org-string">" \n binary bits octets speed 3G 4G 5G business flow currency"</span>;
&gt;&gt; ms &lt;&lt; <span class="org-string">" \n technology price technology technology technology"</span>;
&gt;&gt; ms &lt;&lt; <span class="org-constant">std</span>::flush;

<span class="org-comment-delimiter">// </span><span class="org-comment">Type of txt =&gt; std::string </span>
&gt;&gt; <span class="org-keyword">auto</span> txt = istreamToString<span class="org-rainbow-delimiters-depth-1">(</span>ms<span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"text = \n"</span> &lt;&lt; txt ;
text = 
 UNIX - Linux OS2 Mainframes AIX VxWorks QNX 
 network TCP IP UDP SOCKET packets 
 binary bits octets speed 3G 4G 5G business flow currency 
</pre>
</div>
</div>
</div>

<div id="outline-container-org11d6150" class="outline-3">
<h3 id="org11d6150"><span class="section-number-3">1.13</span> Saving and restoring IO flags</h3>
<div class="outline-text-3" id="text-1-13">
</div>
<div id="outline-container-org5d8deb8" class="outline-4">
<h4 id="org5d8deb8"><span class="section-number-4">1.13.1</span> Manual saving restoring</h4>
<div class="outline-text-4" id="text-1-13-1">
<p>
IO manipulators such as std::scientific, std::fixed, std::setprecision
or std::uppercase are stateful and permanently affects the IO flags
what can make the code hard to understand and cause unintended IO
changes. This issue can be solved by saving and restoring the IO
flags. 
</p>

<p>
Save IO state: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">========= Save IO flags =========</span>
<span class="org-function-name">std</span>::ios config<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">}</span>;
config.copyfmt<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Before changing IO flags: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"pi = "</span> &lt;&lt; M_PI &lt;&lt; <span class="org-string">" gravity = "</span> &lt;&lt; 9.8145723e3 &lt;&lt; <span class="org-string">" E = "</span> &lt;&lt; 956e6 &lt;&lt; <span class="org-string">"\n"</span>;
pi = 3.14159 gravity = 9814.57 E = 9.56e+08
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" true = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" false = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;
 <span class="org-constant">true</span> = 1 <span class="org-constant">false</span> = 0
&gt;&gt; 
</pre>
</div>

<p>
Change IO flags: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>3<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;
</pre>
</div>

<p>
After changing IO flags: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"pi = "</span> &lt;&lt; M_PI &lt;&lt; <span class="org-string">" gravity = "</span> &lt;&lt; 9.8145723e3 &lt;&lt; <span class="org-string">" E = "</span> &lt;&lt; 956e6 &lt;&lt; <span class="org-string">"\n"</span>;
pi = 3.142 gravity = 9814.572 E = 956000000.000

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"sqrt(2) = "</span> &lt;&lt; <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>2.0<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span> ;
sqrt<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span> = 1.414
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" true = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" false = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;
 <span class="org-constant">true</span> = <span class="org-constant">true</span> <span class="org-constant">false</span> = <span class="org-constant">false</span>
&gt;&gt; 
</pre>
</div>

<p>
Restore IO flags: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout.copyfmt<span class="org-rainbow-delimiters-depth-1">(</span>config<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
After restoring IO flags: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"pi = "</span> &lt;&lt; M_PI &lt;&lt; <span class="org-string">" gravity = "</span> &lt;&lt; 9.8145723e3 &lt;&lt; <span class="org-string">" E = "</span> &lt;&lt; 956e6 &lt;&lt; <span class="org-string">"\n"</span>;
pi = 3.14159 gravity = 9814.57 E = 9.56e+08

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"sqrt(2) = "</span> &lt;&lt; <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>2.0<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span> ;
sqrt<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span> = 1.41421

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" true = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" false = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;
 <span class="org-constant">true</span> = 1 <span class="org-constant">false</span> = 0 
</pre>
</div>
</div>
</div>
<div id="outline-container-org2b4438d" class="outline-4">
<h4 id="org2b4438d"><span class="section-number-4">1.13.2</span> Automatic saving and restoring IO flags with RAAI</h4>
<div class="outline-text-4" id="text-1-13-2">
<p>
Class for saving IO flags using RAAI.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Class for saving and restoring IO context.</label><pre class="src src-cpp"><span class="org-keyword">struct</span> <span class="org-type">IOContext</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">ios</span>      <span class="org-variable-name">m_config</span><span class="org-rainbow-delimiters-depth-2">{</span><span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-constant">std</span>::<span class="org-type">ostream</span>* <span class="org-variable-name">m_pos</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Save context </span>
    <span class="org-function-name">IOContext</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span> = <span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-2">)</span>: m_pos<span class="org-rainbow-delimiters-depth-2">(</span>&amp;os<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] saved IO flags"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        m_config.copyfmt<span class="org-rainbow-delimiters-depth-3">(</span>os<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Restore context </span>
    ~<span class="org-function-name">IOContext</span><span class="org-rainbow-delimiters-depth-2">()</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] restored IO flags"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        m_pos-&gt;copyfmt<span class="org-rainbow-delimiters-depth-3">(</span>m_config<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Test function: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Function testIOFlags for testing and demonstrating class IOContext.</label><pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">testIOFlags</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"===== Before ======="</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"pi = "</span> &lt;&lt; M_PI
               &lt;&lt; <span class="org-string">" gravity = "</span> &lt;&lt; 9.8145723e3
               &lt;&lt; <span class="org-string">" E = "</span> &lt;&lt; 956e6 &lt;&lt; <span class="org-string">"\n"</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" true = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" false = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"===== Context - IO flags changed ======="</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">{</span>  <span class="org-comment-delimiter">/* </span><span class="org-comment">Sub-scope start */</span>
         <span class="org-type">IOContext</span> <span class="org-variable-name">ctx</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">}</span>; <span class="org-comment-delimiter">/* </span><span class="org-comment">Save IO Flags */</span>

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"pi = "</span> &lt;&lt; M_PI
                   &lt;&lt; <span class="org-string">" gravity = "</span> &lt;&lt; 9.8145723e3
                   &lt;&lt; <span class="org-string">" E = "</span> &lt;&lt; 956e6 &lt;&lt; <span class="org-string">"\n"</span>;

         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" true = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" false = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;

        <span class="org-comment-delimiter">/* </span><span class="org-comment">End of sub-scope */</span>
     <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Object ctx destroyed here =&gt; IO flags restored </span>

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"===== After =&gt; IO flags restored ======="</span> &lt;&lt; <span class="org-string">"\n"</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"pi = "</span> &lt;&lt; M_PI
               &lt;&lt; <span class="org-string">" gravity = "</span> &lt;&lt; 9.8145723e3
               &lt;&lt; <span class="org-string">" E = "</span> &lt;&lt; 956e6 &lt;&lt; <span class="org-string">"\n"</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" true = "</span> &lt;&lt; <span class="org-constant">true</span> &lt;&lt; <span class="org-string">" false = "</span> &lt;&lt; <span class="org-constant">false</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">/** </span><span class="org-comment">--- End of function testIOFlags --- */</span>
</pre>
</div>

<p>
Test in REPL: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>CERN's ROOT repl session.</label><pre class="src src-cpp">&gt;&gt; testIOFlags<span class="org-rainbow-delimiters-depth-1">()</span>

===== Before =======
pi = 3.14159 gravity = 9814.57 E = 9.56e+08
 <span class="org-constant">true</span> = 1 <span class="org-constant">false</span> = 0
===== Context - IO flags changed =======
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> saved IO flags
pi = 3.142 gravity = 9814.572 E = 956000000.000
 <span class="org-constant">true</span> = <span class="org-constant">true</span> <span class="org-constant">false</span> = <span class="org-constant">false</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> restored IO flags
===== After =&gt; IO flags restored =======
pi = 3.14159 gravity = 9814.57 E = 9.56e+08
 <span class="org-constant">true</span> = 1 <span class="org-constant">false</span> = 0
&gt;&gt; 
&gt;&gt; 
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2019-11-08 Fri 14:17</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
