<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-07-05 Sun 19:38 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ - Building Systems and Build Automation</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp/c++ code examples and demonstrations."
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ - Building Systems and Build Automation</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgb60cfec">1. Building Systems</a>
<ul>
<li><a href="#org50a3175">1.1. Building System</a></li>
</ul>
</li>
<li><a href="#org4a50a9b">2. Make and GNU Make - Makefiles</a>
<ul>
<li>
<ul>
<li><a href="#org4c7332a">2.0.1. Overview</a></li>
<li><a href="#org8b9a42e">2.0.2. Project Example</a></li>
<li><a href="#orgb3fed70">2.0.3. Reading</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6ecd424">3. GNU Autotools Building System</a>
<ul>
<li><a href="#orgc73b642">3.1. Overview</a></li>
<li><a href="#org33631d0">3.2. Reference Card</a></li>
<li><a href="#org66a21f3">3.3. Example: Basic GNU autotools project</a>
<ul>
<li><a href="#orga1bee2e">3.3.1. Project Files</a></li>
<li><a href="#org6af32b0">3.3.2. Building Steps</a></li>
</ul>
</li>
<li><a href="#org6882e0a">3.4. Further Reading</a></li>
</ul>
</li>
<li><a href="#orgd0038bc">4. QMake Building System</a>
<ul>
<li>
<ul>
<li><a href="#org543e81e">4.0.1. Overview</a></li>
<li><a href="#orge7dc66a">4.0.2. QMake project example</a></li>
<li><a href="#org1665324">4.0.3. Further Reading</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<ul class="org-ul">
<li><a href='index.html'>Index</a></li>
</ul>

<div id="outline-container-orgb60cfec" class="outline-2">
<h2 id="orgb60cfec"><span class="section-number-2">1</span> Building Systems</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org50a3175" class="outline-3">
<h3 id="org50a3175"><span class="section-number-3">1.1</span> Building System</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Some building systems:
</p>

<ul class="org-ul">
<li><a href="https://cmake.org/">CMake</a> Meta building system which can generate project files and
building scripts for platform-preferred building systems. For
instance, it can generate Makefile for U*nix-like system, Ninja
build scripts, Visual Studio solutions and so on.
<ul class="org-ul">
<li>Note: CMake may not be the best building system or not have the best
IDEs. Now, it is supported by Microsft's Visual Studio and
JetBrains' Clion IDE and others.</li>
<li>See:
<ul class="org-ul">
<li><a href="http://cliutils.gitlab.io/modern-cmake/">An Introduction to Modern CMake</a></li>
<li><a href="https://gist.github.com/mbinna/c61dbb39bca0e4fb7d1f73b0d66a4fd1">Effective Modern CMake</a></li>
<li><a href="https://github.com/ttroy50/cmake-examples">https://github.com/ttroy50/cmake-examples</a></li>
<li><a href="https://cristianadam.eu/20181202/a-better-qnx-cmake-toolchain-file/">A Better QNX CMake Toolchain File - Cristian Adam</a></li>
</ul></li>
</ul></li>

<li><b>GNU Autotool</b> (GNU Building System) - One of the most used building
systems in open source projects for Unix-like operating systems,
specially Linux.
<ul class="org-ul">
<li>Projects using GNU autotool have the files: configure.ac and
Makefine.am. They often have the instruction for installing as:
./configure &amp;&amp; make &amp;&amp; make install.</li>
<li>Projects using Autotools: Emacs editor; GIT version control
system; GNU Core utils; GIMP image manipulation app.</li>
<li>Problems:
<ul class="org-ul">
<li>Brittle and poorly designed.</li>
<li>Hard to read</li>
<li>Hard to use and complicated</li>
<li>Requires many configuration files.</li>
<li>Does not work well on Windows</li>
<li>Not famililar for Windows users.</li>
</ul></li>
</ul></li>

<li><a href="https://github.com/microsoft/msbuild">MSBuild</a> / <b>Visual Studio Solutions</b>
<ul class="org-ul">
<li>Building system used by Microsft Visual Studio IDE. The
configuration files, <span class="underline">*.vcxproj</span> and <span class="underline">*.sln</span> of Visual Studio
Solution are both building systems scripts and project
configuration files.</li>
<li>Features:
<ul class="org-ul">
<li>Most used building system on MS-Windows for C# and C++ projects.</li>
<li>Some Windows frameworks such as MFC - Microsft Foundation and
ATL - Active Template Library only support Visual Studio
Solutions.</li>
</ul></li>
<li>Problems:
<ul class="org-ul">
<li>Only supported by Visual Studio IDE and Visual Studio Code Editor.</li>
<li>Only supported on Windows.</li>
<li>Lots of cryptic XML files, not human-readable and not intended
to be edited directly.</li>
<li>The code from Visual Solution files cannot be reused. Any
changes requires several clicks and browsing the IDE, thus not
scalable.</li>
<li>Hard to use external libraries dependencies.</li>
<li>Hard to build from command line, require batch script hacks.</li>
</ul></li>
<li>Note:
<ul class="org-ul">
<li>Visual Studio IDE, now has CMake support.</li>
<li>MSBuild engine now is open source available at <a href="https://github.com/microsoft/msbuild">https://github.com/microsoft/msbuild</a></li>
</ul></li>
<li>See:
<ul class="org-ul">
<li><a href="https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild?view=vs-2019">MSBuild concepts</a></li>
<li><a href="https://docs.microsoft.com/en-us/cpp/build/msbuild-visual-cpp?view=vs-2019">MSBuild on the command line - C++</a></li>
<li><a href="https://docs.microsoft.com/en-us/cpp/build/projects-and-build-systems-cpp?view=vs-2019">C/C++ projects and build systems in Visual Studio</a></li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/extensibility/internals/solution-dot-sln-file?view=vs-2019">Solution (.sln) file</a></li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/ide/solutions-and-projects-in-visual-studio?view=vs-2019">Solutions and projects in Visual Studio</a></li>
<li><a href="https://devblogs.microsoft.com/cppblog/building-your-c-application-with-visual-studio-code/">Building your C++ application with Visual Studio Code</a></li>
</ul></li>
</ul></li>

<li><a href="https://mesonbuild.com/">Meson</a> - "Meson is an open source build system meant to be both
extremely fast, and, even more importantly, as user friendly as
possible. The main design point of Meson is that every moment a
developer spends writing or debugging build definitions is a
second wasted. So is every second spent waiting for the build
system to actually start compiling code."
<ul class="org-ul">
<li>Features:
<ul class="org-ul">
<li>multiplatform support for Linux, macOS, Windows, GCC, Clang,
Visual Studio and others</li>
<li>supported languages include C, C++, D, Fortran, Java, Rust</li>
<li>built-in multiplatform dependency provider that works together
with distro packages</li>
</ul></li>
<li>Side notes: 
<ul class="org-ul">
<li>Can generate Visual Studio Projects</li>
<li>Uses Ninja building system as backend.</li>
<li>Support CMake dependencies</li>
<li>Supports Conan package manager</li>
</ul></li>
<li>Projects using Meson:
<ul class="org-ul">
<li><a href="https://gitlab.gnome.org/GNOME/nautilus">Nautilus</a></li>
<li><a href="https://github.com/systemd/systemd">SystemD</a></li>
<li><a href="https://github.com/radare/radare2">Radare2</a></li>
<li><a href="https://mesonbuild.com/Users.html">Full list</a></li>
</ul></li>
<li>IDE Support:
<ul class="org-ul">
<li><a href="https://wiki.gnome.org/Apps/Builder">Gnome Builder</a></li>
<li><a href="https://www.kdevelop.org/">KDevelop</a></li>
<li><a href="https://www.eclipse.org/cdt/">Eclipse CDT (Experimental support)</a></li>
<li><a href="https://github.com/prozum/meson-cmake-wrapper">Meson CMake Wrapper</a> =&gt; For IDEs that support CMake (Visual
Studio, CLion, QTCreator, KDevelop)</li>
</ul></li>
<li>Problems:
<ul class="org-ul">
<li>Less IDE support and adoption than CMake and harder to use
with IDEs.</li>
</ul></li>
</ul></li>

<li><b>QMake</b> - QT Framework Building Systems
<ul class="org-ul">
<li>Problem: Brittle and only supported by QTCreator IDE.</li>
<li>Note: QT Now supports CMake</li>
</ul></li>

<li><b>KBuild</b> - Linux Kernel's building system. =&gt; Building system used
for building Linux kernel image and kernel modules (device drivers).</li>

<li><a href="https://build2.org/">build2</a> - "build2 is an open source (MIT), cross-platform build
toolchain for developing and packaging C++ code. It is a hierarchy
of tools that includes the build system, package dependency manager
(for package consumption), and project dependency manager (for
project development)."
<ul class="org-ul">
<li>See: <a href="https://news.ycombinator.com/item?id=17188851">Build2, a Cargo-like dependency and build manager for C/C++ | Hacker News</a></li>
</ul></li>

<li><a href="https://xmake.io">xmake</a> -  "xmake is a cross-platform build utility based on lua. The
project focuses on making development and building easier and
provides many features (.e.g package, install, plugin, macro,
action, option, task &#x2026;), so that any developer can quickly pick
it up and enjoy the productivity boost when developing and building
project. "
<ul class="org-ul">
<li>Github: <a href="https://github.com/tboox/xmake">https://github.com/tboox/xmake</a></li>
<li>Advatange:
<ul class="org-ul">
<li>Lua-like syntax</li>
<li>Less verbose than CMake</li>
<li>Run lua scripts</li>
<li>Generation of projects, for instance Visual studio solutions.</li>
</ul></li>
</ul></li>

<li><a href="https://docs.bazel.build/versions/master/bazel-overview.html">Bazel</a> (Building system created by Google for C and C++.)
<ul class="org-ul">
<li>"Bazel is an open-source build and test tool similar to Make,
Maven, and Gradle. It uses a human-readable, high-level build
language. Bazel supports projects in multiple languages and
builds outputs for multiple platforms. Bazel supports large
codebases across multiple repositories, and large numbers of
users."</li>
<li>Note: Written in Java.</li>
</ul></li>

<li><b>Make</b> (GNU Make, BSD Make and NMake) - Simple and quick building
system more used on Unix-like operating systems.
<ul class="org-ul">
<li>Disadvantages:
<ul class="org-ul">
<li>Fragmentation - There are many variants (GNU Make, BSD Make
and NMake - Microsft's Make), although GNU Make is the most
used one.</li>
<li>Brittle</li>
<li>Hard to modify</li>
<li>Hard to add dependencies</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org4a50a9b" class="outline-2">
<h2 id="org4a50a9b"><span class="section-number-2">2</span> Make and GNU Make - Makefiles</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org4c7332a" class="outline-4">
<h4 id="org4c7332a"><span class="section-number-4">2.0.1</span> Overview</h4>
<div class="outline-text-4" id="text-2-0-1">
<p>
Despite being one of the oldest building systems for C and C++, dating
back to 1976, Make is still widely used on Unix-like operating
systems, such as Linux, BSD-variants, MacOSX and so on. Make is not
only useful for C or C++, the tool can also be used with any other
programming language or for any type of building automation such as
compiling Latex (Tex) files. 
</p>

<p>
Make Variants (Implementations):
</p>
<ul class="org-ul">
<li>GNU Make (Most used)</li>
<li>BSD Make</li>
<li>NMake - Microsft's Make</li>
</ul>

<p>
Note: 
</p>
<ul class="org-ul">
<li>This text assumes that the <b>Make</b> used is <b>GNU Make</b></li>
</ul>

<p>
Advantages: 
</p>
<ul class="org-ul">
<li>Easier usage</li>
<li>Available on most Unix-like operating systems</li>
<li>Can be used for automating any type of building.</li>
</ul>

<p>
Drawbacks: 
</p>

<ul class="org-ul">
<li>Makefiles uses tabs instead of spaces which makes it brittle and
easier to break if the editor settings are not appropriate.</li>

<li>Fragmentation: there is no a single Make tool, actually there are
many incompatible implementations, namely: BSD Make; GNU Make,
mostly used on Linux; Microsft's Make or NMake.</li>

<li>Hard to use on Windows, Make requires many helper executables
such as echo, cp, ls, rm, &#x2026;</li>

<li>Poor IDE support</li>

<li>No scalable for large projects</li>

<li>Hard to change</li>

<li>Hard to add dependencies</li>

<li>Hard to understand and modify</li>
</ul>

<p>
<b>Command Line Summary</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Make Command</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">$ make &#x2013;version</td>
<td class="org-left">Show version</td>
</tr>

<tr>
<td class="org-left">$ make &#x2013;help</td>
<td class="org-left">Show help</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make</td>
<td class="org-left">Run the file 'Makefile' in the current directory, executing the 'all' target.</td>
</tr>

<tr>
<td class="org-left">$ make CC=clang CXX=clang++</td>
<td class="org-left">Target 'all' for current Makefile, but sets C compiler to clang and C++ one to clang++</td>
</tr>

<tr>
<td class="org-left">$ make &lt;TARGET&gt;</td>
<td class="org-left">Run the target &lt;TARGET&gt;</td>
</tr>

<tr>
<td class="org-left">$ make &lt;TARGET&gt; VAR1=VAL1 VAR2=VAL2</td>
<td class="org-left">Run some target named &lt;TARGET&gt; setting variable VAR1 to VAL1, VAR2 to VAL2.</td>
</tr>

<tr>
<td class="org-left">$ make clean</td>
<td class="org-left">Run the target 'clean' for the Makefile in current directory.</td>
</tr>

<tr>
<td class="org-left">$ make install</td>
<td class="org-left">Run the target 'install' for the current Makefile</td>
</tr>

<tr>
<td class="org-left">$ make help</td>
<td class="org-left">Run the target 'help' for the current Makefile.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make -C <code>/path/dir</code></td>
<td class="org-left">Run the file 'Makefile' in the directory  <code>/path/dir</code>, executes 'all' target.</td>
</tr>

<tr>
<td class="org-left">$ make -C <code>/path/dir</code> &lt;TARGET&gt;</td>
<td class="org-left">Executes target &lt;TARGET&gt; of Makefile in  <code>/path/dir</code></td>
</tr>

<tr>
<td class="org-left">$ make -f Other.make</td>
<td class="org-left">Run the Makefile named 'Other.make' in current directory</td>
</tr>

<tr>
<td class="org-left">$ make -f Other.make &lt;TARGET&gt;</td>
<td class="org-left">Run the target &lt;TARGET&gt; of Makefile named 'Other.make' in current directory.</td>
</tr>

<tr>
<td class="org-left">$ make -C <code>/path/dir</code> -f Other.make</td>
<td class="org-left">Run the Makefile named Other.make' in directory <code>/path/dir</code>,  executes 'all' target</td>
</tr>

<tr>
<td class="org-left">$ make -C <code>/path/dir</code> -f Other.make &lt;TARGET&gt;</td>
<td class="org-left">Run the Makefile named Other.make' in directory <code>/path/dir</code>,  executes 'all' target</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Common Make variables Summary</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">CC</td>
<td class="org-left">C compiler, most common value is 'gcc'</td>
</tr>

<tr>
<td class="org-left">CXX</td>
<td class="org-left">C++ Compiler, most common value is 'g++'</td>
</tr>

<tr>
<td class="org-left">LD</td>
<td class="org-left">Linker</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CFLAGS</td>
<td class="org-left">C compilation flags, i.e: -Wall -Wextra -g &#x2026;</td>
</tr>

<tr>
<td class="org-left">CXXFLAGS</td>
<td class="org-left">C++ compilation flags</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
<b>Target Shortcuts summary</b> 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Target</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$@</td>
<td class="org-left">target file name</td>
</tr>

<tr>
<td class="org-left">$(@D)</td>
<td class="org-left">target path (directory only)</td>
</tr>

<tr>
<td class="org-left">$(@F)</td>
<td class="org-left">target file name without directory</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Dependencies</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$&lt;</td>
<td class="org-left">name of first dependency</td>
</tr>

<tr>
<td class="org-left">$*</td>
<td class="org-left">name of first dependency without extension</td>
</tr>

<tr>
<td class="org-left">$^</td>
<td class="org-left">name of all dependencies of the target</td>
</tr>

<tr>
<td class="org-left">$(&lt;D)</td>
<td class="org-left">path of first dependencies</td>
</tr>

<tr>
<td class="org-left">$(&lt;F)</td>
<td class="org-left">paths of all dependencies</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Makefile Variable Tricks Summary</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Trick</th>
<th scope="col" class="org-left">Expansion</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">SRC     := $(wildcard src/*.cpp)</td>
<td class="org-left">SRC := src/fil1.cpp src/file2.cpp &#x2026;</td>
<td class="org-left">Gets all files with *.cpp extension in ./src</td>
</tr>

<tr>
<td class="org-left">packs   := n0 n1 n2</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">packs-p := $(addprefix &#x2013;pack ,$(packs))</td>
<td class="org-left">pack-p := &#x2013;pack n1 &#x2013;pack n2 &#x2013;pack n3</td>
<td class="org-left">Add prefix &#x2013;pack to each <code>n[i]</code></td>
</tr>

<tr>
<td class="org-left">pwd     := $(shell pwd)</td>
<td class="org-left">pwd := /home/archbox/project1</td>
<td class="org-left">Expands to shell command output.</td>
</tr>

<tr>
<td class="org-left"><code>${HOME}</code></td>
<td class="org-left">/home/user/username</td>
<td class="org-left">Expands to environment variable</td>
</tr>

<tr>
<td class="org-left">file    := ${HOME}/file1.exe</td>
<td class="org-left">/home/user/username/file1.exe</td>
<td class="org-left">-</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Multi line variable assignment
</p>

<div class="org-src-container">
<pre class="src src-makefile"><span class="org-variable-name">CFLAGS</span>  = -DUSE_STDPERIPH_DRIVER
<span class="org-variable-name">CFLAGS</span> += -c -fmessage-length=0 -g3 -gdwarf-2 -O0 -Wall -Wa,-adhlns=<span class="org-string">"</span><span class="org-makefile-targets"><span class="org-string">$</span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-constant">@</span></span></span><span class="org-string">.lst"</span>
<span class="org-variable-name">CFLAGS</span> += -mthumb -mcpu=cortex-m4
<span class="org-variable-name">CFLAGS</span> += -MMD -MP -MF<span class="org-string">"</span><span class="org-makefile-targets"><span class="org-string">$</span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-constant">@</span></span></span><span class="org-string">.d"</span> -MT<span class="org-string">"</span><span class="org-makefile-targets"><span class="org-string">$</span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-constant">@</span></span></span><span class="org-string">.d"</span>
<span class="org-variable-name">CFLAGS</span> += -Iinc -Iinc/cmsis -Iinc/peripherals -Iinc/stm32f4xx
</pre>
</div>
</div>
</div>

<div id="outline-container-org8b9a42e" class="outline-4">
<h4 id="org8b9a42e"><span class="section-number-4">2.0.2</span> Project Example</h4>
<div class="outline-text-4" id="text-2-0-2">
<p>
<b>File: Makefile</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">   <span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------#</span>
   <span class="org-comment-delimiter">#     </span><span class="org-comment">Compilation and Linker Settings               #</span>
   <span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------#</span>

CXX = g++   <span class="org-comment-delimiter"># </span><span class="org-comment">C++ Compiler</span>
CC  = gcc   <span class="org-comment-delimiter"># </span><span class="org-comment">C Compiler</span>

CCFLAGS  =                          <span class="org-comment-delimiter"># </span><span class="org-comment">C compiler flags</span>
CXXFLAGS = -std=c++1z -pedantic -Wall -Wextra <span class="org-comment-delimiter"># </span><span class="org-comment">C++ Compiler flags</span>

LDFLAGS   =   <span class="org-comment-delimiter"># </span><span class="org-comment">C Linker Flags</span>
LDXXFLAGS =   <span class="org-comment-delimiter"># </span><span class="org-comment">C++ Linker flags</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">DEBUG = 1 =&gt; Enables debug building</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">DEBUG = 0 =&gt; Enable release building</span>
DEBUG ?= 0
<span class="org-function-name">ifeq</span> ($(<span class="org-sh-quoted-exec">DEBUG</span>), 1)
    <span class="org-comment-delimiter"># </span><span class="org-comment">(-g)  =&gt; Enable debug symbols</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">(-O0) =&gt; Disable optimizations</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">-DNDEBUG =&gt; Enable assertions</span>
    CXXFLAGS  += -g -O0  -DNDEBUG
<span class="org-keyword">else</span>
     <span class="org-comment-delimiter"># </span><span class="org-comment">Release mode =&gt;&gt; Enable optimization</span>
     CXXFLAGS += -O3
     <span class="org-comment-delimiter"># </span><span class="org-comment">Enable Link-time optimiztion</span>
     LDXXFLAGS += <span class="org-comment-delimiter"># </span><span class="org-comment">-flto -ffunction-sections -fdata-sections</span>
endif

APP2_OBJS = app2.o stats.o

   <span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------#</span>
   <span class="org-comment-delimiter">#     </span><span class="org-comment">Makefile Rules                                #</span>
   <span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------#</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Main rule executed when use runs '$ make' without</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">any argument.</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------</span>
<span class="org-function-name">all</span>: app1.bin app2.bin

<span class="org-comment-delimiter"># </span><span class="org-comment">This rule builds the executable 'app1.bin'</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">----------------------------------------------------</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$^ =&gt; Refers to all dependencies (app1.o, app1.o)</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$@ =&gt; Refers to the target name, 'app1.bin'</span>
<span class="org-function-name">app1.bin</span> : app1.o stats.o
        @echo -e <span class="org-string">"\n [INFO] Building executable 'app1.bin'"</span>
        $(<span class="org-sh-quoted-exec">CXX</span>) -o <span class="org-keyword">$@</span> $^ $(<span class="org-sh-quoted-exec">LDXXFLAGS</span>)

<span class="org-comment-delimiter"># </span><span class="org-comment">This rule builds the executable 'app2.bin'</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">----------------------------------------------------</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$^ =&gt; Refers to all dependencies (app1.o, app1.o)</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$@ =&gt; Refers to the target name, 'app1.bin'</span>
<span class="org-function-name">app2.bin</span> : $(<span class="org-sh-quoted-exec">APP2_OBJS</span>)
        @echo -e <span class="org-string">"\n [INFO] Building executable 'app2.bin'"</span>
        $(<span class="org-sh-quoted-exec">CXX</span>) -o <span class="org-keyword">$@</span> $^ $(<span class="org-sh-quoted-exec">LDXXFLAGS</span>)

<span class="org-comment-delimiter"># </span><span class="org-comment">Compiles all *.cpp files to *.o (object-code files) which</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">are inputs to the linker.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------------------</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$&lt; =&gt; Name of dependency (on right-hand size, example: someFile.cpp)</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$@ =&gt; Name of target (on the left-hand side)</span>
<span class="org-comment-delimiter">#</span>
%.o : %.cpp
        @echo -e <span class="org-string">"\n [INFO] Building object code: $&lt;"</span>
        $(<span class="org-sh-quoted-exec">CXX</span>) -c $&lt; -o <span class="org-keyword">$@</span>  $(<span class="org-sh-quoted-exec">CXXFLAGS</span>)

<span class="org-comment-delimiter"># </span><span class="org-comment">This rule runs the executable app1.bin, the dependency is 'app1.bin'</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">------------------------------------------------------------</span>
<span class="org-function-name">app1_run</span>: app1.bin
        ./app1.bin

<span class="org-comment-delimiter"># </span><span class="org-comment">This rule deletes all object-codes (*.o, *.bin, *.so, *.dll, *.exe ...)</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-------------------------------------------------------</span>
<span class="org-function-name">clean</span>:
        @echo -e <span class="org-string">"\n [INFO] Cleaning compilation output."</span>
        rm -rf -v *.o *.bin

<span class="org-function-name">install</span>: app1.bin app2.bin
        @echo -e <span class="org-string">"\n [INFO] Installing application to: $(</span><span class="org-sh-quoted-exec">INSTALL_PATH</span><span class="org-string">)"</span>
        mkdir -p $(<span class="org-sh-quoted-exec">INSTALL_PATH</span>)
        cp -rv $^ $(<span class="org-sh-quoted-exec">INSTALL_PATH</span>)
</pre>
</div>

<p>
<b>File: stats.hpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#if</span><span class="org-negation-char"><span class="org-preprocessor">n</span></span><span class="org-preprocessor">def</span> _STATS_HPP_
<span class="org-preprocessor">#define</span> <span class="org-variable-name">_STATS_HPP_</span>

<span class="org-keyword">class</span> <span class="org-type">Stats</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-function-name">Stats</span><span class="org-rainbow-delimiters-depth-2">()</span>;
        ~<span class="org-function-name">Stats</span><span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-function-name">Stats</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Stats</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;
        <span class="org-type">Stats</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Stats</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;
        <span class="org-type">void</span>   <span class="org-function-name">add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-type">void</span>   <span class="org-function-name">clear</span><span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-type">double</span> <span class="org-function-name">mean</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;
        <span class="org-type">double</span> <span class="org-function-name">sum</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">const</span>;
        <span class="org-type">size_t</span> <span class="org-function-name">count</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;   
<span class="org-function-name">private</span>:
        <span class="org-keyword">struct</span> <span class="org-type">pimpl</span>;
        <span class="org-type">pimpl</span>* <span class="org-variable-name">m_pimpl</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-preprocessor">#endif</span> 
</pre>
</div>

<p>
<b>File: stats.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">numeric</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">stats.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-constant">Stats</span>::<span class="org-type">pimpl</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">dataset</span> = <span class="org-rainbow-delimiters-depth-2">{}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">Stats</span>::Stats<span class="org-rainbow-delimiters-depth-1">()</span>: m_pimpl<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-constant">Stats</span>::<span class="org-type">pimpl</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">Stats</span>::~Stats<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [INFO] ~Stats() destructor called. Ok. "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">delete</span> m_pimpl;
    m_pimpl = <span class="org-constant">nullptr</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-constant">Stats</span>::<span class="org-function-name">add</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">{</span>
    m_pimpl-&gt;dataset.push_back<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-constant">Stats</span>::<span class="org-function-name">clear</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   m_pimpl-&gt;dataset.clear<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">double</span> <span class="org-constant">Stats</span>::<span class="org-function-name">sum</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">const</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::accumulate<span class="org-rainbow-delimiters-depth-2">(</span> m_pimpl-&gt;dataset.begin<span class="org-rainbow-delimiters-depth-3">()</span>
                          , m_pimpl-&gt;dataset.end<span class="org-rainbow-delimiters-depth-3">()</span>, 0.0<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">double</span> <span class="org-constant">Stats</span>::<span class="org-function-name">mean</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">const</span> 
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> <span class="org-keyword">this</span>-&gt;sum<span class="org-rainbow-delimiters-depth-2">()</span> / m_pimpl-&gt;dataset.size<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">size_t</span> <span class="org-constant">Stats</span>::<span class="org-function-name">count</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> m_pimpl-&gt;dataset.size<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>File: app1.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">stats.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] Running application 'app1' - OK"</span> &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-type">Stats</span> <span class="org-variable-name">st</span>;
      st.add<span class="org-rainbow-delimiters-depth-2">(</span>10.0<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>20.6354<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>-5.62<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>8.623<span class="org-rainbow-delimiters-depth-2">)</span>;
      st.add<span class="org-rainbow-delimiters-depth-2">(</span>20.0<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>20.6354<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>-5.62<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>8.623<span class="org-rainbow-delimiters-depth-2">)</span>;

      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt; st.count() = "</span> &lt;&lt; st.count<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt;   st.sum() = "</span> &lt;&lt; st.sum<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt;  st.mean() = "</span> &lt;&lt; st.mean<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>File: app2.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string">"stats.hpp"</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Running application: 'app2' - OK"</span> &lt;&lt; <span class="org-string">"\n"</span>;

     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-keyword">return</span> EXIT_FAILURE;
     <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-type">Stats</span> <span class="org-variable-name">st</span>;

     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 1; i &lt; argc; i++<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
           st.add<span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-4">(</span>argv<span class="org-rainbow-delimiters-depth-5">[</span>i<span class="org-rainbow-delimiters-depth-5">]</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">invalid_argument</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">{</span>
           <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" Error: invalid input &lt;"</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>i<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-constant">std</span>::endl;
           <span class="org-keyword">return</span> EXIT_FAILURE; 
        <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt; st.count() = "</span> &lt;&lt; st.count<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt;   st.sum() = "</span> &lt;&lt; st.sum<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt;  st.mean() = "</span> &lt;&lt; st.mean<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;    

     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Run target 'all'</b> (Release mode)
</p>

<ul class="org-ul">
<li>$ make =&gt; Runs rule 'all'</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ make

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building object code: stats.cpp
g++    -c stats.cpp -o <span class="org-keyword">stats.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app1.bin'</span>
g++    -o <span class="org-keyword">app1.bin</span> app1.o stats.o  

 [INFO] Building object code: app2.cpp
g++    -c app2.cpp -o <span class="org-keyword">app2.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app2.bin'</span>
g++    -o <span class="org-keyword">app2.bin</span> app2.o stats.o  

</pre>
</div>

<p>
<b>Run target 'all'</b> (Debug Mode)
</p>

<p>
Run target 'all' which builds target 'app1.bin', 'app2.bin'
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make <span class="org-variable-name">DEBUG</span>=1

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -g -O0  -DNDEBUG

 [INFO] Building object code: stats.cpp
g++    -c stats.cpp -o <span class="org-keyword">stats.o</span>  -std=c++1z -pedantic -Wall -Wextra  -g -O0  -DNDEBUG

 [INFO] Building executable <span class="org-string">'app1.bin'</span>
g++    -o <span class="org-keyword">app1.bin</span> app1.o stats.o 

 [INFO] Building object code: app2.cpp
g++    -c app2.cpp -o <span class="org-keyword">app2.o</span>  -std=c++1z -pedantic -Wall -Wextra  -g -O0  -DNDEBUG

 [INFO] Building executable <span class="org-string">'app2.bin'</span>
g++    -o <span class="org-keyword">app2.bin</span> app2.o stats.o 

</pre>
</div>

<p>
Debug application 'app1.bin'
</p>

<div class="org-src-container">
<pre class="src src-sh"> $ gdb --silent app1.bin 
 Printing of typedefs defined<span class="org-keyword"> in</span> a class<span class="org-keyword"> in</span> on
 Reading symbols from app1.bin...done.

 (gdb) list
 1      <span class="org-comment-delimiter">#</span><span class="org-comment">include &lt;iostream&gt;</span>
 2      
 3      <span class="org-comment-delimiter">#</span><span class="org-comment">include &lt;stats.hpp&gt; </span>
 ... ... ... ... 

 <span class="org-comment-delimiter"># </span><span class="org-comment">Set breaking point at main() </span>
 (gdb) b main

 <span class="org-comment-delimiter"># </span><span class="org-comment">Run program app1.bin </span>
 (gdb) r

 gdb) n
  [TRACE] Running application <span class="org-string">'app1'</span> - OK
 9              Stats st;

 (gdb) p st
 $<span class="org-variable-name">1</span> = {
   m_pimpl = 0x616280
 }

 ... ...    ... ...    ... ...    ... ... 

(gdb) p st-&gt;m_pimpl-&gt;dataset
$<span class="org-variable-name">5</span> = std::vector of length 8, capacity 8 = {10, 20.635400000000001, -5.6200000000000001, 
  8.6229999999999993, 20, 20.635400000000001, -5.6200000000000001, 8.6229999999999993}
(gdb) 
</pre>
</div>

<p>
<b>Run target 'clean'</b>
</p>

<p>
Clean all compilation files: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make clean

 [INFO] Cleaning compilation output.
rm -rf -v *.o *.bin
removed <span class="org-string">'app1.o'</span>
removed <span class="org-string">'app2.o'</span>
removed <span class="org-string">'stats.o'</span>
removed <span class="org-string">'app1.bin'</span>
removed <span class="org-string">'app2.bin'</span>
</pre>
</div>

<p>
<b>Run target 'app1.bin'</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make app1.bin

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building object code: stats.cpp
g++    -c stats.cpp -o <span class="org-keyword">stats.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app1.bin'</span>
g++    -o <span class="org-keyword">app1.bin</span> app1.o stats.o  
</pre>
</div>

<p>
<b>Run target 'app2.bin'</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make app2.bin

 [INFO] Building object code: app2.cpp
g++    -c app2.cpp -o <span class="org-keyword">app2.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app2.bin'</span>
g++    -o <span class="org-keyword">app2.bin</span> app2.o stats.o  
</pre>
</div>

<p>
<b>Run target 'app1_run'</b>
</p>

<p>
The target app1_run runs the executable 'app1.bin'. It is only
compiled if not built yet.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make app1_run

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building object code: stats.cpp
g++    -c stats.cpp -o <span class="org-keyword">stats.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app1.bin'</span>
g++    -o <span class="org-keyword">app1.bin</span> app1.o stats.o  
./app1.bin
 [TRACE] Running application <span class="org-string">'app1'</span> - OK
  =&gt; st.count() = 8
  =&gt;   st.sum() = 77.2768
  =&gt;  st.mean() = 9.6596
 [INFO] ~Stats() destructor called. Ok. 
</pre>
</div>

<p>
Run target again: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make app1_run
./app1.bin
 [TRACE] Running application <span class="org-string">'app1'</span> - OK
  =&gt; st.count() = 8
  =&gt;   st.sum() = 77.2768
  =&gt;  st.mean() = 9.6596
 [INFO] ~Stats() destructor called. Ok. 
</pre>
</div>

<p>
<b>Run target 'install'</b>
</p>

<p>
Run target 'make install'
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make install <span class="org-variable-name">INSTALL_PATH</span>=/tmp/bin <span class="org-variable-name">DEBUG</span>=1

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -g -O0  -DNDEBUG

  ... ... ...   ... ... ...   ... ... ...   ... ... ...   ... ... ... 

 [INFO] Installing application to: /tmp/bin
mkdir -p /tmp/bin
cp -rv app1.bin app2.bin /tmp/bin
<span class="org-string">'app1.bin'</span> -&gt; <span class="org-string">'/tmp/bin/app1.bin'</span>
<span class="org-string">'app2.bin'</span> -&gt; <span class="org-string">'/tmp/bin/app2.bin'</span>
</pre>
</div>

<p>
Test applications/executables: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ /tmp/bin/app2.bin 10.354 -9.243  100.523 5.6154
 [INFO] Running application: <span class="org-string">'app2'</span> - OK
  =&gt; st.count() = 4
  =&gt;   st.sum() = 107.249
  =&gt;  st.mean() = 26.8123
 [INFO] ~Stats() destructor called. Ok. 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb3fed70" class="outline-4">
<h4 id="orgb3fed70"><span class="section-number-4">2.0.3</span> Reading</h4>
<div class="outline-text-4" id="text-2-0-3">
<p>
<b>Documentation</b>
</p>

<ul class="org-ul">
<li><b>GNU Make Manual</b>
<ul class="org-ul">
<li><a href="http://www.chiark.greenend.org.uk/doc/make-doc/make.html/index.html#SEC_Contents">http://www.chiark.greenend.org.uk/doc/make-doc/make.html/index.html#SEC_Contents</a></li>
</ul></li>
</ul>

<p>
<b>Useful Reading</b>
</p>

<ul class="org-ul">
<li><b>Make (Software)</b> - Wikipedia 
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Make_(software)">https://en.wikipedia.org/wiki/Make_(software)</a></li>
</ul></li>

<li><b>Tutorial on writing makefiles</b>
<ul class="org-ul">
<li><a href="https://www.math.colostate.edu/~yzhou/computer/writemakefile.html">https://www.math.colostate.edu/~yzhou/computer/writemakefile.html</a></li>
</ul></li>

<li><b>Practical Makefiles, by example</b> - John Tsiombikas
<ul class="org-ul">
<li><a href="http://nuclear.mutantstargoat.com/articles/make/">http://nuclear.mutantstargoat.com/articles/make/</a></li>
</ul></li>

<li><b>Creating a Basic Makefile</b> - Flex Technologies
<ul class="org-ul">
<li><a href="https://felixcrux.com/blog/creating-basic-makefile%3C">https://felixcrux.com/blog/creating-basic-makefile<</a></li>
</ul></li>

<li><b>Debugging make -Tips and tricks to get make working for you, not
against you</b> - Peter Seebach
<ul class="org-ul">
<li><a href="https://www.ibm.com/developerworks/library/l-debugmake/index.html">https://www.ibm.com/developerworks/library/l-debugmake/index.html</a></li>
</ul></li>

<li><b>What’s Wrong With GNU make?</b>
<ul class="org-ul">
<li><a href="http://www.conifersystems.com/whitepapers/gnu-make/">http://www.conifersystems.com/whitepapers/gnu-make/</a></li>
</ul></li>

<li><b>How can I configure my makefile for debug and release builds?</b>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/1079832">https://stackoverflow.com/questions/1079832</a></li>
</ul></li>
</ul>

<p>
<b>Makefiles for Latex, Tex compilation</b> 
</p>

<ul class="org-ul">
<li><b>latex and Makefiles</b>
<ul class="org-ul">
<li><a href="http://www.usenix.org.uk/content/latex.html">http://www.usenix.org.uk/content/latex.html</a></li>
</ul></li>

<li><b>Makefiles for Latex</b>
<ul class="org-ul">
<li><a href="https://scaron.info/blog/makefiles-for-latex.html">https://scaron.info/blog/makefiles-for-latex.html</a></li>
</ul></li>

<li><b>A simple Makefile for LaTeX projects.</b>
<ul class="org-ul">
<li><a href="https://gist.github.com/Nemo157/539229">https://gist.github.com/Nemo157/539229</a></li>
</ul></li>

<li><b>Continuous integration and automatic deployment of LaTeX files</b>
<ul class="org-ul">
<li><a href="https://ljvmiranda921.github.io/notebook/2018/02/04/continuous-integration-for-latex/">https://ljvmiranda921.github.io/notebook/2018/02/04/continuous-integration-for-latex/</a></li>
</ul></li>
</ul>

<p>
<b>Makefiles for general automation</b>
</p>

<ul class="org-ul">
<li><b>Reproducibility with Make</b>
<ul class="org-ul">
<li><a href="https://the-turing-way.netlify.com/make/make.html">https://the-turing-way.netlify.com/make/make.html</a></li>
</ul></li>

<li><b>GNU Make for Reproducible Data Analysis</b>
<ul class="org-ul">
<li><a href="http://zmjones.com/make/">http://zmjones.com/make/</a></li>
</ul></li>

<li><b>Using Make for reproducible scientific analysis</b>
<ul class="org-ul">
<li><a href="https://www.software.ac.uk/blog/2016-10-06-using-make-reproducible-scientific-analyses">https://www.software.ac.uk/blog/2016-10-06-using-make-reproducible-scientific-analyses</a></li>
</ul></li>

<li><b>Reproducible bioinformatics pipelines using Make</b>
<ul class="org-ul">
<li><a href="http://byronjsmith.com/make-bml/">http://byronjsmith.com/make-bml/</a></li>
</ul></li>

<li><b>Reproducible Data Processing: Make + Docker</b>
<ul class="org-ul">
<li><a href="https://towardsdatascience.com/towards-efficient-and-reproducible-ml-workflows-part-1-analysis-a98c945d7616">https://towardsdatascience.com/towards-efficient-and-reproducible-ml-workflows-part-1-analysis-a98c945d7616</a></li>
</ul></li>

<li><b>Makefiles for R/LaTex Projects</b>
<ul class="org-ul">
<li><a href="https://dzone.com/articles/makefiles-rlatex-projects">https://dzone.com/articles/makefiles-rlatex-projects</a></li>
</ul></li>

<li><b>Makefiles in Python Projects</b>
<ul class="org-ul">
<li><a href="https://krzysztofzuraw.com/blog/2016/makefiles-in-python-projects.html">https://krzysztofzuraw.com/blog/2016/makefiles-in-python-projects.html</a></li>
</ul></li>

<li><b>Makefiles with Python</b>
<ul class="org-ul">
<li><a href="https://blog.horejsek.com/makefile-with-python/">https://blog.horejsek.com/makefile-with-python/</a></li>
</ul></li>

<li><b>Makefile for Python projects</b> - GIST
<ul class="org-ul">
<li><a href="https://gist.github.com/lumengxi/0ae4645124cd4066f676">https://gist.github.com/lumengxi/0ae4645124cd4066f676</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org6ecd424" class="outline-2">
<h2 id="org6ecd424"><span class="section-number-2">3</span> GNU Autotools Building System</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgc73b642" class="outline-3">
<h3 id="orgc73b642"><span class="section-number-3">3.1</span> Overview</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>Autotools
<ul class="org-ul">
<li>=&gt;&gt; GNU Building System or umbrela name for <span class="underline">autoconf</span>, <span class="underline">automake</span>
and <span class="underline">libtool</span>. GNU autotools is used by many open-source Linux
projects and embedded Linux.</li>
</ul></li>

<li>Some Projects using GNU Autotools:
<ul class="org-ul">
<li><a href="https://github.com/emacs-mirror/emacs">GNU Emacs</a></li>
<li><a href="https://github.com/bminor/glibc">GNU Glibc</a> (GNU C Runtime Library used in Linux)</li>
<li><a href="https://github.com/gcc-mirror/gcc/blob/master/configure.ac">GNU GCC Compiler</a></li>
<li><a href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/blob/master/configure.ac">NetworkManager</a> (Linux network manager daemon)</li>
<li><a href="https://github.com/hishamhm/htop/blob/master/configure.ac">Htop tool</a> - htop is an interactive text-mode process viewer.</li>
<li><a href="https://github.com/nghttp2/nghttp2/blob/master/configure.ac">Nhttp2</a> - (Implementation of the Hypertext Transfer Protocol version 2 in C.)</li>
<li><a href="https://github.com/mingw-deb/libffi/blob/master/configure">LibFFI</a></li>
<li><a href="https://github.com/wireapp/libsodium/blob/master/configure.ac">LibSodium</a></li>
</ul></li>

<li>Used mostly in Unix-like or POSIX-like operating systems,
specially Linux.</li>

<li>Motivation:
<ul class="org-ul">
<li>Deal with legacy systems or software</li>
<li>Learn about alternative building systems</li>
<li>Maintenance of existing open source projects</li>
<li>Possible porting GNU autotools to CMake</li>
<li>Embedded Linux</li>
</ul></li>

<li>Supported <b>IDEs - Integrated Development Environments</b>
<ul class="org-ul">
<li>Eclipse IDE
<ul class="org-ul">
<li><a href="https://www.eclipse.org/linuxtools/">Linux Tools Plugin</a></li>
<li><a href="https://wiki.eclipse.org/CDT/Autotools/User_Guide">Eclipse CDT Autotools User Guide</a></li>
</ul></li>
<li>NetBeans
<ul class="org-ul">
<li><a href="http://plugins.netbeans.org/plugin/51647/cppgnuautotools">CppGnuAutoTools Plugin</a></li>
</ul></li>
<li>QTCreator
<ul class="org-ul">
<li><a href="https://doc.qt.io/qtcreator/creator-projects-autotools.html">Autotools Project Manager Plugin</a></li>
</ul></li>
</ul></li>

<li>Availalble for:
<ul class="org-ul">
<li>Linux, MacOSX, FreeBSD, OpenBSD, NetBSD and so on.</li>
</ul></li>

<li>Documentation:
<ul class="org-ul">
<li><a href="http://www.gnu.org/software/autoconf/">GNU Autoconf</a></li>
<li><a href="http://www.gnu.org/software/automake/automake.html">GNU Automake</a></li>
<li><a href="http://www.gnu.org/software/libtool/libtool.html">GNU Libtool</a></li>
</ul></li>

<li>Supported Programming Languages
<ul class="org-ul">
<li>C</li>
<li>C++</li>
<li>Objective C</li>
<li>Fortran</li>
<li>Fortran77</li>
<li>Erlang</li>
</ul></li>

<li>Terminal Documentation:
<ul class="org-ul">
<li>$ info automake</li>
<li>$ info autoconf</li>
<li>$ info libtool</li>
</ul></li>

<li>Common build configuration facilities
<ul class="org-ul">
<li>$ ./configure</li>
<li>$ make</li>
<li>$ make install   =&gt; Install application.</li>
<li>$ &#x2026; &#x2026; ..</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org33631d0" class="outline-3">
<h3 id="org33631d0"><span class="section-number-3">3.2</span> Reference Card</h3>
<div class="outline-text-3" id="text-3-2">
<p>
<b>Installation</b> 
</p>

<p>
Install on Fedora Linux Distribution: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ sudo dnf install autoconf automake
</pre>
</div>

<p>
Install on Ubuntu or Debian Linux Distributions: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ apt-get install autoconf automake 
</pre>
</div>

<p>
<b>GNU Make Command for GNU autotools</b> 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Make Command</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">$ make</td>
<td class="org-left">Build application</td>
</tr>

<tr>
<td class="org-left">$ make -j4</td>
<td class="org-left">Build applciation using 4 threads</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make check</td>
<td class="org-left">Run tests</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make clean</td>
<td class="org-left">Clean compilation files</td>
</tr>

<tr>
<td class="org-left">$ make distclean</td>
<td class="org-left">Remove generated autools files.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make install</td>
<td class="org-left">Install application in the system to: /usr/loca/bin, /etc, &#x2026;</td>
</tr>

<tr>
<td class="org-left">$ make intallcheck</td>
<td class="org-left">Check installation</td>
</tr>

<tr>
<td class="org-left">$ make uninstall</td>
<td class="org-left">Remove installation files</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make dist</td>
<td class="org-left">Create source distribution tarball</td>
</tr>

<tr>
<td class="org-left">$ make distcheck</td>
<td class="org-left">Similar to make dist, but checks if the compilation, the creates a tarball.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Most Configuration variables</b> 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">CC</td>
<td class="org-left">C compiler</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CXX</td>
<td class="org-left">C++ compuler</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CPPFLAGS</td>
<td class="org-left">C and C++ Preprocessor flags</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CFLAGS</td>
<td class="org-left">Flags of the C compiler</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CXXFLAGS</td>
<td class="org-left">Flags of the C++ compiler</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">LDFLAGS</td>
<td class="org-left">Linker Flags</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">LIBS</td>
<td class="org-left">Libraries passed to the linker</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Useful ./configure (Autotools) command line switches</b> 
</p>

<p>
Those are useful and recurring command line switches for building open
source applications or libraries from source. 
</p>

<ul class="org-ul">
<li>Show ./configure help</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./configure --help 
</pre>
</div>

<ul class="org-ul">
<li>General ./configure usage example.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">
<span class="org-comment-delimiter"># </span><span class="org-comment">---- Example 1 --------------------#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Install to /usr, /usr/bin, /usr/include, /usr/lib, /usr/lib64 on Linux </span>
$ ./configure  
$ make 
$ make install 

<span class="org-comment-delimiter"># </span><span class="org-comment">---- Example 2 --------------------#</span>
$ ./configure  --with-feature1 --without-feature2 --eanable-option1 --enable-option2=no 
$ make 
$ make install 

<span class="org-comment-delimiter"># </span><span class="org-comment">---- Example 3 --------------------#</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">Install to custom location (directory)</span>
$ ./configure --prefix=/my/custom/location  --with-feature1 <span class="org-sh-escaped-newline">\</span>
     --without-feature2 --eanable-option1 --enable-option2=no --disable-option3

$ make -j4 <span class="org-comment-delimiter"># </span><span class="org-comment">Build using 4 threads (faster)</span>
$ make install 
</pre>
</div>


<p>
<b>Autotools workflow for users</b> 
</p>

<p>
STEP 1: User run ./configure selecting build options; 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Install application in default directory</span>
$ ./configure

<span class="org-comment-delimiter"># </span><span class="org-comment">Install the application in another directory </span>
$ ./configure --prefix=/home/user/juliuscaesar/opt
</pre>
</div>

<p>
STEP 2: Run (GNU) make for building. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make 

<span class="org-comment-delimiter"># </span><span class="org-comment">Run GNY make with 4 threads </span>
$ make -j4 

<span class="org-comment-delimiter"># </span><span class="org-comment">Run $ make and $ make install in a single step </span>
$ make -j4 &amp;&amp; sudo make install 
</pre>
</div>

<p>
STEP 3: Install. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make install 

<span class="org-comment-delimiter"># </span><span class="org-comment">If permission is needed </span>
$ sudo make install 
</pre>
</div>

<p>
<b>Developer Worflow</b> 
</p>

<p>
STEP 1:
</p>
<ul class="org-ul">
<li>=&gt; Create files:
<ul class="org-ul">
<li><span class="underline">configure.ac</span>  for <b>autoconf</b> - written in a language similar to
Bash (Bourne Shell Script) which is processed by <b>M4</b> macro
processor.
<ul class="org-ul">
<li>Note: It is necessary to take care with whitespaces in macro invocations.</li>
</ul></li>
<li><span class="underline">Makefile.am</span> for <b>automake</b>.</li>
</ul></li>
</ul>


<p>
STEP 2: 
</p>
<ul class="org-ul">
<li>=&gt; The developer runs autoreconf that  generates the files
./configure and Makefile.in</li>
</ul>

<p>
STEP 3: 
</p>
<ul class="org-ul">
<li>=&gt; Test the generated files by running:
<ul class="org-ul">
<li>$ ./configure &amp;&amp; make &amp;&amp; make install.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org66a21f3" class="outline-3">
<h3 id="org66a21f3"><span class="section-number-3">3.3</span> Example: Basic GNU autotools project</h3>
<div class="outline-text-3" id="text-3-3">
</div>
<div id="outline-container-orga1bee2e" class="outline-4">
<h4 id="orga1bee2e"><span class="section-number-4">3.3.1</span> Project Files</h4>
<div class="outline-text-4" id="text-3-3-1">
<p>
File: main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Hello world autotools"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: configure.ac 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">------- File: configure.ac ----------#</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-------------------------------------# </span>

<span class="org-comment-delimiter"># </span><span class="org-comment">app =&gt; Is the file name without extensions</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">0.1 =&gt; Is the version </span>
<span class="org-function-name">AC_INIT</span>( [app], [0.1], [maintener@email.com])

<span class="org-comment-delimiter"># </span><span class="org-comment">Require at least autoconf version &gt;= 2.68 </span>
<span class="org-function-name">AC_PREREQ</span>([2.68])  
<span class="org-function-name">AM_INIT_AUTOMAKE</span>([-Wall -Wextra])

<span class="org-comment-delimiter"># </span><span class="org-comment">./configure creates a Makefile</span>
<span class="org-function-name">AC_CONFIG_FILES</span>([Makefile])

<span class="org-comment-delimiter"># </span><span class="org-comment">Find and check C compiler </span>
AC_PROG_CC
<span class="org-comment-delimiter"># </span><span class="org-comment">Find and check a C++ compiler </span>
AC_PROG_CXX 
AC_OUTPUT 
</pre>
</div>

<p>
File: Makefile.am 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Contains all executable targets </span>
bin_PROGRAMS = app

<span class="org-comment-delimiter"># </span><span class="org-comment">Sources for the executable targets </span>
app_SOURCES  = app.cpp 
</pre>
</div>

<p>
File: clean.sh 
</p>
<ul class="org-ul">
<li>Helper bash script used for cleaning current directory.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/usr/bin/</span><span class="org-keyword">env</span><span class="org-comment"> sh </span>
rm -v configure config.log config.status install-sh missing aclocal.m4 compile depcomp 
rm -vrf autom4te.cache
rm -v *.o *.bin *.so
rm *~ <span class="org-comment-delimiter"># </span><span class="org-comment">Remove temporary files </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org6af32b0" class="outline-4">
<h4 id="org6af32b0"><span class="section-number-4">3.3.2</span> Building Steps</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
<b>STEP 1:</b> Performed by developer 
</p>

<ul class="org-ul">
<li>Create additional metadata files needed by <span class="underline">GNU autotools</span></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ touch README NEWS AUTHORS ChangeLog <span class="org-comment-delimiter"># </span><span class="org-comment">Set metadata files                                                &#9474;</span>
</pre>
</div>

<p>
<b>STEP 2:</b> Performed by developer 
</p>

<ul class="org-ul">
<li>Run atuoreconf for generating ./configure shell script and addition files.</li>
<li>Run: $ autoreconf -i -v</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ autoreconf -i -v 

<span class="org-function-name">autoreconf</span>: Entering directory <span class="org-sh-quoted-exec">`.'</span>
<span class="org-sh-quoted-exec">autoreconf: configure.ac: not using Gettext</span>
<span class="org-sh-quoted-exec">autoreconf: running: aclocal </span>
<span class="org-sh-quoted-exec">autoreconf: configure.ac: tracing</span>
<span class="org-sh-quoted-exec">autoreconf: configure.ac: not using Libtool</span>
<span class="org-sh-quoted-exec">autoreconf: running: /usr/bin/autoconf</span>
<span class="org-sh-quoted-exec">autoreconf: configure.ac: not using Autoheader</span>
<span class="org-sh-quoted-exec">autoreconf: running: automake --add-missing --copy --no-force</span>
<span class="org-sh-quoted-exec">configure.ac:11: warning: unknown warning category 'extra'</span>
<span class="org-sh-quoted-exec">configure.ac:17: installing './compile'</span>
<span class="org-sh-quoted-exec">configure.ac:11: installing './install-sh'</span>
<span class="org-sh-quoted-exec">configure.ac:11: installing './missing'</span>
<span class="org-sh-quoted-exec">Makefile.am: installing './depcomp'</span>
<span class="org-sh-quoted-exec">autoreconf: Leaving directory `</span><span class="org-builtin">.</span><span class="org-string">'</span>
</pre>
</div>

<p>
<b>STEP 3:</b> Performed by user
</p>

<ul class="org-ul">
<li>The following steps are performed by end-users or maintainers for
installing the application in the system or in a local directory.</li>

<li>Generate the Makefile by running the configuration script.</li>
</ul>

<p>
Run: $ ./configure  
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./configure 
checking for <span class="org-variable-name">a BSD-compatible install</span>... <span class="org-compilation-warning">/usr/bin/install -c</span>
checking whether <span class="org-variable-name">build environment is sane</span>... <span class="org-compilation-info">yes</span>
checking for <span class="org-variable-name">a thread-safe mkdir -p</span>... <span class="org-compilation-warning">/usr/bin/mkdir -p</span>
checking for <span class="org-variable-name">gawk</span>... <span class="org-compilation-warning">gawk</span>

... ... ...   ... ... ...   ... ... ...   ... ... ... 
     <span class="org-comment-delimiter"># </span><span class="org-comment">Suppress output for breviety purposes </span>
... ... ...   ... ... ...   ... ... ...   ... ... ... 

checking <span class="org-variable-name">dependency style of g++</span>... <span class="org-compilation-warning">gcc3</span>
checking <span class="org-variable-name">that generated files are newer than configure</span>... <span class="org-compilation-warning">done</span>
<span class="org-function-name">configure</span>: creating ./config.status
<span class="org-function-name">config.status</span>: creating Makefile
<span class="org-function-name">config.status</span>: executing depfiles commands
</pre>
</div>

<p>
Run: $ ./configure CC=clang CXX=clang++ for using clang.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./configure <span class="org-variable-name">CC</span>=clang <span class="org-variable-name">CXX</span>=clang++
</pre>
</div>

<p>
<b>STEP 4:</b> Performed by user
</p>

<ul class="org-ul">
<li>Run the makefile (GNU make)</li>
</ul>

<p>
Run: $ make 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make

g++ -DPACKAGE_NAME=<span class="org-string">\"</span>app<span class="org-string">\"</span> -DPACKAGE_TARNAME=<span class="org-string">\"</span>app<span class="org-string">\"</span> -DPACKAGE_VERSION=<span class="org-string">\"</span>0.1<span class="org-string">\"</span>  <span class="org-sh-escaped-newline">\</span>
    -DPACKAGE_STRING=<span class="org-string">\"</span>app<span class="org-string">\ </span>0.1<span class="org-string">\"</span> -DPACKAGE_BUGREPORT=<span class="org-string">\"\"</span> -DPACKAGE_URL=<span class="org-string">\"\"</span>   <span class="org-sh-escaped-newline">\</span>
     -DPACKAGE=<span class="org-string">\"</span>app<span class="org-string">\"</span> -DVERSION=<span class="org-string">\"</span>0.1<span class="org-string">\"</span> -I.     -g -O2 -MT app.o -MD -MP -MF   <span class="org-sh-escaped-newline">\</span>
    .deps/app.Tpo -c -o <span class="org-keyword">app.o</span> app.cpp <span class="org-sh-escaped-newline">\</span>
    mv -f .deps/app.Tpo .deps/app.Po <span class="org-sh-escaped-newline">\</span>

 g++  -g -O2   -o <span class="org-keyword">app</span> app.o  
</pre>
</div>

<p>
Run: $ make install 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make install
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Entering directory <span class="org-string">'/home/archbox/projects/autools1'</span>
 /usr/bin/mkdir -p <span class="org-string">'/usr/local/bin'</span>
  /usr/bin/install -c app <span class="org-string">'/usr/local/bin'</span>
<span class="org-function-name">/usr/bin/install</span>: cannot create regular file <span class="org-string">'/usr/local/bin/app'</span>: Permission denied
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: *** [Makefile:313: install-binPROGRAMS] Error 1
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Leaving directory <span class="org-string">'/home/archbox/projects/autools1'</span>
<span class="org-function-name">make</span>: *** [Makefile:615: install-am] Error 2

</pre>
</div>

<p>
Run: $ make dist =&gt; Create a tarball distribution. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make dist
make  dist-gzip <span class="org-variable-name">am__post_remove_distdir</span>=<span class="org-string">'@:'</span>
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Entering directory <span class="org-string">'/home/archbox/projects/autools1'</span>
<span class="org-keyword">if </span><span class="org-builtin">test</span> -d <span class="org-string">"app-0.1"</span>; <span class="org-keyword">then</span> find <span class="org-string">"app-0.1"</span> -type d ! -perm -200 -exec chmod u+w {} ... ... 
<span class="org-builtin">test</span> -d <span class="org-string">"app-0.1"</span> || mkdir <span class="org-string">"app-0.1"</span>

  .. ... ... ... ... ... ... 
rm -rf <span class="org-string">"app-0.1"</span> || { sleep 5 &amp;&amp; rm -rf <span class="org-string">"app-0.1"</span>; }; <span class="org-keyword">else</span> :; <span class="org-keyword">fi</span>
</pre>
</div>

<p>
Check the tarball file: 
</p>

<div class="org-src-container">
<pre class="src src-sh">    $ tar -tzvf app-0.1.tar.gz 
drwxrwxr-x 1000/1000         0 2019-10-21 15:23 app-0.1/
-rw-rw-r-- 1000/1000     42147 2019-10-21 15:22 app-0.1/aclocal.m4
-rwxrwxr-x 1000/1000    154043 2019-10-21 15:22 app-0.1/configure
-rw-rw-r-- 1000/1000       546 2019-10-21 15:01 app-0.1/configure.ac
-rw-rw-r-- 1000/1000       101 2019-10-21 14:28 app-0.1/app.cpp
-rwxr-xr-x 1000/1000     14676 2019-10-21 15:22 app-0.1/install-sh
-rw-rw-r-- 1000/1000         0 2019-10-21 15:02 app-0.1/ChangeLog
-rwxr-xr-x 1000/1000      6872 2019-10-21 15:22 app-0.1/missing
-rwxr-xr-x 1000/1000     23566 2019-10-21 15:22 app-0.1/depcomp
-rw-rw-r-- 1000/1000         0 2019-10-21 15:02 app-0.1/AUTHORS
-rw-r--r-- 1000/1000     35147 2019-10-21 15:01 app-0.1/COPYING
-rw-r--r-- 1000/1000     15756 2019-10-21 15:01 app-0.1/INSTALL
-rwxr-xr-x 1000/1000      7381 2019-10-21 15:22 app-0.1/compile
-rw-rw-r-- 1000/1000       117 2019-10-21 14:52 app-0.1/Makefile.am
-rw-rw-r-- 1000/1000         0 2019-10-21 15:02 app-0.1/README
-rw-rw-r-- 1000/1000         0 2019-10-21 15:02 app-0.1/NEWS
-rw-rw-r-- 1000/1000     23477 2019-10-21 15:22 app-0.1/Makefile.in
</pre>
</div>

<p>
<b>STEP 5:</b> 
</p>

<ul class="org-ul">
<li>Test the application.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Check executable file </span>
$ file app
<span class="org-function-name">app</span>: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter 
/lib64/l, for GNU/Linux 3.2.0, <span class="org-variable-name">BuildID</span>[sha1]=29f5b104ac648c3286ed616ea4cf4007a6b51ae2, 
with debug_info, not stripped

<span class="org-comment-delimiter"># </span><span class="org-comment">Run native executable </span>
$ ./app
Hello world autotools
</pre>
</div>

<p>
<b>Build and install the application into a new location</b> 
</p>

<p>
Run configure script. 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Build with clang and install at ~/opt/app-test </span>
$ ./configure <span class="org-variable-name">CC</span>=clang <span class="org-variable-name">CXX</span>=clang++ --prefix=$<span class="org-variable-name">HOME</span>/opt/app-test

</pre>
</div>

<p>
Run make and make install 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make install
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Entering directory <span class="org-string">'/home/archbox/projects/autools1'</span>
 /usr/bin/mkdir -p <span class="org-string">'/home/archbox/opt/app-test/bin'</span>
  /usr/bin/install -c app <span class="org-string">'/home/archbox/opt/app-test/bin'</span>
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Nothing to be done for <span class="org-string">'install-data-am'</span>.
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Leaving directory <span class="org-string">'/home/archbox/projects/autools1'</span>
</pre>
</div>

<p>
Test installation: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree /home/archbox/opt/app-test
/home/archbox/opt/app-test
&#9492;&#9472;&#9472; bin
    &#9492;&#9472;&#9472; app

1 directory, 1 file
</pre>
</div>

<p>
Run the application: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ /home/archbox/opt/app-test/bin/app 
Hello world autotools
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org6882e0a" class="outline-3">
<h3 id="org6882e0a"><span class="section-number-3">3.4</span> Further Reading</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li><a href="https://eklitzke.org/how-to-autotools">How To Use Autotools</a></li>

<li><b>GNU Autotools Book</b> - <a href="https://www.star.bnl.gov/~liuzx/autobook.html">https://www.star.bnl.gov/~liuzx/autobook.html</a></li>

<li><a href="https://elinux.org/images/4/43/Petazzoni.pdf">Embedded Linux Conference 2016 - GNU Autotools Tutorial</a></li>

<li><a href="http://freesoftwaremagazine.com/articles/brief_introduction_to_gnu_autotools/">Chapter 1: A brief introduction to the GNU Autotools</a></li>

<li><a href="https://stackoverflow.com/questions/10999549/how-do-i-create-a-configure-script">linux - How do I create a configure script? - Stack Overflow</a></li>

<li><a href="https://developer.fedoraproject.org/tech/languages/c/autotools.html">Autotools — Fedora Developer Portal</a></li>

<li><a href="http://thegreyblog.blogspot.com/2013/09/cc-project-built-with-gnu-build-system.html">C/C++ Project Built with GNU Build System (A.K.A. GNU Autotools): NetBeans vs. Eclipse CDT</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgd0038bc" class="outline-2">
<h2 id="orgd0038bc"><span class="section-number-2">4</span> QMake Building System</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org543e81e" class="outline-4">
<h4 id="org543e81e"><span class="section-number-4">4.0.1</span> Overview</h4>
<div class="outline-text-4" id="text-4-0-1">
<p>
QMake is a building system generator used by QT Framework and QT
Creator IDE, similar to CMake, which can generate Makefiles and
projects for Visual Studio IDE (MSBuild building system).
</p>

<p>
Features: 
</p>

<ul class="org-ul">
<li>QT Framework now provides official support to CMake, but QMake is
still used in many old projects and libraries.</li>
</ul>

<p>
Benefits: 
</p>

<ul class="org-ul">
<li>For now, QMake still provides better support fro cross compilation
and for mobile platforms, such as Android or iOS.</li>

<li>Multi-ABI cross-compilation support.</li>
</ul>

<p>
Problems: 
</p>

<ul class="org-ul">
<li>Not supported by other IDEs than QT Creator. So, it is not
supported by Eclipse, Netbeans or Visual Studio.</li>

<li>Brittle building system =&gt; It does not support multiple targets or
generating multiple executables in the same building script.</li>

<li>Hard to use with third-party libraries or libraries using CMake or
other building systems.</li>
</ul>
</div>
</div>

<div id="outline-container-orge7dc66a" class="outline-4">
<h4 id="orge7dc66a"><span class="section-number-4">4.0.2</span> QMake project example</h4>
<div class="outline-text-4" id="text-4-0-2">
<p>
Project Structure: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cd /path/to/project-root/dir
$ tree .
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; app1
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1.cpp
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1.pro
&#9474;&#160;&#160; &#9500;&#9472;&#9472; dataset.cpp
&#9474;&#160;&#160; &#9492;&#9472;&#9472; dataset.hpp
&#9500;&#9472;&#9472; app2
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app2.cpp
&#9474;&#160;&#160; &#9492;&#9472;&#9472; app2.pro
&#9500;&#9472;&#9472; apptest.pro
</pre>
</div>

<p>
File: apptest.pro 
</p>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-variable-name">TEMPLATE</span> = subdirs
<span class="org-variable-name">SUBDIRS</span> = app1 app2
</pre>
</div>

<p>
<b>Target app1 - subproject</b> 
</p>

<ul class="org-ul">
<li>Target <span class="underline">app1</span> is a console executable.</li>
</ul>


<p>
File: app1/app1.pro
</p>

<div class="org-src-container">
<pre class="src src-sh">TEMPLATE = app
CONFIG += console c++11
CONFIG -= app_bundle
CONFIG -= qt

SOURCES += <span class="org-sh-escaped-newline">\</span>
        dataset.cpp <span class="org-sh-escaped-newline">\</span>
        app1.cpp

HEADERS += <span class="org-sh-escaped-newline">\</span>
    dataset.hpp
</pre>
</div>

<p>
File: app1/app1.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string">"dataset.hpp"</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">Dataset</span> <span class="org-variable-name">ds</span>;
    ds.add_data<span class="org-rainbow-delimiters-depth-2">(</span>10.34<span class="org-rainbow-delimiters-depth-2">)</span>;
    ds.add_data<span class="org-rainbow-delimiters-depth-2">(</span>100.23<span class="org-rainbow-delimiters-depth-2">)</span>;
    ds.add_data<span class="org-rainbow-delimiters-depth-2">(</span>-100.0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Hello World!"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ds[0] = "</span> &lt;&lt; ds.get_data<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ds[1] = "</span> &lt;&lt; ds.get_data<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ds[2] = "</span> &lt;&lt; ds.get_data<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: app1/dataset.hpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#if</span><span class="org-negation-char"><span class="org-preprocessor">n</span></span><span class="org-preprocessor">def</span> DATASET_HPP
<span class="org-preprocessor">#define</span> <span class="org-variable-name">DATASET_HPP</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstddef</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">class</span> <span class="org-type">Dataset</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">struct</span> <span class="org-type">pimpl</span>;
    <span class="org-type">pimpl</span>* <span class="org-variable-name">m_pimpl</span>;
<span class="org-function-name">public</span>:
    <span class="org-function-name">Dataset</span><span class="org-rainbow-delimiters-depth-2">()</span>;
    ~<span class="org-function-name">Dataset</span><span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-function-name">Dataset</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Dataset</span> <span class="org-type">cosnt</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;
    <span class="org-type">Dataset</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Dataset</span> <span class="org-keyword">const</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;
    <span class="org-type">void</span>   <span class="org-function-name">add_data</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">double</span> <span class="org-function-name">get_data</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">idx</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-preprocessor">#endif</span> <span class="org-comment-delimiter">// </span><span class="org-comment">DATASET_HPP</span>
</pre>
</div>

<p>
File: app1/dataset.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string">"dataset.hpp"</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">memory</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-constant">Dataset</span>::<span class="org-type">pimpl</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">data</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-function-name">Dataset</span>::Dataset<span class="org-rainbow-delimiters-depth-1">()</span>: m_pimpl<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">pimpl</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Constructor called. OK"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">Dataset</span>::~Dataset<span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-keyword">delete</span> m_pimpl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-constant">Dataset</span>::<span class="org-function-name">add_data</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    m_pimpl-&gt;data.push_back<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">double</span> <span class="org-constant">Dataset</span>::<span class="org-function-name">get_data</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">size_t</span> <span class="org-variable-name">i</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">const</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> m_pimpl-&gt;data<span class="org-rainbow-delimiters-depth-2">[</span>i<span class="org-rainbow-delimiters-depth-2">]</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Target app2 - subproject</b>
</p>

<ul class="org-ul">
<li>Target <span class="underline">app2</span> is a user interface QT Widgets executable which file
name is app2_linux_x64.bin</li>
</ul>

<p>
File: app2/app2.pro 
</p>

<div class="org-src-container">
<pre class="src src-sh">QT       += core gui widgets
TEMPLATE  = app
CONFIG   += c++1z
<span class="org-comment-delimiter"># </span><span class="org-comment">CONFIG  += console c++1z</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">CONFIG  -= app_bundle</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Change</span>
TARGET   = app2_linux_x64.bin
SOURCES += app2.cpp 
</pre>
</div>

<p>
File: app2/app2.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">QApplication</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">QtWidgets</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>* <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-2">[]</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Starting Application 2 OK"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-type">QApplication</span> <span class="org-variable-name">app</span><span class="org-rainbow-delimiters-depth-2">(</span>argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">QPushButton</span> <span class="org-variable-name">button</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Click me"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    button.setVisible<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">QObject</span>::connect<span class="org-rainbow-delimiters-depth-2">(</span>&amp;button, &amp;<span class="org-constant">QPushButton</span>::clicked,
                     <span class="org-rainbow-delimiters-depth-3">[]{</span>
                         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] I Was clicked OK"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
                     <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> app.exec<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Building and Running</b> 
</p>

<p>
STEP 1 - Create a ./build directory for separating the compilation
output from the source code. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ mkdir build &amp;&amp; <span class="org-builtin">cd</span> build
</pre>
</div>

<p>
STEP 2 - Run QMake
</p>

<div class="org-src-container">
<pre class="src src-sh">$ qmake ../

$ ls
Makefile
</pre>
</div>

<p>
STEP 3 - Run Makefile 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make

$ tree .
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; app1
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1.o
&#9474;&#160;&#160; &#9500;&#9472;&#9472; dataset.o
&#9474;&#160;&#160; &#9492;&#9472;&#9472; Makefile
&#9500;&#9472;&#9472; app2
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app2_linux_x64.bin
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app2.o
&#9474;&#160;&#160; &#9492;&#9472;&#9472; Makefile
&#9492;&#9472;&#9472; Makefile

2 directories, 8 files
</pre>
</div>

<p>
STEP 4 - Check executables 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Run executable app1 </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------</span>
$ app1/app1 
 [INFO] Constructor called. OK
Hello World!
 ds[0] = 10.34
 ds[1] = 10.34
 ds[2] = 10.34

<span class="org-comment-delimiter"># </span><span class="org-comment">Run executable app2 </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------</span>
$ app2/app2_linux_x64.bin 
 [INFO] Starting Application 2 OK
</pre>
</div>
</div>
</div>

<div id="outline-container-org1665324" class="outline-4">
<h4 id="org1665324"><span class="section-number-4">4.0.3</span> Further Reading</h4>
<div class="outline-text-4" id="text-4-0-3">
<p>
Official Documentation 
</p>

<ul class="org-ul">
<li><b>QMake Manual</b> - QT Company
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-manual.html">https://doc.qt.io/qt-5/qmake-manual.html</a></li>
</ul></li>

<li><b>QMake - Getting Started</b> - QT Company
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-tutorial.html">https://doc.qt.io/qt-5/qmake-tutorial.html</a></li>
</ul></li>

<li><b>QMake Running</b> 
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-running.html">https://doc.qt.io/qt-5/qmake-running.html</a></li>
</ul></li>

<li><b>QMake Variables</b>
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-variable-reference.html">https://doc.qt.io/qt-5/qmake-variable-reference.html</a></li>
</ul></li>
</ul>

<p>
General 
</p>

<ul class="org-ul">
<li><b>Configuring QMake</b>
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-environment-reference.html">https://doc.qt.io/qt-5/qmake-environment-reference.html</a></li>
</ul></li>

<li>KDAB - <b>Clang Tidy, part 2: Integrate qmake and other build systems using Bear</b>
<ul class="org-ul">
<li><a href="https://www.kdab.com/clang-tidy-part-2-integrate-qmake-and-other-build-systems-using-bear/">https://www.kdab.com/clang-tidy-part-2-integrate-qmake-and-other-build-systems-using-bear/</a></li>
</ul></li>

<li>KDAB - <b>Qt for Android better than ever before</b>
<ul class="org-ul">
<li><a href="https://www.kdab.com/qt-for-android-better-than-ever-before/">https://www.kdab.com/qt-for-android-better-than-ever-before/</a></li>
</ul></li>

<li><b>QMake for neophytes</b>
<ul class="org-ul">
<li><a href="https://www.develer.com/en/qmake-for-neophytes/">https://www.develer.com/en/qmake-for-neophytes/</a></li>
</ul></li>

<li><b>SUBDIRS for Fun and Profit</b>
<ul class="org-ul">
<li><a href="http://silmor.de/qtstuff.subdirs.php">http://silmor.de/qtstuff.subdirs.php</a></li>
</ul></li>

<li><b>C++ GUI Programming with Qt4: Building Qt Applications</b>
<ul class="org-ul">
<li><a href="http://www.informit.com/articles/article.aspx?p=1405563&amp;seqNum=2">http://www.informit.com/articles/article.aspx?p=1405563&amp;seqNum=2</a></li>
</ul></li>

<li><b>Building a Linux system for the STM32MP1: setting up a Qt5 application development environment</b>
<ul class="org-ul">
<li><a href="https://bootlin.com/blog/building-a-linux-system-for-the-stm32mp1-setting-up-a-qt5-application-development-environment/">https://bootlin.com/blog/building-a-linux-system-for-the-stm32mp1-setting-up-a-qt5-application-development-environment/</a></li>
</ul></li>
</ul>

<p>
Questions: 
</p>

<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/1538398/how-do-i-use-qmake-to-build-multiple-binaries-in-a-single-project/1538639">qt - How do I use qmake to build multiple binaries in a single project? - Stack Overflow</a></li>

<li><a href="https://forum.qt.io/topic/15202/building-multiple-binaries-in-one-qt-project/4">Building multiple binaries in one qt project | Qt Forum</a></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2020-07-05 Sun 19:38</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
