<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-01-15 Wed 17:06 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ - Building Systems and Build Automation</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp/c++ code examples and demonstrations."
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "2em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "%LINEBREAKS" },
                        webFont: "%FONT"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "%LINEBREAKS" },
              font: "%FONT"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "%AUTONUMBER"},
               MultLineWidth: "%MULTLINEWIDTH",
               TagSide: "%TAGSIDE",
               TagIndent: "%TAGINDENT"
             }
});
</script>
<script type="text/javascript"
        src="theme/MathJax/MathJax.js"></script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ - Building Systems and Build Automation</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org1c1c7bd">1. Building Systems and Build Automation</a>
<ul>
<li><a href="#org1c8d763">1.1. Building System</a></li>
<li><a href="#orga68ce37">1.2. Package Managers</a></li>
</ul>
</li>
<li><a href="#org605829b">2. Make and GNU Make - Makefiles</a>
<ul>
<li>
<ul>
<li><a href="#orged07e28">2.0.1. Overview</a></li>
<li><a href="#orgab37ed4">2.0.2. Project Example</a></li>
<li><a href="#org93a4dc9">2.0.3. Reading</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org43728e8">3. GNU Autotools Building System</a>
<ul>
<li><a href="#org4f43f56">3.1. Overview</a></li>
<li><a href="#org1169d7c">3.2. Example: Basic GNU autotools project</a>
<ul>
<li><a href="#org7e2a4d2">3.2.1. Project Files</a></li>
<li><a href="#org704d232">3.2.2. Building Steps</a></li>
</ul>
</li>
<li><a href="#orgd3a5c89">3.3. Further Reading</a></li>
</ul>
</li>
<li><a href="#orga937d04">4. QMake Building System</a>
<ul>
<li>
<ul>
<li><a href="#org84fb65e">4.0.1. Overview</a></li>
<li><a href="#orge09720b">4.0.2. QMake project example</a></li>
<li><a href="#org1e7986d">4.0.3. Further Reading</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org170ca8f">5. CMake Building System</a>
<ul>
<li><a href="#org9099ddd">5.1. Overview</a></li>
<li><a href="#orga14920e">5.2. Useful CMake Modules</a>
<ul>
<li><a href="#org7d7bee0">5.2.1. CMake Module Projects</a></li>
<li><a href="#org8da7af3">5.2.2. Collected CMake Modules</a></li>
</ul>
</li>
<li><a href="#orgbcdbb78">5.3. Minimal CMake Project Workflow</a></li>
<li><a href="#orgbb34f95">5.4. Project with multiple targets and a single CMakeLists</a>
<ul>
<li><a href="#org644cf18">5.4.1. Adding and setting multiple targets</a></li>
<li><a href="#orgeda2fbb">5.4.2. Example</a></li>
<li><a href="#org435df59">5.4.3. Further Reading</a></li>
</ul>
</li>
<li><a href="#org2c90b40">5.5. Consuming Libraries or Dependencies</a>
<ul>
<li><a href="#orgb05eb34">5.5.1. Overview</a></li>
<li><a href="#org1f0f014">5.5.2. Dependencies with CMake add_subdirectory</a></li>
<li><a href="#org4d29301">5.5.3. Dependencies with FetchContent module</a></li>
<li><a href="#org88e3465">5.5.4. Dependencies with FetchContent module - simplified usage</a></li>
</ul>
</li>
<li><a href="#org4b70c9a">5.6. Common Variables</a>
<ul>
<li><a href="#org4eb2e74">5.6.1. CMAKE_CURRENT_LIST_DIR - Directory where is CMakeLists.txt</a></li>
<li><a href="#org0ef7d47">5.6.2. CMAKE_CXX_STANDARD - Set C++ Standard</a></li>
<li><a href="#orge726504">5.6.3. CMAKE_BUILD_TYPE - Set default building type to DEBUG</a></li>
<li><a href="#orgf86c513">5.6.4. CMAKE_CXX_FLAGS - Compiler flags</a></li>
</ul>
</li>
<li><a href="#org772c633">5.7. CMake Map</a></li>
<li><a href="#orgaf2e24e">5.8. Build a project from command line - detailed</a></li>
<li><a href="#orgfe6d4bb">5.9. Show system information</a></li>
<li><a href="#org0d6210e">5.10. Show all modules</a></li>
<li><a href="#org76ae27a">5.11. Microsft Windows OS Specific Snippets</a>
<ul>
<li><a href="#orgfb97dfc">5.11.1. Executable Target with resource icon</a></li>
<li><a href="#org53e7abe">5.11.2. Build executable for console or window subsystem</a></li>
<li><a href="#org0918250">5.11.3. Set target subsystem: console/window</a></li>
<li><a href="#org60fc1ee">5.11.4. Export all shared library symbols</a></li>
</ul>
</li>
<li><a href="#org6aae86e">5.12. Snippets</a>
<ul>
<li><a href="#org336702d">5.12.1. Place build-tree object-code in source directory</a></li>
<li><a href="#orgde368dc">5.12.2. Set common file extension for all executables</a></li>
<li><a href="#orgff9b8f7">5.12.3. Copy some target binaries to a directory</a></li>
<li><a href="#orga4c2ee8">5.12.4. Create target to run compiled executable</a></li>
<li><a href="#org63d027f">5.12.5. Issue an error if condition is not met</a></li>
<li><a href="#orgedfb8af">5.12.6. Copy a target file whenever it is recompiled</a></li>
<li><a href="#org00a17c4">5.12.7. Cross compiling for Android</a></li>
<li><a href="#org72a7a75">5.12.8. Detect Operating System</a></li>
<li><a href="#org4afdea6">5.12.9. Detect whether current build is 32 bits or 64 bits</a></li>
<li><a href="#orga0c8c40">5.12.10. Detect Compiler</a></li>
<li><a href="#org16b8420">5.12.11. Debug Information for diagnosing problems</a></li>
</ul>
</li>
<li><a href="#orgda7518f">5.13. Force Settings</a>
<ul>
<li><a href="#org75edbe7">5.13.1. Force generation of debugging symbols</a></li>
<li><a href="#orgf50a9ee">5.13.2. Force Compiler to Clang</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org15a2973">6. Conan package Manager</a>
<ul>
<li><a href="#orgb97c496">6.1. Main Web Sites</a></li>
<li><a href="#orgc033494">6.2. Benefits and Capabilities</a></li>
<li><a href="#org40f98fc">6.3. Videos</a></li>
<li><a href="#org6f2d1d3">6.4. Selected Articles</a></li>
<li><a href="#org1130140">6.5. Install Conan</a></li>
<li><a href="#org5c9083f">6.6. Conan Package Repositories</a></li>
<li><a href="#org95e4d19">6.7. Libraries in Conan Center</a></li>
<li><a href="#orgea124ce">6.8. Command Summary</a>
<ul>
<li><a href="#org5f57333">6.8.1. Search Conan Packages</a></li>
<li><a href="#orge3cf97d">6.8.2. List libraries in local cache / local repository</a></li>
<li><a href="#org67c525c">6.8.3. List Remote Repositories:</a></li>
<li><a href="#org740fc8e">6.8.4. Add more remote repositories</a></li>
<li><a href="#org9cf16a5">6.8.5. Install library in local cache</a></li>
<li><a href="#org1d02f29">6.8.6. Show pacakge information</a></li>
</ul>
</li>
<li><a href="#org5a4e577">6.9. Example CMake/Conan project</a></li>
<li><a href="#orgffc2793">6.10. Example CMake/Conan project with conan-cmake module</a></li>
<li><a href="#orga42950e">6.11. Make conan-cmake module globally available</a></li>
</ul>
</li>
<li><a href="#org87c9b9d">7. Vcpkg package manager</a>
<ul>
<li><a href="#orgbe85076">7.1. Documentation</a></li>
<li><a href="#org3703193">7.2. Windows Vcpkg Intallation</a></li>
<li><a href="#org49f3eb7">7.3. Linux Vcpkg Installation</a></li>
<li><a href="#org804e494">7.4. Show all available packages</a></li>
<li><a href="#org3828209">7.5. Removing package</a></li>
<li><a href="#orgb1428dc">7.6. Example: Project with spdlog and Boost Ublas</a></li>
<li><a href="#orga5ee34e">7.7. Example: Project with OpenGL + FreeGLUT</a></li>
<li><a href="#orgdc88cd6">7.8. Example: Project with Nana GUI Library</a></li>
</ul>
</li>
</ul>
</div>
</div>
<ul class="org-ul">
<li><a href='index.html'>Index</a></li>
</ul>

<div id="outline-container-org1c1c7bd" class="outline-2">
<h2 id="org1c1c7bd"><span class="section-number-2">1</span> Building Systems and Build Automation</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org1c8d763" class="outline-3">
<h3 id="org1c8d763"><span class="section-number-3">1.1</span> Building System</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Some building systems:
</p>

<ul class="org-ul">
<li><a href="https://cmake.org/">CMake</a> Meta building system which can generate project files and
building scripts for platform-preferred building systems. For
instance, it can generate Makefile for U*nix-like system, Ninja
build scripts, Visual Studio solutions and so on.
<ul class="org-ul">
<li>Note: CMake may not be the best building system or not have the best
IDEs. Now, it is supported by Microsft's Visual Studio and
JetBrains' Clion IDE and others.</li>
<li>See:
<ul class="org-ul">
<li><a href="http://cliutils.gitlab.io/modern-cmake/">An Introduction to Modern CMake</a></li>
<li><a href="https://gist.github.com/mbinna/c61dbb39bca0e4fb7d1f73b0d66a4fd1">Effective Modern CMake</a></li>
<li><a href="https://github.com/ttroy50/cmake-examples">https://github.com/ttroy50/cmake-examples</a></li>
<li><a href="https://cristianadam.eu/20181202/a-better-qnx-cmake-toolchain-file/">A Better QNX CMake Toolchain File - Cristian Adam</a></li>
</ul></li>
</ul></li>

<li><b>GNU Autotool</b> (GNU Building System) - One of the most used building
systems in open source projects for Unix-like operating systems,
specially Linux.
<ul class="org-ul">
<li>Projects using GNU autotool have the files: configure.ac and
Makefine.am. They often have the instruction for installing as:
./configure &amp;&amp; make &amp;&amp; make install.</li>
<li>Projects using Autotools: Emacs editor; GIT version control
system; GNU Core utils; GIMP image manipulation app.</li>
<li>Problems:
<ul class="org-ul">
<li>Brittle and poorly designed.</li>
<li>Hard to read</li>
<li>Hard to use and complicated</li>
<li>Requires many configuration files.</li>
<li>Does not work well on Windows</li>
<li>Not famililar for Windows users.</li>
</ul></li>
</ul></li>

<li><a href="https://github.com/microsoft/msbuild">MSBuild</a> / <b>Visual Studio Solutions</b>
<ul class="org-ul">
<li>Building system used by Microsft Visual Studio IDE. The
configuration files, <span class="underline">*.vcxproj</span> and <span class="underline">*.sln</span> of Visual Studio
Solution are both building systems scripts and project
configuration files.</li>
<li>Features:
<ul class="org-ul">
<li>Most used building system on MS-Windows for C# and C++ projects.</li>
<li>Some Windows frameworks such as MFC - Microsft Foundation and
ATL - Active Template Library only support Visual Studio
Solutions.</li>
</ul></li>
<li>Problems:
<ul class="org-ul">
<li>Only supported by Visual Studio IDE and Visual Studio Code Editor.</li>
<li>Only supported on Windows.</li>
<li>Lots of cryptic XML files, not human-readable and not intended
to be edited directly.</li>
<li>The code from Visual Solution files cannot be reused. Any
changes requires several clicks and browsing the IDE, thus not
scalable.</li>
<li>Hard to use external libraries dependencies.</li>
<li>Hard to build from command line, require batch script hacks.</li>
</ul></li>
<li>Note:
<ul class="org-ul">
<li>Visual Studio IDE, now has CMake support.</li>
<li>MSBuild engine now is open source available at <a href="https://github.com/microsoft/msbuild">https://github.com/microsoft/msbuild</a></li>
</ul></li>
<li>See:
<ul class="org-ul">
<li><a href="https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild?view=vs-2019">MSBuild concepts</a></li>
<li><a href="https://docs.microsoft.com/en-us/cpp/build/msbuild-visual-cpp?view=vs-2019">MSBuild on the command line - C++</a></li>
<li><a href="https://docs.microsoft.com/en-us/cpp/build/projects-and-build-systems-cpp?view=vs-2019">C/C++ projects and build systems in Visual Studio</a></li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/extensibility/internals/solution-dot-sln-file?view=vs-2019">Solution (.sln) file</a></li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/ide/solutions-and-projects-in-visual-studio?view=vs-2019">Solutions and projects in Visual Studio</a></li>
<li><a href="https://devblogs.microsoft.com/cppblog/building-your-c-application-with-visual-studio-code/">Building your C++ application with Visual Studio Code</a></li>
</ul></li>
</ul></li>

<li><a href="https://mesonbuild.com/">Meson</a> - "Meson is an open source build system meant to be both
extremely fast, and, even more importantly, as user friendly as
possible. The main design point of Meson is that every moment a
developer spends writing or debugging build definitions is a
second wasted. So is every second spent waiting for the build
system to actually start compiling code."
<ul class="org-ul">
<li>Features:
<ul class="org-ul">
<li>multiplatform support for Linux, macOS, Windows, GCC, Clang,
Visual Studio and others</li>
<li>supported languages include C, C++, D, Fortran, Java, Rust</li>
<li>built-in multiplatform dependency provider that works together
with distro packages</li>
</ul></li>
<li>Side notes: 
<ul class="org-ul">
<li>Can generate Visual Studio Projects</li>
<li>Uses Ninja building system as backend.</li>
<li>Support CMake dependencies</li>
<li>Supports Conan package manager</li>
</ul></li>
<li>Projects using Meson:
<ul class="org-ul">
<li><a href="https://gitlab.gnome.org/GNOME/nautilus">Nautilus</a></li>
<li><a href="https://github.com/systemd/systemd">SystemD</a></li>
<li><a href="https://github.com/radare/radare2">Radare2</a></li>
<li><a href="https://mesonbuild.com/Users.html">Full list</a></li>
</ul></li>
<li>IDE Support:
<ul class="org-ul">
<li><a href="https://wiki.gnome.org/Apps/Builder">Gnome Builder</a></li>
<li><a href="https://www.kdevelop.org/">KDevelop</a></li>
<li><a href="https://www.eclipse.org/cdt/">Eclipse CDT (Experimental support)</a></li>
<li><a href="https://github.com/prozum/meson-cmake-wrapper">Meson CMake Wrapper</a> =&gt; For IDEs that support CMake (Visual
Studio, CLion, QTCreator, KDevelop)</li>
</ul></li>
<li>Problems:
<ul class="org-ul">
<li>Less IDE support and adoption than CMake and harder to use
with IDEs.</li>
</ul></li>
</ul></li>

<li><b>QMake</b> - QT Framework Building Systems
<ul class="org-ul">
<li>Problem: Brittle and only supported by QTCreator IDE.</li>
<li>Note: QT Now supports CMake</li>
</ul></li>

<li><b>KBuild</b> - Linux Kernel's building system. =&gt; Building system used
for building Linux kernel image and kernel modules (device drivers).</li>

<li><a href="https://build2.org/">build2</a> - "build2 is an open source (MIT), cross-platform build
toolchain for developing and packaging C++ code. It is a hierarchy
of tools that includes the build system, package dependency manager
(for package consumption), and project dependency manager (for
project development)."
<ul class="org-ul">
<li>See: <a href="https://news.ycombinator.com/item?id=17188851">Build2, a Cargo-like dependency and build manager for C/C++ | Hacker News</a></li>
</ul></li>

<li><a href="https://xmake.io">xmake</a> -  "xmake is a cross-platform build utility based on lua. The
project focuses on making development and building easier and
provides many features (.e.g package, install, plugin, macro,
action, option, task &#x2026;), so that any developer can quickly pick
it up and enjoy the productivity boost when developing and building
project. "
<ul class="org-ul">
<li>Github: <a href="https://github.com/tboox/xmake">https://github.com/tboox/xmake</a></li>
<li>Advatange:
<ul class="org-ul">
<li>Lua-like syntax</li>
<li>Less verbose than CMake</li>
<li>Run lua scripts</li>
<li>Generation of projects, for instance Visual studio solutions.</li>
</ul></li>
</ul></li>

<li><a href="https://docs.bazel.build/versions/master/bazel-overview.html">Bazel</a> (Building system created by Google for C and C++.)
<ul class="org-ul">
<li>"Bazel is an open-source build and test tool similar to Make,
Maven, and Gradle. It uses a human-readable, high-level build
language. Bazel supports projects in multiple languages and
builds outputs for multiple platforms. Bazel supports large
codebases across multiple repositories, and large numbers of
users."</li>
<li>Note: Written in Java.</li>
</ul></li>

<li><b>Make</b> (GNU Make, BSD Make and NMake) - Simple and quick building
system more used on Unix-like operating systems.
<ul class="org-ul">
<li>Disadvantages:
<ul class="org-ul">
<li>Fragmentation - There are many variants (GNU Make, BSD Make
and NMake - Microsft's Make), although GNU Make is the most
used one.</li>
<li>Brittle</li>
<li>Hard to modify</li>
<li>Hard to add dependencies</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orga68ce37" class="outline-3">
<h3 id="orga68ce37"><span class="section-number-3">1.2</span> Package Managers</h3>
<div class="outline-text-3" id="text-1-2">
<p>
<b>Package Managers</b>
</p>

<p>
There are several solutions for managing dependencies in C++ projects,
however they are still no widely used or integrated to IDEs and
building systems. A reasonable set of features for selecting a package
manager is CMake support, CMake integration, IDE integration, command
line interface and distributed repositories. Some of them are:
</p>

<ul class="org-ul">
<li><a href="https://www.conan.io/">Conan</a> [Most mature], [BEST] - Dependency manager written in Python which
can install source packages from multiple repositories, including
local network and current machine package cache of pre-compiled
object code.
<ul class="org-ul">
<li>Creator: Diego Rodriguez Losada</li>
<li>CMake Support: YES</li>
<li>Implementation Issues: As Conan is written in Python, it requires
a Python installation.</li>
<li>Package authoring: Packages configuration are written in Python.</li>
<li>See:
<ul class="org-ul">
<li><a href="https://blog.conan.io/2017/05/11/C-C++-Binary-Package-Management-for-Visual-Studio.html">C/C++ Binary Package Management for Visual Studio</a></li>
</ul></li>
<li>Video:
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=xvqH_ck-5Q8">CppCon 2016: Diego Rodriguez-Losada "Conan, a C and C++ package manager for developers"</a></li>
<li>Humor, funny: <a href="https://www.youtube.com/watch?v=nLdB1ErncBg">CppCon 2016: Diego Rodriguez-Losada "Why not Conan?"</a></li>
<li><a href="https://www.youtube.com/watch?v=CCKiKGn-ew8">Diego Rodriguez-Losada: Conan C++ package manager</a></li>
</ul></li>
</ul></li>

<li><a href="https://docs.microsoft.com/en-us/cpp/vcpkg?view=vs-2017">vcpkg</a> [Most mature], [BEST] - open source cross-platform C++ package
manager created by Microsft Inc.
<ul class="org-ul">
<li>Creator: Microsft Inc. MSFT</li>
<li>CMake Support: YES</li>
<li>Documentation: <a href="https://vcpkg.readthedocs.io/en/latest/">https://vcpkg.readthedocs.io/en/latest/</a></li>
<li>Repository: <a href="https://github.com/Microsoft/vcpkg">https://github.com/Microsoft/vcpkg</a></li>
<li>FAQ: <a href="https://github.com/Microsoft/vcpkg/blob/master/docs/about/faq.md">VCpkg FAQ</a></li>
<li>See:
<ul class="org-ul">
<li><a href="https://blog.kitware.com/vcpkg-a-tool-to-build-open-source-libraries-on-windows/">Vcpkg: A tool to build open source libraries on Window</a></li>
<li>Video: Microsft - <a href="https://www.youtube.com/watch?v=zo6nqFVBd5o">Vcpkg a tool to build open source C++ libraries</a></li>
<li>Video: Microsft - <a href="https://channel9.msdn.com/Shows/C9-GoingNative/GoingNative-54-Whats-New-In-Visual-Studio-2017-RC-and-Introduction-To-Vcpkg">GoingNative 54: What's New In Visual Studio 2017 RC and Introduction To Vcpkg</a></li>
<li>Video: <a href="https://www.youtube.com/watch?v=KOeOLOu6nHw">C++ Weekly - Ep 118 - Trying Out The vcpkg Package Manager</a></li>
</ul></li>
</ul></li>

<li><a href="http://www.buckaroo.pm/">Buckaroo</a> - "A C++ package manager that will take you to your happy place"
<ul class="org-ul">
<li>Creator: LoopPerfect Limited LTD.</li>
<li>CMake Support: Backaroo uses Buck build system as its default
building system, although there is still some limited support to
CMake. More info. at <a href="https://github.com/LoopPerfect/buckaroo/wiki/Building-CMake-Projects">Buildign CMake projects</a></li>
<li>Repository: <a href="https://github.com/LoopPerfect/buckaroo">https://github.com/LoopPerfect/buckaroo</a></li>
<li>Documentation: <a href="https://github.com/LoopPerfect/buckaroo/wiki/">https://github.com/LoopPerfect/buckaroo/wiki/</a></li>
<li>Buckaroo-recipes: <a href="https://github.com/LoopPerfect/buckaroo-recipes/tree/master/recipes">https://github.com/LoopPerfect/buckaroo-recipes/tree/master/recipes</a></li>
</ul></li>

<li><a href="https://www.qpm.io/">QPM</a> - Pcakge manager for QT.
<ul class="org-ul">
<li>Repository: <a href="https://github.com/Cutehacks/qpm">https://github.com/Cutehacks/qpm</a></li>
<li>CMake Support: ???</li>
<li>Package listing: <a href="https://www.qpm.io/packages/index.html">https://www.qpm.io/packages/index.html</a></li>
</ul></li>

<li><a href="https://github.com/pfultz2/cget">cget</a> - "Cmake package retrieval. This can be used to download and
install cmake packages." Decentralized: Packages can be installed
from anywhere, from github, urls, or local files. NOTE: It is not a
package manager.
<ul class="org-ul">
<li>Creator: Paul Fultz</li>
<li>CMake Support: YES</li>
<li>Repository: <a href="https://github.com/pfultz2/cget">https://github.com/pfultz2/cget</a></li>
</ul></li>

<li><a href="https://github.com/ruslo/hunter">Hunter</a> - Cross-platform package manager for C/C++ fully integrated
to CMake, it does not need any external configuration file or run
any application before editing the project or running cmake from
command line. All the libraries to be installed are set in the
file CMakeFiles.txt. If they are not available in the system, they
are automatically downloaded and installed.
<ul class="org-ul">
<li>Creator: Ruslan Baratov</li>
<li>CMake Support: YES</li>
<li>Documentation: <a href="https://docs.hunter.sh">https://docs.hunter.sh</a></li>
<li>Package list: <a href="https://docs.hunter.sh/en/latest/packages.html">https://docs.hunter.sh/en/latest/packages.html</a></li>
<li>Note: It is still under development, but it seems promising.</li>
</ul></li>

<li><a href="https://cppan.org/">Cppan</a> - "CPPPAN is the crossplatform C/C++ dependency manager. It
is built on top of CMake and also has build system capabilities."
<ul class="org-ul">
<li>Creator: Egor Pugin</li>
<li>CMake Support: ???</li>
<li>Repository: <a href="https://github.com/cppan/cppan">https://github.com/cppan/cppan</a></li>
<li>Documentation: <a href="https://github.com/cppan/cppan/tree/v1/doc">https://github.com/cppan/cppan/tree/v1/doc</a></li>
</ul></li>

<li><a href="https://build2.org/">Build2</a> - "build2 is an open source (MIT), cross-platform build
toolchain for developing and packaging C++ code. It is a hierarchy
of tools that includes the build system, package dependency manager
(for package consumption), and project dependency manager (for
project development)."
<ul class="org-ul">
<li>Creator: <a href="https://codesynthesis.com/">Code Synthesis LTDA</a>, Boris Kolpackov</li>
<li>CMake Support: NO</li>
<li>Package listing: <a href="https://cppget.org/">https://cppget.org/</a></li>
<li>Possible shortcoming: No integration with CMake building-system
and no integration to IDEs like CMake.</li>
<li>See:
<ul class="org-ul">
<li>Video: <a href="https://www.youtube.com/watch?v=Nni2Qu2WitY&amp;feature=youtu.be">CppCon 2018: "C++ Dependency Management: from Package Consumption to Project Development"</a></li>
</ul></li>
</ul></li>

<li><a href="https://github.com/iauns/cpm">CPM</a> - [NO LONGER MAINTENED] "A C++ Package Manager based on CMake and Git."</li>

<li><a href="https://spack.io/">Spack</a> - "Spack is a package manager for supercomputers, Linux, and
macOS. It makes installing scientific software easy. With Spack,
you can build a package with multiple versions, configurations,
platforms, and compilers, and all of these builds can coexist on
the same machine."
<ul class="org-ul">
<li>Repository: <a href="https://github.com/spack/spack">https://github.com/spack/spack</a></li>
</ul></li>

<li><a href="https://blogs.msdn.microsoft.com/vcblog/2013/04/26/nuget-for-c/">Nuget</a> - A pacakge manager used in Visual Studio for C#, VB.NET,
Javascript and C++.
<ul class="org-ul">
<li>Creator: Microsft Inc. MSFT</li>
<li>CMake Support: NO</li>
<li>Problem: It seems to work only on Windows and Visual Studio.</li>
<li>See: 
<ul class="org-ul">
<li><a href="https://blog.nuget.org/20130426/native-support.html">https://blog.nuget.org/20130426/native-support.html</a></li>
<li>Video: <a href="https://www.youtube.com/watch?v=FIY4FZDIt8Q">Consuming Native NuGet Packages in Visual Studio</a></li>
<li><a href="https://blog.scalyr.com/2018/07/getting-started-quickly-c-logging/">https://blog.scalyr.com/2018/07/getting-started-quickly-c-logging/</a></li>
<li><a href="https://www.microsofttranslator.com/bv.aspx?from=&amp;to=en&amp;a=https://qiita.com/nia_tn1012/items/77c3c1b006f7c69d30ac">Let's use Nuget in C++ project</a> (Translated from Japanese with Bing Translator.)</li>
</ul></li>
</ul></li>
</ul>


<p>
<b>Considerations for package manager choice</b>
</p>

<ul class="org-ul">
<li>The most mature package managers with CMake integration are Conan
and Vcpkg. Vcpkg has the largest number of packages available.
However, it is not possible to install multiple versions of the
same package or host a local package repository.</li>

<li>Conan is more documented and provides more control over package
versions. It has descentralized repositories and also allows users to
host local or intranet private repositories. A minor problem
of Conan is the Python installation requirement, but this issue
could be quickly solved by turning Conan into a single native
executable file by packing Conan Python module with the Python
interpreter with tools like Py2Exe for Windows.</li>
</ul>

<p>
Comparative table:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Feature</th>
<th scope="col" class="org-left">Conan</th>
<th scope="col" class="org-left">Vcpkg</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Standalone</td>
<td class="org-left">NO</td>
<td class="org-left">YES</td>
</tr>

<tr>
<td class="org-left">Decentralized repositories</td>
<td class="org-left">YES</td>
<td class="org-left">NO</td>
</tr>

<tr>
<td class="org-left">Local Repository</td>
<td class="org-left">YES</td>
<td class="org-left">NO</td>
</tr>

<tr>
<td class="org-left">Multiple versions of same package</td>
<td class="org-left">YES</td>
<td class="org-left">NO</td>
</tr>

<tr>
<td class="org-left">Integration with IDEs</td>
<td class="org-left">NO</td>
<td class="org-left">NO</td>
</tr>

<tr>
<td class="org-left">Most Simple</td>
<td class="org-left">-</td>
<td class="org-left">Winner</td>
</tr>

<tr>
<td class="org-left">More packages</td>
<td class="org-left">-</td>
<td class="org-left">Winner</td>
</tr>

<tr>
<td class="org-left">User control</td>
<td class="org-left">Winner</td>
<td class="org-left">-</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Overall</td>
<td class="org-left">Winner</td>
<td class="org-left">-</td>
</tr>
</tbody>
</table>

<p>
<b>Some reasonable set of features for a package managers</b>
</p>

<ul class="org-ul">
<li>CMake integration</li>
<li>Default repository, descentralized and local repositories.</li>
<li>Cross platform</li>
<li>Easier to use from CMake without needing to call any external
command, the packages to be installed should be defined in the
CMakeLists.txt file.</li>
<li>Command line tools</li>
<li>Browse package metadata from command line or IDE like .net's Nuget
or Python's pip.</li>
<li>Integration with IDEs</li>
<li>Standalone no depending on any interpreter or
external dependency or fully packed with the interpreter making
easier to install and deploy.</li>
</ul>

<p>
<b>Low tech approaches for package or dependency management</b>
</p>

<ul class="org-ul">
<li>GIT Submodules</li>

<li>Use system-specific package manager for instance: Ubuntu: apt-get;
Fedora Linux: dnf; BSD Ports: &#x2026;
<ul class="org-ul">
<li>Disadvantage: Hard to reproduce compilation across different
machines as most Linux distributions only provide a single
version and may not have all necessary libraries and header-only
libraries.</li>
</ul></li>

<li>Add libraries manually</li>

<li>Install packages manually in the systems:
<ul class="org-ul">
<li>./configure &amp;&amp; make &amp;&amp; make install</li>
</ul></li>

<li>Copy header-only libraries to project-directory</li>
</ul>


<p>
<b>Interesting discussions:</b>
</p>

<ul class="org-ul">
<li>Reddit /r/cpp <a href="https://www.reddit.com/r/cpp/comments/3d1vjq/is_there_a_c_package_manager_if_not_how_do_you/">Is there a C++ package manager? If not, how do you handle dependencies?</a></li>
<li>Reddit /r/cpp - <a href="https://www.reddit.com/r/cpp/comments/5v10r1/downsides_to_conanio/">Downsides to Conan.io?</a></li>
<li>Reddit /r/cpp - <a href="https://www.reddit.com/r/cpp/comments/40cfbk/hunter_crossplatform_package_manager_for_c/">Hunter - Cross-platform package manager for C++</a></li>
<li><a href="https://news.ycombinator.com/item?id=16915195">Announcing a single C++ library manager for Linux, macOS and Windows: Vcpkg</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org605829b" class="outline-2">
<h2 id="org605829b"><span class="section-number-2">2</span> Make and GNU Make - Makefiles</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orged07e28" class="outline-4">
<h4 id="orged07e28"><span class="section-number-4">2.0.1</span> Overview</h4>
<div class="outline-text-4" id="text-2-0-1">
<p>
Despite being one of the oldest building systems for C and C++, dating
back to 1976, Make is still widely used on Unix-like operating
systems, such as Linux, BSD-variants, MacOSX and so on. Make is not
only useful for C or C++, the tool can also be used with any other
programming language or for any type of building automation such as
compiling Latex (Tex) files. 
</p>

<p>
Make Variants (Implementations):
</p>
<ul class="org-ul">
<li>GNU Make (Most used)</li>
<li>BSD Make</li>
<li>NMake - Microsft's Make</li>
</ul>

<p>
Note: 
</p>
<ul class="org-ul">
<li>This text assumes that the <b>Make</b> used is <b>GNU Make</b></li>
</ul>

<p>
Advantages: 
</p>
<ul class="org-ul">
<li>Easier usage</li>
<li>Available on most Unix-like operating systems</li>
<li>Can be used for automating any type of building.</li>
</ul>

<p>
Drawbacks: 
</p>

<ul class="org-ul">
<li>Makefiles uses tabs instead of spaces which makes it brittle and
easier to break if the editor settings are not appropriate.</li>

<li>Fragmentation: there is no a single Make tool, actually there are
many incompatible implementations, namely: BSD Make; GNU Make,
mostly used on Linux; Microsft's Make or NMake.</li>

<li>Hard to use on Windows, Make requires many helper executables
such as echo, cp, ls, rm, &#x2026;</li>

<li>Poor IDE support</li>

<li>No scalable for large projects</li>

<li>Hard to change</li>

<li>Hard to add dependencies</li>

<li>Hard to understand and modify</li>
</ul>

<p>
<b>Command Line Summary</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Make Command</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">$ make &#x2013;version</td>
<td class="org-left">Show version</td>
</tr>

<tr>
<td class="org-left">$ make &#x2013;help</td>
<td class="org-left">Show help</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make</td>
<td class="org-left">Run the file 'Makefile' in the current directory, executing the 'all' target.</td>
</tr>

<tr>
<td class="org-left">$ make CC=clang CXX=clang++</td>
<td class="org-left">Target 'all' for current Makefile, but sets C compiler to clang and C++ one to clang++</td>
</tr>

<tr>
<td class="org-left">$ make &lt;TARGET&gt;</td>
<td class="org-left">Run the target &lt;TARGET&gt;</td>
</tr>

<tr>
<td class="org-left">$ make &lt;TARGET&gt; VAR1=VAL1 VAR2=VAL2</td>
<td class="org-left">Run some target named &lt;TARGET&gt; setting variable VAR1 to VAL1, VAR2 to VAL2.</td>
</tr>

<tr>
<td class="org-left">$ make clean</td>
<td class="org-left">Run the target 'clean' for the Makefile in current directory.</td>
</tr>

<tr>
<td class="org-left">$ make install</td>
<td class="org-left">Run the target 'install' for the current Makefile</td>
</tr>

<tr>
<td class="org-left">$ make help</td>
<td class="org-left">Run the target 'help' for the current Makefile.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make -C <code>/path/dir</code></td>
<td class="org-left">Run the file 'Makefile' in the directory  <code>/path/dir</code>, executes 'all' target.</td>
</tr>

<tr>
<td class="org-left">$ make -C <code>/path/dir</code> &lt;TARGET&gt;</td>
<td class="org-left">Executes target &lt;TARGET&gt; of Makefile in  <code>/path/dir</code></td>
</tr>

<tr>
<td class="org-left">$ make -f Other.make</td>
<td class="org-left">Run the Makefile named 'Other.make' in current directory</td>
</tr>

<tr>
<td class="org-left">$ make -f Other.make &lt;TARGET&gt;</td>
<td class="org-left">Run the target &lt;TARGET&gt; of Makefile named 'Other.make' in current directory.</td>
</tr>

<tr>
<td class="org-left">$ make -C <code>/path/dir</code> -f Other.make</td>
<td class="org-left">Run the Makefile named Other.make' in directory <code>/path/dir</code>,  executes 'all' target</td>
</tr>

<tr>
<td class="org-left">$ make -C <code>/path/dir</code> -f Other.make &lt;TARGET&gt;</td>
<td class="org-left">Run the Makefile named Other.make' in directory <code>/path/dir</code>,  executes 'all' target</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Common Make variables Summary</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">CC</td>
<td class="org-left">C compiler, most common value is 'gcc'</td>
</tr>

<tr>
<td class="org-left">CXX</td>
<td class="org-left">C++ Compiler, most common value is 'g++'</td>
</tr>

<tr>
<td class="org-left">LD</td>
<td class="org-left">Linker</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CFLAGS</td>
<td class="org-left">C compilation flags, i.e: -Wall -Wextra -g &#x2026;</td>
</tr>

<tr>
<td class="org-left">CXXFLAGS</td>
<td class="org-left">C++ compilation flags</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
<b>Target Shortcuts summary</b> 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Target</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$@</td>
<td class="org-left">target file name</td>
</tr>

<tr>
<td class="org-left">$(@D)</td>
<td class="org-left">target path (directory only)</td>
</tr>

<tr>
<td class="org-left">$(@F)</td>
<td class="org-left">target file name without directory</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Dependencies</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$&lt;</td>
<td class="org-left">name of first dependency</td>
</tr>

<tr>
<td class="org-left">$*</td>
<td class="org-left">name of first dependency without extension</td>
</tr>

<tr>
<td class="org-left">$^</td>
<td class="org-left">name of all dependencies of the target</td>
</tr>

<tr>
<td class="org-left">$(&lt;D)</td>
<td class="org-left">path of first dependencies</td>
</tr>

<tr>
<td class="org-left">$(&lt;F)</td>
<td class="org-left">paths of all dependencies</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Makefile Variable Tricks Summary</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Trick</th>
<th scope="col" class="org-left">Expansion</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">SRC     := $(wildcard src/*.cpp)</td>
<td class="org-left">SRC := src/fil1.cpp src/file2.cpp &#x2026;</td>
<td class="org-left">Gets all files with *.cpp extension in ./src</td>
</tr>

<tr>
<td class="org-left">packs   := n0 n1 n2</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">packs-p := $(addprefix &#x2013;pack ,$(packs))</td>
<td class="org-left">pack-p := &#x2013;pack n1 &#x2013;pack n2 &#x2013;pack n3</td>
<td class="org-left">Add prefix &#x2013;pack to each <code>n[i]</code></td>
</tr>

<tr>
<td class="org-left">pwd     := $(shell pwd)</td>
<td class="org-left">pwd := /home/archbox/project1</td>
<td class="org-left">Expands to shell command output.</td>
</tr>

<tr>
<td class="org-left"><code>${HOME}</code></td>
<td class="org-left">/home/user/username</td>
<td class="org-left">Expands to environment variable</td>
</tr>

<tr>
<td class="org-left">file    := ${HOME}/file1.exe</td>
<td class="org-left">/home/user/username/file1.exe</td>
<td class="org-left">-</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Multi line variable assignment
</p>

<div class="org-src-container">
<pre class="src src-makefile"><span class="org-variable-name">CFLAGS</span>  = -DUSE_STDPERIPH_DRIVER
<span class="org-variable-name">CFLAGS</span> += -c -fmessage-length=0 -g3 -gdwarf-2 -O0 -Wall -Wa,-adhlns=<span class="org-string">"</span><span class="org-makefile-targets"><span class="org-string">$</span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-constant">@</span></span></span><span class="org-string">.lst"</span>
<span class="org-variable-name">CFLAGS</span> += -mthumb -mcpu=cortex-m4
<span class="org-variable-name">CFLAGS</span> += -MMD -MP -MF<span class="org-string">"</span><span class="org-makefile-targets"><span class="org-string">$</span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-constant">@</span></span></span><span class="org-string">.d"</span> -MT<span class="org-string">"</span><span class="org-makefile-targets"><span class="org-string">$</span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-constant">@</span></span></span><span class="org-string">.d"</span>
<span class="org-variable-name">CFLAGS</span> += -Iinc -Iinc/cmsis -Iinc/peripherals -Iinc/stm32f4xx
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab37ed4" class="outline-4">
<h4 id="orgab37ed4"><span class="section-number-4">2.0.2</span> Project Example</h4>
<div class="outline-text-4" id="text-2-0-2">
<p>
<b>File: Makefile</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">   <span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------#</span>
   <span class="org-comment-delimiter">#     </span><span class="org-comment">Compilation and Linker Settings               #</span>
   <span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------#</span>

CXX = g++   <span class="org-comment-delimiter"># </span><span class="org-comment">C++ Compiler</span>
CC  = gcc   <span class="org-comment-delimiter"># </span><span class="org-comment">C Compiler</span>

CCFLAGS  =                          <span class="org-comment-delimiter"># </span><span class="org-comment">C compiler flags</span>
CXXFLAGS = -std=c++1z -pedantic -Wall -Wextra <span class="org-comment-delimiter"># </span><span class="org-comment">C++ Compiler flags</span>

LDFLAGS   =   <span class="org-comment-delimiter"># </span><span class="org-comment">C Linker Flags</span>
LDXXFLAGS =   <span class="org-comment-delimiter"># </span><span class="org-comment">C++ Linker flags</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">DEBUG = 1 =&gt; Enables debug building</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">DEBUG = 0 =&gt; Enable release building</span>
DEBUG ?= 0
<span class="org-function-name">ifeq</span> ($(<span class="org-sh-quoted-exec">DEBUG</span>), 1)
    <span class="org-comment-delimiter"># </span><span class="org-comment">(-g)  =&gt; Enable debug symbols</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">(-O0) =&gt; Disable optimizations</span>
    <span class="org-comment-delimiter"># </span><span class="org-comment">-DNDEBUG =&gt; Enable assertions</span>
    CXXFLAGS  += -g -O0  -DNDEBUG
<span class="org-keyword">else</span>
     <span class="org-comment-delimiter"># </span><span class="org-comment">Release mode =&gt;&gt; Enable optimization</span>
     CXXFLAGS += -O3
     <span class="org-comment-delimiter"># </span><span class="org-comment">Enable Link-time optimiztion</span>
     LDXXFLAGS += <span class="org-comment-delimiter"># </span><span class="org-comment">-flto -ffunction-sections -fdata-sections</span>
endif

APP2_OBJS = app2.o stats.o

   <span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------#</span>
   <span class="org-comment-delimiter">#     </span><span class="org-comment">Makefile Rules                                #</span>
   <span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------#</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Main rule executed when use runs '$ make' without</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">any argument.</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">---------------------------------------------------</span>
<span class="org-function-name">all</span>: app1.bin app2.bin

<span class="org-comment-delimiter"># </span><span class="org-comment">This rule builds the executable 'app1.bin'</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">----------------------------------------------------</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$^ =&gt; Refers to all dependencies (app1.o, app1.o)</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$@ =&gt; Refers to the target name, 'app1.bin'</span>
<span class="org-function-name">app1.bin</span> : app1.o stats.o
        @echo -e <span class="org-string">"\n [INFO] Building executable 'app1.bin'"</span>
        $(<span class="org-sh-quoted-exec">CXX</span>) -o <span class="org-keyword">$@</span> $^ $(<span class="org-sh-quoted-exec">LDXXFLAGS</span>)

<span class="org-comment-delimiter"># </span><span class="org-comment">This rule builds the executable 'app2.bin'</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">----------------------------------------------------</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$^ =&gt; Refers to all dependencies (app1.o, app1.o)</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$@ =&gt; Refers to the target name, 'app1.bin'</span>
<span class="org-function-name">app2.bin</span> : $(<span class="org-sh-quoted-exec">APP2_OBJS</span>)
        @echo -e <span class="org-string">"\n [INFO] Building executable 'app2.bin'"</span>
        $(<span class="org-sh-quoted-exec">CXX</span>) -o <span class="org-keyword">$@</span> $^ $(<span class="org-sh-quoted-exec">LDXXFLAGS</span>)

<span class="org-comment-delimiter"># </span><span class="org-comment">Compiles all *.cpp files to *.o (object-code files) which</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">are inputs to the linker.</span>
<span class="org-comment-delimiter">#</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------------------</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$&lt; =&gt; Name of dependency (on right-hand size, example: someFile.cpp)</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">$@ =&gt; Name of target (on the left-hand side)</span>
<span class="org-comment-delimiter">#</span>
%.o : %.cpp
        @echo -e <span class="org-string">"\n [INFO] Building object code: $&lt;"</span>
        $(<span class="org-sh-quoted-exec">CXX</span>) -c $&lt; -o <span class="org-keyword">$@</span>  $(<span class="org-sh-quoted-exec">CXXFLAGS</span>)

<span class="org-comment-delimiter"># </span><span class="org-comment">This rule runs the executable app1.bin, the dependency is 'app1.bin'</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">------------------------------------------------------------</span>
<span class="org-function-name">app1_run</span>: app1.bin
        ./app1.bin

<span class="org-comment-delimiter"># </span><span class="org-comment">This rule deletes all object-codes (*.o, *.bin, *.so, *.dll, *.exe ...)</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-------------------------------------------------------</span>
<span class="org-function-name">clean</span>:
        @echo -e <span class="org-string">"\n [INFO] Cleaning compilation output."</span>
        rm -rf -v *.o *.bin

<span class="org-function-name">install</span>: app1.bin app2.bin
        @echo -e <span class="org-string">"\n [INFO] Installing application to: $(</span><span class="org-sh-quoted-exec">INSTALL_PATH</span><span class="org-string">)"</span>
        mkdir -p $(<span class="org-sh-quoted-exec">INSTALL_PATH</span>)
        cp -rv $^ $(<span class="org-sh-quoted-exec">INSTALL_PATH</span>)
</pre>
</div>

<p>
<b>File: stats.hpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#if</span><span class="org-negation-char"><span class="org-preprocessor">n</span></span><span class="org-preprocessor">def</span> _STATS_HPP_
<span class="org-preprocessor">#define</span> <span class="org-variable-name">_STATS_HPP_</span>

<span class="org-keyword">class</span> <span class="org-type">Stats</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-function-name">Stats</span><span class="org-rainbow-delimiters-depth-2">()</span>;
        ~<span class="org-function-name">Stats</span><span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-function-name">Stats</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Stats</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;
        <span class="org-type">Stats</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Stats</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;
        <span class="org-type">void</span>   <span class="org-function-name">add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-type">void</span>   <span class="org-function-name">clear</span><span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-type">double</span> <span class="org-function-name">mean</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;
        <span class="org-type">double</span> <span class="org-function-name">sum</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">const</span>;
        <span class="org-type">size_t</span> <span class="org-function-name">count</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;   
<span class="org-function-name">private</span>:
        <span class="org-keyword">struct</span> <span class="org-type">pimpl</span>;
        <span class="org-type">pimpl</span>* <span class="org-variable-name">m_pimpl</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-preprocessor">#endif</span> 
</pre>
</div>

<p>
<b>File: stats.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">numeric</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">stats.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-constant">Stats</span>::<span class="org-type">pimpl</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">dataset</span> = <span class="org-rainbow-delimiters-depth-2">{}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">Stats</span>::Stats<span class="org-rainbow-delimiters-depth-1">()</span>: m_pimpl<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-constant">Stats</span>::<span class="org-type">pimpl</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">Stats</span>::~Stats<span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [INFO] ~Stats() destructor called. Ok. "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">delete</span> m_pimpl;
    m_pimpl = <span class="org-constant">nullptr</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-constant">Stats</span>::<span class="org-function-name">add</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">{</span>
    m_pimpl-&gt;dataset.push_back<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-constant">Stats</span>::<span class="org-function-name">clear</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   m_pimpl-&gt;dataset.clear<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">double</span> <span class="org-constant">Stats</span>::<span class="org-function-name">sum</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">const</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::accumulate<span class="org-rainbow-delimiters-depth-2">(</span> m_pimpl-&gt;dataset.begin<span class="org-rainbow-delimiters-depth-3">()</span>
                          , m_pimpl-&gt;dataset.end<span class="org-rainbow-delimiters-depth-3">()</span>, 0.0<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">double</span> <span class="org-constant">Stats</span>::<span class="org-function-name">mean</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">const</span> 
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> <span class="org-keyword">this</span>-&gt;sum<span class="org-rainbow-delimiters-depth-2">()</span> / m_pimpl-&gt;dataset.size<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">size_t</span> <span class="org-constant">Stats</span>::<span class="org-function-name">count</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> m_pimpl-&gt;dataset.size<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>File: app1.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">stats.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] Running application 'app1' - OK"</span> &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-type">Stats</span> <span class="org-variable-name">st</span>;
      st.add<span class="org-rainbow-delimiters-depth-2">(</span>10.0<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>20.6354<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>-5.62<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>8.623<span class="org-rainbow-delimiters-depth-2">)</span>;
      st.add<span class="org-rainbow-delimiters-depth-2">(</span>20.0<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>20.6354<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>-5.62<span class="org-rainbow-delimiters-depth-2">)</span>; st.add<span class="org-rainbow-delimiters-depth-2">(</span>8.623<span class="org-rainbow-delimiters-depth-2">)</span>;

      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt; st.count() = "</span> &lt;&lt; st.count<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt;   st.sum() = "</span> &lt;&lt; st.sum<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt;  st.mean() = "</span> &lt;&lt; st.mean<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>File: app2.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string">"stats.hpp"</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Running application: 'app2' - OK"</span> &lt;&lt; <span class="org-string">"\n"</span>;

     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-keyword">return</span> EXIT_FAILURE;
     <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-type">Stats</span> <span class="org-variable-name">st</span>;

     <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 1; i &lt; argc; i++<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
           st.add<span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-4">(</span>argv<span class="org-rainbow-delimiters-depth-5">[</span>i<span class="org-rainbow-delimiters-depth-5">]</span><span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">invalid_argument</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">{</span>
           <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" Error: invalid input &lt;"</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>i<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-constant">std</span>::endl;
           <span class="org-keyword">return</span> EXIT_FAILURE; 
        <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt; st.count() = "</span> &lt;&lt; st.count<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt;   st.sum() = "</span> &lt;&lt; st.sum<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"  =&gt;  st.mean() = "</span> &lt;&lt; st.mean<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;    

     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Run target 'all'</b> (Release mode)
</p>

<ul class="org-ul">
<li>$ make =&gt; Runs rule 'all'</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ make

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building object code: stats.cpp
g++    -c stats.cpp -o <span class="org-keyword">stats.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app1.bin'</span>
g++    -o <span class="org-keyword">app1.bin</span> app1.o stats.o  

 [INFO] Building object code: app2.cpp
g++    -c app2.cpp -o <span class="org-keyword">app2.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app2.bin'</span>
g++    -o <span class="org-keyword">app2.bin</span> app2.o stats.o  

</pre>
</div>

<p>
<b>Run target 'all'</b> (Debug Mode)
</p>

<p>
Run target 'all' which builds target 'app1.bin', 'app2.bin'
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make <span class="org-variable-name">DEBUG</span>=1

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -g -O0  -DNDEBUG

 [INFO] Building object code: stats.cpp
g++    -c stats.cpp -o <span class="org-keyword">stats.o</span>  -std=c++1z -pedantic -Wall -Wextra  -g -O0  -DNDEBUG

 [INFO] Building executable <span class="org-string">'app1.bin'</span>
g++    -o <span class="org-keyword">app1.bin</span> app1.o stats.o 

 [INFO] Building object code: app2.cpp
g++    -c app2.cpp -o <span class="org-keyword">app2.o</span>  -std=c++1z -pedantic -Wall -Wextra  -g -O0  -DNDEBUG

 [INFO] Building executable <span class="org-string">'app2.bin'</span>
g++    -o <span class="org-keyword">app2.bin</span> app2.o stats.o 

</pre>
</div>

<p>
Debug application 'app1.bin'
</p>

<div class="org-src-container">
<pre class="src src-sh"> $ gdb --silent app1.bin 
 Printing of typedefs defined<span class="org-keyword"> in</span> a class<span class="org-keyword"> in</span> on
 Reading symbols from app1.bin...done.

 (gdb) list
 1      <span class="org-comment-delimiter">#</span><span class="org-comment">include &lt;iostream&gt;</span>
 2      
 3      <span class="org-comment-delimiter">#</span><span class="org-comment">include &lt;stats.hpp&gt; </span>
 ... ... ... ... 

 <span class="org-comment-delimiter"># </span><span class="org-comment">Set breaking point at main() </span>
 (gdb) b main

 <span class="org-comment-delimiter"># </span><span class="org-comment">Run program app1.bin </span>
 (gdb) r

 gdb) n
  [TRACE] Running application <span class="org-string">'app1'</span> - OK
 9              Stats st;

 (gdb) p st
 $<span class="org-variable-name">1</span> = {
   m_pimpl = 0x616280
 }

 ... ...    ... ...    ... ...    ... ... 

(gdb) p st-&gt;m_pimpl-&gt;dataset
$<span class="org-variable-name">5</span> = std::vector of length 8, capacity 8 = {10, 20.635400000000001, -5.6200000000000001, 
  8.6229999999999993, 20, 20.635400000000001, -5.6200000000000001, 8.6229999999999993}
(gdb) 
</pre>
</div>

<p>
<b>Run target 'clean'</b>
</p>

<p>
Clean all compilation files: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make clean

 [INFO] Cleaning compilation output.
rm -rf -v *.o *.bin
removed <span class="org-string">'app1.o'</span>
removed <span class="org-string">'app2.o'</span>
removed <span class="org-string">'stats.o'</span>
removed <span class="org-string">'app1.bin'</span>
removed <span class="org-string">'app2.bin'</span>
</pre>
</div>

<p>
<b>Run target 'app1.bin'</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make app1.bin

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building object code: stats.cpp
g++    -c stats.cpp -o <span class="org-keyword">stats.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app1.bin'</span>
g++    -o <span class="org-keyword">app1.bin</span> app1.o stats.o  
</pre>
</div>

<p>
<b>Run target 'app2.bin'</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make app2.bin

 [INFO] Building object code: app2.cpp
g++    -c app2.cpp -o <span class="org-keyword">app2.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app2.bin'</span>
g++    -o <span class="org-keyword">app2.bin</span> app2.o stats.o  
</pre>
</div>

<p>
<b>Run target 'app1_run'</b>
</p>

<p>
The target app1_run runs the executable 'app1.bin'. It is only
compiled if not built yet.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make app1_run

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building object code: stats.cpp
g++    -c stats.cpp -o <span class="org-keyword">stats.o</span>  -std=c++1z -pedantic -Wall -Wextra  -O3

 [INFO] Building executable <span class="org-string">'app1.bin'</span>
g++    -o <span class="org-keyword">app1.bin</span> app1.o stats.o  
./app1.bin
 [TRACE] Running application <span class="org-string">'app1'</span> - OK
  =&gt; st.count() = 8
  =&gt;   st.sum() = 77.2768
  =&gt;  st.mean() = 9.6596
 [INFO] ~Stats() destructor called. Ok. 
</pre>
</div>

<p>
Run target again: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make app1_run
./app1.bin
 [TRACE] Running application <span class="org-string">'app1'</span> - OK
  =&gt; st.count() = 8
  =&gt;   st.sum() = 77.2768
  =&gt;  st.mean() = 9.6596
 [INFO] ~Stats() destructor called. Ok. 
</pre>
</div>

<p>
<b>Run target 'install'</b>
</p>

<p>
Run target 'make install'
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make install <span class="org-variable-name">INSTALL_PATH</span>=/tmp/bin <span class="org-variable-name">DEBUG</span>=1

 [INFO] Building object code: app1.cpp
g++    -c app1.cpp -o <span class="org-keyword">app1.o</span>  -std=c++1z -pedantic -Wall -Wextra  -g -O0  -DNDEBUG

  ... ... ...   ... ... ...   ... ... ...   ... ... ...   ... ... ... 

 [INFO] Installing application to: /tmp/bin
mkdir -p /tmp/bin
cp -rv app1.bin app2.bin /tmp/bin
<span class="org-string">'app1.bin'</span> -&gt; <span class="org-string">'/tmp/bin/app1.bin'</span>
<span class="org-string">'app2.bin'</span> -&gt; <span class="org-string">'/tmp/bin/app2.bin'</span>
</pre>
</div>

<p>
Test applications/executables: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ /tmp/bin/app2.bin 10.354 -9.243  100.523 5.6154
 [INFO] Running application: <span class="org-string">'app2'</span> - OK
  =&gt; st.count() = 4
  =&gt;   st.sum() = 107.249
  =&gt;  st.mean() = 26.8123
 [INFO] ~Stats() destructor called. Ok. 
</pre>
</div>
</div>
</div>

<div id="outline-container-org93a4dc9" class="outline-4">
<h4 id="org93a4dc9"><span class="section-number-4">2.0.3</span> Reading</h4>
<div class="outline-text-4" id="text-2-0-3">
<p>
<b>Documentation</b>
</p>

<ul class="org-ul">
<li><b>GNU Make Manual</b>
<ul class="org-ul">
<li><a href="http://www.chiark.greenend.org.uk/doc/make-doc/make.html/index.html#SEC_Contents">http://www.chiark.greenend.org.uk/doc/make-doc/make.html/index.html#SEC_Contents</a></li>
</ul></li>
</ul>

<p>
<b>Useful Reading</b>
</p>

<ul class="org-ul">
<li><b>Make (Software)</b> - Wikipedia 
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Make_(software)">https://en.wikipedia.org/wiki/Make_(software)</a></li>
</ul></li>

<li><b>Tutorial on writing makefiles</b>
<ul class="org-ul">
<li><a href="https://www.math.colostate.edu/~yzhou/computer/writemakefile.html">https://www.math.colostate.edu/~yzhou/computer/writemakefile.html</a></li>
</ul></li>

<li><b>Practical Makefiles, by example</b> - John Tsiombikas
<ul class="org-ul">
<li><a href="http://nuclear.mutantstargoat.com/articles/make/">http://nuclear.mutantstargoat.com/articles/make/</a></li>
</ul></li>

<li><b>Creating a Basic Makefile</b> - Flex Technologies
<ul class="org-ul">
<li><a href="https://felixcrux.com/blog/creating-basic-makefile%3C">https://felixcrux.com/blog/creating-basic-makefile<</a></li>
</ul></li>

<li><b>Debugging make -Tips and tricks to get make working for you, not
against you</b> - Peter Seebach
<ul class="org-ul">
<li><a href="https://www.ibm.com/developerworks/library/l-debugmake/index.html">https://www.ibm.com/developerworks/library/l-debugmake/index.html</a></li>
</ul></li>

<li><b>What’s Wrong With GNU make?</b>
<ul class="org-ul">
<li><a href="http://www.conifersystems.com/whitepapers/gnu-make/">http://www.conifersystems.com/whitepapers/gnu-make/</a></li>
</ul></li>

<li><b>How can I configure my makefile for debug and release builds?</b>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/1079832">https://stackoverflow.com/questions/1079832</a></li>
</ul></li>
</ul>

<p>
<b>Makefiles for Latex, Tex compilation</b> 
</p>

<ul class="org-ul">
<li><b>latex and Makefiles</b>
<ul class="org-ul">
<li><a href="http://www.usenix.org.uk/content/latex.html">http://www.usenix.org.uk/content/latex.html</a></li>
</ul></li>

<li><b>Makefiles for Latex</b>
<ul class="org-ul">
<li><a href="https://scaron.info/blog/makefiles-for-latex.html">https://scaron.info/blog/makefiles-for-latex.html</a></li>
</ul></li>

<li><b>A simple Makefile for LaTeX projects.</b>
<ul class="org-ul">
<li><a href="https://gist.github.com/Nemo157/539229">https://gist.github.com/Nemo157/539229</a></li>
</ul></li>

<li><b>Continuous integration and automatic deployment of LaTeX files</b>
<ul class="org-ul">
<li><a href="https://ljvmiranda921.github.io/notebook/2018/02/04/continuous-integration-for-latex/">https://ljvmiranda921.github.io/notebook/2018/02/04/continuous-integration-for-latex/</a></li>
</ul></li>
</ul>

<p>
<b>Makefiles for general automation</b>
</p>

<ul class="org-ul">
<li><b>Reproducibility with Make</b>
<ul class="org-ul">
<li><a href="https://the-turing-way.netlify.com/make/make.html">https://the-turing-way.netlify.com/make/make.html</a></li>
</ul></li>

<li><b>GNU Make for Reproducible Data Analysis</b>
<ul class="org-ul">
<li><a href="http://zmjones.com/make/">http://zmjones.com/make/</a></li>
</ul></li>

<li><b>Using Make for reproducible scientific analysis</b>
<ul class="org-ul">
<li><a href="https://www.software.ac.uk/blog/2016-10-06-using-make-reproducible-scientific-analyses">https://www.software.ac.uk/blog/2016-10-06-using-make-reproducible-scientific-analyses</a></li>
</ul></li>

<li><b>Reproducible bioinformatics pipelines using Make</b>
<ul class="org-ul">
<li><a href="http://byronjsmith.com/make-bml/">http://byronjsmith.com/make-bml/</a></li>
</ul></li>

<li><b>Reproducible Data Processing: Make + Docker</b>
<ul class="org-ul">
<li><a href="https://towardsdatascience.com/towards-efficient-and-reproducible-ml-workflows-part-1-analysis-a98c945d7616">https://towardsdatascience.com/towards-efficient-and-reproducible-ml-workflows-part-1-analysis-a98c945d7616</a></li>
</ul></li>

<li><b>Makefiles for R/LaTex Projects</b>
<ul class="org-ul">
<li><a href="https://dzone.com/articles/makefiles-rlatex-projects">https://dzone.com/articles/makefiles-rlatex-projects</a></li>
</ul></li>

<li><b>Makefiles in Python Projects</b>
<ul class="org-ul">
<li><a href="https://krzysztofzuraw.com/blog/2016/makefiles-in-python-projects.html">https://krzysztofzuraw.com/blog/2016/makefiles-in-python-projects.html</a></li>
</ul></li>

<li><b>Makefiles with Python</b>
<ul class="org-ul">
<li><a href="https://blog.horejsek.com/makefile-with-python/">https://blog.horejsek.com/makefile-with-python/</a></li>
</ul></li>

<li><b>Makefile for Python projects</b> - GIST
<ul class="org-ul">
<li><a href="https://gist.github.com/lumengxi/0ae4645124cd4066f676">https://gist.github.com/lumengxi/0ae4645124cd4066f676</a></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org43728e8" class="outline-2">
<h2 id="org43728e8"><span class="section-number-2">3</span> GNU Autotools Building System</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org4f43f56" class="outline-3">
<h3 id="org4f43f56"><span class="section-number-3">3.1</span> Overview</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>Autotools
<ul class="org-ul">
<li>=&gt;&gt; GNU Building System or umbrela name for <span class="underline">autoconf</span>, <span class="underline">automake</span>
and <span class="underline">libtool</span>. GNU autotools is used by many open-source Linux
projects and embedded Linux.</li>
</ul></li>

<li>Some Projects using GNU Autotools:
<ul class="org-ul">
<li><a href="https://github.com/emacs-mirror/emacs">GNU Emacs</a></li>
<li><a href="https://github.com/bminor/glibc">GNU Glibc</a> (GNU C Runtime Library used in Linux)</li>
<li><a href="https://github.com/gcc-mirror/gcc/blob/master/configure.ac">GNU GCC Compiler</a></li>
<li><a href="https://gitlab.freedesktop.org/NetworkManager/NetworkManager/blob/master/configure.ac">NetworkManager</a> (Linux network manager daemon)</li>
<li><a href="https://github.com/hishamhm/htop/blob/master/configure.ac">Htop tool</a> - htop is an interactive text-mode process viewer.</li>
<li><a href="https://github.com/nghttp2/nghttp2/blob/master/configure.ac">Nhttp2</a> - (Implementation of the Hypertext Transfer Protocol version 2 in C.)</li>
<li><a href="https://github.com/mingw-deb/libffi/blob/master/configure">LibFFI</a></li>
<li><a href="https://github.com/wireapp/libsodium/blob/master/configure.ac">LibSodium</a></li>
</ul></li>

<li>Used mostly in Unix-like or POSIX-like operating systems,
specially Linux.</li>

<li>Motivation:
<ul class="org-ul">
<li>Deal with legacy systems</li>
<li>Learn about alternative building systems</li>
<li>Maintenance of existing open source projects</li>
<li>Possible porting GNU autotools to CMake</li>
<li>Embedded Linux</li>
</ul></li>

<li>Supported <b>IDEs - Integrated Development Environments</b>
<ul class="org-ul">
<li>Eclipse IDE
<ul class="org-ul">
<li><a href="https://www.eclipse.org/linuxtools/">Linux Tools Plugin</a></li>
<li><a href="https://wiki.eclipse.org/CDT/Autotools/User_Guide">Eclipse CDT Autotools User Guide</a></li>
</ul></li>
<li>NetBeans
<ul class="org-ul">
<li><a href="http://plugins.netbeans.org/plugin/51647/cppgnuautotools">CppGnuAutoTools Plugin</a></li>
</ul></li>
<li>QTCreator
<ul class="org-ul">
<li><a href="https://doc.qt.io/qtcreator/creator-projects-autotools.html">Autotools Project Manager Plugin</a></li>
</ul></li>
</ul></li>

<li>Availalble for:
<ul class="org-ul">
<li>Linux, MacOSX, FreeBSD, OpenBSD, NetBSD and so on.</li>
</ul></li>

<li>Documentation:
<ul class="org-ul">
<li><a href="http://www.gnu.org/software/autoconf/">GNU Autoconf</a></li>
<li><a href="http://www.gnu.org/software/automake/automake.html">GNU Automake</a></li>
<li><a href="http://www.gnu.org/software/libtool/libtool.html">GNU Libtool</a></li>
</ul></li>

<li>Supported Programming Languages
<ul class="org-ul">
<li>C</li>
<li>C++</li>
<li>Objective C</li>
<li>Fortran</li>
<li>Fortran77</li>
<li>Erlang</li>
</ul></li>

<li>Terminal Documentation:
<ul class="org-ul">
<li>$ info automake</li>
<li>$ info autoconf</li>
<li>$ info libtool</li>
</ul></li>

<li>Common build configuration facilities
<ul class="org-ul">
<li>$ make</li>
<li>$ make install   =&gt; Install application.</li>
<li>$ &#x2026; &#x2026; ..</li>
</ul></li>
</ul>

<p>
<b>GNU Make Command for GNU autotools</b> 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Make Command</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">$ make</td>
<td class="org-left">Build application</td>
</tr>

<tr>
<td class="org-left">$ make -j4</td>
<td class="org-left">Build applciation using 4 threads</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make check</td>
<td class="org-left">Run tests</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make clean</td>
<td class="org-left">Clean compilation files</td>
</tr>

<tr>
<td class="org-left">$ make distclean</td>
<td class="org-left">Remove generated autools files.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make install</td>
<td class="org-left">Install application in the system to: /usr/loca/bin, /etc, &#x2026;</td>
</tr>

<tr>
<td class="org-left">$ make intallcheck</td>
<td class="org-left">Check installation</td>
</tr>

<tr>
<td class="org-left">$ make uninstall</td>
<td class="org-left">Remove installation files</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">$ make dist</td>
<td class="org-left">Create source distribution tarball</td>
</tr>

<tr>
<td class="org-left">$ make distcheck</td>
<td class="org-left">Similar to make dist, but checks if the compilation, the creates a tarball.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
<b>Most Configuration variables</b> 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">CC</td>
<td class="org-left">C compiler</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CXX</td>
<td class="org-left">C++ compuler</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CPPFLAGS</td>
<td class="org-left">C and C++ Preprocessor flags</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CFLAGS</td>
<td class="org-left">Flags of the C compiler</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CXXFLAGS</td>
<td class="org-left">Flags of the C++ compiler</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">LDFLAGS</td>
<td class="org-left">Linker Flags</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">LIBS</td>
<td class="org-left">Libraries passed to the linker</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
<b>Installation</b> 
</p>

<p>
Install on Fedora Linux Distribution: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ sudo dnf install autoconf automake
</pre>
</div>

<p>
<b>Autotools workflow for users</b> 
</p>

<p>
STEP 1: User run ./configure selecting build options; 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Install application in default directory</span>
$ ./configure

<span class="org-comment-delimiter"># </span><span class="org-comment">Install the application in another directory </span>
$ ./configure --prefix=/home/user/juliuscaesar/opt
</pre>
</div>

<p>
STEP 2: Run (GNU) make for building. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make 

<span class="org-comment-delimiter"># </span><span class="org-comment">Run GNY make with 4 threads </span>
$ make -j4 

<span class="org-comment-delimiter"># </span><span class="org-comment">Run $ make and $ make install in a single step </span>
$ make -j4 &amp;&amp; sudo make install 
</pre>
</div>

<p>
STEP 3: Install. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make install 

<span class="org-comment-delimiter"># </span><span class="org-comment">If permission is needed </span>
$ sudo make install 
</pre>
</div>

<p>
<b>Developer Worflow</b> 
</p>

<p>
STEP 1:
</p>
<ul class="org-ul">
<li>=&gt; Create files:
<ul class="org-ul">
<li><span class="underline">configure.ac</span>  for <b>autoconf</b> - written in a language similar to
Bash (Bourne Shell Script) which is processed by <b>M4</b> macro
processor.
<ul class="org-ul">
<li>Note: It is necessary to take care with whitespaces in macro invocations.</li>
</ul></li>
<li><span class="underline">Makefile.am</span> for <b>automake</b>.</li>
</ul></li>
</ul>


<p>
STEP 2: 
</p>
<ul class="org-ul">
<li>=&gt; The developer runs autoreconf that  generates the files
./configure and Makefile.in</li>
</ul>

<p>
STEP 3: 
</p>
<ul class="org-ul">
<li>=&gt; Test the generated files by running:
<ul class="org-ul">
<li>$ ./configure &amp;&amp; make &amp;&amp; make install.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org1169d7c" class="outline-3">
<h3 id="org1169d7c"><span class="section-number-3">3.2</span> Example: Basic GNU autotools project</h3>
<div class="outline-text-3" id="text-3-2">
</div>
<div id="outline-container-org7e2a4d2" class="outline-4">
<h4 id="org7e2a4d2"><span class="section-number-4">3.2.1</span> Project Files</h4>
<div class="outline-text-4" id="text-3-2-1">
<p>
File: main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Hello world autotools"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: configure.ac 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">------- File: configure.ac ----------#</span>
<span class="org-comment-delimiter">#</span><span class="org-comment">-------------------------------------# </span>

<span class="org-comment-delimiter"># </span><span class="org-comment">app =&gt; Is the file name without extensions</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">0.1 =&gt; Is the version </span>
<span class="org-function-name">AC_INIT</span>( [app], [0.1], [maintener@email.com])

<span class="org-comment-delimiter"># </span><span class="org-comment">Require at least autoconf version &gt;= 2.68 </span>
<span class="org-function-name">AC_PREREQ</span>([2.68])  
<span class="org-function-name">AM_INIT_AUTOMAKE</span>([-Wall -Wextra])

<span class="org-comment-delimiter"># </span><span class="org-comment">./configure creates a Makefile</span>
<span class="org-function-name">AC_CONFIG_FILES</span>([Makefile])

<span class="org-comment-delimiter"># </span><span class="org-comment">Find and check C compiler </span>
AC_PROG_CC
<span class="org-comment-delimiter"># </span><span class="org-comment">Find and check a C++ compiler </span>
AC_PROG_CXX 
AC_OUTPUT 
</pre>
</div>

<p>
File: Makefile.am 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Contains all executable targets </span>
bin_PROGRAMS = app

<span class="org-comment-delimiter"># </span><span class="org-comment">Sources for the executable targets </span>
app_SOURCES  = app.cpp 
</pre>
</div>

<p>
File: clean.sh 
</p>
<ul class="org-ul">
<li>Helper bash script used for cleaning current directory.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">!/usr/bin/</span><span class="org-keyword">env</span><span class="org-comment"> sh </span>
rm -v configure config.log config.status install-sh missing aclocal.m4 compile depcomp 
rm -vrf autom4te.cache
rm -v *.o *.bin *.so
rm *~ <span class="org-comment-delimiter"># </span><span class="org-comment">Remove temporary files </span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org704d232" class="outline-4">
<h4 id="org704d232"><span class="section-number-4">3.2.2</span> Building Steps</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
<b>STEP 1:</b> Performed by developer 
</p>

<ul class="org-ul">
<li>Create additional metadata files needed by <span class="underline">GNU autotools</span></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ touch README NEWS AUTHORS ChangeLog <span class="org-comment-delimiter"># </span><span class="org-comment">Set metadata files                                                &#9474;</span>
</pre>
</div>

<p>
<b>STEP 2:</b> Performed by developer 
</p>

<ul class="org-ul">
<li>Run atuoreconf for generating ./configure shell script and addition files.</li>
<li>Run: $ autoreconf -i -v</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ autoreconf -i -v 

<span class="org-function-name">autoreconf</span>: Entering directory <span class="org-sh-quoted-exec">`.'</span>
<span class="org-sh-quoted-exec">autoreconf: configure.ac: not using Gettext</span>
<span class="org-sh-quoted-exec">autoreconf: running: aclocal </span>
<span class="org-sh-quoted-exec">autoreconf: configure.ac: tracing</span>
<span class="org-sh-quoted-exec">autoreconf: configure.ac: not using Libtool</span>
<span class="org-sh-quoted-exec">autoreconf: running: /usr/bin/autoconf</span>
<span class="org-sh-quoted-exec">autoreconf: configure.ac: not using Autoheader</span>
<span class="org-sh-quoted-exec">autoreconf: running: automake --add-missing --copy --no-force</span>
<span class="org-sh-quoted-exec">configure.ac:11: warning: unknown warning category 'extra'</span>
<span class="org-sh-quoted-exec">configure.ac:17: installing './compile'</span>
<span class="org-sh-quoted-exec">configure.ac:11: installing './install-sh'</span>
<span class="org-sh-quoted-exec">configure.ac:11: installing './missing'</span>
<span class="org-sh-quoted-exec">Makefile.am: installing './depcomp'</span>
<span class="org-sh-quoted-exec">autoreconf: Leaving directory `</span><span class="org-builtin">.</span><span class="org-string">'</span>
</pre>
</div>

<p>
<b>STEP 3:</b> Performed by user
</p>

<ul class="org-ul">
<li>The following steps are performed by end-users or maintainers for
installing the application in the system or in a local directory.</li>

<li>Generate the Makefile by running the configuration script.</li>
</ul>

<p>
Run: $ ./configure  
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./configure 
checking for <span class="org-variable-name">a BSD-compatible install</span>... <span class="org-compilation-warning">/usr/bin/install -c</span>
checking whether <span class="org-variable-name">build environment is sane</span>... <span class="org-compilation-info">yes</span>
checking for <span class="org-variable-name">a thread-safe mkdir -p</span>... <span class="org-compilation-warning">/usr/bin/mkdir -p</span>
checking for <span class="org-variable-name">gawk</span>... <span class="org-compilation-warning">gawk</span>

... ... ...   ... ... ...   ... ... ...   ... ... ... 
     <span class="org-comment-delimiter"># </span><span class="org-comment">Suppress output for breviety purposes </span>
... ... ...   ... ... ...   ... ... ...   ... ... ... 

checking <span class="org-variable-name">dependency style of g++</span>... <span class="org-compilation-warning">gcc3</span>
checking <span class="org-variable-name">that generated files are newer than configure</span>... <span class="org-compilation-warning">done</span>
<span class="org-function-name">configure</span>: creating ./config.status
<span class="org-function-name">config.status</span>: creating Makefile
<span class="org-function-name">config.status</span>: executing depfiles commands
</pre>
</div>

<p>
Run: $ ./configure CC=clang CXX=clang++ for using clang.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./configure <span class="org-variable-name">CC</span>=clang <span class="org-variable-name">CXX</span>=clang++
</pre>
</div>

<p>
<b>STEP 4:</b> Performed by user
</p>

<ul class="org-ul">
<li>Run the makefile (GNU make)</li>
</ul>

<p>
Run: $ make 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make

g++ -DPACKAGE_NAME=<span class="org-string">\"</span>app<span class="org-string">\"</span> -DPACKAGE_TARNAME=<span class="org-string">\"</span>app<span class="org-string">\"</span> -DPACKAGE_VERSION=<span class="org-string">\"</span>0.1<span class="org-string">\"</span>  <span class="org-sh-escaped-newline">\</span>
    -DPACKAGE_STRING=<span class="org-string">\"</span>app<span class="org-string">\ </span>0.1<span class="org-string">\"</span> -DPACKAGE_BUGREPORT=<span class="org-string">\"\"</span> -DPACKAGE_URL=<span class="org-string">\"\"</span>   <span class="org-sh-escaped-newline">\</span>
     -DPACKAGE=<span class="org-string">\"</span>app<span class="org-string">\"</span> -DVERSION=<span class="org-string">\"</span>0.1<span class="org-string">\"</span> -I.     -g -O2 -MT app.o -MD -MP -MF   <span class="org-sh-escaped-newline">\</span>
    .deps/app.Tpo -c -o <span class="org-keyword">app.o</span> app.cpp <span class="org-sh-escaped-newline">\</span>
    mv -f .deps/app.Tpo .deps/app.Po <span class="org-sh-escaped-newline">\</span>

 g++  -g -O2   -o <span class="org-keyword">app</span> app.o  
</pre>
</div>

<p>
Run: $ make install 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make install
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Entering directory <span class="org-string">'/home/archbox/projects/autools1'</span>
 /usr/bin/mkdir -p <span class="org-string">'/usr/local/bin'</span>
  /usr/bin/install -c app <span class="org-string">'/usr/local/bin'</span>
<span class="org-function-name">/usr/bin/install</span>: cannot create regular file <span class="org-string">'/usr/local/bin/app'</span>: Permission denied
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: *** [Makefile:313: install-binPROGRAMS] Error 1
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Leaving directory <span class="org-string">'/home/archbox/projects/autools1'</span>
<span class="org-function-name">make</span>: *** [Makefile:615: install-am] Error 2

</pre>
</div>

<p>
Run: $ make dist =&gt; Create a tarball distribution. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make dist
make  dist-gzip <span class="org-variable-name">am__post_remove_distdir</span>=<span class="org-string">'@:'</span>
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Entering directory <span class="org-string">'/home/archbox/projects/autools1'</span>
<span class="org-keyword">if </span><span class="org-builtin">test</span> -d <span class="org-string">"app-0.1"</span>; <span class="org-keyword">then</span> find <span class="org-string">"app-0.1"</span> -type d ! -perm -200 -exec chmod u+w {} ... ... 
<span class="org-builtin">test</span> -d <span class="org-string">"app-0.1"</span> || mkdir <span class="org-string">"app-0.1"</span>

  .. ... ... ... ... ... ... 
rm -rf <span class="org-string">"app-0.1"</span> || { sleep 5 &amp;&amp; rm -rf <span class="org-string">"app-0.1"</span>; }; <span class="org-keyword">else</span> :; <span class="org-keyword">fi</span>
</pre>
</div>

<p>
Check the tarball file: 
</p>

<div class="org-src-container">
<pre class="src src-sh">    $ tar -tzvf app-0.1.tar.gz 
drwxrwxr-x 1000/1000         0 2019-10-21 15:23 app-0.1/
-rw-rw-r-- 1000/1000     42147 2019-10-21 15:22 app-0.1/aclocal.m4
-rwxrwxr-x 1000/1000    154043 2019-10-21 15:22 app-0.1/configure
-rw-rw-r-- 1000/1000       546 2019-10-21 15:01 app-0.1/configure.ac
-rw-rw-r-- 1000/1000       101 2019-10-21 14:28 app-0.1/app.cpp
-rwxr-xr-x 1000/1000     14676 2019-10-21 15:22 app-0.1/install-sh
-rw-rw-r-- 1000/1000         0 2019-10-21 15:02 app-0.1/ChangeLog
-rwxr-xr-x 1000/1000      6872 2019-10-21 15:22 app-0.1/missing
-rwxr-xr-x 1000/1000     23566 2019-10-21 15:22 app-0.1/depcomp
-rw-rw-r-- 1000/1000         0 2019-10-21 15:02 app-0.1/AUTHORS
-rw-r--r-- 1000/1000     35147 2019-10-21 15:01 app-0.1/COPYING
-rw-r--r-- 1000/1000     15756 2019-10-21 15:01 app-0.1/INSTALL
-rwxr-xr-x 1000/1000      7381 2019-10-21 15:22 app-0.1/compile
-rw-rw-r-- 1000/1000       117 2019-10-21 14:52 app-0.1/Makefile.am
-rw-rw-r-- 1000/1000         0 2019-10-21 15:02 app-0.1/README
-rw-rw-r-- 1000/1000         0 2019-10-21 15:02 app-0.1/NEWS
-rw-rw-r-- 1000/1000     23477 2019-10-21 15:22 app-0.1/Makefile.in
</pre>
</div>

<p>
<b>STEP 5:</b> 
</p>

<ul class="org-ul">
<li>Test the application.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Check executable file </span>
$ file app
<span class="org-function-name">app</span>: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter 
/lib64/l, for GNU/Linux 3.2.0, <span class="org-variable-name">BuildID</span>[sha1]=29f5b104ac648c3286ed616ea4cf4007a6b51ae2, 
with debug_info, not stripped

<span class="org-comment-delimiter"># </span><span class="org-comment">Run native executable </span>
$ ./app
Hello world autotools
</pre>
</div>

<p>
<b>Build and install the application into a new location</b> 
</p>

<p>
Run configure script. 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Build with clang and install at ~/opt/app-test </span>
$ ./configure <span class="org-variable-name">CC</span>=clang <span class="org-variable-name">CXX</span>=clang++ --prefix=$<span class="org-variable-name">HOME</span>/opt/app-test

</pre>
</div>

<p>
Run make and make install 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make install
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Entering directory <span class="org-string">'/home/archbox/projects/autools1'</span>
 /usr/bin/mkdir -p <span class="org-string">'/home/archbox/opt/app-test/bin'</span>
  /usr/bin/install -c app <span class="org-string">'/home/archbox/opt/app-test/bin'</span>
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Nothing to be done for <span class="org-string">'install-data-am'</span>.
<span class="org-function-name">make</span>[<span class="org-compilation-line-number">1</span>]: Leaving directory <span class="org-string">'/home/archbox/projects/autools1'</span>
</pre>
</div>

<p>
Test installation: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree /home/archbox/opt/app-test
/home/archbox/opt/app-test
&#9492;&#9472;&#9472; bin
    &#9492;&#9472;&#9472; app

1 directory, 1 file
</pre>
</div>

<p>
Run the application: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ /home/archbox/opt/app-test/bin/app 
Hello world autotools
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd3a5c89" class="outline-3">
<h3 id="orgd3a5c89"><span class="section-number-3">3.3</span> Further Reading</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li><a href="https://eklitzke.org/how-to-autotools">How To Use Autotools</a></li>

<li><b>GNU Autotools Book</b> - <a href="https://www.star.bnl.gov/~liuzx/autobook.html">https://www.star.bnl.gov/~liuzx/autobook.html</a></li>

<li><a href="https://elinux.org/images/4/43/Petazzoni.pdf">Embedded Linux Conference 2016 - GNU Autotools Tutorial</a></li>

<li><a href="http://freesoftwaremagazine.com/articles/brief_introduction_to_gnu_autotools/">Chapter 1: A brief introduction to the GNU Autotools</a></li>

<li><a href="https://stackoverflow.com/questions/10999549/how-do-i-create-a-configure-script">linux - How do I create a configure script? - Stack Overflow</a></li>

<li><a href="https://developer.fedoraproject.org/tech/languages/c/autotools.html">Autotools — Fedora Developer Portal</a></li>

<li><a href="http://thegreyblog.blogspot.com/2013/09/cc-project-built-with-gnu-build-system.html">C/C++ Project Built with GNU Build System (A.K.A. GNU Autotools): NetBeans vs. Eclipse CDT</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orga937d04" class="outline-2">
<h2 id="orga937d04"><span class="section-number-2">4</span> QMake Building System</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org84fb65e" class="outline-4">
<h4 id="org84fb65e"><span class="section-number-4">4.0.1</span> Overview</h4>
<div class="outline-text-4" id="text-4-0-1">
<p>
QMake is a building system generator used by QT Framework and QT
Creator IDE, similar to CMake, which can generate Makefiles and
projects for Visual Studio IDE (MSBuild building system).
</p>

<p>
Features: 
</p>

<ul class="org-ul">
<li>QT Framework now provides official support to CMake, but QMake is
still used in many old projects and libraries.</li>
</ul>

<p>
Benefits: 
</p>

<ul class="org-ul">
<li>For now, QMake still provides better support fro cross compilation
and for mobile platforms, such as Android or iOS.</li>

<li>Multi-ABI cross-compilation support.</li>
</ul>

<p>
Problems: 
</p>

<ul class="org-ul">
<li>Not supported by other IDEs than QT Creator. So, it is not
supported by Eclipse, Netbeans or Visual Studio.</li>

<li>Brittle building system =&gt; It does not support multiple targets or
generating multiple executables in the same building script.</li>

<li>Hard to use with third-party libraries or libraries using CMake or
other building systems.</li>
</ul>
</div>
</div>

<div id="outline-container-orge09720b" class="outline-4">
<h4 id="orge09720b"><span class="section-number-4">4.0.2</span> QMake project example</h4>
<div class="outline-text-4" id="text-4-0-2">
<p>
Project Structure: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cd /path/to/project-root/dir
$ tree .
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; app1
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1.cpp
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1.pro
&#9474;&#160;&#160; &#9500;&#9472;&#9472; dataset.cpp
&#9474;&#160;&#160; &#9492;&#9472;&#9472; dataset.hpp
&#9500;&#9472;&#9472; app2
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app2.cpp
&#9474;&#160;&#160; &#9492;&#9472;&#9472; app2.pro
&#9500;&#9472;&#9472; apptest.pro
</pre>
</div>

<p>
File: apptest.pro 
</p>

<div class="org-src-container">
<pre class="src src-conf"><span class="org-variable-name">TEMPLATE</span> = subdirs
<span class="org-variable-name">SUBDIRS</span> = app1 app2
</pre>
</div>

<p>
<b>Target app1 - subproject</b> 
</p>

<ul class="org-ul">
<li>Target <span class="underline">app1</span> is a console executable.</li>
</ul>


<p>
File: app1/app1.pro
</p>

<div class="org-src-container">
<pre class="src src-sh">TEMPLATE = app
CONFIG += console c++11
CONFIG -= app_bundle
CONFIG -= qt

SOURCES += <span class="org-sh-escaped-newline">\</span>
        dataset.cpp <span class="org-sh-escaped-newline">\</span>
        app1.cpp

HEADERS += <span class="org-sh-escaped-newline">\</span>
    dataset.hpp
</pre>
</div>

<p>
File: app1/app1.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string">"dataset.hpp"</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">Dataset</span> <span class="org-variable-name">ds</span>;
    ds.add_data<span class="org-rainbow-delimiters-depth-2">(</span>10.34<span class="org-rainbow-delimiters-depth-2">)</span>;
    ds.add_data<span class="org-rainbow-delimiters-depth-2">(</span>100.23<span class="org-rainbow-delimiters-depth-2">)</span>;
    ds.add_data<span class="org-rainbow-delimiters-depth-2">(</span>-100.0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Hello World!"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ds[0] = "</span> &lt;&lt; ds.get_data<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ds[1] = "</span> &lt;&lt; ds.get_data<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ds[2] = "</span> &lt;&lt; ds.get_data<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: app1/dataset.hpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#if</span><span class="org-negation-char"><span class="org-preprocessor">n</span></span><span class="org-preprocessor">def</span> DATASET_HPP
<span class="org-preprocessor">#define</span> <span class="org-variable-name">DATASET_HPP</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstddef</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">class</span> <span class="org-type">Dataset</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">struct</span> <span class="org-type">pimpl</span>;
    <span class="org-type">pimpl</span>* <span class="org-variable-name">m_pimpl</span>;
<span class="org-function-name">public</span>:
    <span class="org-function-name">Dataset</span><span class="org-rainbow-delimiters-depth-2">()</span>;
    ~<span class="org-function-name">Dataset</span><span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-function-name">Dataset</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Dataset</span> <span class="org-type">cosnt</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;
    <span class="org-type">Dataset</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Dataset</span> <span class="org-keyword">const</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;
    <span class="org-type">void</span>   <span class="org-function-name">add_data</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">double</span> <span class="org-function-name">get_data</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">idx</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-preprocessor">#endif</span> <span class="org-comment-delimiter">// </span><span class="org-comment">DATASET_HPP</span>
</pre>
</div>

<p>
File: app1/dataset.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string">"dataset.hpp"</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">memory</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-constant">Dataset</span>::<span class="org-type">pimpl</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">data</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-function-name">Dataset</span>::Dataset<span class="org-rainbow-delimiters-depth-1">()</span>: m_pimpl<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">pimpl</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Constructor called. OK"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">Dataset</span>::~Dataset<span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-keyword">delete</span> m_pimpl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-constant">Dataset</span>::<span class="org-function-name">add_data</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    m_pimpl-&gt;data.push_back<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">double</span> <span class="org-constant">Dataset</span>::<span class="org-function-name">get_data</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">size_t</span> <span class="org-variable-name">i</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">const</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> m_pimpl-&gt;data<span class="org-rainbow-delimiters-depth-2">[</span>i<span class="org-rainbow-delimiters-depth-2">]</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Target app2 - subproject</b>
</p>

<ul class="org-ul">
<li>Target <span class="underline">app2</span> is a user interface QT Widgets executable which file
name is app2_linux_x64.bin</li>
</ul>

<p>
File: app2/app2.pro 
</p>

<div class="org-src-container">
<pre class="src src-sh">QT       += core gui widgets
TEMPLATE  = app
CONFIG   += c++1z
<span class="org-comment-delimiter"># </span><span class="org-comment">CONFIG  += console c++1z</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">CONFIG  -= app_bundle</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Change</span>
TARGET   = app2_linux_x64.bin
SOURCES += app2.cpp 
</pre>
</div>

<p>
File: app2/app2.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">QApplication</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">QtWidgets</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>* <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-2">[]</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Starting Application 2 OK"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-type">QApplication</span> <span class="org-variable-name">app</span><span class="org-rainbow-delimiters-depth-2">(</span>argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">QPushButton</span> <span class="org-variable-name">button</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Click me"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    button.setVisible<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">QObject</span>::connect<span class="org-rainbow-delimiters-depth-2">(</span>&amp;button, &amp;<span class="org-constant">QPushButton</span>::clicked,
                     <span class="org-rainbow-delimiters-depth-3">[]{</span>
                         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] I Was clicked OK"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
                     <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> app.exec<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Building and Running</b> 
</p>

<p>
STEP 1 - Create a ./build directory for separating the compilation
output from the source code. 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ mkdir build &amp;&amp; <span class="org-builtin">cd</span> build
</pre>
</div>

<p>
STEP 2 - Run QMake
</p>

<div class="org-src-container">
<pre class="src src-sh">$ qmake ../

$ ls
Makefile
</pre>
</div>

<p>
STEP 3 - Run Makefile 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ make

$ tree .
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; app1
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1.o
&#9474;&#160;&#160; &#9500;&#9472;&#9472; dataset.o
&#9474;&#160;&#160; &#9492;&#9472;&#9472; Makefile
&#9500;&#9472;&#9472; app2
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app2_linux_x64.bin
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app2.o
&#9474;&#160;&#160; &#9492;&#9472;&#9472; Makefile
&#9492;&#9472;&#9472; Makefile

2 directories, 8 files
</pre>
</div>

<p>
STEP 4 - Check executables 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Run executable app1 </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------</span>
$ app1/app1 
 [INFO] Constructor called. OK
Hello World!
 ds[0] = 10.34
 ds[1] = 10.34
 ds[2] = 10.34

<span class="org-comment-delimiter"># </span><span class="org-comment">Run executable app2 </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------</span>
$ app2/app2_linux_x64.bin 
 [INFO] Starting Application 2 OK
</pre>
</div>
</div>
</div>

<div id="outline-container-org1e7986d" class="outline-4">
<h4 id="org1e7986d"><span class="section-number-4">4.0.3</span> Further Reading</h4>
<div class="outline-text-4" id="text-4-0-3">
<p>
Official Documentation 
</p>

<ul class="org-ul">
<li><b>QMake Manual</b> - QT Company
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-manual.html">https://doc.qt.io/qt-5/qmake-manual.html</a></li>
</ul></li>

<li><b>QMake - Getting Started</b> - QT Company
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-tutorial.html">https://doc.qt.io/qt-5/qmake-tutorial.html</a></li>
</ul></li>

<li><b>QMake Running</b> 
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-running.html">https://doc.qt.io/qt-5/qmake-running.html</a></li>
</ul></li>

<li><b>QMake Variables</b>
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-variable-reference.html">https://doc.qt.io/qt-5/qmake-variable-reference.html</a></li>
</ul></li>
</ul>

<p>
General 
</p>

<ul class="org-ul">
<li><b>Configuring QMake</b>
<ul class="org-ul">
<li><a href="https://doc.qt.io/qt-5/qmake-environment-reference.html">https://doc.qt.io/qt-5/qmake-environment-reference.html</a></li>
</ul></li>

<li>KDAB - <b>Clang Tidy, part 2: Integrate qmake and other build systems using Bear</b>
<ul class="org-ul">
<li><a href="https://www.kdab.com/clang-tidy-part-2-integrate-qmake-and-other-build-systems-using-bear/">https://www.kdab.com/clang-tidy-part-2-integrate-qmake-and-other-build-systems-using-bear/</a></li>
</ul></li>

<li>KDAB - <b>Qt for Android better than ever before</b>
<ul class="org-ul">
<li><a href="https://www.kdab.com/qt-for-android-better-than-ever-before/">https://www.kdab.com/qt-for-android-better-than-ever-before/</a></li>
</ul></li>

<li><b>QMake for neophytes</b>
<ul class="org-ul">
<li><a href="https://www.develer.com/en/qmake-for-neophytes/">https://www.develer.com/en/qmake-for-neophytes/</a></li>
</ul></li>

<li><b>SUBDIRS for Fun and Profit</b>
<ul class="org-ul">
<li><a href="http://silmor.de/qtstuff.subdirs.php">http://silmor.de/qtstuff.subdirs.php</a></li>
</ul></li>

<li><b>C++ GUI Programming with Qt4: Building Qt Applications</b>
<ul class="org-ul">
<li><a href="http://www.informit.com/articles/article.aspx?p=1405563&amp;seqNum=2">http://www.informit.com/articles/article.aspx?p=1405563&amp;seqNum=2</a></li>
</ul></li>

<li><b>Building a Linux system for the STM32MP1: setting up a Qt5 application development environment</b>
<ul class="org-ul">
<li><a href="https://bootlin.com/blog/building-a-linux-system-for-the-stm32mp1-setting-up-a-qt5-application-development-environment/">https://bootlin.com/blog/building-a-linux-system-for-the-stm32mp1-setting-up-a-qt5-application-development-environment/</a></li>
</ul></li>
</ul>

<p>
Questions: 
</p>

<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/1538398/how-do-i-use-qmake-to-build-multiple-binaries-in-a-single-project/1538639">qt - How do I use qmake to build multiple binaries in a single project? - Stack Overflow</a></li>

<li><a href="https://forum.qt.io/topic/15202/building-multiple-binaries-in-one-qt-project/4">Building multiple binaries in one qt project | Qt Forum</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org170ca8f" class="outline-2">
<h2 id="org170ca8f"><span class="section-number-2">5</span> CMake Building System</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org9099ddd" class="outline-3">
<h3 id="org9099ddd"><span class="section-number-3">5.1</span> Overview</h3>
<div class="outline-text-3" id="text-5-1">
<p>
<b>Motivation</b> 
</p>

<ul class="org-ul">
<li><span class="underline">Easier cross-platform compilation and portability</span>
<ul class="org-ul">
<li>A single CMake building-script to rule all building systems.</li>
</ul></li>

<li><span class="underline">No reliance on a single IDE or building system</span>
<ul class="org-ul">
<li>CMake can generate projects and building scripts for many IDEs
and also several IDEs are providing support for CMake without
requiring generating a project to the IDE.</li>
</ul></li>

<li><span class="underline">Human-readable project file with a declarative language</span>
<ul class="org-ul">
<li>The project file is just a CMakeLists.txt human-readable text
with a simple and declarative language, not an obfuscated or
cryptic XML file, a verbose and fragile Json or a non-portable
Makefile or Visual Studio Solutions.</li>
</ul></li>

<li><span class="underline">Easier to consume libraries and other projects</span>
<ul class="org-ul">
<li>CMake makes consuming external and internal dependencies easier
than other building systems such as GNU autotools and GNU
Makefile. All what it is needed to add a external library to a
project is to copy the library directory to the project and add
the line add_subdirectory(&lt;LIBRARY_DIRECTORY&gt;). Another
advantage is that the library does not need to be installed
in the system.</li>
</ul></li>

<li><span class="underline">All configuration managed by code rather than GUI and XML</span>
<ul class="org-ul">
<li>Almost all configuration of a CMake project are managed by CMake
language code, rather than by GUIs graphical user interfaces
like Visual Studio Projects with MSBUild. This approach allows
more customization, scalability and also faster changes. Another
benefits are the portability among IDEs with CMake support. This
text-centric approach also frees users from learning IDE
specific details or configuration GUIs.</li>
</ul></li>

<li><span class="underline">Network effect (Network Externality)</span>
<ul class="org-ul">
<li>Network effect can be described as phenomenon where additional
users increases the value of products and services to all
users.</li>
<li>Many C++ libraries are being distributed with CMake; many open
source projects are adopting CMake; most C++ package managers
support CMake and IDEs are starting to provide CMake support.</li>
</ul></li>
</ul>


<p>
<b>CMake can be used in following ways:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Build a software directly from command line</span> in a similar way to
Unix's make - $ make and $ make install.</li>

<li><span class="underline">Generate IDE-specific or preferred project files</span> in IDEs that does
not supports CMake, for instance cmake can generate projects from
the file CMakeLists.txt for the IDEs and text editors: Microsoft
Visual Studio, CodeBlocks, Kate projects, Sublime and Eclipse CDT.</li>

<li><span class="underline">Manage a project in IDEs which supports CMake</span>. In this case, it is
not necessary to generate IDE-specific project files.</li>
</ul>


<p>
<b>IDE Supporting Cmake directly and CMakeLists.txt as project configuration:</b>
</p>

<ul class="org-ul">
<li>Note: List of IDEs that can use CMake as project configuration file
where the user does not need to generate IDE specific project file
such as Visual Studio Solution or CodeBlocks projects.</li>
</ul>

<p>
Lightweight IDEs: 
</p>

<ul class="org-ul">
<li><a href="https://doc.qt.io/qtcreator/">QTCreator</a> (QT Company) [BEST]
<ul class="org-ul">
<li>Note: Best replacement for CodeBlocks IDE with CMake support.</li>
<li>Features:
<ul class="org-ul">
<li>Just-work solution, zero time spending on configuration</li>
<li>Despite the name, can be used with any type of C++ project.</li>
<li>Good Integration with debugger</li>
<li>Cross-platform and ligthweight</li>
<li>Fast and accurate code completion</li>
<li>Basic refactoring support</li>
<li>Outstanding CMake support</li>
<li>QT Widgets and QTQuick QML GUI builder, aka drag-and-drop GUI designer.</li>
</ul></li>
<li>Supported Building Systems:
<ul class="org-ul">
<li>CMake</li>
<li>QBS</li>
<li>QMake</li>
<li>GNU Autotools - provided by plugin</li>
</ul></li>
<li>Download: <a href="https://www.qt.io/offline-installers">https://www.qt.io/offline-installers</a></li>
<li>Source Code: <a href="https://github.com/qt-creator/qt-creator">https://github.com/qt-creator/qt-creator</a></li>
<li>Additional: 
<ul class="org-ul">
<li><a href="https://www.phoronix.com/scan.php?page=news_item&amp;px=Qt-QMake-CMake-Future-Not-Qbs">The Qt Company Decides To Deprecate The Qbs Build System, Will Focus On CMake &amp; QMake</a></li>
<li><a href="https://blog.qt.io/blog/2018/10/29/deprecation-of-qbs/">QT Company - Deprecation of QBS in favor of CMake</a></li>
<li><a href="https://doc.qt.io/qtcreator/creator-project-cmake.html">Qt Creator Documentation - Setting Up CMake</a></li>
</ul></li>
</ul></li>

<li><a href="https://www.kdevelop.org/">KDevelop IDE</a> [BEST]
<ul class="org-ul">
<li>Note: KDevelop allows managing project with CMake, visualization
of all CMake targets, run individual targets with mouse click,
run install target and so on.</li>
<li>Note: On Windows, it doesn't support Visual Studio / MSVC
projects with MSVC (VC++) "visual" C++ compiler.</li>
</ul></li>

<li><a href="https://gitlab.com/cppit/jucipp">Jucipp / Gitlab</a> 
<ul class="org-ul">
<li>"A lightweight &amp; cross-platform IDE supporting the most recent
C++ standards. Current IDEs struggle with C++ support due to the
complexity of the programming language. juCI++, however, is
designed especially towards libclang with speed, stability, and
ease of use in mind."</li>
<li>Supported build systems: <b>CMake</b> ad Meson</li>
</ul></li>

<li><a href="https://wiki.gnome.org/Apps/Builder">GNome Builder IDE</a>
<ul class="org-ul">
<li>"Builder aims to be an IDE for writing GNOME-based software. We
believe this focus will help us build something great for our
community. If you would like to help in this effort, join our
IRC channel and we will help you find something to work
on. Builder is primarily written in C and Python. Some aspects
of Builder may be written in another language when it makes
sense. Builder is developed in conjunction with GNOME
releases. This means that we often contribute to, and rely on,
features being developed in other GNOME modules such as Gtk."</li>
<li>Supported building systems:
<ul class="org-ul">
<li>GNU Autotools</li>
<li>CMake</li>
<li>Meson</li>
</ul></li>
<li><a href="https://builder.readthedocs.io/en/latest/">https://builder.readthedocs.io/en/latest/</a></li>
<li><a href="https://github.com/GNOME/gnome-builder">https://github.com/GNOME/gnome-builder</a></li>
</ul></li>

<li><a href="https://codelite.org/">CodeLite IDE</a> 
<ul class="org-ul">
<li>"CodeLite is an open source, free, cross platform IDE specialized
in C, C++, PHP and JavaScript (mainly for backend developers
using Node.js) programming languages which runs best on all major
Platforms ( OSX, Windows and Linux )"</li>
</ul></li>
</ul>

<p>
Heavy but, full featured IDEs:
</p>

<ul class="org-ul">
<li><a href="https://blogs.msdn.microsoft.com/vcblog/2016/10/05/cmake-support-in-visual-studio/">Microsft Visual Studio</a> [Windows-only] [BEST]</li>

<li><a href="https://www.youtube.com/watch?v=Rbb0fVCz41w">JetBrains - Clion IDE</a> [BEST]</li>

<li><a href="https://cevelop.com/">Eclipse CEvelop</a> (Modified Eclipse IDE)
<ul class="org-ul">
<li>Note: It does not support CMake directly, it requires some the
installation of some plugins:</li>
<li>Plugin: <a href="https://marketplace.eclipse.org/content/cmake-eclipse-helper">cmake-eclipse-helper</a></li>
<li>Plugin: <a href="https://marketplace.eclipse.org/content/cmake4eclipse">cmake4eclipse</a></li>
<li>Plugin: <a href="https://marketplace.eclipse.org/content/cmake-editor">cmake-editor</a></li>
</ul></li>
</ul>


<p>
<b>Supported Programming Languages</b>
</p>

<ul class="org-ul">
<li>ASM - Assembly</li>
<li>C</li>
<li>C++</li>
<li>Fortran</li>
<li>CSharp C#</li>
<li>CUDA</li>
<li>CXX</li>
<li>Java</li>
<li>RC - Windows Resource Compiler</li>
<li>Swift</li>
</ul>

<p>
<b>Capabilities:</b>
</p>

<ul class="org-ul">
<li>Generate IDE-specific project files.</li>
<li>Generate Visual Studio Solutions (projects)</li>
<li>Generate Makefiles (GNU Make) or NMake (Windows make) for direct
compilation.</li>
<li>Run targets like GNU make</li>
<li>Build a software or library directly from command line.</li>
</ul>

<p>
<b>Possibilities</b> 
</p>

<p>
A CMake project can contain one or more target (taks), similar to
Makefile rules:
</p>

<ul class="org-ul">
<li>Multiples targets for build executables - the same CMake file can
be used to build multiple applications.</li>

<li>Target to build shared library</li>

<li>Target to build static library</li>

<li>Target to install aplications or libraries</li>

<li>Custom targets</li>
</ul>

<p>
<b>CMake Project Examples</b>
</p>

<ul class="org-ul">
<li><a href="https://github.com/caiorss/winapi-snippets-cmake">winapi snippets</a>
<ul class="org-ul">
<li>Code snippets and examples for Windows API in modern C++ managed
by CMake.</li>
</ul></li>
<li><a href="https://gist.github.com/caiorss/2bba4c50866d9467aaa8c7792b337f71">shared library</a>
<ul class="org-ul">
<li>Example containibng: Cross platform shared library exporting
functions, classes, polymorphic classes and C-interfaces
(wrapper functions with C-linkage). It also contains a C++
client-code and Python wrapper which uses Python ctype FFI
foreign function interface.</li>
</ul></li>
<li><a href="https://github.com/caiorss/example-pybind11-vcpkg">example-pybind11-vcpkg</a>
<ul class="org-ul">
<li>This example project contains a Python3 native module written in
C++ with the help of CMake and Pybind11, vcpkg (C++) Package
manager.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orga14920e" class="outline-3">
<h3 id="orga14920e"><span class="section-number-3">5.2</span> Useful CMake Modules</h3>
<div class="outline-text-3" id="text-5-2">
</div>
<div id="outline-container-org7d7bee0" class="outline-4">
<h4 id="org7d7bee0"><span class="section-number-4">5.2.1</span> CMake Module Projects</h4>
<div class="outline-text-4" id="text-5-2-1">
<ul class="org-ul">
<li><b>Cotire</b> [BEST]
<ul class="org-ul">
<li>CMake module for speeding compilation by automating the usage of
pre-compiled headers in a non-intrusive way that requires few
modifications in the source code.</li>
<li>Note: The process of using pre-compiled headers is usually
cumbersome and compiler-specific. This CMake module (script)
automates this configuration.</li>
<li>Repository: <a href="https://github.com/sakra/cotire">https://github.com/sakra/cotire</a></li>
</ul></li>

<li><b>ruslo/poly</b>
<ul class="org-ul">
<li>wrench Collection of CMake toolchain files and scripts for
cross-platform build and CI testing (GCC, Visual Studio, iOS,
Android, Clang analyzer, sanitizers etc.) <a href="http://goo.gl/5JpHX">http://goo.gl/5JpHX</a></li>
<li>Contains CMAKE Toolchain files for iOS, Android, Raspberry Pi,
Windows &#x2026;</li>
<li><a href="https://github.com/ruslo/polly">https://github.com/ruslo/polly</a></li>
</ul></li>

<li><b>cmake-precompile-headers</b>
<ul class="org-ul">
<li>Precompiled header setup for CMake. Supported CMake generators:
Visual Studio; NMake Makefiles; Unix Makefiles (GCC); MinGW
Makefiles; MSYS Makefiles and Ninja.</li>
<li><a href="https://github.com/larsch/cmake-precompiled-header">https://github.com/larsch/cmake-precompiled-header</a></li>
</ul></li>

<li><b>UCM</b>
<ul class="org-ul">
<li>Useful cmake macros that help with: compiler/linker flags,
collecting sources, PCHs, Unity builds and other stuff.</li>
<li>Repository: <a href="https://github.com/onqtam/ucm">https://github.com/onqtam/ucm</a></li>
</ul></li>

<li><b>Dockcross</b> 
<ul class="org-ul">
<li>Cross compiling toolchains in Docker images</li>
<li>Repository: <a href="https://github.com/dockcross/dockcross">https://github.com/dockcross/dockcross</a></li>
</ul></li>

<li><b>clang-tidy-project-cmake</b>
<ul class="org-ul">
<li>Add clang-tidy checks to a target usingCMake</li>
<li>Repository: <a href="https://github.com/polysquare/clang-tidy-target-cmake">https://github.com/polysquare/clang-tidy-target-cmake</a></li>
</ul></li>

<li><b>FindLAPACK</b>
<ul class="org-ul">
<li>CMake FindLAPACK.cmake that works with Intel MKL, Atlas, OpenBLAS, Netlib, LAPACK95 for C / C++ / Fortran</li>
<li>Repository: <a href="https://github.com/scivision/lapack-cmake">https://github.com/scivision/lapack-cmake</a></li>
</ul></li>

<li><b>android-cmake</b>
<ul class="org-ul">
<li>"CMake is great, and so is Android. This is a collection of CMake
scripts that may be useful to the Android NDK community. It is
based on experience from porting OpenCV library to Android:
<a href="http://opencv.org/platforms/android.html">http://opencv.org/platforms/android.html</a> Main goal is to share
these scripts so that devs that use CMake as their build system
may easily compile native code for Android."</li>
<li>Repository: <a href="https://github.com/taka-no-me/android-cmake">https://github.com/taka-no-me/android-cmake</a></li>
</ul></li>

<li><b>cmake-avr</b>
<ul class="org-ul">
<li>cmake-avr - a cmake toolchain for AVR projects</li>
<li><a href="https://github.com/mkleemann/cmake-avr">https://github.com/mkleemann/cmake-avr</a></li>
</ul></li>

<li><b>arduino-cmake</b>
<ul class="org-ul">
<li>Arduino CMake Build system</li>
<li><a href="https://github.com/francoiscampbell/arduino-cmake">https://github.com/francoiscampbell/arduino-cmake</a></li>
</ul></li>

<li><b>Hunder Package Manager</b> - A CMake module (aka script) that works as
package manager. 
<ul class="org-ul">
<li>Repository: <a href="https://github.com/ruslo/hunter">https://github.com/ruslo/hunter</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org8da7af3" class="outline-4">
<h4 id="org8da7af3"><span class="section-number-4">5.2.2</span> Collected CMake Modules</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
Collected CMake modules/scripts from other projects. 
</p>

<ul class="org-ul">
<li><a href="https://github.com/OpenChemistry/avogadroapp/blob/master/cmake/DeployQt5.cmake">DeployQt5.cmake</a></li>

<li><a href="https://github.com/OpenChemistry/avogadroapp/blob/master/cmake/AvogadroCPack.cmake">AvogadroCPack.cmake</a></li>

<li><a href="https://gitlab.com/rpdev/opentodolist/blob/master/cmake/BuildLinuxAppImage.cmake">BuildLinuxAppImage.cmake</a></li>

<li><a href="https://github.com/OpenChemistry/avogadroapp/blob/master/cmake/DetermineVersion.cmake">DetermineVersion.cmake</a></li>

<li><a href="https://github.com/owncloud/client/blob/master/cmake/modules/GetGitRevisionDescription.cmake">GetGitRevisionDescription.cmake</a></li>

<li><a href="https://github.com/owncloud/client/blob/master/cmake/modules/UseDoxygen.cmake">UseDoxygen.cmake</a></li>

<li><a href="https://github.com/nitroshare/nitroshare-desktop/blob/226dd32879981c0bf2ef4c78faee3af3b797bfdc/cmake/Windeployqt.cmake">Windeployqt.cmake</a></li>

<li><a href="https://github.com/nitroshare/nitroshare-desktop/blob/226dd32879981c0bf2ef4c78faee3af3b797bfdc/cmake/SharedLibrary.cmake">SharedLibrary.cmake</a></li>

<li><a href="https://git.ircad.fr/Sight/sight/blob/dev/CMake/doxygen/doxygen_generator.cmake">doxygen_generator.cmake</a></li>

<li><a href="https://git.ircad.fr/Sight/sight/blob/dev/CMake/install/linux_install.cmake">linux_install.cmake</a></li>

<li><a href="https://git.ircad.fr/Sight/sight/blob/dev/CMake/install/osx_install.cmake">osx_install.cmake</a></li>

<li><a href="https://git.ircad.fr/Sight/sight/blob/dev/CMake/install/win_install.cmake">win_install.cmake</a></li>

<li><a href="https://git.ircad.fr/Sight/sight/blob/dev/CMake/vscode/vscode_generator.cmake">vscode_generator.cmake</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgbcdbb78" class="outline-3">
<h3 id="orgbcdbb78"><span class="section-number-3">5.3</span> Minimal CMake Project Workflow</h3>
<div class="outline-text-3" id="text-5-3">
<p>
This section contains a minimal CMake project that generates a single
executable which uses OpenGL libraries. All sources at: <a href="https://gist.github.com/caiorss/fd9e61887e9b2575f2275a80af44fac2">gist</a>
</p>

<p>
A CMake project contains at least the file CMakeLists.txt (Cmake
building definitions akin to Makefile) and one or more sources -
files: *.c, *.cpp, *.cxx, *.hpp. 
</p>

<p>
Workflow:
</p>

<ul class="org-ul">
<li>Build and install the application or library directly from command
line.</li>

<li>Generate IDE-specific building scripts if the IDE does not support
opening CMake projects. Example: CMake can generate Makefiles for
EClipse CDT or Visual Studio solution for old Visual Studio
versions which doesn't support CMake.</li>

<li>Open and manage the project directly if the IDE or editor supports
CMake. In Visual Studio, QTCreator or KDevelop, to open a CMake
project, it is just necessary to open the directory containing the
CMakeLists.txt.</li>
</ul>

<p>
<b>File:</b> CMakeLists.text 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)

<span class="org-comment"># Proeject name - should not contain whitespace </span>
<span class="org-function-name">project</span>(OpengGL_CPP)

<span class="org-comment">#========== Global Configurations =============#</span>
<span class="org-comment">#----------------------------------------------#</span>

<span class="org-comment"># Set the C++ standard for all targets (It sets the flags</span>
<span class="org-comment"># (-std=c++11, -std=c++14 ...) on Clang or GCC. and /std=c++17 on MSVC</span>
<span class="org-comment"># OPTIONAL:</span>
<span class="org-comment">#---------------------------------</span>
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#========== Targets Configurations ============#</span>

<span class="org-comment"># Build an executable (Unix-like OSes generates ./openglDemo1, on</span>
<span class="org-comment"># Windows ./opengDemo1.exe)</span>
<span class="org-comment"># ..........................................</span>
<span class="org-function-name">add_executable</span>(openglDemo1 opengl1.cpp)

<span class="org-comment"># Set executable dependency libraries</span>
<span class="org-comment"># Equivalent to pass flags -lGL, -lGLU and -lglut </span>
<span class="org-function-name">target_link_libraries</span>(openglDemo1 GL GLU glut)

<span class="org-comment"># Add extension .bin to executable name to make it easier</span>
<span class="org-comment"># to identify that the binary file is an executable.</span>
<span class="org-comment"># So, it renames the executable  'openglDemo1' to 'openglDemo1.bin'</span>
<span class="org-keyword">if</span>(UNIX)
  <span class="org-function-name">set_target_properties</span>(openglDemo1 PROPERTIES SUFFIX <span class="org-string">".bin"</span>)
<span class="org-keyword">endif</span>()

<span class="org-comment"># Add target to run executable </span>
<span class="org-function-name">add_custom_target</span>(run-ex1
    COMMAND openglDemo1 
    DEPENDS openglDemo1 
    WORKING_DIRECTORY ${<span class="org-variable-name">CMAKE_PROJECT_DIR</span>}
)
</pre>
</div>

<p>
Without all the comments and the custom target, the CMakeLists.txt
file would become:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(OpengGL_CPP)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#========== Targets Configurations ============#</span>
<span class="org-function-name">add_executable</span>(openglDemo1 opengl1.cpp)
<span class="org-function-name">target_link_libraries</span>(openglDemo1 GL GLU glut)
</pre>
</div>


<p>
<b>Building on Command Line:</b>
</p>

<p>
1 Install OpenGL development libraries (Fedora Linux):
</p>

<div class="org-src-container">
<pre class="src src-sh">$ sudo dnf install freeglut-devel.x86_64
<span class="org-comment-delimiter"># </span><span class="org-comment">Optional: Faster and better building system than GNU Make</span>
$ sudo dnf install ninja-build.x86_64 
</pre>
</div>

<p>
2 Clone sample project:
</p>

<div class="org-src-container">
<pre class="src src-sj">$ git clone https://gist.github.com/caiorss/fd9e61887e9b2575f2275a80af44fac2 cmake-opengl
Cloning into 'cmake-opengl'...
remote: Enumerating objects: 4, done.
remote: Counting objects: 100% (4/4), done.
remote: Compressing objects: 100% (4/4), done.
remote: Total 4 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (4/4), done.

$ cd cmake-opengl/

$ ls
CMakeLists.txt  opengl1.cpp
</pre>
</div>

<p>
3 Build with Makefile:
</p>

<ul class="org-ul">
<li>cmake -H&lt;SOURCE&gt; -B&lt;BUILD&gt; [-G &lt;Build-Systems&gt;]
<ul class="org-ul">
<li>&lt;SOURCE&gt; - Directory where is CMakeLists.txt (In this case (.)
current directory)</li>
<li>&lt;BUILD&gt; - Directory containing compilation output and the
building scripts generated by CMake for some building
systems. In this exaple: ./cache</li>
<li>-G  &lt;Build-Systems&gt; -&gt; [Optional] Specifies the building
systems which CMake will generate the scripts for. On Linux,
the default building system is Makefiles and on Windows it is
MSBuild.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Generate =&gt; Building scripts for Makefile on ./cache directory </span>
$ cmake -H. -Bcache 

-- The C compiler identification is GNU 8.2.1
-- The CXX compiler identification is GNU 8.2.1
... ...   ... ...   ... ...   ... ...   ... ... 
-- Generating done
-- Build files have been written to: /home/archbox/root-scripts/cmake-opengl/cache
</pre>
</div>

<p>
Build the executable running the building script (Makefile) from CMake:
</p>

<ul class="org-ul">
<li>Note: It will build all CMake targets, all executables and libraries.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build cache

/usr/bin/cmake -H/home/archbox/root-scripts/cmake-opengl -B/home/archbox/root-scripts/cmake-opengl/cache --check-build-system CMakeFiles/Makefile.cmake 0
/usr/bin/cmake -E cmake_progress_start /home/archbox/root-scripts/cmake-opengl/cache/CMakeFiles /home/archbox/root-scripts/cmake-opengl/cache/CMakeFiles/progress.marks
 .. ...  .. ...  .. ...  .. ...  .. ...  .. ... 
ir/build
<span class="org-function-name">gmake</span>[<span class="org-compilation-line-number">2</span>]: Entering directory <span class="org-string">'/home/archbox/root-scripts/cmake-opengl/cache'</span>
[ 50%] Building CXX object CMakeFiles/openglDemo1.dir/opengl1.cpp.o
/usr/lib64/ccache/c++    -std=gnu++1z -o <span class="org-keyword">CMakeFiles/openglDemo1.dir/opengl1.cpp.o</span> -c /home/archbox/root-scripts/cmake-opengl/opengl1.cpp
[100%] Linking CXX executable openglDemo1.bin
</pre>
</div>

<p>
Build a single target:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build cache --target openglDemo1
</pre>
</div>

<p>
Inspect executable: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ file cache/openglDemo1.bin 

 cache/openglDemo1.bin: ELF 64-bit LSB
 executable, x86-64, version 1 (SYSV), dynamically linked, interpreter
 /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0,
 <span class="org-variable-name">BuildID</span>[sha1]=269d06a0054677d70ecf0258268565535e3dfbd4, not stripped
</pre>
</div>

<p>
Execute a custom target, for instance the custom target <span class="underline">run-ex1</span> which runs
the executable (aking to $ make run).
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build cache --target run-ex1

  ... ... .... 
Scanning dependencies of target run-ex1
<span class="org-function-name">gmake</span>[<span class="org-compilation-line-number">3</span>]: Leaving directory <span class="org-string">'/home/archbox/root-scripts/cmake-opengl/cache'</span>
/usr/bin/gmake -f CMakeFiles/run-ex1.dir/build.make CMakeFiles/run-ex1.dir/build
<span class="org-function-name">gmake</span>[<span class="org-compilation-line-number">3</span>]: Entering directory <span class="org-string">'/home/archbox/root-scripts/cmake-opengl/cache'</span>
./openglDemo1.bin
[INFO] Starting OpenGL main loop.
[INFO] Running loop.
[INFO] Running loop.
</pre>
</div>

<p>
4 Build with Ninja. 
</p>

<ul class="org-ul">
<li>The compilation can be faster and less verbose with Ninja-build
building systems.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Remove cache directory </span>
rm -rf cache

<span class="org-comment-delimiter"># </span><span class="org-comment">Generate building scripts for Ninja building system in directory ./cache </span>
$ cmake -H. -Bcache -G Ninja
-- The C compiler identification is GNU 8.2.1
 ... .... ... .... ... .... ... ....
-- Generating done
-- Build files have been written to: /home/archbox/root-scripts/cmake-opengl/cache

<span class="org-comment-delimiter"># </span><span class="org-comment">Build a single target </span>
$ cmake --build cache --target openglDemo1
[2/2] Linking CXX executable openglDemo1.bin

<span class="org-comment-delimiter"># </span><span class="org-comment">Build all targets </span>
$ cmake --build cache --target all
<span class="org-function-name">ninja</span>: no work to do.

<span class="org-comment-delimiter"># </span><span class="org-comment">Run target: run-ex1 (akin to $ make run)</span>
$ cmake --build cache --target run-ex1
[0/1] cd /home/archbox/root-scripts/cm...pts/cmake-opengl/cache/openglDemo1.bin
</pre>
</div>

<p>
5 Open project with IDE or editor that doesn't support CMake, for
instance: Code Blocks.
</p>

<ul class="org-ul">
<li>The following command generates a blocks project file
(OpengGL_CPP.cbp) and a GNU make building (Makefile) script. Then,
the project can be opened from Code Blocks by selecting the file
OpenGL_CPP.cpb which is a CodeBlocks project file.</li>
</ul>

<pre class="example">
$ cmake -H. -Bcblock -G "CodeBlocks - Unix Makefiles"

-- The C compiler identification is GNU 8.2.1
 ... ... ... ... ... ... .... 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/archbox/root-scripts/cmake-opengl/cblock

$ tree cblock -L 1
cblock
├── CMakeCache.txt
├── CMakeFiles
├── cmake_install.cmake
├── Makefile
└── OpengGL_CPP.cbp

1 directory, 4 files
</pre>
</div>
</div>

<div id="outline-container-orgbb34f95" class="outline-3">
<h3 id="orgbb34f95"><span class="section-number-3">5.4</span> Project with multiple targets and a single CMakeLists</h3>
<div class="outline-text-3" id="text-5-4">
</div>
<div id="outline-container-org644cf18" class="outline-4">
<h4 id="org644cf18"><span class="section-number-4">5.4.1</span> Adding and setting multiple targets</h4>
<div class="outline-text-4" id="text-5-4-1">
<p>
This section provides shows how to set up a project with additional
configuration and multiple targets which means a project with multiple
executables, shared libraries or static libraries.
</p>

<p>
<b>Set up executable target</b>
</p>

<ul class="org-ul">
<li>Executable target defintion =&gt; Builds a *.exe on Windows.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">add_executable</span>(SampleApp main.cpp source1.cpp source2.cpp)
</pre>
</div>

<p>
Header files can also be added to the target in order to make them
easier to access in an IDE such as Visual Studio. 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">add_executable</span>( SampleApp 
                main.cpp 
                class1.cpp class2.hpp 
                class1.cpp lcass2.hpp
              )
</pre>
</div>


<p>
<b>Set target defines #define or -D&lt;DEFINITION&gt;=VALUE or /D&lt;DEFINTION&gt;=&lt;VALUE&gt;</b>
</p>

<ul class="org-ul">
<li>Compiler defintions. =&gt; Defines.
<ul class="org-ul">
<li>It is the same as compiling with GCC with command line option
-D{DEFINITION}={VALUE} or compiling with MSVC VC++ with the
command line option /D{DEFINITION}={VALUE} which becomes #define
{DEFINITION} {VALUE} in the code.</li>
<li>Docs: <a href="https://cmake.org/cmake/help/latest/command/target_compile_definitions.html">target_compile_definitions — CMake 3.13.2 Documentation</a></li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"> <span class="org-function-name">target_compile_definitions</span>(SampleApp PRIVATE  
    VERBOSITY=100  <span class="org-comment"># Same as #define VERBOSITY 100 </span>
    Optimize       <span class="org-comment"># Same as -DOptimize or #define Optimize</span>
    foo=bar        <span class="org-comment"># Same as -Dfoo=bar on (GGCC or Clang) or /Dfoo=bar on MSVC</span>
   )
<span class="org-comment"># In a single line </span>
 <span class="org-function-name">target_compile_definitions</span>(SampleApp PRIVATE VERBOSITY=100 Optimize foo=bar)
</pre>
</div>

<p>
<b>Set target include directories</b>
</p>

<ul class="org-ul">
<li>Include directories containing header files. Similar to
command line option -I with GCC.
<ul class="org-ul">
<li><a href="https://cmake.org/cmake/help/v3.0/command/target_include_directories.html">target_include_directories — CMake 3.0.2 Documentation</a></li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-comment"># Similar to: g++ main.cpp src1.cpp ... -o app.bin -Isrc/include1 -I/home/user/include</span>
<span class="org-function-name">target_include_directories</span>(SampleApp PUBLIC src/include1 /home/usr/include)
</pre>
</div>

<p>
<b>Set directories where shared or static libraries will be searched</b>
</p>

<p>
Set the directories where shared or static libraries will be
searched. Note: this command sets the search path for shared libraries
for all targets. 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">link_directories</span>(  
  <span class="org-comment"># C:\Users\DummyUser\libs</span>
  <span class="org-string">"C:\\Users\\DummyUser\\libs"</span> <span class="org-comment"># Windows paths with backward slash must be escaped with '\'</span>
  <span class="org-string">"C:/libs/Graphics"</span>           <span class="org-comment"># Windows paths with forward slash </span>
  <span class="org-string">"/home/DummyUser/libs"</span> 
)
</pre>
</div>

<p>
The command shown in the previous code is equivalent to compiling a
target with GCC as: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ file1.cpp -c -o <span class="org-keyword">file1.o</span> -LC:\Users\DummyUser\libs -LC:/libs/Graphics/ -L/home/DummyUser/libs
</pre>
</div>


<p>
Shared Librarie files extensions: 
</p>
<ul class="org-ul">
<li><code>*.dll</code> files on Windows for all compilers.</li>
<li><code>*.so</code> files on Unix-like OSes</li>
<li><code>*.dylib</code> or <code>*.so</code> on MacOSX</li>
</ul>

<p>
Static librarie file extension:
</p>
<ul class="org-ul">
<li><code>*.lib</code> files for MSVC, VC++</li>
<li><code>*.a</code> for GCC, GCC/Mingw or Clang++.</li>
</ul>

<p>
<b>Set linking libraries</b>
</p>

<ul class="org-ul">
<li>Libraries that the executable will link against.
<ul class="org-ul">
<li>It can be: shared libraries installed on the system or either
shared or static libraries in the current project.</li>
<li>Note: Project libraries are also targets.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-comment"># Project shared library SampleSharedLib.so (Linux, Unix) or </span>
<span class="org-comment"># SampleSharedLib.dll on Windows. </span>
<span class="org-function-name">add_library</span>( SampleSharedLib SHARED  
             tools.cpp      tools.hpp 
             CShell.cpp     CShell.hpp 
             FileSystem.cpp FileSystem.hpp
           )
<span class="org-comment"># Configuration of target SampleSharedLib</span>
<span class="org-function-name">target_include_directories</span>(SampleSharedLib PRIVATE src/lib/include1)

<span class="org-comment"># Project static library </span>
<span class="org-function-name">add_library</span>(StaticLibrary STATIC lib1.cpp lib2.cpp lib3.cpp)

<span class="org-function-name">target_link_libraries</span>(SampleApp  
        GL blas opencv ole32 user32  <span class="org-comment"># System libraries  /usr/lib/*.so files on Linux </span>
                                     <span class="org-comment"># or *.lib files for MSVC VC++/Windows compiler and DLLs </span>
                                     <span class="org-comment"># at C:\Windows\System32</span>
        SampleSharedLib              <span class="org-comment"># Project shared library </span>
        StaticLibrary                <span class="org-comment"># Project static library </span>
)
</pre>
</div>

<p>
<b>Set compiler flags</b> 
</p>

<ul class="org-ul">
<li>Target compilar flags.
<ul class="org-ul">
<li>Note: The compilation flags are compiler-specific, the following
flags only works for GCC and Clang, but they don't work for MSVC
(VC++ Compiler) that uses forward slashes for compiler options
instead of dashes.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(NOT MSVC) 
   <span class="org-comment"># Only for GCC or Clang </span>
   <span class="org-comment"># (g) =&gt; Add debugging symbols </span>
   <span class="org-function-name">target_compile_options</span>(SampleApp -g -Wall -Wpendantic -Wextra )
<span class="org-keyword">else</span>()
   <span class="org-comment"># MSVC (VC++) =&gt; "visual" C++</span>
   <span class="org-function-name">target_compile_options</span>(SampleApp /Zi /Wall /Yd)         
<span class="org-keyword">endif</span>()
</pre>
</div>


<p>
<b>Set target compiler extensions and C++ standard</b>
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://cmake.org/cmake/help/latest/command/target_compile_features.html">target_compile_features</a></li>
<li><a href="https://cmake.org/cmake/help/latest/prop_gbl/CMAKE_CXX_KNOWN_FEATURES.html">CMAKE_CXX_KNOWN_FEATURES</a> - Arguments of command target_compile_features</li>
<li>See: <a href="https://github.com/Kitware/CMake/tree/master/Tests/CompileFeatures">https://github.com/Kitware/CMake/tree/master/Tests/CompileFeatures</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake">
<span class="org-comment"># Equivalent to compiling the target usign GCC with -std=c++14 (C++14 ISO Standard)</span>
<span class="org-comment"># Or /std:c++14 in MSVC VC++ </span>
<span class="org-function-name">target_compile_features</span>(SomeExecutableTarget PRIVATE cxx_std_14)

<span class="org-comment"># Equivalent to compiling the target usign GCC with -std=c++17 (C++17 ISO Standard)</span>
<span class="org-comment"># Or /std:c++17 in MSVC VC++ </span>
<span class="org-function-name">target_compile_features</span>(SomeExecutableTarget PRIVATE cxx_std_17)

<span class="org-comment"># Equivalent to compiling the target usign GCC with -std=c++20 - Experimental C++20</span>
<span class="org-function-name">target_compile_features</span>(SomeExecutableTarget PRIVATE cxx_std_20)
</pre>
</div>


<p>
<b>Set target Properties</b>
</p>

<ul class="org-ul">
<li>Set target properties:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">set_target_properties</span>(SampleApp PROPERTIES 
    {PROPERTY1} {VALUE1}
    {PROPERTY2} {VALUE2}
    ... .... ... ... 
    {PROPERTYN} {VALUEN}
 )
</pre>
</div>

<p>
Example 1: Add file extension .bin to Unix executable (note:
executables of Unix-like operating system do not have extension *.exe
like in Microsft Windows): 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(UNIX)
   <span class="org-comment"># When it is compiled, instead of generating the executable named as SampleApp, </span>
   <span class="org-comment"># the program will be named as "SampleApp.bin". </span>
   <span class="org-function-name">set_target_properties</span>(SampleApp PROPERTIES SUFFIX <span class="org-string">".bin"</span>)
 <span class="org-keyword">endif</span>()
</pre>
</div>

<p>
Example 2: Modify multiple properties, set the shared library file
name to AddinExtesion.xll. 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">add_library</span>(WrapperLibrary SHARED src1.cpp src2.cpp ... srcN.cpp)
<span class="org-comment"># ... omit configuration ... # </span>

<span class="org-function-name">set_target_properties</span>(WrapperLibrary PROPERTIES
  <span class="org-comment"># On Unix, it would add "lib" to beggining of the file name.</span>
  <span class="org-comment"># If prefix was not set to empty, the output file name would be</span>
  <span class="org-comment"># 'libAddinExtesion.xll'</span>
  PREFIX       <span class="org-string">""</span>  

  <span class="org-comment"># Change file name without changing prefix or extension (suffix)</span>
  OUTPUT_NAME  <span class="org-string">"AddinExtension"</span>

  <span class="org-comment"># Change file extension </span>
  SUFFIX      <span class="org-string">".xll"</span>    

  <span class="org-comment"># Makes all symbols hidden by default (compiles with by compiling</span>
  <span class="org-comment"># with flag -fvisibility=hidden on Unix-like Oses).  This setting</span>
  <span class="org-comment"># mimics the behavior of MSVC compiler extension</span>
  <span class="org-comment"># __declspec(dllexport)/__declspec(dllimport)</span>
  CXX_VISIBILITY_PRESET hidden
)
</pre>
</div>

<p>
The target properties could also be set individually:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">add_library</span>(WrapperLibrary SHARED src1.cpp src2.cpp ... srcN.cpp)
<span class="org-comment"># ... omit configuration ... # </span>
<span class="org-function-name">set_target_properties</span>(WrapperLibrary PROPERTIES PREFIX      <span class="org-string">""</span>)
<span class="org-function-name">set_target_properties</span>(WrapperLibrary PROPERTIES OUTPUT_NAME <span class="org-string">"AddinExtension"</span>)
<span class="org-function-name">set_target_properties</span>(WrapperLibrary PROPERTIES SUFFIX      <span class="org-string">".xll"</span>)  
</pre>
</div>

<p>
<b>Add more targets</b> 
</p>

<p>
A CMake project can have multiple targets, generating executables,
static libraries or shared libraries.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">add_executable</span>(DocGenerator src/docgen/main.cpp src/docgen/src2.cpp ...)
<span class="org-comment"># ... configuration of DocGenerator</span>

<span class="org-function-name">add_executable</span>(Display src/docgen/main.cpp src/docge/src2.cpp ...)

<span class="org-function-name">add_library</span>(libCommon SHARED src/lib/src1.cpp src/lib/src2.cpp ...)

<span class="org-comment"># .... configure targes .... #</span>
</pre>
</div>

<p>
<b>To avoid</b> 
</p>

<ul class="org-ul">
<li><b>Commands which affects all targets</b>: for instance,
include_directories(dir1 dir2 &#x2026;) will add those include
directories to all targets regardless if they need them or not. It
is better to use the command target_include_directories as it
affects just a single target. The word 'should not' does not means
'never'. If the intent is really set the same include directories
for all targets, then the command include_directories should be
used.</li>

<li><b>Non portable compiler settings.</b> Example: Compiler flags such as
-D{KEY}=VALUE, used by GCC and Clang, or /D{KEY}=VALUE, used by
MSVC (VC++) are non portable accross different compilers. To
overcome this, CMake provides many commands with an unified
interface to many compilers and build-systems, such as
<span class="underline">target_compile_definitions</span> that allows setting defines in a
compiler agnostic manner.</li>
</ul>
</div>
</div>
<div id="outline-container-orgeda2fbb" class="outline-4">
<h4 id="orgeda2fbb"><span class="section-number-4">5.4.2</span> Example</h4>
<div class="outline-text-4" id="text-5-4-2">
<p>
Project directory structure:
</p>

<ul class="org-ul">
<li><code>C:\User\Dummy\Documents\SampleProject</code>  (Project Root Directory)

<ul class="org-ul">
<li>CMakeLists.txt</li>

<li>./bin =&gt; Directory where the compiled binaries will be installed.</li>

<li>./src - Directory 
<ul class="org-ul">
<li>src/main.cpp</li>
<li>src/execMain.cpp</li>
<li>src/source1.cpp</li>
<li>src/source1.hpp</li>
<li>src/source2.cpp</li>
<li>src/source2.hpp</li>
<li>src/source3.cpp</li>
<li>&#x2026; &#x2026; ..</li>
</ul></li>

<li>./lib - directory
<ul class="org-ul">
<li>lib/lib1.cpp</li>
<li>lib/lib2.cpp</li>
<li>lib/lib3.cpp</li>
</ul></li>
</ul></li>
</ul>


<p>
File: <b>CMakeLists.txt</b> file for this hypothetical project.
</p>

<p>
Global configuration: 
</p>
<ul class="org-ul">
<li>Note: Global settings such <span class="underline">add_definitions</span> and <span class="underline">include_directories</span>
should be avoided.</li>
</ul>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Part 1 of CMakeListi.txt - Global project's configuration</label><pre class="src src-cmake"> <span class="org-comment"># ========= Global Configuration  ===============#</span>
 <span class="org-comment"># The global configuration is shared by all targets. </span>
 <span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)

 <span class="org-function-name">project</span>( SuperCADTool
          <span class="org-comment"># Note: the following fields are optional </span>
          DESCRIPTION <span class="org-string">"Another CAD Computer Aided Design APP"</span>
          VERSION     1.0 
          LANGUAGE    CXX 
        )

 <span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
 <span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># AVOID! </span>
<span class="org-comment"># Global compile definition</span>
<span class="org-comment"># Add compiled definition -DQT_QML_DEBUG for all target.s </span>
<span class="org-function-name">add_definitions</span>(-DQT_QML_DEBUG)

<span class="org-comment"># AVOID!</span>
<span class="org-comment"># Global includes added to all targets </span>
<span class="org-function-name">include_directories</span>(<span class="org-string">"C:\\boost\\v1.67\\include"</span>  <span class="org-string">"/home/someone/includes"</span>)

<span class="org-comment"># AVOID! </span>
<span class="org-comment"># Global linking directories which contains static (*.a) or shared</span>
<span class="org-comment"># libraries (*.so or *.dll files)</span>
<span class="org-function-name">link_directories</span>(  
   <span class="org-comment"># C:\Users\DummyUser\libs</span>
   <span class="org-string">"C:\\Users\\DummyUser\\libs"</span> <span class="org-comment"># Windows paths with backward slash must be escaped with '\'</span>
   <span class="org-string">"C:/libs/Graphics"</span>           <span class="org-comment"># Windows paths with forward slash </span>
   <span class="org-string">"/home/DummyUser/libs"</span> 
 )
</pre>
</div>

<p>
Target Configurations: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Part 2 of CMakeListi.txt - Per-target configuration.</label><pre class="src src-cmake"> <span class="org-comment"># ======= Configuration per target =============#</span>

 <span class="org-comment"># Target: SampleApp executable </span>
 <span class="org-comment">#---------------------------------------------------------</span>
 <span class="org-function-name">add_executable</span>(SampleApp src/main.cpp src/source1.cpp src/source2.cpp) 
 <span class="org-function-name">target_compile_definitions</span>(SampleApp PRIVATE VERBOSITY=100 Optimize foo=bar)
 <span class="org-function-name">target_include_directories</span>(SampleApp PUBLIC src/include1 /home/usr/include)

 <span class="org-function-name">target_link_libraries</span>(SampleApp  
         GL blas opencv ole32 user32  <span class="org-comment"># System libraries  /usr/lib/*.so files on Linux </span>
                                      <span class="org-comment"># or *.lib files for MSVC VC++/Windows compiler and DLLs </span>
                                      <span class="org-comment"># at C:\Windows\System32</span>
         SampleSharedLib              <span class="org-comment"># Project shared library </span>
         StaticLibrary                <span class="org-comment"># Project static library </span>
 )

<span class="org-comment"># Target: Executable2 - Add header files to make them visible in the IDE </span>
<span class="org-comment">#-----------------------------------------------------------------</span>
<span class="org-function-name">add_executable</span>(Executable2 src/execMain.cpp 
                           src/source1.cpp src/source1.hpp 
                           src/source2.cpp src/source2.hpp 
               ) 

<span class="org-comment"># Target: SampleShared - Shared library dll, so </span>
<span class="org-comment">#-------------------------------------------------------------------</span>
<span class="org-function-name">add_library</span>(SampleSharedLib SHARED  lib/lib1.cpp lib/lib2.cpp lib/lib3.cpp)
<span class="org-function-name">target_include_directories</span>(SampleSharedLib PRIVATE src/lib/include1)
</pre>
</div>

<p>
Intallation commands: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Part 3 of CMakeListi.txt - Target/commands for installing executables and libraries.</label><pre class="src src-cmake"><span class="org-comment"># Install binaries locally during development.</span>
<span class="org-comment"># The binaries are installed in project's "${ROOT DIRECTORY}./bin" </span>
<span class="org-comment">#----------------------------------------------------------------------</span>

<span class="org-comment"># During the development install ./bin dir.  in project's root directory </span>
<span class="org-comment"># To install using CMAKE_INSTALL_PREFIX path, set this variable to 'OFF'</span>
<span class="org-function-name">set</span>(INSTALL_LOCAL ON) 

<span class="org-keyword">if</span>(INSTALL_LOCAL ON)
  <span class="org-comment"># Overrides the default default install location that would be </span>
  <span class="org-comment"># ${</span><span class="org-variable-name">CMAKE_INSTALL_PREFIX</span><span class="org-comment">}/bin as ${</span><span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span><span class="org-comment">}/bin </span>
  <span class="org-comment">#</span>
  <span class="org-comment"># Note: CMAKE_CURRENT_LIST_DIR is the directory where is CMakeLists.txt </span>
  <span class="org-function-name">install</span>(TARGETS SampleApp Executable2 SampleSharedLib DESTINATION  ${<span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span>}/bin)
<span class="org-keyword">else</span>()
  <span class="org-comment"># Install binary to directory probvided by the variable CMAKE_INSTALL_PREFIX </span>
  <span class="org-function-name">install</span>(TARGETS SampleApp Executable2 SampleSharedLib DESTINATION  bin)
<span class="org-keyword">endif</span>()
</pre>
</div>


<p>
<b>Compilation:</b>
</p>

<p>
Once the project file CMakeLists.txt is opened in any supported IDE or
an text editor such as QTCreator, the IDE will show all available
targets and provide menus, context menus or buttons where is possible
to select all targets for building the entire project; build individual
targets; debug an specific executable targets and run the <b>install</b>
target that copies the compiled files to the directory stored in the
variable <b>CMAKE_INSTALL_PREFIX</b>. 
</p>

<p>
<b>Running targets manually from command line without any IDE:</b> 
</p>

<p>
Step 1. Configuration - run the command from the project's top level directory.
</p>

<ul class="org-ul">
<li>Configure with install path CMAKE_INSTALL_PREFIX set to default
sytem location. (/usr/local on Linux). To install the binaries to
the this location, set the variable INSTALL_LOCAL in the code to
OFF.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Use Ninja build system </span>
$ cmake -Bcache -H. -G Ninja 

<span class="org-comment-delimiter"># </span><span class="org-comment">Use Makefile </span>
$ cmake -Bcache -H. -G Ninja 
</pre>
</div>

<ul class="org-ul">
<li>Configure base install path (CMAKE_INSTALL_PREFIX) to
/home/dummy/Documents/myapp, assuming that INSTALL_LOCAL is set to
OFF.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -Bcache -H. -G Ninja -DCMAKE_INSTALL_PREFIX=/home/dummy/Documents/myapp 
</pre>
</div>

<p>
Step 2. Run targets. 
</p>

<ul class="org-ul">
<li>Run all targetes building the whole project</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build cache --target  
</pre>
</div>

<ul class="org-ul">
<li>Run only the target SampleApp that builds the SampleApp executable:</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build cache --target SampleApp
</pre>
</div>

<ul class="org-ul">
<li>Run only the target Executable2 that builds the Excutable2 executable</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build cache --target Executable2 
</pre>
</div>

<ul class="org-ul">
<li>Run the target 'install' that will install all binaries specified
in target install to ./bin directory if the option <b>INSTALL_LOCAL</b> is
set in the code (ON). To install the standard location specified by
${CMAKE_INSTALL_PREFIX}, set <b>INSTALL_LOCAL</b> in the code to OFF.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build cache --target install 
</pre>
</div>
</div>
</div>

<div id="outline-container-org435df59" class="outline-4">
<h4 id="org435df59"><span class="section-number-4">5.4.3</span> Further Reading</h4>
<div class="outline-text-4" id="text-5-4-3">
<p>
General 
</p>

<ul class="org-ul">
<li>Ben Morgan - The University of Warwick - <a href="https://web.archive.org/web/20190109203537/https://indico.fnal.gov/event/9717/session/38/contribution/82/material/slides/0.pdf">C++11/14/1z in CMake</a></li>
<li><a href="https://foonathan.net/doc/compatibility/">Documentation of Compatibility</a></li>
<li><a href="https://manpages.debian.org/stretch-backports/cmake-data/cmake-compile-features.7.en.html">Manpage - Cmake compile features</a></li>
<li><a href="https://community.kde.org/Guidelines_and_HOWTOs/CMake/Library">https://community.kde.org/Guidelines_and_HOWTOs/CMake/Library</a></li>
</ul>

<p>
Install Dependencies - Shared Libraries: 
</p>

<ul class="org-ul">
<li><a href="https://cmake.org/cmake/help/latest/command/install.html">https://cmake.org/cmake/help/latest/command/install.html</a></li>

<li><a href="https://stackoverflow.com/questions/41175354/can-i-install-shared-imported-library">Can I install shared imported library?</a></li>

<li><a href="https://cmake.org/pipermail/cmake/2014-December/059338.html">https://cmake.org/pipermail/cmake/2014-December/059338.html</a></li>

<li><a href="https://cmake.org/pipermail/cmake/2009-June/030205.html">Install of library sub-project prior to building application</a></li>

<li><a href="http://cmake.3232098.n2.nabble.com/Copying-Shared-Libraries-DLLs-Next-to-the-Executable-td7597163.html">Copying Shared Libraries (DLLs) Next to the Executable</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org2c90b40" class="outline-3">
<h3 id="org2c90b40"><span class="section-number-3">5.5</span> Consuming Libraries or Dependencies</h3>
<div class="outline-text-3" id="text-5-5">
</div>
<div id="outline-container-orgb05eb34" class="outline-4">
<h4 id="orgb05eb34"><span class="section-number-4">5.5.1</span> Overview</h4>
<div class="outline-text-4" id="text-5-5-1">
<p>
Note: 
</p>
<ul class="org-ul">
<li>object-code =&gt; Here means any compiled machine code, any file with
the extensions: <code>*.exe, *.o, *.obj, *.so, *.dylib</code></li>
</ul>

<p>
CMake can consume libraries or external dependencies in many different ways: 
</p>

<ul class="org-ul">
<li><b>Library Installation with building system</b> 
<ul class="org-ul">
<li>Installing the libraries with CMake, GNU Make, GNU autotools or
any building systems and consuming them via find_package(LIB) and
target_link_libraries( &#x2026;.).</li>
<li>Disadvantages:
<ul class="org-ul">
<li>As C++ compilers do not have a standard and stable ABI -
Application Binary Interface, the library needs to be
installed for every different compiler and different version
of the same compiler, otherwise it will not be possible to
build an application that links against a library built with
different compiler.</li>
<li>Installing multiple versions of the same library may result in
dependency hell breaking dynamic-linked applications depending
on it.</li>
</ul></li>
</ul></li>

<li><b>Library installation from operating system's package manager</b>
<ul class="org-ul">
<li>Installing libraries with a package manager such as Linux
Fedora (dnf), Ubuntu (apt-get or Mac OSX (brew) and consuming
them via find_package(LIB) and target_link_libraries(&#x2026;).</li>
<li>Disadvantages:
<ul class="org-ul">
<li>The installation is not reproducible in other platforms and
often, it is not possible to install multiple versions of the
same library and it may not be available in all package
managers.</li>
</ul></li>
</ul></li>

<li><b>CMake add_subdirectory(lib/&lt;LIBRARY_DIR&gt;)</b>
<ul class="org-ul">
<li>The library directory containing the source code is added to the
project either via CMake <a href="https://cmake.org/cmake/help/latest/module/ExternalProject.html">ExternalProject</a>, manual copy or via git
add submodule. The library is consumed in the project by adding
a line: add_subdirectory(lib/&lt;LIBRARY_DIR&gt;) to the file
CMaklists.txt. And the applications links against the library
with target_link_libraries(app lib::libname).</li>
<li>Advantages:
<ul class="org-ul">
<li>No ABI issues as the library is built with the same compiler
as the application.</li>
<li>Better for static linking.</li>
<li>More simple as it does not require the library maintainer to
provide a CMake module for find_package.</li>
<li>Better reproducibility and easier compilation on different
operating systems and also easier cross-compilation for
embedded targets.</li>
<li>No dependency hell: As multiple versions of the library can be
used in different projects without disrupting each other.</li>
</ul></li>
<li>Disadvantages:
<ul class="org-ul">
<li>Longer compile-time</li>
<li>More disk space spending</li>
<li>The library is recompiled for every project.</li>
</ul></li>
</ul></li>

<li><b>C++-specific Package Manager with CMake Integration</b>
<ul class="org-ul">
<li>Package managers automates the process of downloading libraries'
source code and compiling them alongside the project. It is no
possible to generalize C++ package managers as there are many differences
among them. In the case of Conan package manager, it builds and
installs the library object-code and header files to the Conan's
cache directory where the library can be reused on many projects
and recompiled on-demand if the compiler used to build the
project is not ABI-compatible with the compiler used to build
the libraries object codes.</li>
<li>Note: there are other package managers built as CMake scripts,
but they fall short when dealing with libraries using other
building systems such as GNU autotools or GNU Makefiles.</li>
<li>Advantages:
<ul class="org-ul">
<li>Automates the process of getting and installing libraries.</li>
<li>Saves disk space.</li>
<li>Shorter compile-time as library-object codes can be reused in
other projects.</li>
<li>No ABI issues</li>
<li>No dependency hell</li>
<li>Better for static linking and cross-compilation for embedded
systems.</li>
<li>Reproducible on many different operating systems.</li>
<li>Makes easier to install big libraries, frameworks or libraries
with many dependencies such as Boost and Poco libraries which
depends on openssl which is problematic to build on Windows.</li>
</ul></li>
<li>Disadvantages:
<ul class="org-ul">
<li>conan is not mainstream and there are still many competing
package managers.</li>
<li>conan requires a Python installation, although it is not a big
issue since there are many tools using Python as an embedded
scripting language such GNU Debugger GDB or Windows Debugger.</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org1f0f014" class="outline-4">
<h4 id="org1f0f014"><span class="section-number-4">5.5.2</span> Dependencies with CMake add_subdirectory</h4>
<div class="outline-text-4" id="text-5-5-2">
<p>
External libraries or sub-projects can be consumed with CMake command
add_subdirectory(&lt;PATH-TO/LIB-DIRECTORY&gt;) which builds the project and
the library source code &lt;LIB-DIRECTORY&gt; containing a
CMakeLists.txt. The benefits of this approach is that libraries are:
</p>

<ul class="org-ul">
<li>Libraries does not need to be installed in the system before
usage.</li>

<li>No ABI incompatibility issue as the compiler used for building the
application and library are the same.</li>

<li>Better tracking of dependencies and no dependency hell as
different versions of the same library can be used in many project
without disrupting each other.</li>
</ul>

<p>
Drawbacks:
</p>

<ul class="org-ul">
<li>Higher disk space usage as every project needs a copy of the
library sources.</li>

<li>Libraries need to use CMake as building system and contain a
CMakeLists.txt file at root directory, otherwise, it will not be
possible to use add_subdirectory command.</li>

<li>Possible complexity of git add submodule.</li>
</ul>

<p>
<b>Libraries used:</b>
</p>

<ul class="org-ul">
<li><a href="https://github.com/gabime/spdlog">spdlog</a></li>
<li><a href="https://github.com/cpputest/cpputest">cpputest</a></li>
</ul>

<p>
<b>Creating project</b> 
</p>

<p>
(1) Create project and git repository 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git init .
Initialized empty Git repository<span class="org-keyword"> in</span> /home/user/projects/cmake-experiment/.git/

$ git add CMakeLists.txt main.cpp 

$ git commit -m started
[master (root-commit) 8e60c5c] started
 2 files changed, 16 insertions(+)
 create mode 100644 CMakeLists.txt
 create mode 100644 main.cpp
</pre>
</div>

<p>
(2) Add external libraries to the project via git submodule or by
copying them manually.    
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git submodule add  https://github.com/gabime/spdlog extern/spdlog
$ git submodule add https://github.com/cpputest/cpputest extern/cpputest
</pre>
</div>

<p>
(3) Show current directory: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree -L 2 .
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; CMakeLists.txt
&#9500;&#9472;&#9472; CMakeLists.txt.user
&#9500;&#9472;&#9472; extern
&#9474;&#160;&#160; &#9500;&#9472;&#9472; cpputest
&#9474;&#160;&#160; &#9492;&#9472;&#9472; spdlog
&#9492;&#9472;&#9472; main.cpp

3 directories, 3 files
</pre>
</div>


<p>
<b>File: CMakeLists.txt</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(cmake-experiment)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-function-name">add_subdirectory</span>(extern/spdlog)
<span class="org-function-name">add_subdirectory</span>(extern/cpputest)

<span class="org-function-name">add_executable</span>(app main.cpp)
<span class="org-function-name">target_link_libraries</span>(app spdlog::spdlog CppUTest)
</pre>
</div>

<ul class="org-ul">
<li>The command <a href="https://cmake.org/cmake/help/latest/command/add_subdirectory.html">add_subdirectory</a> adds the sources of the library spdlog
to the current build by processing the file
extern/spdlog/CMakeLists.txt.</li>

<li>Libraries can be made easier to use and consume by listing in their
documentation the <span class="underline">targets they define</span> which client codes can link
against with <span class="underline">add_library</span>. If the those targets are not mentioned
the user has to inspect all libraries CMakeLists.txt files which
can be cumbersome in libraries with many nested directories.</li>
</ul>

<p>
Finding targets defined by spdlog and CppUtest libraries:
</p>

<ul class="org-ul">
<li>The file extern/spdlog/CMakeLists.txt contains the following lines
that defines library targets which the top-level CMakeLists.txt
file can consume:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">add_library</span>(spdlog INTERFACE)
<span class="org-function-name">add_library</span>(spdlog::spdlog ALIAS spdlog)
</pre>
</div>

<ul class="org-ul">
<li>The file extern/CppUtest/CMakeLists.txt contains the following
lines which builds the extern/CppUtest/src/CppUtest/CMakeLists.txt
as a sub-project.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">include_directories</span>(${<span class="org-variable-name">CppUTestRootDirectory</span>}/include)
<span class="org-function-name">add_subdirectory</span>(src/CppUTest)
</pre>
</div>

<ul class="org-ul">
<li>The file extern/CppUtest/src/CppUtest/CMakeLists.txt contains the
following lines which defines the target CppUtest which the top
level CMakeLists.txt that has add_subdirectory(extern/cpputest)
can link against:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">add_library</span>( CppUTest
            CommandLineArguments.cpp
            MemoryLeakWarningPlugin.cpp
            TestHarness_c.cpp
            ... ... ... ... 
           )
</pre>
</div>

<p>
<b>File: main.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">spdlog/spdlog.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">CppUTest/CommandLineTestRunner.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">CppUTest/Utest.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">CppUTest/TestHarness.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">double</span> <span class="org-function-name">func</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> 3 * x * x - 21.0 * x + 36.0;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST_GROUP</span><span class="org-rainbow-delimiters-depth-1">(</span>MainTest<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>MainTest, functionPoints<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Running functionPointsTest."</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>0.0, func<span class="org-rainbow-delimiters-depth-3">(</span>4.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;
    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>0.0, func<span class="org-rainbow-delimiters-depth-3">(</span>3.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;
    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>0.0, func<span class="org-rainbow-delimiters-depth-3">(</span>3.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;
    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>10.0, func<span class="org-rainbow-delimiters-depth-3">(</span>126.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Supposed to fail</span>
    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>1.0, func<span class="org-rainbow-delimiters-depth-3">(</span>18.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Ending functionPointsTest."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    SPDLOG_TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Entering function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Starting server OK."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">spdlog</span>::error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Server crashed. "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Received request from 192.168.10.1 at port 9090"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Sending response to client 192.168.100.1 connection ID 10"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    SPDLOG_TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Exit application"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"========== Running Tests ============"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">return</span> RUN_ALL_TESTS<span class="org-rainbow-delimiters-depth-2">(</span>argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Build on Command Line</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -B_build -GNinja -DCMAKE_BUILD_TYPE=Debug
 ... ... ... ... ... ... 
-------------------------------------------------------

-- Configuring done
-- Generating done
-- Build files have been written to: /home/archbox/projects/cmake-experiment/_build

$ cmake --build _build --target
</pre>
</div>

<p>
<b>Running</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ _build/app 
[2019-07-11 17:24:59.450] [info] Starting server OK.
[2019-07-11 17:24:59.450] [error] Server crashed. 
[2019-07-11 17:24:59.450] [info] Received request from 192.168.10.1 at port 9090
[2019-07-11 17:24:59.451] [info] Sending response to client 192.168.100.1 connection ID 10
========== Running Tests ============
[2019-07-11 17:24:59.451] [info] Running functionPointsTest.

<span class="org-function-name">../main.cpp</span>:23: error: Failure<span class="org-keyword"> in</span> TEST(MainTest, functionPoints)
        expected &lt;10&gt;
        but was  &lt;45018&gt; threshold used was &lt;0.001&gt;

<span class="org-builtin">.</span>
<span class="org-function-name">Errors</span> (1 failures, 1 tests, 1 ran, 4 checks, 0 ignored, 0 filtered out, 1 ms)
</pre>
</div>
</div>
</div>
<div id="outline-container-org4d29301" class="outline-4">
<h4 id="org4d29301"><span class="section-number-4">5.5.3</span> Dependencies with FetchContent module</h4>
<div class="outline-text-4" id="text-5-5-3">
<p>
The CMake module <a href="https://cmake.org/cmake/help/v3.15/module/FetchContent.html">FetchContent</a> can fetch dependencies at configuration
time from many possible sources such as GIT remote repositories, http
servers (URLs) and compressed files such as *.tar, *.tgz, *.zip and so
on.
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://cmake.org/cmake/help/v3.15/module/FetchContent.html">https://cmake.org/cmake/help/v3.15/module/FetchContent.html</a></li>
</ul>

<p>
See also: 
</p>
<ul class="org-ul">
<li><a href="https://cmake.org/cmake/help/latest/module/ExternalProject.html">https://cmake.org/cmake/help/latest/module/ExternalProject.html</a></li>
<li><a href="https://blog.kitware.com/cmake-superbuilds-git-submodules/">https://blog.kitware.com/cmake-superbuilds-git-submodules/</a></li>
</ul>

<p>
<b>Example:</b> 
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.14 FATAL_ERROR)
<span class="org-function-name">project</span>(cmake-experiment)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># See documentation at: https://cmake.org/cmake/help/latest/module/FetchContent.html</span>
<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment">#========== Fetch cpputest ============================#</span>

<span class="org-function-name">FetchContent_Declare</span>(
    cpputest
    GIT_REPOSITORY  <span class="org-string">"https://github.com/cpputest/cpputest.git"</span>
    GIT_TAG         <span class="org-string">"v3.8"</span>
)
<span class="org-function-name">FetchContent_GetProperties</span>(cpputest)
<span class="org-keyword">if</span>(NOT cpputest_POPULATED)
    <span class="org-function-name">FetchContent_Populate</span>(cpputest)
    <span class="org-function-name">message</span>(<span class="org-string">" [INFO] cpputest_SOURCE_DIR = ${</span><span class="org-variable-name">cpputest_SOURCE_DIR</span><span class="org-string">} "</span>)
    <span class="org-function-name">message</span>(<span class="org-string">" [INFO] cpputest_BINARY_DIR = ${</span><span class="org-variable-name">cpputest_BINARY_DIR</span><span class="org-string">} "</span>)

    <span class="org-comment"># Optional =&gt; From: https://github.com/cpputest/cpputest/blob/master/CMakeLists.txt</span>
    <span class="org-function-name">set</span>(TEST OFF)
    <span class="org-function-name">set</span>(TEST_DETAILED OFF)

    <span class="org-function-name">add_subdirectory</span>(${<span class="org-variable-name">cpputest_SOURCE_DIR</span>} ${<span class="org-variable-name">cpputest_BINARY_DIR</span>})

    <span class="org-comment"># Note: this path was found by trial and error, it is library-specific</span>
    <span class="org-function-name">include_directories</span>(${<span class="org-variable-name">cpputest_SOURCE_DIR</span>}/include)
<span class="org-keyword">endif</span>()

<span class="org-comment">#===== Fetch spdlog as archive ====================#</span>

<span class="org-function-name">FetchContent_Declare</span>(
    spdlog
    URL       <span class="org-string">"https://github.com/gabime/spdlog/archive/v1.3.1.zip"</span>
)
<span class="org-function-name">FetchContent_GetProperties</span>(spdlog)
<span class="org-keyword">if</span>(NOT spdlog_POPULATED)
    <span class="org-function-name">FetchContent_Populate</span>(spdlog)
    <span class="org-comment"># message(" [INFO] spdlog_SOURCE_DIR = ${</span><span class="org-variable-name">spdlog_SOURCE_DIR</span><span class="org-comment">} ")</span>
    <span class="org-comment"># message(" [INFO] spdlog_BINARY_DIR = ${</span><span class="org-variable-name">spdlog_BINARY_DIR</span><span class="org-comment">} ")</span>

    <span class="org-comment"># Optional =&gt; Set library build options</span>
    <span class="org-comment"># Build options at: https://github.com/gabime/spdlog/blob/v1.x/CMakeLists.txt</span>
    <span class="org-function-name">set</span>(SPDLOG_BUILD_EXAMPLES OFF)
    <span class="org-function-name">set</span>(SPDLOG_BUILD_BENCH    OFF)
    <span class="org-function-name">set</span>(SPDLOG_BUILD_TESTS    OFF)

    <span class="org-function-name">add_subdirectory</span>(${<span class="org-variable-name">spdlog_SOURCE_DIR</span>} ${<span class="org-variable-name">spdlog_BINARY_DIR</span>})
<span class="org-keyword">endif</span>()

<span class="org-comment"># ========= Target Settings ==========================#</span>
<span class="org-function-name">add_executable</span>(app main.cpp)
<span class="org-function-name">target_link_libraries</span>(app  CppUTest spdlog::spdlog)
</pre>
</div>

<p>
File: main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">spdlog/spdlog.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">CppUTest/CommandLineTestRunner.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">CppUTest/Utest.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">CppUTest/TestHarness.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">double</span> <span class="org-function-name">func</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> 3 * x * x - 21.0 * x + 36.0;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST_GROUP</span><span class="org-rainbow-delimiters-depth-1">(</span>MainTest<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>MainTest, functionPoints<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Running functionPointsTest."</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>0.0, func<span class="org-rainbow-delimiters-depth-3">(</span>4.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;
    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>0.0, func<span class="org-rainbow-delimiters-depth-3">(</span>3.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;
    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>0.0, func<span class="org-rainbow-delimiters-depth-3">(</span>3.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;
    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>10.0, func<span class="org-rainbow-delimiters-depth-3">(</span>126.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Supposed to fail</span>
    DOUBLES_EQUAL<span class="org-rainbow-delimiters-depth-2">(</span>1.0, func<span class="org-rainbow-delimiters-depth-3">(</span>18.0<span class="org-rainbow-delimiters-depth-3">)</span>, 0.001<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Ending functionPointsTest."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    SPDLOG_TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Entering function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Starting server OK."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">spdlog</span>::error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Server crashed. "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Received request from 192.168.10.1 at port 9090"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Sending response to client 192.168.100.1 connection ID 10"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    SPDLOG_TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Exit application"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"========== Running Tests ============"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">return</span> RUN_ALL_TESTS<span class="org-rainbow-delimiters-depth-2">(</span>argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Building and running from command line:</b>
</p>

<p>
Configuration step 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -Bbuild -DCMAKE_BUILD_TYPE=Debug
-- The C compiler identification is GNU 8.3.1
-- The CXX compiler identification is GNU 8.3.1
-- Check for working C compiler: /usr/lib64/ccache/cc
-- Check for working C compiler: /usr/lib64/ccache/cc -- works

 ... .... ... ... ... ... ... ... ... ... 

-- Configuring done
-- Generating done
-- Build files have been written to: /home/user/projects/cmake-experiment/build
</pre>
</div>

<p>
Building step 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target
</pre>
</div>

<p>
Check build directory: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree -L 2 build
build
&#9500;&#9472;&#9472; app
&#9500;&#9472;&#9472; CMakeCache.txt
&#9500;&#9472;&#9472; CMakeFiles
&#9474;&#160;&#160; &#9500;&#9472;&#9472; 3.14.3
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app.dir
&#9474;&#160;&#160; &#9500;&#9472;&#9472; cmake.check_cache
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeDirectoryInformation.cmake
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeError.log
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeOutput.log
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeRuleHashes.txt
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeTmp
&#9474;&#160;&#160; &#9500;&#9472;&#9472; feature_tests.bin
&#9474;&#160;&#160; &#9500;&#9472;&#9472; feature_tests.c
&#9474;&#160;&#160; &#9500;&#9472;&#9472; feature_tests.cxx
&#9474;&#160;&#160; &#9500;&#9472;&#9472; Makefile2
&#9474;&#160;&#160; &#9500;&#9472;&#9472; Makefile.cmake
&#9474;&#160;&#160; &#9500;&#9472;&#9472; progress.marks
&#9474;&#160;&#160; &#9492;&#9472;&#9472; TargetDirectories.txt
&#9500;&#9472;&#9472; cmake_install.cmake
&#9500;&#9472;&#9472; _deps
&#9474;&#160;&#160; &#9500;&#9472;&#9472; cpputest-build
&#9474;&#160;&#160; &#9500;&#9472;&#9472; cpputest-src
&#9474;&#160;&#160; &#9500;&#9472;&#9472; cpputest-subbuild
&#9474;&#160;&#160; &#9500;&#9472;&#9472; spdlog-build
&#9474;&#160;&#160; &#9500;&#9472;&#9472; spdlog-src
&#9474;&#160;&#160; &#9492;&#9472;&#9472; spdlog-subbuild
&#9500;&#9472;&#9472; Makefile
&#9500;&#9472;&#9472; spdlogConfigVersion.cmake
&#9492;&#9472;&#9472; spdlog.pc

11 directories, 18 files

</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ build/app 
[2019-07-14 01:16:58.305] [info] Starting server OK.
[2019-07-14 01:16:58.305] [error] Server crashed. 
[2019-07-14 01:16:58.305] [info] Received request from 192.168.10.1 at port 9090
[2019-07-14 01:16:58.305] [info] Sending response to client 192.168.100.1 connection ID 10
========== Running Tests ============
[2019-07-14 01:16:58.305] [info] Running functionPointsTest.

<span class="org-function-name">/home/archbox/projects/cmake-experiment/main.cpp</span>:23: error: Failure<span class="org-keyword"> in</span> TEST(MainTest, functionPoints)
        expected &lt;10&gt;
        but was  &lt;45018&gt; threshold used was &lt;0.001&gt;

<span class="org-builtin">.</span>
<span class="org-function-name">Errors</span> (1 failures, 1 tests, 1 ran, 4 checks, 0 ignored, 0 filtered out, 0 ms)
</pre>
</div>
</div>
</div>

<div id="outline-container-org88e3465" class="outline-4">
<h4 id="org88e3465"><span class="section-number-4">5.5.4</span> Dependencies with FetchContent module - simplified usage</h4>
<div class="outline-text-4" id="text-5-5-4">
<p>
The usage of the CMake module FetchContent can be simplified by
defining functions and macros encapsulating its functionalities.
</p>

<p>
Libraries Used: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/tplgy/cppcodec">cppcodec</a></li>
<li><a href="https://github.com/gabime/spdlog">spdlog</a></li>
</ul>

<p>
Example: 
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.14 FATAL_ERROR)
<span class="org-function-name">project</span>(cmake-experiment)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># See documentation at: https://cmake.org/cmake/help/latest/module/FetchContent.html</span>

<span class="org-comment">#========== Macros for automating Library Fetching =============#</span>
<span class="org-function-name">include</span>(FetchContent)

<span class="org-comment"># Download library from Github and add it as sub-project</span>
<span class="org-comment">#</span>
<span class="org-keyword">macro</span>(Download_Library_Git  NAME TAG REPOSITORY_URL)
    <span class="org-function-name">FetchContent_Declare</span>(
        ${<span class="org-variable-name">NAME</span>}
        GIT_REPOSITORY  ${<span class="org-variable-name">REPOSITORY_URL</span>}
        GIT_TAG         ${<span class="org-variable-name">TAG</span>}
    )
    <span class="org-function-name">FetchContent_GetProperties</span>(${<span class="org-variable-name">NAME</span>})
    <span class="org-keyword">if</span>(NOT cpputest_POPULATED)
        <span class="org-function-name">FetchContent_Populate</span>(${<span class="org-variable-name">NAME</span>})
        <span class="org-function-name">message</span>(<span class="org-string">"${</span><span class="org-variable-name">NAME</span><span class="org-string">}_SOURCE_DIR} = ${${</span><span class="org-variable-name">NAME</span><span class="org-string">}_SOURCE_DIR}"</span>)
        <span class="org-function-name">add_subdirectory</span>(${${<span class="org-variable-name">NAME</span>}_SOURCE_DIR} ${${<span class="org-variable-name">NAME</span>}_BINARY_DIR})
    <span class="org-keyword">endif</span>()
<span class="org-keyword">endmacro</span>()

<span class="org-keyword">macro</span>(Download_Library_Github LIBRARY_NAME TAG USER PROJECT )
    <span class="org-function-name">Download_Library_Git</span>(
        ${<span class="org-variable-name">LIBRARY_NAME</span>}
        ${<span class="org-variable-name">TAG</span>}
        <span class="org-string">"https://github.com/${</span><span class="org-variable-name">USER</span><span class="org-string">}/${</span><span class="org-variable-name">PROJECT</span><span class="org-string">}.git"</span>
        )
<span class="org-keyword">endmacro</span>()

<span class="org-comment"># Download library archive (zip, *.tar.gz, ...) from URL</span>
<span class="org-keyword">macro</span>(Download_Library_Url NAME URL)
    <span class="org-function-name">FetchContent_Declare</span>(${<span class="org-variable-name">NAME</span>} URL  ${<span class="org-variable-name">URL</span>})
    <span class="org-function-name">FetchContent_GetProperties</span>(${<span class="org-variable-name">NAME</span>})
    <span class="org-keyword">if</span>(NOT ${<span class="org-variable-name">NAME</span>}_POPULATED)
        <span class="org-function-name">FetchContent_Populate</span>(${<span class="org-variable-name">NAME</span>})
        <span class="org-function-name">add_subdirectory</span>(${${<span class="org-variable-name">NAME</span>}_SOURCE_DIR} ${${<span class="org-variable-name">NAME</span>}_BINARY_DIR})
    <span class="org-keyword">endif</span>()
<span class="org-keyword">endmacro</span>()

<span class="org-comment"># Add path header files to the include path of all targets.</span>
<span class="org-comment"># =&gt; NAME =&gt; Library name added with any Download_Library command.</span>
<span class="org-comment"># =&gt; RELATIVE_PATH =&gt; Path to header files relative to library root directory</span>
<span class="org-comment">#</span>
<span class="org-keyword">function</span>(include_headers_directory NAME REALATIVE_PATH)
    <span class="org-function-name">include_directories</span>(<span class="org-string">"${${</span><span class="org-variable-name">NAME</span><span class="org-string">}_SOURCE_DIR}/${</span><span class="org-variable-name">RELATIVE_PATH</span><span class="org-string">}"</span>)
<span class="org-keyword">endfunction</span>()

<span class="org-comment">#============== Library Download =========================#</span>

<span class="org-function-name">Download_Library_Url</span>(
    spdlog
    <span class="org-string">"https://github.com/gabime/spdlog/archive/v1.3.1.zip"</span>
    )

<span class="org-function-name">Download_Library_Github</span>(
    cppcodec  <span class="org-comment"># Library name - arbitrary</span>
    v0.2      <span class="org-comment"># Git tag</span>
    tplgy     <span class="org-comment"># Github user name</span>
    cppcodec  <span class="org-comment"># Name of project that will be cloned.</span>
              <span class="org-comment"># Note: It is does not always have the same name as the library.</span>
    )

<span class="org-comment"># Only use it if CMake cannot find the headers or the library is not</span>
<span class="org-comment"># set properly.</span>
<span class="org-function-name">include_headers_directory</span>(cppcodec ./cppcodec)

<span class="org-comment"># ========= Targets Settings ==========================#</span>

<span class="org-function-name">add_executable</span>(mainapp main.cpp)
<span class="org-function-name">target_link_libraries</span>(mainapp cppcodec spdlog::spdlog)
</pre>
</div>

<p>
<b>File:</b> main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">spdlog/spdlog.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cppcodec/base32_crockford.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cppcodec/base64_rfc4648.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    SPDLOG_TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Entering function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Starting server OK."</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Received request from 192.168.10.1 at port 9090"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">spdlog</span>::info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Sending response to client 192.168.100.1 connection ID 10"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">using</span> <span class="org-type">base32</span> = <span class="org-constant">cppcodec</span>::base32_crockford;
    <span class="org-keyword">using</span> <span class="org-type">base64</span> = <span class="org-constant">cppcodec</span>::base64_rfc4648;

    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">uint8_t</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">decoded</span> = <span class="org-constant">base64</span>::decode<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"YW55IGNhcm5hbCBwbGVhc3VyZQ=="</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"decoded size (\"any carnal pleasure\"): "</span> &lt;&lt; decoded.size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">'\n'</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">base32</span>::encode<span class="org-rainbow-delimiters-depth-2">(</span>decoded<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-comment-delimiter">// </span><span class="org-comment">"C5Q7J833C5S6WRBC41R6RSB1EDTQ4S8"</span>


    SPDLOG_TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Exit application"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cd proejct_directory 
$ cmake -B_build -H. -DCMAKE_BUILD_TYPE=Debug
$ cmake --build _build --target

<span class="org-comment-delimiter"># </span><span class="org-comment">Run </span>
$ _build/mainapp 
[2019-07-19 17:46:56.306] [info] Starting server OK.
[2019-07-19 17:46:56.306] [info] Received request from 192.168.10.1 at port 9090
[2019-07-19 17:46:56.306] [info] Sending response to client 192.168.100.1 connection ID 10
decoded size (<span class="org-string">"any carnal pleasure"</span>): 19
C5Q7J833C5S6WRBC41R6RSB1EDTQ4S8
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4b70c9a" class="outline-3">
<h3 id="org4b70c9a"><span class="section-number-3">5.6</span> Common Variables</h3>
<div class="outline-text-3" id="text-5-6">
</div>
<div id="outline-container-org4eb2e74" class="outline-4">
<h4 id="org4eb2e74"><span class="section-number-4">5.6.1</span> CMAKE_CURRENT_LIST_DIR - Directory where is CMakeLists.txt</h4>
<div class="outline-text-4" id="text-5-6-1">
<p>
Prints the directory where CMAkeLists.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">message</span>(<span class="org-string">" [INFO] CMakeLists.txt is in the directory ${</span><span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span><span class="org-string">}"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org0ef7d47" class="outline-4">
<h4 id="org0ef7d47"><span class="section-number-4">5.6.2</span> CMAKE_CXX_STANDARD - Set C++ Standard</h4>
<div class="outline-text-4" id="text-5-6-2">
<p>
The variable <code>CMAKE_CXX_STANDARD</code> sets the project current C++
standard. This variable can be set to 98 (for C++98); 11 (C++11); 14
(C++14); 17 (C++17) and 20 (C++20 - experimental yet.)
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://cmake.org/cmake/help/latest/prop_tgt/CXX_STANDARD.html#prop_tgt:CXX_STANDARD">CXX_STANDARD — CMake 3.13.2 Documentation</a></li>
</ul>

<p>
Example: Set project to compile with C++11 ISO standard.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 11)
</pre>
</div>

<p>
Usage: (File CMAKELists.txt)
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(MY_PROJECT_NAME)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
... ... .... .... 
</pre>
</div>
</div>
</div>

<div id="outline-container-orge726504" class="outline-4">
<h4 id="orge726504"><span class="section-number-4">5.6.3</span> CMAKE_BUILD_TYPE - Set default building type to DEBUG</h4>
<div class="outline-text-4" id="text-5-6-3">
<p>
In the debug building type optimization flags are disabled and flags
for generating debugging symbols are enabled, for GGC or GCC/Mingw and
Clang the (-g) is automatically added and for MSVC, aka VC++ (cl.exe),
the flag /Zi is also passed to the compiler. The default building type
can be set to DEBUG with the following code.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-comment"># Set default building type to debug if it was not set</span>
<span class="org-comment"># in command line with -DCMAKE_BUILD_TYPE=release</span>
<span class="org-keyword">if</span>(NOT DEFINED CMAKE_BUILD_TYPE OR CMAKE_BUILD_TYPE MATCHES <span class="org-string">""</span>)
  <span class="org-function-name">set</span>(CMAKE_BUILD_TYPE  debug)
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
The building type can be changed by running cmake with the flag
 (-DCMAKE_BUILD_TYPE=release). Example: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -Bbuild -DCMAKE_BUILD_TYPE=DEBUG -G <span class="org-string">"Visual Studio 15 2017 Win64"</span>
</pre>
</div>

<p>
Note: CMake is not case sensitive, so it does not matter using
'release' or RELEASE; if or IF; endif or ENDIF and so on. 
</p>
</div>
</div>

<div id="outline-container-orgf86c513" class="outline-4">
<h4 id="orgf86c513"><span class="section-number-4">5.6.4</span> CMAKE_CXX_FLAGS - Compiler flags</h4>
<div class="outline-text-4" id="text-5-6-4">
<p>
The globals compiler flags used to build all targets can be extended
by setting the variable CMAKE_CXX_FLAGS. However, as the compiler
flags depends on the compiler, the custom settings may not be portable
if one uses a different compiler, for instance the (-g) flag used to
generate debug symbols with GCC or Clang does not work with MSVC
(visual c++ compiler, vc++) as it uses the flag /Zi for generating
debugging symbols.
</p>

<p>
Example 1: 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">set</span>(CMAKE_CXX_FLAGS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_CXX_FLAGS</span><span class="org-string">}"</span>  <span class="org-string">"-std=c++17 -g -Wall -Wextra -pendantic -O0"</span> )
</pre>
</div>

<p>
Example 2 (better):
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(NOT MSVC)
   <span class="org-function-name">set</span>(CMAKE_CXX_FLAGS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_CXX_FLAGS</span><span class="org-string">}"</span>  <span class="org-string">"-std=c++17 -g -Wall -Wextra -pendantic -O0"</span> )
<span class="org-keyword">endif</span>()
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org772c633" class="outline-3">
<h3 id="org772c633"><span class="section-number-3">5.7</span> CMake Map</h3>
<div class="outline-text-3" id="text-5-7">
<ul class="org-ul">
<li>Global configuration/settings 
<ul class="org-ul">
<li>add_definitions</li>
<li>set(&lt;VARIABLE&gt; &lt;VALUE&gt;)</li>
<li>add_subdirectory</li>
</ul></li>

<li>Target defintions
<ul class="org-ul">
<li>add_executable =&gt; Create target for building executable.</li>
<li>add_library    =&gt; Create target for building static or shared library.</li>
<li>add_custom_target</li>
</ul></li>

<li>Target Configuration:
<ul class="org-ul">
<li>set_target_properties(&lt;TARGET&gt; PROPERTIES &lt;KEY&gt; &lt;VALUE&gt; [&lt;KEY &lt;VALUE&gt;] &#x2026;)</li>
<li>set_target_properties(testlib PROPERTIES CXX_VISIBILITY_PRESET hidden)
<ul class="org-ul">
<li>Make  symbols of shared or static library hidden by default,
only explicitly annotated symbols are visible. It avoids name
clashing which can lead to undefined behavior.</li>
</ul></li>

<li>target_link_libraries(&lt;executable-target&gt; PUBLIC testlib)</li>
</ul></li>

<li>Auxiliary targets:
<ul class="org-ul">
<li>install  =&gt; Install packages to some directoriy.</li>
</ul></li>

<li>Find Commands:
<ul class="org-ul">
<li>find_path</li>
<li>find_package</li>
<li>find_library</li>
<li>include_directory</li>
</ul></li>

<li>Global Variables:
<ul class="org-ul">
<li>set(CMAKE_CXX_STANDARD 14)</li>
<li>set(CMAKE_VERBOSE_MAKEFILE ON)</li>
<li>set(CMAKE_BUILD_TYPE  debug)</li>
</ul></li>
</ul>

<p>
Typical CMake Variables:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Compiler flags</th>
<th scope="col" class="org-left">Description</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">affected</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Misc</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">PROJECT_NAME</td>
<td class="org-left">-</td>
<td class="org-left">Sets project name.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Compiler</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CMAKE_CXX_STANDARD</td>
<td class="org-left">-std=c++11</td>
<td class="org-left">Set the C++ standard used for compoling all sources</td>
</tr>

<tr>
<td class="org-left">CMAKE_CXX_FLAGS</td>
<td class="org-left">-</td>
<td class="org-left">Additional compiler flags for all targets.</td>
</tr>

<tr>
<td class="org-left">CMAKE_BUILD_TYPE</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Set whether build type is release or debug</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Location</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CMAKE_BINARY_DIR</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">CMAKE_CURRENT_LIST_DIR</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Get location of current CMakeLists.txt file.</td>
</tr>

<tr>
<td class="org-left">CMAKE_INSTALL_PREFIX</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Location where targets will be installed (target <span class="underline">install</span>)</td>
</tr>

<tr>
<td class="org-left">CMAKE_CURRENT_BINARY_DIR</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Notes: 
</p>

<ul class="org-ul">
<li>The default value of the variable CMAKE_INSTALL_PREFIX are:
<ul class="org-ul">
<li>Windows:        C:/Program Files/${PROJECT_NAME}</li>
<li>Unix-like OS:   /usr/local</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgaf2e24e" class="outline-3">
<h3 id="orgaf2e24e"><span class="section-number-3">5.8</span> Build a project from command line - detailed</h3>
<div class="outline-text-3" id="text-5-8">
<p>
A project using Cmake as building system contains a build script at
top level directory named CMakeLists.txt. To build a project with
CMake, it is necessary to consider that CMake, is not a building
system and does not build anything. Actually, Cmake generates building
scripts for the platform preferred building scripts. For instance, on
Linux, it can generate Makefile, Eclipse Makefiles; on Windows it can
generate MSBuild scripts, NMake (Windows SDK's make) and so on.
</p>

<ul class="org-ul">
<li>Check all possible building system for which CMake can generate
build scripts.
<ul class="org-ul">
<li>Command: $ <b>cmake -G</b></li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Running on Windows 10 </span>
$ cmake -G
CMake Error: No generator specified for -G

Generators
  Visual Studio 15 2017 [arch] = Generates Visual Studio 2017 project files.
                                 Optional [arch] can be <span class="org-string">"Win64"</span> or <span class="org-string">"ARM"</span>.
  Visual Studio 14 2015 [arch] = Generates Visual Studio 2015 project files.
                                 Optional [arch] can be <span class="org-string">"Win64"</span> or <span class="org-string">"ARM"</span>.
  Visual Studio 12 2013 [arch] = Generates Visual Studio 2013 project files.
                                 Optional [arch] can be <span class="org-string">"Win64"</span> or <span class="org-string">"ARM"</span>.
  Visual Studio 11 2012 [arch] = Generates Visual Studio 2012 project files.
                                 Optional [arch] can be <span class="org-string">"Win64"</span> or <span class="org-string">"ARM"</span>.
  Visual Studio 10 2010 [arch] = Generates Visual Studio 2010 project files.
                                 Optional [arch] can be <span class="org-string">"Win64"</span> or <span class="org-string">"IA64"</span>.
  Visual Studio 9 2008 [arch]  = Generates Visual Studio 2008 project files.
                                 Optional [arch] can be <span class="org-string">"Win64"</span> or <span class="org-string">"IA64"</span>.
  Borland Makefiles            = Generates Borland makefiles.
  NMake Makefiles              = Generates NMake makefiles.
  NMake Makefiles JOM          = Generates JOM makefiles.
  Green Hills MULTI            = Generates Green Hills MULTI files
                                 (experimental, work-in-progress)<span class="org-builtin">.</span>
  MSYS Makefiles               = Generates MSYS makefiles.
  MinGW Makefiles              = Generates a make file for use with
                                 mingw32-make.
  Unix Makefiles               = Generates standard UNIX makefiles.
  Ninja                        = Generates build.ninja files.
  Watcom WMake                 = Generates Watcom WMake makefiles.
  CodeBlocks - MinGW Makefiles = Generates CodeBlocks project files.
  CodeBlocks - NMake Makefiles = Generates CodeBlocks project files.
  CodeBlocks - NMake Makefiles JOM
                               = Generates CodeBlocks project files.
  CodeBlocks - Ninja           = Generates CodeBlocks project files.
  CodeBlocks - Unix Makefiles  = Generates CodeBlocks project files.
  CodeLite - MinGW Makefiles   = Generates CodeLite project files.
  CodeLite - NMake Makefiles   = Generates CodeLite project files.
  CodeLite - Ninja             = Generates CodeLite project files.
  CodeLite - Unix Makefiles    = Generates CodeLite project files.
  Sublime Text 2 - MinGW Makefiles
                               = Generates Sublime Text 2 project files.
  Sublime Text 2 - NMake Makefiles
                               = Generates Sublime Text 2 project files.
  Sublime Text 2 - Ninja       = Generates Sublime Text 2 project files.
  Sublime Text 2 - Unix Makefiles
                               = Generates Sublime Text 2 project files.
  Kate - MinGW Makefiles       = Generates Kate project files.
  Kate - NMake Makefiles       = Generates Kate project files.
  Kate - Ninja                 = Generates Kate project files.
  Kate - Unix Makefiles        = Generates Kate project files.
  Eclipse CDT4 - NMake Makefiles
                               = Generates Eclipse CDT 4.0 project files.
  Eclipse CDT4 - MinGW Makefiles
                               = Generates Eclipse CDT 4.0 project files.
  Eclipse CDT4 - Ninja         = Generates Eclipse CDT 4.0 project files.
  Eclipse CDT4 - Unix <span class="org-variable-name">Makefiles</span>= Generates Eclipse CDT 4.0 project files.
</pre>
</div>

<p>
<b>STEP 1: Generate Building Script</b>
</p>

<p>
Project directory listing:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree .
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; build.bat
&#9500;&#9472;&#9472; client1.cpp
&#9500;&#9472;&#9472; CMakeLists.txt
&#9500;&#9472;&#9472; Makefile
&#9500;&#9472;&#9472; pywrapper.py
&#9500;&#9472;&#9472; testlib.cpp
&#9492;&#9472;&#9472; testlib.hpp
</pre>
</div>

<p>
<b>Generate building scripts for platform-preferred building system:</b>
</p>

<ul class="org-ul">
<li>$ cmake -H&lt;SOURCE&gt; -B&lt;BUILD&gt;
<ul class="org-ul">
<li>&lt;SOURCE&gt; =&gt; Source directory where all *.cpp, *.hpp code. In this
case it is (.) dot, current directory. If the directory was
./src, the command would be -Hsrc or -H./src</li>
<li>&lt;BUILD&gt; =&gt; Compilation output, directory where are all building
scripts.</li>
</ul></li>
</ul>

<p>
Command output on Windows 10 - MSVC 2017. Note: It will set VC++ for
32 bits target, not 64 bits.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -Bbuild
-- Building for: Visual Studio 15 2017
-- The C compiler identification is MSVC 19.16.27025.1
-- The CXX compiler identification is MSVC 19.16.27025.1  
... ...   ... ...   ... ...   ... ...   ... ... 
-- Configuring done
-- Generating done
-- Build files have been written to: C:/Users/archbox/Desktop/experiments/dll/build
</pre>
</div>

<p>
Command output on Linux: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -Bbuild
-- The C compiler identification is GNU 8.2.1
-- The CXX compiler identification is GNU 8.2.1
-- Check for working C compiler: /usr/lib64/ccache/cc
-- Check for working C compiler: /usr/lib64/ccache/cc -- works
... ...   ... ...   ... ...   ... ...   ... ... 
 [INFO] Libtest location is at: libtest_location-NOTFOUND
-- Configuring done
-- Generating done
-- Build files have been written to: /home/archbox/root-scripts/gist/build

<span class="org-comment-delimiter"># </span><span class="org-comment">List ./build directory </span>
$ tree -L 1 build
build
&#9500;&#9472;&#9472; CMakeCache.txt
&#9500;&#9472;&#9472; CMakeFiles
&#9500;&#9472;&#9472; cmake_install.cmake
&#9492;&#9472;&#9472; Makefile

1 directory, 3 files
</pre>
</div>

<p>
<b>Generate building script for specific building system:</b>
</p>

<ul class="org-ul">
<li>$ cmake -H&lt;SOURCE&gt; -B&lt;BUILD&gt; -G &lt;BUILD-SYSTEM&gt;
<ul class="org-ul">
<li>&lt;SOURCE&gt; =&gt; Source directory where all *.cpp, *.hpp code. In this
case it is (.) dot, current directory. If the directory was
./src, the command would be -Hsrc or -H./src</li>
<li>&lt;BUILD&gt; =&gt; Compilation output, directory where are all building
scripts.</li>
<li>&lt;BUILD-SYSTEM&gt; =&gt; All available build system can be listed with $ cmake -G.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Generate MSbuild building scripts for 32 bits target </span>
 $ cmake -H. -Bbuild -G <span class="org-string">"Visual Studio 15 2017"</span>

 <span class="org-comment-delimiter"># </span><span class="org-comment">Generate MSbuild building scripts for 64 bits target </span>
 $ cmake -H. -Bbuild -G <span class="org-string">"Visual Studio 15 2017 Win64"</span>
</pre>
</div>

<p>
<b>Generate building script with debug symbols enabled:</b>
</p>

<p>
It automatically adds the debugging flags (/Zi) for VC++ Microsoft
Visual C++ Compiler which necessary for debugging a program with GDB,
LLDB or WinDBG. 
</p>

<ul class="org-ul">
<li>Add the flag <b>-DCMAKE_BUILD_TYPE=DEBUG</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Example 1:</span>
$ cmake -H. -Bbuild -DCMAKE_BUILD_TYPE=DEBUG

<span class="org-comment-delimiter"># </span><span class="org-comment">Example 2:</span>
$ cmake -H. -Bbuild -DCMAKE_BUILD_TYPE=RELEASE

<span class="org-comment-delimiter"># </span><span class="org-comment">Example 3: </span>
cmake -H. -Bbuild -DCMAKE_BUILD_TYPE=DEBUG -G <span class="org-string">"Visual Studio 15 2017 Win64"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Example 4: </span>
cmake -H. -Bbuild -DCMAKE_BUILD_TYPE=DEBUG -G <span class="org-string">"Visual Studio 15 2017 Win64"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Example 5: </span>
cmake -H. -Bbuild -DCMAKE_BUILD_TYPE=RELEASE -G <span class="org-string">"Visual Studio 15 2017 Win64"</span>
</pre>
</div>


<p>
<b>STEP 2: Compile the project invoking the generated building scripts</b>
</p>

<p>
Invoke the building scripts indirectly using CMake:
</p>

<ul class="org-ul">
<li>$ cmake &#x2013;build &lt;BUILD&gt;
<ul class="org-ul">
<li>&lt;BUILD&gt; Is the build directory generated at step 1.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build
<span class="org-comment-delimiter"># </span><span class="org-comment">OR</span>
$ cmake --build build --config Debug 
<span class="org-comment-delimiter"># </span><span class="org-comment">OR</span>
$ cmake --build build --config Release
</pre>
</div>

<p>
Invoke the building script directly, call the building tool:
</p>
<ul class="org-ul">
<li>This building method depends on the current building system.</li>
</ul>

<p>
For MSBuild, the compilation becomes:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ MSBuild build\testlib.vcxproj

<span class="org-function-name">Microsoft</span> (R) Build Engine version 15.5.180.51428 for .NET Framework
<span class="org-function-name">Copyright</span> (C) Microsoft Corporation. All rights reserved.

Build started 12/21/2018 12:49:38 PM.
Project <span class="org-string">"C:\Users\archbox\Desktop\experiments\dll\build\testlib.vcxproj"</span> on node 1 (default targets)<span class="org-builtin">.</span>
Project <span class="org-string">"C:\Users\archbox\Desktop\experiments\dll\build\testlib.vcxproj"</span> (1) is building <span class="org-string">"C:\Users\archbox\ Desktop\experiments\dll\build\ZERO_CHECK.vcxproj"</span> (2) on node 1 (default targets)<span class="org-builtin">.</span>
... ... ... ... ... ... ... ... ... ... ... ... ... ... 
testlib.vcxproj -&gt; C:\Users\archbox\Desktop\experiments\dll\build\Debug\testlib.dll
<span class="org-function-name">FinalizeBuildStatus</span>:
  Deleting file <span class="org-string">"testlib.dir\Debug\testlib.tlog\unsuccessfulbuild"</span>.
  Touching <span class="org-string">"testlib.dir\Debug\testlib.tlog\testlib.lastbuildstate"</span>.
Done Building Project <span class="org-string">"C:\Users\archbox\Desktop\experiments\dll\build\testlib.vcxproj"</span> (default targets)<span class="org-builtin">.</span>
</pre>
</div>

<p>
For Linux or Unix GNU-Make, the compilation becomes:
</p>

<div class="org-src-container">
<pre class="src src-sh"> $ cd build

 $ make
 /usr/bin/cmake -H/home/archbox/root-scripts/gist -B/home/archbox/root-scripts/gist/build --check-build-system CMakeFiles/Makefile.cmake 0
 /usr/bin/cmake -E cmake_progress_start /home/archbox/root-scripts/gist/build/CMakeFiles /home/archbox/root-scripts/gist/build/CMakeFiles/progress.marks
 make -f CMakeFiles/Makefile2 all
 make[1]: Entering directory <span class="org-string">'/home/archbox/root-scripts/gist/build'</span>
 make -f CMakeFiles/testlib.dir/build.make CMakeFiles/testlib.dir/depend
 make[2]: Entering directory <span class="org-string">'/home/archbox/root-scripts/gist/build'</span>
 ... ... ... ... ... ... ... ... ... ... ... ... 
 [100%] Built target client1-executable
 make[1]: Leaving directory <span class="org-string">'/home/archbox/root-scripts/gist/build'</span>
 /usr/bin/cmake -E cmake_progress_start /home/archbox/root-scripts/gist/build/CMakeFiles 0  


<span class="org-comment-delimiter"># </span><span class="org-comment">Built executables: </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------</span>
$ file libtestlib.so 
<span class="org-function-name">libtestlib.so</span>: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically 
linked, <span class="org-variable-name">BuildID</span>[sha1]=ce79ed7580a16cbc27bf113a2967eb1d66f496a3, not stripped

$ file client1-executable.bin 
<span class="org-function-name">client1-executable.bin</span>: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, 
<span class="org-keyword">for</span> GNU/Linux 3.2.0, <span class="org-variable-name">BuildID</span>[sha1]=8103d822a6d58497b63346dfcc1f7375599114f7, not stripped
</pre>
</div>

<p>
Or just in a single step: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cd build &amp;&amp; make &amp;&amp; <span class="org-builtin">cd</span> ..
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfe6d4bb" class="outline-3">
<h3 id="orgfe6d4bb"><span class="section-number-3">5.9</span> Show system information</h3>
<div class="outline-text-3" id="text-5-9">
<div class="org-src-container">
<pre class="src src-sh">cmake --sytem-information 
</pre>
</div>

<p>
Output on Linux: 
</p>

<div class="org-src-container">
<pre class="src src-sh">Avoid ctest truncation of output: CTEST_FULL_OUTPUT
========================================================
=== MAIN VARIABLES
========================================================
CMAKE_STATIC_LIBRARY_PREFIX == <span class="org-string">"lib"</span>
CMAKE_STATIC_LIBRARY_SUFFIX == <span class="org-string">".a"</span>
CMAKE_SHARED_LIBRARY_PREFIX == <span class="org-string">"lib"</span>
CMAKE_SHARED_LIBRARY_SUFFIX == <span class="org-string">".so"</span>
CMAKE_SHARED_MODULE_PREFIX == <span class="org-string">"lib"</span>
CMAKE_SHARED_MODULE_SUFFIX == <span class="org-string">".so"</span>


CMAKE_DL_LIBS == <span class="org-string">"dl"</span>
CMAKE_LIBRARY_PATH_FLAG == <span class="org-string">"-L"</span>
CMAKE_LINK_LIBRARY_FLAG == <span class="org-string">"-l"</span>
CMAKE_SKIP_RPATH == <span class="org-string">"NO"</span>
CMAKE_SYSTEM_INFO_FILE == <span class="org-string">"Platform/Linux"</span>
CMAKE_SYSTEM_NAME == <span class="org-string">"Linux"</span>
CMAKE_SYSTEM == <span class="org-string">"Linux-4.18.18-200.fc28.x86_64"</span>
CMAKE_CXX_COMPILER == <span class="org-string">"/usr/lib64/ccache/c++"</span>
CMAKE_C_COMPILER == <span class="org-string">"/usr/lib64/ccache/cc"</span>
CMAKE_COMPILER_IS_GNUCC == <span class="org-string">"1"</span>
CMAKE_COMPILER_IS_GNUCXX == <span class="org-string">"1"</span>

// C shared library flag
CMAKE_SHARED_LIBRARY_C_FLAGS == <span class="org-string">"-fPIC"</span>
CMAKE_SHARED_LIBRARY_CREATE_C_FLAGS == <span class="org-string">"-shared"</span>
CMAKE_SHARED_LIBRARY_LINK_FLAGS == <span class="org-string">""</span>
... ...    ... ...    ... ...    ... ...    ... ... 
</pre>
</div>
</div>
</div>

<div id="outline-container-org0d6210e" class="outline-3">
<h3 id="org0d6210e"><span class="section-number-3">5.10</span> Show all modules</h3>
<div class="outline-text-3" id="text-5-10">
<div class="org-src-container">
<pre class="src src-sh">$ cmake --help-module-list
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">AddFileDependencies
AndroidTestUtilities
BundleUtilities
CMakeAddFortranSubdirectory
CMakeBackwardCompatibilityCXX
CMakeDependentOption
CMakeDetermineVSServicePack
CMakeExpandImportedTargets
CMakeFindDependencyMacro
CMakeFindFrameworks
CMakeFindPackageMode
CMakeForceCompiler
CMakeGraphVizOptions

... ... ... ... ... ... 

FindLAPACK
FindLATEX
FindLTTngUST
FindLibArchive
FindLibLZMA
FindLibXml2
FindLibXslt
FindLua
FindLua50
FindLua51
FindMFC
FindMPEG
FindMPEG2
FindMPI
FindMatlab
FindMotif
FindOpenACC

... ... ... ... ... ... ... ... 

</pre>
</div>
</div>
</div>

<div id="outline-container-org76ae27a" class="outline-3">
<h3 id="org76ae27a"><span class="section-number-3">5.11</span> Microsft Windows OS Specific Snippets</h3>
<div class="outline-text-3" id="text-5-11">
</div>
<div id="outline-container-orgfb97dfc" class="outline-4">
<h4 id="orgfb97dfc"><span class="section-number-4">5.11.1</span> Executable Target with resource icon</h4>
<div class="outline-text-4" id="text-5-11-1">
<p>
This section provides an example about how to add a resource icon to a
Windows executable target.
</p>

<p>
Files:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Project Item</th>
<th scope="col" class="org-left">Description</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Application</td>
<td class="org-left">ProgramWithICON.exe</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Sources:</td>
<td class="org-left">src/main.cpp src/src1.cpp src/src2.cpp</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Icon</td>
<td class="org-left">src/programImage.ico</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Resource script</td>
<td class="org-left">src/icon.rc</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Resource file: src/icon.rc 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Icon Resource =&gt; Compiled by Resource compiler</span>
<span class="org-type">id</span> <span class="org-variable-name">ICON</span> <span class="org-string">"programImage.ico"</span>
</pre>
</div>

<p>
CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"> <span class="org-comment"># .... Omit beginning and global configuration .... #</span>
  <span class="org-function-name">add_executable</span>(ProgramWithICON src/main.cpp src/src1.cpp src/src2.cpp)
 <span class="org-keyword">if</span>(WIN32)
    <span class="org-function-name">target_sources</span>(ProgramWithICON src/icon.rc)
 <span class="org-keyword">endif</span>()

 <span class="org-function-name">target_include_directories</span>(ProgramWithICON  ./includes)
<span class="org-comment"># .... Omit additional configuration ... #</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org53e7abe" class="outline-4">
<h4 id="org53e7abe"><span class="section-number-4">5.11.2</span> Build executable for console or window subsystem</h4>
<div class="outline-text-4" id="text-5-11-2">
<p>
The following CMakeLists.txt file defines two executables targets
built with the same source file main.cpp. The target
<span class="underline">app_console_subsystem.exe</span> is compiled for the Windows' <b>console subsystem</b> and 
the target <span class="underline">app_window_subsystem.exe</span> for the <b>window subsystem</b>. 
</p>

<p>
Applications compiled for the console subsystem opens a terminal when
clicked and prints the std::cout and std::cerr output to it while
applications built for the window subsystem do not open any terminal
and do not print any std::cout or std::cerr output. 
</p>

<p>
An window-subsystem application can perform logging by using the
Windows API function <a href="https://docs.microsoft.com/en-us/windows/win32/api/debugapi/nf-debugapi-outputdebugstringw">OutputDebugString</a>, writing to a file or
redirecting the std::cout and std::cerr streams to file stream
object such as std::ofstream. 
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(cppwindows)

<span class="org-comment">#=======================================</span>

<span class="org-comment"># Copy target file to current directory whenerver it is rebuilt</span>
<span class="org-keyword">function</span>(copy_after_build TARGET_NAME )
    <span class="org-comment"># Note: CMAKE_CURRENT_LIST_DIR is the directory where is this</span>
    <span class="org-comment"># CMakeLists.txt file.</span>
    <span class="org-function-name">set</span>(DESTDIR ${<span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span>}/bin/)
    <span class="org-function-name">file</span>(MAKE_DIRECTORY ${<span class="org-variable-name">DESTDIR</span>})

    <span class="org-comment"># Copy binary file to &lt;CMakeLists.txt didctory&gt;./bin</span>
    <span class="org-comment"># after target is compiled.</span>
    <span class="org-function-name">add_custom_command</span>(TARGET ${<span class="org-variable-name">TARGET_NAME</span>} POST_BUILD
      COMMAND ${<span class="org-variable-name">CMAKE_COMMAND</span>} -E copy
                               $&lt;TARGET_FILE:${<span class="org-variable-name">TARGET_NAME</span>}&gt; ${<span class="org-variable-name">DESTDIR</span>}
                               )
<span class="org-keyword">endfunction</span>()

<span class="org-comment">#----------------------------------------</span>

<span class="org-comment"># Build the executable: app_console_subsystem.exe which opens a</span>
<span class="org-comment"># terminal when clicked</span>
<span class="org-function-name">add_executable</span>(app_console_subsystem main.cpp)
<span class="org-function-name">copy_after_build</span>(app_console_subsystem)

<span class="org-comment"># Builds the executable: app_window_subsystem.exe</span>
<span class="org-comment"># which does not open a terminal when clicked, it only shows</span>
<span class="org-comment"># a message box</span>
<span class="org-function-name">add_executable</span>(app_window_subsystem WIN32 main.cpp)
<span class="org-function-name">copy_after_build</span>(app_window_subsystem)
</pre>
</div>

<p>
File: main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">windows.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Hello World Windows Console and Window subsystem!"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    OutputDebugStringA<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Output of applications built for Window Subsystem"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Show messagebox window</span>
    <span class="org-type">DWORD</span> <span class="org-keyword">const</span> <span class="org-variable-name">infoboxOptions</span>  = MB_OK | MB_ICONINFORMATION | MB_SETFOREGROUND;
    MessageBoxA<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-constant">nullptr</span>, <span class="org-string">"Messagebox text"</span>, <span class="org-string">"MessageBox title"</span>, infoboxOptions<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Exit application "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    OutputDebugStringA<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Exit application"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Enter RETURN to exit"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>


<div class="figure">
<p><a href="images/cmake_console_subsystem1.png"><img src="images/cmake_console_subsystem1.png" alt="cmake_console_subsystem1.png" /></a>
</p>
<p><span class="figure-number">Figure 1: </span>Application app_console_subsystem.exe (Console subsystem)</p>
</div>


<div class="figure">
<p><a href="images/cmake_window_subsystem1.png"><img src="images/cmake_window_subsystem1.png" alt="cmake_window_subsystem1.png" /></a>
</p>
<p><span class="figure-number">Figure 2: </span>Application app_window_subsystem.exe (Window subsystem)</p>
</div>
</div>
</div>

<div id="outline-container-org0918250" class="outline-4">
<h4 id="org0918250"><span class="section-number-4">5.11.3</span> Set target subsystem: console/window</h4>
<div class="outline-text-4" id="text-5-11-3">
<p>
Set target subsystem. 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(WIN32)
   <span class="org-function-name">set_target_properties</span>(WindowApplicationExample PROPERTIES LINK_FLAGS_DEBUG <span class="org-string">"/SUBSYSTEM:CONSOLE"</span>)
   <span class="org-function-name">set_target_properties</span>(WindowApplicationExample PROPERTIES COMPILE_DEFINITIONS_DEBUG <span class="org-string">"_CONSOLE"</span>)
   <span class="org-function-name">set_target_properties</span>(WindowApplicationExample PROPERTIES LINK_FLAGS_RELWITHDEBINFO <span class="org-string">"/SUBSYSTEM:CONSOLE"</span>)
   <span class="org-function-name">set_target_properties</span>(WindowApplicationExample PROPERTIES COMPILE_DEFINITIONS_RELWITHDEBINFO <span class="org-string">"_CONSOLE"</span>)
   <span class="org-function-name">set_target_properties</span>(WindowApplicationExample PROPERTIES LINK_FLAGS_RELEASE <span class="org-string">"/SUBSYSTEM:WINDOWS"</span>)
   <span class="org-function-name">set_target_properties</span>(WindowApplicationExample PROPERTIES LINK_FLAGS_MINSIZEREL <span class="org-string">"/SUBSYSTEM:WINDOWS"</span>)
<span class="org-keyword">endif</span>(WIN32)
</pre>
</div>

<p>
Taken from: 
</p>
<ul class="org-ul">
<li><a href="https://gitlab.kitware.com/cmake/community/wikis/doc/cmake/recipe/VSConfigSpecificSettings">Vsconfigspecificsettings · Wiki · CMake / Community · GitLab</a></li>
<li><a href="https://developercommunity.visualstudio.com/content/problem/46678/cmake-set-subsystem-to-console.html">cmake: Set subsystem to console - Developer Community</a></li>
<li><a href="https://stackoverflow.com/questions/33873735/correctly-set-visual-studio-linker-flag-subsystem-in-cmake">c++ -
Correctly set Visual Studio linker flag /SUBSYSTEM in CMAKE - Stack
Overflow</a></li>
</ul>
</div>
</div>
<div id="outline-container-org60fc1ee" class="outline-4">
<h4 id="org60fc1ee"><span class="section-number-4">5.11.4</span> Export all shared library symbols</h4>
<div class="outline-text-4" id="text-5-11-4">
<p>
CMake has a handy option <span class="underline">CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS</span> that can
export all DLL shared library symbols without any
<code>__declspec(dllexport)</code> or <code>__declspec(dllimport)</code> annotation.
</p>

<p>
<b>Example:</b> 
</p>

<p>
File: main.cpp (executable main.exe)
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.5)
<span class="org-function-name">project</span>(testbed_project)

<span class="org-comment">#=========== Global Settings ==============================#</span>
<span class="org-comment"># ... omit other settings ... </span>

<span class="org-comment"># Export ALL DLLs symbols on Windows without __declspec(xxxx) annotations.</span>
<span class="org-function-name">set</span>(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS true)

<span class="org-comment">#=============== Targets-specific settings ====================#</span>

<span class="org-comment"># Target: libutil (Library)</span>
<span class="org-function-name">add_library</span>(utils SHARED utils.cpp utils.hpp)

<span class="org-comment"># Target: app1 =&gt; Executable (Dynamically linked)</span>
<span class="org-function-name">add_executable</span>(main main1.cpp)
<span class="org-function-name">target_link_libraries</span>(main utils)
</pre>
</div>

<p>
File: utils.hpp (Shared library utils.dll)
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#if</span><span class="org-negation-char"><span class="org-preprocessor">n</span></span><span class="org-preprocessor">def</span> _UTILS_HPP_
<span class="org-preprocessor">#define</span> <span class="org-variable-name">_UTILS_HPP_</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span>  <span class="org-constant">utils</span> <span class="org-rainbow-delimiters-depth-1">{</span>

     <span class="org-keyword">class</span> <span class="org-type">Dummy</span><span class="org-rainbow-delimiters-depth-2">{</span>
     <span class="org-keyword">private</span>:
          <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_name</span> = <span class="org-string">"&lt;Untitled&gt;"</span>;
     <span class="org-keyword">public</span>:
         <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-3">()</span>;
         <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-3">)</span>;
         <span class="org-type">void</span>  <span class="org-function-name">showName</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">const</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-preprocessor">#endif</span> 
</pre>
</div>

<p>
File: utils.cpp (Shared library utils.dll)
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string">"utils.hpp"</span>

<span class="org-keyword">namespace</span> <span class="org-constant">utils</span><span class="org-rainbow-delimiters-depth-1">{</span>
      <span class="org-constant">Dummy</span>::<span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
      <span class="org-constant">Dummy</span>::<span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>

      <span class="org-type">void</span> <span class="org-constant">Dummy</span>::<span class="org-function-name">showName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>
      <span class="org-rainbow-delimiters-depth-2">{</span>
          <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] Object name is : "</span> &lt;&lt; m_name &lt;&lt; <span class="org-string">"\n"</span>;
      <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Without the CMake option <span class="underline">CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS</span>, the class
Dummy would need the __declspec annotation and the code would be: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-keyword">__declspec</span><span class="org-rainbow-delimiters-depth-1">(</span>dllexport<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-type">Dummy</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
     <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_name</span> = <span class="org-string">"&lt;Untitled&gt;"</span>;
<span class="org-function-name">public</span>:
    <span class="org-variable-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-variable-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::string <span class="org-keyword">const</span>&amp; name<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">void</span>  <span class="org-variable-name">showName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
To make a symbol private (visible only the <span class="underline">utils.cpp</span> compilation-unit)
annotate it with the <span class="underline">static</span> keyword or place the symbols in a
<span class="underline">anonymous namespace</span>, example:
</p>

<div class="org-src-container">
<pre class="src src-cpp"> <span class="org-keyword">static</span> <span class="org-type">void</span> <span class="org-function-name">internal_function</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">... code here ... </span>
 <span class="org-rainbow-delimiters-depth-1">}</span>

 <span class="org-keyword">static</span> <span class="org-keyword">class</span> <span class="org-type">InternalClass</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-comment-delimiter">// </span><span class="org-comment">... code here ... </span>
 <span class="org-rainbow-delimiters-depth-1">}</span>

 <span class="org-keyword">static</span> <span class="org-keyword">struct</span> <span class="org-type">MyStruct</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span> <span class="org-variable-name">x</span>; 
    <span class="org-type">double</span> <span class="org-variable-name">y</span>;
 <span class="org-rainbow-delimiters-depth-1">}</span>; 

<span class="org-comment-delimiter">// </span><span class="org-comment">---- OR make the symbols private with anonymous namespace  ------// </span>

<span class="org-keyword">namespace</span> <span class="org-rainbow-delimiters-depth-1">{</span>

   <span class="org-type">void</span> <span class="org-function-name">internal_function</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">... code here ... </span>
   <span class="org-rainbow-delimiters-depth-2">}</span>

   <span class="org-keyword">class</span> <span class="org-type">InternalClass</span> <span class="org-rainbow-delimiters-depth-2">{</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">... code here ... </span>
   <span class="org-rainbow-delimiters-depth-2">}</span>

   <span class="org-keyword">static</span> <span class="org-keyword">struct</span> <span class="org-type">MyStruct</span><span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-type">double</span> <span class="org-variable-name">x</span>; 
      <span class="org-type">double</span> <span class="org-variable-name">y</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>; 

<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org6aae86e" class="outline-3">
<h3 id="org6aae86e"><span class="section-number-3">5.12</span> Snippets</h3>
<div class="outline-text-3" id="text-5-12">
</div>
<div id="outline-container-org336702d" class="outline-4">
<h4 id="org336702d"><span class="section-number-4">5.12.1</span> Place build-tree object-code in source directory</h4>
<div class="outline-text-4" id="text-5-12-1">
<p>
The following sample project shows how to place build-tree
object-codes (executables and libraries) in the source directory
(project directory) for making easier to find them wihout browsing the
build tree. 
</p>

<p>
The sample project is comprised of two executables app1 and app2
linked against a shared library libutils. 
</p>

<p>
<b>Sample Project</b> 
</p>

<p>
File: CMakeLists.txt
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.5)
<span class="org-function-name">project</span>(testbed_project)

<span class="org-comment">#=========== Global Settings =================#</span>

<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD_REQUIRED ON) 

<span class="org-comment">#  =&gt; Place executable(s) in ${SOURCE DIRECTORY}/out/bin </span>
<span class="org-comment">#  =&gt; Place libraries in ${SOURCE DIRECTORY}/out/lib </span>
<span class="org-comment">#</span>
<span class="org-comment">#  =&gt; Note: ${SOURCE DIRECTORY} is the directory where is this CMakeLists.txt </span>
<span class="org-function-name">set</span>(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${<span class="org-variable-name">CMAKE_CURRENT_SOURCE_DIR</span>}/out/lib)
<span class="org-function-name">set</span>(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${<span class="org-variable-name">CMAKE_CURRENT_SOURCE_DIR</span>}/out/lib)
<span class="org-function-name">set</span>(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${<span class="org-variable-name">CMAKE_CURRENT_SOURCE_DIR</span>}/out/bin)

<span class="org-comment"># Set relative rpath to shared library in executable object code</span>
<span class="org-comment"># See:</span>
<span class="org-comment">#  =&gt; https://cmake.org/cmake/help/latest/prop_tgt/BUILD_RPATH_USE_ORIGIN.html</span>
<span class="org-comment">#  =&gt; https://gitlab.kitware.com/cmake/community/-/wikis/doc/cmake/RPATH-handling</span>
<span class="org-keyword">if</span>(UNIX)
  <span class="org-function-name">SET</span>(CMAKE_INSTALL_RPATH <span class="org-string">"$ORIGIN/../lib:$ORIGIN/"</span>)
<span class="org-keyword">endif</span>()

<span class="org-comment"># Export ALL DLLs symbols on Windows without __declspec(xxxx) annotations.</span>
<span class="org-function-name">set</span>(CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS true)

<span class="org-comment">#=============== Targets-specific settings ====================#</span>

<span class="org-comment"># Target: libutil (Library)</span>
<span class="org-function-name">add_library</span>(utils SHARED utils.cpp utils.hpp)
<span class="org-function-name">add_library</span>(utils_static STATIC utils.cpp utils.hpp)

<span class="org-comment"># Target: app1 =&gt; Executable (Dynamically linked)</span>
<span class="org-function-name">add_executable</span>(app1 main1.cpp)
<span class="org-function-name">target_link_libraries</span>(app1 utils)

<span class="org-comment"># Target: app2 =&gt; Executable (Dynamically linked)</span>
<span class="org-function-name">add_executable</span>(app2 main2.cpp)
<span class="org-function-name">target_link_libraries</span>(app2 utils)

<span class="org-comment"># Target: app1_static =&gt; Executable (static linked)</span>
<span class="org-function-name">add_executable</span>(app1_static main1.cpp)
<span class="org-function-name">target_link_libraries</span>(app1_static utils_static)

<span class="org-comment"># Target: app1_static =&gt; Executable (static linked)</span>
<span class="org-function-name">add_executable</span>(app2_static main1.cpp)
<span class="org-function-name">target_link_libraries</span>(app2_static utils_static)


<span class="org-comment">#============== Target: Install ===============================#</span>
<span class="org-comment"># Equivalent to: $ make install </span>

<span class="org-function-name">install</span>(TARGETS app1 app2 app1_static app2_static utils utils_static  
  RUNTIME  DESTINATION bin <span class="org-comment"># Executable: *.exe, </span>
  LIBRARY  DESTINATION lib <span class="org-comment"># Shared libraries: *.dll, *.so and so on </span>
  ARCHIVE  DESTINATION lib <span class="org-comment"># Static libraries: *.a </span>
)

<span class="org-function-name">install</span>(FILES README.txt DESTINATION ./)

</pre>
</div>

<p>
File: README.txt 
</p>

<div class="org-src-container">
<pre class="src src-text">======= Application User Guide ==========

  + app1 =&gt; Application for creating PCB - Printed Circuit Board
  + app2 =&gt; App. for communicating with remote link

  &lt;INSERT TEXT HERE ....&gt;  
</pre>
</div>

<p>
File: utils.hpp (CMake targets: utils and utils_static)
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#if</span><span class="org-negation-char"><span class="org-preprocessor">n</span></span><span class="org-preprocessor">def</span> _UTILS_HPP_
<span class="org-preprocessor">#define</span> <span class="org-variable-name">_UTILS_HPP_</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span>  <span class="org-constant">utils</span> <span class="org-rainbow-delimiters-depth-1">{</span>

     <span class="org-keyword">class</span> <span class="org-type">Dummy</span><span class="org-rainbow-delimiters-depth-2">{</span>
     <span class="org-keyword">private</span>:
          <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_name</span> = <span class="org-string">"&lt;Untitled&gt;"</span>;
     <span class="org-keyword">public</span>:
          <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-3">()</span>;
          <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-3">)</span>;
          <span class="org-type">void</span>  <span class="org-function-name">showName</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">const</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-preprocessor">#endif</span> 
</pre>
</div>

<p>
File: utils.hpp (CMake targets: utils and utils_static)
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-preprocessor">#include</span> <span class="org-string">"utils.hpp"</span>

<span class="org-keyword">namespace</span> <span class="org-constant">utils</span><span class="org-rainbow-delimiters-depth-1">{</span>

     <span class="org-constant">Dummy</span>::<span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-constant">Dummy</span>::<span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>

     <span class="org-type">void</span> <span class="org-constant">Dummy</span>::<span class="org-function-name">showName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>
     <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] Object name is : "</span> &lt;&lt; m_name &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: main1.cpp (CMake targets: app1 and app1_static )
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string">"utils.hpp"</span>

<span class="org-keyword">using</span> <span class="org-constant">utils</span>::<span class="org-type">Dummy</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [TRACE] I am the application 1. Ok."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">Dummy</span> <span class="org-variable-name">dummy1</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I_am_dummy_object_A"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    dummy1.showName<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: main2.cpp (CMake targets: app2 and app2_static )
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string">"utils.hpp"</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [TRACE] I am the application 2. Ok."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">utils</span>::<span class="org-type">Dummy</span> <span class="org-variable-name">dummy2</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"I_am_dummy_object_B"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    dummy2.showName<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Build and running on Linux</b> 
</p>

<p>
Configure and build: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#  </span><span class="org-comment">+ (-B/tmp/_build2) =&gt; Place build tree at /tmp/_build2</span>
<span class="org-comment-delimiter">#  </span><span class="org-comment">+ Install binaries (object-code) at ~/Desktop/appinstall</span>
$ cmake -H. -B/tmp/_build2 -DCMAKE_INSTALL_PREFIX=~/Desktop/appinstall
$ cmake --build /tmp/build2 --target 
</pre>
</div>

<p>
Check binaries in the source directory (project directory):
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">List source/project directory </span>
$ ls .
out/  CMakeLists.txt  main1.cpp  main2.cpp  README.txt  utils.cpp  utils.hpp


$ tree .
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; CMakeLists.txt
&#9500;&#9472;&#9472; main1.cpp
&#9500;&#9472;&#9472; main2.cpp
&#9500;&#9472;&#9472; out
&#9474;&#160;&#160; &#9500;&#9472;&#9472; bin
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9500;&#9472;&#9472; app1
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9500;&#9472;&#9472; app1_static
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9500;&#9472;&#9472; app2
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9492;&#9472;&#9472; app2_static
&#9474;&#160;&#160; &#9492;&#9472;&#9472; lib
&#9474;&#160;&#160;     &#9500;&#9472;&#9472; libutils.so
&#9474;&#160;&#160;     &#9492;&#9472;&#9472; libutils_static.a
&#9500;&#9472;&#9472; README.txt
&#9500;&#9472;&#9472; utils.cpp
&#9492;&#9472;&#9472; utils.hpp

3 directories, 12 files
</pre>
</div>

<p>
Test executables: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ out/bin/app1
 [TRACE] I am the application 1. Ok.
 [TRACE] Object name is : I_am_dummy_object_A

$ out/bin/app2
 [TRACE] I am the application 2. Ok.
 [TRACE] Object name is : I_am_dummy_object_B

$ out/bin/app1_static 
 [TRACE] I am the application 1. Ok.
 [TRACE] Object name is : I_am_dummy_object_A

$ out/bin/app2_static 
 [TRACE] I am the application 1. Ok.
 [TRACE] Object name is : I_am_dummy_object_A


<span class="org-comment-delimiter"># </span><span class="org-comment">Check app1 dependencies </span>
$ ldd out/bin/app1
        linux-vdso.so.1 (0x00007ffff7ffa000)
        libutils.so =&gt; /home/archbox/shared/demo-cmake-proj2/out/lib/libutils.so (0x00007ffff7bd0000)
        libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007ffff783e000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007ffff74aa000)
        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007ffff7292000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007ffff6ed4000)
        /lib64/ld-linux-x86-64.so.2 (0x00007ffff7dd6000)

<span class="org-comment-delimiter"># </span><span class="org-comment">Check app1_static dependencies </span>
$ ldd out/bin/app2_static 
        linux-vdso.so.1 (0x00007ffff7ffa000)
        libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007ffff7a44000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007ffff76b0000)
        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007ffff7498000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007ffff70da000)
        /lib64/ld-linux-x86-64.so.2 (0x00007ffff7dd6000)
</pre>
</div>

<p>
Build and install (execute CMake's intall target):
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build /tmp/_build2/ --target install
</pre>
</div>

<p>
Check intalled files: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ls ~/Desktop/appinstall/
bin/  lib/  README.txt

$ tree ~/Desktop/appinstall/
&#9500;&#9472;&#9472; bin
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app1_static
&#9474;&#160;&#160; &#9500;&#9472;&#9472; app2
&#9474;&#160;&#160; &#9492;&#9472;&#9472; app2_static
&#9500;&#9472;&#9472; lib
&#9474;&#160;&#160; &#9500;&#9472;&#9472; libutils.so
&#9474;&#160;&#160; &#9492;&#9472;&#9472; libutils_static.a
&#9492;&#9472;&#9472; README.txt

$ ~/Desktop/appinstall/bin/app1
 [TRACE] I am the application 1. Ok.
 [TRACE] Object name is : I_am_dummy_object_A

$ ~/Desktop/appinstall/bin/app2
 [TRACE] I am the application 2. Ok.
 [TRACE] Object name is : I_am_dummy_object_B

$ ~/Desktop/appinstall/bin/app1_static 
 [TRACE] I am the application 1. Ok.
 [TRACE] Object name is : I_am_dummy_object_A
</pre>
</div>

<p>
Check dependencies of app1:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ldd ~/Desktop/appinstall/bin/app1
        linux-vdso.so.1 (0x00007ffff7ffa000)
        libutils.so =&gt; /home/archbox/Desktop/appinstall/bin/../lib/libutils.so (0x00007ffff7bd0000)
        libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007ffff783e000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007ffff74aa000)
        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007ffff7292000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007ffff6ed4000)
        /lib64/ld-linux-x86-64.so.2 (0x00007ffff7dd6000)
</pre>
</div>

<p>
<b>Build and running on Windows 10 with MSVC 2017</b>  
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -B..<span class="org-string">\_</span>build_proj -G <span class="org-string">"Visual Studio 15 2017 Win64"</span> -DCMAKE_INSTALL_RPEFIX=%USERPROFILE%\appinstall
$ cmake --build ..<span class="org-string">\_</span>build_proj --target 
</pre>
</div>

<p>
List directory: 
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; ls
CMakeLists.txt  README.txt  main1.cpp  main2.cpp  out/  utils.cpp  utils.hpp
</pre>
</div>

<p>
List binaries in the source directory: 
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; ls out\bin\Debug<span class="org-sh-escaped-newline">\</span>
app1.exe*  app1.pdb          app1_static.ilk  app2.exe*  app2.pdb          app2_static.ilk  utils.dll*  utils.pdb
app1.ilk   app1_static.exe*  app1_static.pdb  app2.ilk   app2_static.exe*  app2_static.pdb  utils.ilk
</pre>
</div>

<p>
Test executables: 
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; out\bin\Debug\app1.exe
 [TRACE] I am the application 1. Ok.
 [TRACE] Object name is : I_am_dummy_object_A

&#955; out\bin\Debug\app2.exe
 [TRACE] I am the application 2. Ok.
 [TRACE] Object name is : I_am_dummy_object_B

&#955; out\bin\Debug\app1_static.exe
 [TRACE] I am the application 1. Ok.
 [TRACE] Object name is : I_am_dummy_object_A
</pre>
</div>

<p>
Install: 
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; cmake --build ..<span class="org-string">\_</span>build_proj --target install
</pre>
</div>

<p>
Check installation: 
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; ls C:<span class="org-string">\\</span>Users\archbox\appinstall<span class="org-sh-escaped-newline">\</span>
README.txt  bin/  lib/

&#955; ls %USERPROFILE%\appinstall/bin
app1.exe*  app1_static.exe*  app2.exe*  app2_static.exe*  utils.dll*

&#955; ls %USERPROFILE%\appinstall/lib
utils.lib  utils_static.lib

&#955; type %USERPROFILE%\appinstall\README.txt
======= Application User Guide ==========

  + app1 =&gt; Application for creating PCB - Printed Circuit Board
  + app2 =&gt; App. for communicating with remote link

  &lt;INSERT TEXT HERE ....&gt;
</pre>
</div>
</div>
</div>


<div id="outline-container-orgde368dc" class="outline-4">
<h4 id="orgde368dc"><span class="section-number-4">5.12.2</span> Set common file extension for all executables</h4>
<div class="outline-text-4" id="text-5-12-2">
<p>
Unlike Windows, native executables files on Unix-like operating
systems don't have a file extension such as .exe which makes harder for
automation tools, such as Jenkins, distinguish them form other files. 
</p>

<ul class="org-ul">
<li>The following CMakeListst.txt builds two executables app1 and
app2. The executable names on Windows are app1.exe and app2.exe. On
Unix-like operating systems, their name become <span class="underline">app1.bin</span> and
<span class="underline">app2.bin</span>. Without the line with <b>CMAKE_EXECUTABLE_SUFFIX</b> their name
on Unix-like operating systems would be <span class="underline">app1</span> and <span class="underline">app2</span>.</li>
</ul>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(ProjectWithUnixExtension)

<span class="org-comment">#----------------------------------------------#</span>

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)
<span class="org-function-name">set</span>(CMAKE_CXX_EXTENSIONS OFF)

<span class="org-comment"># Add file extension .bin to all executable files on Unix (Linux, OSX, BSD, ...)</span>
<span class="org-keyword">if</span>(UNIX)
  <span class="org-function-name">set</span>(CMAKE_EXECUTABLE_SUFFIX <span class="org-string">".bin"</span>)
<span class="org-keyword">endif</span>()

<span class="org-comment">#========== Targets Configurations ============#</span>
<span class="org-function-name">add_executable</span>(app1  main1.cpp)
<span class="org-function-name">add_executable</span>(app2  main1.cpp src1.cpp src2.cpp src3.cpp)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgff9b8f7" class="outline-4">
<h4 id="orgff9b8f7"><span class="section-number-4">5.12.3</span> Copy some target binaries to a directory</h4>
<div class="outline-text-4" id="text-5-12-3">
<p>
This piece of code copies the target binaries (compiled code) to a
directory relative to project's root directory where is CMakeLists.txt 
</p>

<p>
Targets:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-comment"># TARGET: testlib Shared library =&gt; Builds liblinalg.so on Unix or</span>
<span class="org-comment"># linalg.dll on Windows.</span>
<span class="org-function-name">add_library</span>(linalg SHARED  src/testlib.cpp)

<span class="org-comment"># TARGET: app Executable =&gt; Builds 'app' on Unix-like Oses and</span>
<span class="org-comment"># unix.exe on Windows.</span>
<span class="org-function-name">add_executable</span>(app src/main/main-app.cpp src/main/file1.cpp src/main/file2.cpp)
</pre>
</div>

<p>
Copy target files to top level directory where is CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-comment"># If not set the install directory, attemp set the install directory</span>
<span class="org-comment"># CMAKE_INSTALL_PREFIX to the directory ./bin </span>
<span class="org-keyword">if</span>(NOT DEFINED CMAKE_INSTALL_PREFIX OR CMAKE_INSTALL_PREFIX MATCHES <span class="org-string">""</span>)
  <span class="org-function-name">set</span>(CMAKE_INSTALL_PREFIX  <span class="org-string">"./bin"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">message</span>(<span class="org-string">" [INFO] CMakeLists.txt is in the directory ${</span><span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span><span class="org-string">}"</span>)

<span class="org-comment"># Copy targets to ./ - Directory where is this file CMakeLists.txt (project top level dir)</span>
<span class="org-function-name">install</span>(TARGETS app linalg DESTINATION  ${<span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span>})
</pre>
</div>

<p>
This target can be run with: 
</p>

<ul class="org-ul">
<li>STEP 1: Set CMake building system or the project type with -G.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cd project-directory 

<span class="org-comment-delimiter">#</span><span class="org-comment">===&gt; Set build system </span>
<span class="org-comment-delimiter"># </span><span class="org-comment">-H&lt;SOURCE&gt; -B&lt;COMPILATION-OUTPUT&gt; -G &lt;BUILDING-SYSTEM&gt;</span>
$ cmake -H. -G <span class="org-string">"Unix Makefiles"</span> -Bbuild 
</pre>
</div>

<ul class="org-ul">
<li>STEP 2: Run targets</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">===&gt; Run all targets [all default.]</span>
$ cmake --build build --target all 

<span class="org-comment-delimiter">#</span><span class="org-comment">===&gt; Run target install and copy the binaries to ./bin </span>
$ cmake --build build --target install 
</pre>
</div>
</div>
</div>

<div id="outline-container-orga4c2ee8" class="outline-4">
<h4 id="orga4c2ee8"><span class="section-number-4">5.12.4</span> Create target to run compiled executable</h4>
<div class="outline-text-4" id="text-5-12-4">
<p>
The piece following piece of code runs an executable target after it
is built in a similar way to a command $ make run. 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)

 ... ...  ... ...  ... ...

<span class="org-comment"># TARGET: myapplication </span>
<span class="org-function-name">add_executable</span>(myapplication src/main.cpp src/code1.cpp code2.cpp ...)

<span class="org-comment"># TARGET: run -&gt; Runs the executable myapplication </span>
<span class="org-comment"># On Unix-like Oses, it runs  /&lt;build-directory&gt;/myapplication </span>
<span class="org-comment"># On Windows: it runs  &lt;build-directory&gt;/myapplication.exe </span>
<span class="org-function-name">add_custom_target</span>(run
    COMMAND myapplication
    DEPENDS myapplication
    WORKING_DIRECTORY ${<span class="org-variable-name">CMAKE_PROJECT_DIR</span>}
)
</pre>
</div>

<p>
After the building system is set and output directory ./build, run:
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">===&gt; Run all targets [all default.]</span>
$ cmake --build build --target run
</pre>
</div>
</div>
</div>

<div id="outline-container-org63d027f" class="outline-4">
<h4 id="org63d027f"><span class="section-number-4">5.12.5</span> Issue an error if condition is not met</h4>
<div class="outline-text-4" id="text-5-12-5">
<p>
In this piece of code, if the compiler is not MSVC (vc++, aka cl.exe),
CMake stops the generation of the building script showing an error
message to the user.
</p>

<div class="org-src-container">
<pre class="src src-cmake">... ... 

<span class="org-keyword">if</span>(MSVC)
   <span class="org-function-name">set_target_properties</span>(WindowApp1 PROPERTIES LINK_FLAGS <span class="org-string">"/entry:mainCRTStartup"</span>)
<span class="org-keyword">else</span>() 
   <span class="org-function-name">message</span>(FATAL_ERROR <span class="org-string">" [ERROR] Linker flags of target WindowApp1 not set for this compiler"</span>)
<span class="org-keyword">endif</span>()
... ... 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgedfb8af" class="outline-4">
<h4 id="orgedfb8af"><span class="section-number-4">5.12.6</span> Copy a target file whenever it is recompiled</h4>
<div class="outline-text-4" id="text-5-12-6">
<p>
Example:  Copy a shared library to project root directory ./
whenever it is rebuilt. 
</p>

<ul class="org-ul">
<li>Set the shared library target. (libtestlib.so on Unix or testlib.dll
on Windows)</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">add_library</span>( testlib  SHARED  ./testlib.cpp)
<span class="org-function-name">set_target_properties</span>(testlib PROPERTIES CXX_VISIBILITY_PRESET hidden)
</pre>
</div>

<ul class="org-ul">
<li>Automatically copy to root directory the generated shared library
binary to root directory on every recompilation of the target
testlib.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">add_custom_command</span>(TARGET testlib POST_BUILD
  COMMAND ${<span class="org-variable-name">CMAKE_COMMAND</span>} -E copy 
  $&lt;TARGET_FILE:testlib&gt;                     <span class="org-comment"># Source    </span>
  ${<span class="org-variable-name">CMAKE_CURRENT_SOURCE_DIR</span>}/libtest.so     <span class="org-comment"># Destination, file or directory </span>
  <span class="org-comment"># OR: ${</span><span class="org-variable-name">CMAKE_CURRENT_SOURCE_DIR</span><span class="org-comment">}/         # Directory destination. </span>
)
</pre>
</div>

<p>
Test this post-build target: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Generate cache directory containing building scripts or project files </span>
<span class="org-comment-delimiter"># </span><span class="org-comment">specifics for some building systems</span>
$ cmake -H. -Bcache -G <span class="org-string">"CHOOSE SYSTEM&gt;"</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Run all targets  [Default]</span>
$ cmake --build cache --target
$ cmake --build cache --target all 

<span class="org-comment-delimiter"># </span><span class="org-comment">Run target 'testlib'. </span>
$ cmake --build cache --target testlib 
</pre>
</div>

<p>
After the target is recompiled, the shared library is copied to the
current directory (project top-level directory ./).
</p>

<p>
References: 
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/31277186">https://stackoverflow.com/questions/31277186</a></li>
<li><a href="https://stackoverflow.com/questions/15694347/">https://stackoverflow.com/questions/15694347/</a></li>
</ul>
</div>
</div>

<div id="outline-container-org00a17c4" class="outline-4">
<h4 id="org00a17c4"><span class="section-number-4">5.12.7</span> Cross compiling for Android</h4>
<div class="outline-text-4" id="text-5-12-7">
<p>
See: 
</p>
<ul class="org-ul">
<li><a href="https://developer.android.com/ndk/guides/cmake">https://developer.android.com/ndk/guides/cmake</a></li>
<li><a href="http://www.ccp4.ac.uk/dist/checkout/cmake-3.1.3/Help/manual/cmake-toolchains.7.rst">http://www.ccp4.ac.uk/dist/checkout/cmake-3.1.3/Help/manual/cmake-toolchains.7.rst</a></li>
<li><a href="https://itk.org/Wiki/ITK/Cross_Compiling">https://itk.org/Wiki/ITK/Cross_Compiling</a></li>
<li><a href="https://cristianadam.eu/20181202/a-better-qnx-cmake-toolchain-file/">https://cristianadam.eu/20181202/a-better-qnx-cmake-toolchain-file/</a></li>
<li><a href="https://stackoverflow.com/questions/12844772/how-to-cross-compile-cmake-for-arm-with-cmake">https://stackoverflow.com/questions/12844772/how-to-cross-compile-cmake-for-arm-with-cmake</a></li>
<li><a href="https://stackoverflow.com/questions/5098360/cmake-specifying-build-toolchain">https://stackoverflow.com/questions/5098360/cmake-specifying-build-toolchain</a></li>
</ul>

<p>
File: application1.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Hello world from application1"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  ::system<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"whoami"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

  <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: CmakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(Simple_Cmake_Project)

<span class="org-comment">#========== Global Configurations =============#</span>
<span class="org-comment">#----------------------------------------------#</span>
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#========== Targets Configurations ============#</span>
<span class="org-function-name">add_executable</span>(app1 application1.cpp)
</pre>
</div>

<p>
<b>Building</b>:
</p>

<p>
STEP 1: Set CMake Configuration.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Using Makefile (Linux)   </span>
$ cmake -H. -B_build -G Ninja -DCMAKE_BUILD_TYPE=Debug <span class="org-sh-escaped-newline">\</span>
   -DCMAKE_TOOLCHAIN_FILE=$<span class="org-variable-name">HOME</span>/Android/Sdk/ndk-bundle/build/cmake/android.toolchain.cmake <span class="org-sh-escaped-newline">\</span>
   -DANDROID_ABI=armeabi-v7a <span class="org-sh-escaped-newline">\</span>
   -DANDROID_NATIVE_API_LEVEL=21

<span class="org-comment-delimiter"># </span><span class="org-comment">OR Using Ninja build generator </span>
$ cmake -H. -B_build -G Ninja -DCMAKE_BUILD_TYPE=Debug <span class="org-sh-escaped-newline">\</span>
  -DCMAKE_TOOLCHAIN_FILE=$<span class="org-variable-name">HOME</span>/Android/Sdk/ndk-bundle/build/cmake/android.toolchain.cmake <span class="org-sh-escaped-newline">\</span>
  -DANDROID_ABI=armeabi-v7a <span class="org-sh-escaped-newline">\</span>
  -DANDROID_NATIVE_API_LEVEL=21
</pre>
</div>

<p>
STEP 2: Build 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build _build --target
[4/4] Linking CXX executable app1

<span class="org-comment-delimiter"># </span><span class="org-comment">Check executable </span>
$ file _build/app1
<span class="org-function-name">_build/app1</span>: ELF 32-bit LSB shared object, ARM, EABI5 version 1 (SYSV), dynamically linked, 
interpreter /system/, <span class="org-variable-name">BuildID</span>[sha1]=8d6b159e0e65604fe1f65bca5ad9eef36aa4ab26, with debug_info, not stripped

<span class="org-comment-delimiter"># </span><span class="org-comment">Attempt to run =&gt; Fails because the current machine (host) is Linux</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">x86_64 - 64 bits, not ARM 32 bits</span>
$ _build/app1
<span class="org-function-name">bash</span>: _build/app1: cannot execute binary file: Exec format error
</pre>
</div>

<p>
STEP 3: Deploy with ADB - Android Debug Bridge 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ adb push _build/app1 /data/local/tmp
<span class="org-function-name">_build/app1</span>: 1 file pushed. 18.6 MB/s (2848980 bytes<span class="org-keyword"> in</span> 0.146s)
</pre>
</div>

<p>
STEP 4: Run application on Android.
</p>

<ul class="org-ul">
<li>Run in adb shell</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ adb shell

<span class="org-function-name">on5xelte</span>:/ $ /data/local/tmp/app1
 [INFO] Hello world from application1
shell
</pre>
</div>

<ul class="org-ul">
<li>Run with adb directly</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ adb shell /data/local/tmp/app1
 [INFO] Hello world from application1
shell
</pre>
</div>
</div>
</div>
<div id="outline-container-org72a7a75" class="outline-4">
<h4 id="org72a7a75"><span class="section-number-4">5.12.8</span> Detect Operating System</h4>
<div class="outline-text-4" id="text-5-12-8">
</div>
<ol class="org-ol">
<li><a id="org579d1e9"></a>Detect operating system with predefined variables<br />
<div class="outline-text-5" id="text-5-12-8-1">
<p>
Check whether current OS is Microsft Windows NT:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(WIN32)
  <span class="org-comment"># actions ... </span>
  <span class="org-function-name">message</span>(<span class="org-string">"Compiling for Windows NT"</span>)
<span class="org-keyword">else</span>()
  <span class="org-comment"># else actions .... ...</span>
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
Check whether current OS is a Unix-like operating system (Linux, BSD,
MacOSX, Android and so on): 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(UNIX)
  <span class="org-comment"># actions ... </span>
  <span class="org-function-name">message</span>(<span class="org-string">"Running on Unix-like OS"</span>)
<span class="org-keyword">endif</span>()  
</pre>
</div>

<p>
Check if current OS is MacOSX:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(APPLE)
  <span class="org-comment"># actions ... </span>
  <span class="org-function-name">message</span>(<span class="org-string">"Running on Unix-like OS"</span>)
<span class="org-keyword">endif</span>()  
</pre>
</div>

<p>
Check if current OS is Linux:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(LINUX)
  <span class="org-comment"># actions ... </span>
  <span class="org-function-name">message</span>(<span class="org-string">"Running on Unix-like OS"</span>)
<span class="org-keyword">endif</span>()  
</pre>
</div>

<p>
Check if current OS is UNIX, but not MacOSX:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(UNIX AND NOT APPLE)
  <span class="org-comment"># actions ... </span>
  <span class="org-function-name">message</span>(<span class="org-string">"Running on Unix-like OS"</span>)
<span class="org-keyword">endif</span>()  
</pre>
</div>
</div>
</li>
<li><a id="orga6e5799"></a>Detect operating system with variable CMAKE_SYSTEM_NAME<br />
<div class="outline-text-5" id="text-5-12-8-2">
<p>
Example: 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(${<span class="org-variable-name">CMAKE_SYSTEM_NAME</span>} matches <span class="org-string">"linux"</span>)
  <span class="org-function-name">message</span>(<span class="org-string">" [INFO] compiling for Linux"</span>)
<span class="org-keyword">elseif</span>(${<span class="org-variable-name">CMAKE_SYSTEM_NAME</span>} matches <span class="org-string">"Windows"</span>)
  <span class="org-function-name">message</span>(<span class="org-string">" [INFO] compiling for Windows"</span>)
<span class="org-keyword">elseif</span>(${<span class="org-variable-name">CMAKE_SYSTEM_NAME</span>} matches <span class="org-string">"darwin"</span>)
  <span class="org-function-name">message</span>(<span class="org-string">" [INFO] compiling for Apple MacOSX"</span>)
<span class="org-keyword">elseif</span>(${<span class="org-variable-name">CMAKE_SYSTEM_NAME</span>} matches <span class="org-string">"Android"</span>)
  <span class="org-function-name">message</span>(<span class="org-string">" [INFO] compiling for Android OS."</span>)
<span class="org-keyword">else</span>()
  <span class="org-function-name">message</span>( <span class="org-string">" [WARNING] Operating system not identified."</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
Possible Values of Variable <span class="underline">CMAKE_SYSTEM_NAME</span>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(${<span class="org-variable-name">CMAKE_SYSTEM_NAME</span>} matches &lt;&lt;MATCHING-STRING&gt;)
  <span class="org-function-name">message</span>(<span class="org-string">" [INFO] compiling for &lt;&lt;MATCHIGN-STTRING&gt; "</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Value of &lt;&lt;MATCHING-STRING&gt;</th>
<th scope="col" class="org-left">Operating System</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>

<tr>
<th scope="col" class="org-left">for <span class="underline">CMAKE_SYSTEM_NAME</span></th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Windows</td>
<td class="org-left">Windows</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Darwin</td>
<td class="org-left">MacOSX</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">BSD</td>
<td class="org-left">Free BSD, OpenBDS, NetBSD &#x2026;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">FreeBSD</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Linux</td>
<td class="org-left">Linux</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Android</td>
<td class="org-left">Android</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
</div>
<div id="outline-container-org4afdea6" class="outline-4">
<h4 id="org4afdea6"><span class="section-number-4">5.12.9</span> Detect whether current build is 32 bits or 64 bits</h4>
<div class="outline-text-4" id="text-5-12-9">
<p>
Check whether current configuration is for 64 bits build:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(CMAKE_SIZEOF_VOID_P EQUAL 8)
   <span class="org-function-name">message</span>(<span class="org-string">" [INFO] 64 bits build."</span>)
<span class="org-keyword">else</span>()
   <span class="org-function-name">message</span>(<span class="org-string">" [INFO] 32 bits build."</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>
</div>
</div>
<div id="outline-container-orga0c8c40" class="outline-4">
<h4 id="orga0c8c40"><span class="section-number-4">5.12.10</span> Detect Compiler</h4>
<div class="outline-text-4" id="text-5-12-10">
</div>
<ol class="org-ol">
<li><a id="orgbe9f475"></a>Detect compiler using predefined variables<br />
<div class="outline-text-5" id="text-5-12-10-1">
<p>
<b>MSVC</b>
</p>

<p>
Check if current compiler is MSVC - Microsft - Visual C/C++ Compiler
(Visual C++, vc++ for short):
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(MSVC)
  <span class="org-function-name">message</span>(STATUS &lt;&lt; <span class="org-string">"Running MSVC"</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
<b>MSVC for 32 bits target</b>
</p>

<p>
Detect MSVC set up for 32 bits target (buids 32 bits binaries):
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(MSVC AND NOT CMAKE_CL_64)
  <span class="org-function-name">message</span>(<span class="org-string">" [INFO] Building for 32 bits Windows target."</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
<b>MSVC for 64 bits target</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(MSVC AND CMAKE_CL_64)
  <span class="org-function-name">message</span>(<span class="org-string">" [INFO] Building for 64 bits Windows target."</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
<b>Mingw</b> 
</p>

<p>
Check if current compiler is GCC/Mingw, GCC compiler ported to
Windows.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(MSVC)
  <span class="org-function-name">message</span>(<span class="org-string">"Running Mingw/GCC maybe on Windows"</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>
</div>
</li>
<li><a id="orgf4a1aac"></a>Detect compiler using CMAKE_CXX_COMPILER_ID variable<br />
<div class="outline-text-5" id="text-5-12-10-2">
<p>
The variable CMAKE_CXX_COMPILER_ID can be used for checking the
current C++ compiler.
</p>
<ul class="org-ul">
<li>See: <a href="https://cmake.org/cmake/help/latest/variable/CMAKE_LANG_COMPILER_ID.html#variable:CMAKE_%3CLANG%3E_COMPILER_ID">Documentation</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span> (${<span class="org-variable-name">CMAKE_CXX_COMPILER_ID</span>} matches GNU)
  <span class="org-function-name">message</span>(STATUS <span class="org-string">" [INFO] Using GCC - GNU C/C++ Compiler or MingW/GCC."</span>)
<span class="org-keyword">elseif</span>(${<span class="org-variable-name">CMAKE_CXX_COMPILER_ID</span>} matches CLANG) 
  <span class="org-function-name">message</span>(STATUS <span class="org-string">" [INFO] Using the super amazing, the finest C++ compiler: Clang++/LLVM."</span>)
<span class="org-keyword">elseif</span>(${<span class="org-variable-name">CMAKE_CXX_COMPILER_ID</span>} matches MSVC)
  <span class="org-function-name">message</span>(STATUS <span class="org-string">" [INFO] Using MSVC Windows 'Visual!!' C++ compiler"</span>)
<span class="org-keyword">else</span>()
  <span class="org-function-name">message</span>( FATAL_ERROR <span class="org-string">" [ERROR] I cannot identify CMake Configuration not set for this compiler yet."</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
All possible values of <code>CMAKE_CXX_COMPILER_ID</code>:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Value of <code>CMAKE_CXX_COMPILER_ID</code></th>
<th scope="col" class="org-left">Compiler</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Most used compilers</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">GNU</td>
<td class="org-left">GNU Compiler Collection (gcc.gnu.org)</td>
</tr>

<tr>
<td class="org-left">Clang</td>
<td class="org-left">LLVM Clang (clang.llvm.org)</td>
</tr>

<tr>
<td class="org-left">MSVC</td>
<td class="org-left">Microsoft Visual Studio (microsoft.com)</td>
</tr>

<tr>
<td class="org-left">Intel</td>
<td class="org-left">Intel Compiler (intel.com)</td>
</tr>

<tr>
<td class="org-left">PGI</td>
<td class="org-left">The Portland Group (pgroup.com)</td>
</tr>

<tr>
<td class="org-left">G95</td>
<td class="org-left">G95 Fortran (g95.org)</td>
</tr>

<tr>
<td class="org-left">Embarcadero, Borland</td>
<td class="org-left">Embarcadero (embarcadero.com)</td>
</tr>

<tr>
<td class="org-left">ARMCC</td>
<td class="org-left">ARM Compiler (arm.com)</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Other compilers</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Absoft</td>
<td class="org-left">Absoft Fortran (absoft.com)</td>
</tr>

<tr>
<td class="org-left">ADSP</td>
<td class="org-left">Analog VisualDSP++ (analog.com)</td>
</tr>

<tr>
<td class="org-left">AppleClang</td>
<td class="org-left">Apple Clang (apple.com)</td>
</tr>

<tr>
<td class="org-left">Bruce</td>
<td class="org-left">Bruce C Compiler</td>
</tr>

<tr>
<td class="org-left">CCur</td>
<td class="org-left">Concurrent Fortran (ccur.com)</td>
</tr>

<tr>
<td class="org-left">Cray</td>
<td class="org-left">Cray Compiler (cray.com)</td>
</tr>

<tr>
<td class="org-left">HP</td>
<td class="org-left">Hewlett-Packard Compiler (hp.com)</td>
</tr>

<tr>
<td class="org-left">IAR</td>
<td class="org-left">IAR Systems (iar.com)</td>
</tr>

<tr>
<td class="org-left">MIPSpro</td>
<td class="org-left">SGI MIPSpro (sgi.com)</td>
</tr>

<tr>
<td class="org-left">NVIDIA</td>
<td class="org-left">NVIDIA CUDA Compiler (nvidia.com)</td>
</tr>

<tr>
<td class="org-left">OpenWatcom</td>
<td class="org-left">Open Watcom (openwatcom.org)</td>
</tr>

<tr>
<td class="org-left">Flang</td>
<td class="org-left">Flang Fortran Compiler</td>
</tr>

<tr>
<td class="org-left">PathScale</td>
<td class="org-left">PathScale (pathscale.com)</td>
</tr>

<tr>
<td class="org-left">SDCC</td>
<td class="org-left">Small Device C Compiler (sdcc.sourceforge.net)</td>
</tr>

<tr>
<td class="org-left">SunPro</td>
<td class="org-left">Oracle Solaris Studio (oracle.com)</td>
</tr>

<tr>
<td class="org-left">TI</td>
<td class="org-left">Texas Instruments (ti.com)</td>
</tr>

<tr>
<td class="org-left">TinyCC</td>
<td class="org-left">Tiny C Compiler (tinycc.org)</td>
</tr>

<tr>
<td class="org-left">XL, VisualAge, zOS</td>
<td class="org-left">IBM XL (ibm.com)</td>
</tr>
</tbody>
</table>
</div>
</li>
</ol>
</div>
<div id="outline-container-org16b8420" class="outline-4">
<h4 id="org16b8420"><span class="section-number-4">5.12.11</span> Debug Information for diagnosing problems</h4>
<div class="outline-text-4" id="text-5-12-11">
<p>
<b>Set Build Type</b>
</p>

<p>
Informs whether the current build type is Release or Debug. Relase has
optmization flags enabled and debugging symbols disabled. Debug
building type has optmization flags and debugging symbols flags
disabled.
</p>

<p>
The build type is:
</p>

<ul class="org-ul">
<li>Release when :
<ul class="org-ul">
<li>$ cmake &#x2013;build &lt;BUILD-DIRECTORY&gt; &#x2013;config Release &#x2013;target</li>
<li>$ cmake &#x2013;build &lt;BUILD-DIRECTORY&gt; &#x2013;config Release &#x2013;target install</li>
</ul></li>

<li>Debug when using (Default):
<ul class="org-ul">
<li>$ cmake &#x2013;build &lt;BUILD-DIRECTORY&gt; &#x2013;config Debug &#x2013;target</li>
<li>$ cmake &#x2013;build &lt;BUILD-DIRECTORY&gt; &#x2013;config Debug &#x2013;target Application1</li>
<li>$ cmake &#x2013;build &lt;BUILD-DIRECTORY&gt; &#x2013;config Debug &#x2013;target install</li>
</ul></li>
</ul>

<p>
<b>Set Installation Directory</b> 
</p>

<p>
The installation directory can be set with the option
-DCMAKE_INSTALL_PREFIX, examples: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Configuration </span>
$ cmake -Bcache -DCMAKE_INSTALL_PREFIX=C:<span class="org-string">\\</span>Users\Dummy\apps 

<span class="org-comment-delimiter"># </span><span class="org-comment">Execute install target </span>
$ cmake --build cache --config Debug --target install 
</pre>
</div>

<p>
<b>Useful Debugging Commands</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">message</span>(<span class="org-string">" [INFO] Build type = ${</span><span class="org-variable-name">CMAKE_BUILD_TYPE</span><span class="org-string">}"</span>)
</pre>
</div>

<p>
Target word size 32 bits (x86) or 64 bits (x86_64):
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(CMAKE_SIZEOF_VOID_P EQUAL 8)
   <span class="org-function-name">message</span>(<span class="org-string">" [INFO] Target = 64 bits build."</span>)
<span class="org-keyword">else</span>()
   <span class="org-function-name">message</span>(<span class="org-string">" [INFO] Target = 32 bits build."</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
Compiler: 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">message</span>(<span class="org-string">" [INFO] Compiler ID = ${</span><span class="org-variable-name">CMAKE_CXX_COMPILER_ID</span><span class="org-string">}"</span>)
</pre>
</div>

<p>
Current Platform: 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">message</span>(<span class="org-string">" [INFO] System Name = ${</span><span class="org-variable-name">CMAKE_SYSTEM_NAME</span><span class="org-string">} "</span>)
</pre>
</div>

<p>
Binary directory &lt;BUILD-DIRECTORY&gt;
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">message</span>(<span class="org-string">" [INFO] CMake binary dir = ${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}"</span>)
</pre>
</div>

<p>
Installation directory specifies the directory where the binaries will
be installed by the target <b>install</b>. It can be specified during
configuration phase by using:
</p>

<ul class="org-ul">
<li><b>&#x2013;DCMAKE_INSTALL_PREFIX=C:\Users\Dummy\app</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">message</span>(<span class="org-string">" [INFO] Install path CMAKE_INSTALL_PREFIX = ${</span><span class="org-variable-name">CMAKE_INSTALL_PREFIX</span><span class="org-string">} "</span>)
</pre>
</div>


<p>
Putting it all together:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">message</span>(<span class="org-string">" [INFO]  System Name  - CMAKE_SYSTEM_NAME     = ${</span><span class="org-variable-name">CMAKE_SYSTEM_NAME</span><span class="org-string">}"</span>)
<span class="org-function-name">message</span>(<span class="org-string">" [INFO]  Build type   - CMAKE_BUILD_TYPE      = ${</span><span class="org-variable-name">CMAKE_BUILD_TYPE</span><span class="org-string">}"</span>)
<span class="org-function-name">message</span>(<span class="org-string">" [INFO]  Compiler ID  - CMAKE_CXX_COMPILER_ID = ${</span><span class="org-variable-name">CMAKE_CXX_COMPILER_ID</span><span class="org-string">}"</span>)
<span class="org-function-name">message</span>(<span class="org-string">" [INFO]  Install path - CMAKE_INSTALL_PREFIX  = ${</span><span class="org-variable-name">CMAKE_INSTALL_PREFIX</span><span class="org-string">} "</span>)
<span class="org-keyword">if</span>(CMAKE_SIZEOF_VOID_P EQUAL 8)
   <span class="org-function-name">message</span>(<span class="org-string">" [INFO] Target = 64 bits build."</span>)
<span class="org-keyword">else</span>()
   <span class="org-function-name">message</span>(<span class="org-string">" [INFO] Target = 32 bits build."</span>)
<span class="org-keyword">endif</span>()
<span class="org-function-name">message</span>(<span class="org-string">" [INFO] CMake binary dir = ${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}"</span>)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgda7518f" class="outline-3">
<h3 id="orgda7518f"><span class="section-number-3">5.13</span> Force Settings</h3>
<div class="outline-text-3" id="text-5-13">
</div>
<div id="outline-container-org75edbe7" class="outline-4">
<h4 id="org75edbe7"><span class="section-number-4">5.13.1</span> Force generation of debugging symbols</h4>
<div class="outline-text-4" id="text-5-13-1">
<p>
This snippet forces the generation of debugging symbols regardless of
the build type. It is a useful setting when building from command
line. 
</p>

<p>
Add the following line to the CMake file: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">set</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">CMAKE_BUILD_TYPE</span> <span class="org-variable-name">Debug</span><span class="org-rainbow-delimiters-depth-1">)</span> # Force debug build
</pre>
</div>

<p>
After the line is added, the file CMakeLists.txt becomes:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-comment">#========= Global Configuration ===============# </span>
<span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(Demo_cpp_plugin)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># Force debug build</span>
<span class="org-function-name">set</span>(CMAKE_BUILD_TYPE Debug) <span class="org-comment"># Force debug build</span>

<span class="org-comment">#========== Targets Configurations ============#</span>

<span class="org-function-name">add_executable</span>(app ... )
.. ... ... ... 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf50a9ee" class="outline-4">
<h4 id="orgf50a9ee"><span class="section-number-4">5.13.2</span> Force Compiler to Clang</h4>
<div class="outline-text-4" id="text-5-13-2">
<p>
Despite C++ language remarkable improvements, C++ compiler error
messages of most compilers still cryptic and hard to grasp. Even for
silly syntax mistakes, C++ compilers can fill the screen with error
messages providing little context about the compiler error. 
</p>

<p>
Such cryptic errors can be better diagnosed by switching the compiler
to Clang that provides much better error messages that other compilers.
The compiler can be temporarily switched by using the IDE, by setting
environment variables or by setting CMake variables to force using an
specific compiler.
</p>


<p>
Example: CMakeLists.txt forcing compiler to Clang.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(NumericalMethods)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-function-name">set</span>(FORCE_CLANG ON)
<span class="org-comment"># Force compiler to Clang++</span>
<span class="org-keyword">if</span>(FORCE_CLANG)
    <span class="org-function-name">set</span>(CMAKE_C_COMPILER clang)
    <span class="org-function-name">set</span>(CMAKE_CXX_COMPILER clang++)
<span class="org-keyword">endif</span>()

<span class="org-comment">#========== Targets Configurations ============#</span>

<span class="org-comment"># TARGET: rootFinding1.cpp </span>
<span class="org-function-name">add_executable</span>(rootFinding1 rootFinding1.cpp)
</pre>
</div>

<p>
<b>Explanation:</b>
</p>

<p>
This next line sets the variable FORCE_CLANG:
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">set</span>(FORCE_CLANG ON)   <span class="org-comment"># Force using clang compiler </span>
<span class="org-function-name">set</span>(FORCE_CLANG OFF)  <span class="org-comment"># Use default compiler </span>
</pre>
</div>

<p>
When the variable FORCE_CLANG is set, the commands within the if-endif
block set the C and C++ compiler to Clang and Clang++.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-comment"># Force compiler to Clang++</span>
<span class="org-keyword">if</span>(FORCE_CLANG)
    <span class="org-function-name">set</span>(CMAKE_C_COMPILER clang)
    <span class="org-function-name">set</span>(CMAKE_CXX_COMPILER clang++)
<span class="org-keyword">endif</span>()
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org15a2973" class="outline-2">
<h2 id="org15a2973"><span class="section-number-2">6</span> Conan package Manager</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orgb97c496" class="outline-3">
<h3 id="orgb97c496"><span class="section-number-3">6.1</span> Main Web Sites</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li><a href="https://conan.io">https://conan.io</a></li>

<li><a href="https://twitter.com/conan_io?lang=en">https://twitter.com/conan_io?lang=en</a> - News</li>

<li><a href="https://github.com/conan-io/">https://github.com/conan-io/</a> - Source code Repositories</li>

<li><a href="https://jfrog.com">https://jfrog.com</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgc033494" class="outline-3">
<h3 id="orgc033494"><span class="section-number-3">6.2</span> Benefits and Capabilities</h3>
<div class="outline-text-3" id="text-6-2">
<p>
Benefits: 
</p>

<ul class="org-ul">
<li>Reduce compile-time</li>
<li>Reduce library installation effort duplication</li>
<li>Increase library discoverability</li>
<li>Easier cross-compilation for different architectures</li>
<li>Host package recipes in local network or remotely</li>
</ul>

<p>
Capabilities:
</p>

<ul class="org-ul">
<li><b>Cache and reuse compilation binaries (aka object-code)</b>  such as intermediate
object-code (*.o or *.obj), static libraries and shared libraries
which reduces compile-time and effort duplication for installing
a libraries since all projects using the same conan recipe can
reuse the binaries.</li>

<li><b>Package with embedded sources</b>: Sources can be embedded in a
package.</li>

<li><b>Package with remote sources</b>: Conan packages (aka recipes) can fetch
source code from remote sources such as Github, Gitlab,
Sourceforge, FTP or even a <b>Conan Server</b> in local network.</li>

<li>Conan Recipes can build package's sources with a wide variety of tools such as:
<ul class="org-ul">
<li>GNU autotools</li>
<li>CMake</li>
<li>GNU Makefile</li>
<li>BSD Makefile</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org40f98fc" class="outline-3">
<h3 id="org40f98fc"><span class="section-number-3">6.3</span> Videos</h3>
<div class="outline-text-3" id="text-6-3">
<p>
Webinar JFrog: 
</p>

<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=xBLjXdyh3zs">{Webinar: Part 1 of 3} Introduction to C/C++ Package Management with Conan</a></li>
<li><a href="https://www.youtube.com/watch?v=JsijdbjVlXw&amp;feature=youtu.be">{Webinar: Part 2 of 3} Advanced package management for C/C++ with Conan</a></li>
<li><a href="https://www.youtube.com/watch?v=ExpkMy6DJ6o&amp;feature=youtu.be">{Webinar: Part 3 of 3} Modern DevOps for Modern C/C++ with Conan</a></li>
</ul>

<p>
CppCon: 
</p>
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=xA9yRX4Mdz0">CppCon 2017: D. Rodriguez-Losada Gonzalez “Faster Delivery of Large C/C++ Projects with&#x2026;</a></li>
</ul>
</div>
</div>

<div id="outline-container-org6f2d1d3" class="outline-3">
<h3 id="org6f2d1d3"><span class="section-number-3">6.4</span> Selected Articles</h3>
<div class="outline-text-3" id="text-6-4">
<ul class="org-ul">
<li><a href="https://blog.conan.io/2018/01/30/Cross-building-Boost-Android.html">Cross building Boost C++ libraries to Android with Conan</a></li>

<li><a href="https://blog.conan.io/2019/09/02/Deterministic-builds-with-C-C++.html">An introduction to deterministic builds with C/C++</a></li>

<li><a href="https://news.ycombinator.com/item?id=20858044">An introduction to deterministic builds with C/C++ | Hacker News</a></li>

<li><a href="https://blog.conan.io/2019/07/24/C++-build-systems-new-integrations-in-Conan-package-manager.html">C++ build systems new integrations in Conan package manager</a></li>

<li><a href="https://community.arm.com/developer/tools-software/tools/b/tools-software-ides-blog/posts/driving-c-c-developer-use-cases-for-arm-with-conan">Conan platform manager and C/C++ - Tools, Software and IDEs blog - Software Tools - Arm Community</a></li>

<li><a href="https://blog.jetbrains.com/clion/2019/05/getting-started-with-the-conan-clion-plugin/">Getting Started with the Conan CLion Plugin | CLion Blog</a></li>

<li><a href="https://schneide.blog/2019/04/25/migrating-an-existing-c-codebase-to-use-conan/">Migrating an existing C++ codebase to conan | Schneide Blog</a></li>

<li><a href="https://schneide.blog/2019/06/24/integrating-conan-cmake-and-jenkins/">Integrating conan, CMake and Jenkins | Schneide Blog</a></li>

<li><a href="https://www.lattix.com/reducing-build-times-for-c-c-projects-with-conan-and-lattix/">Blog:Reducing build times for C/C++ Projects with JFrog's Conan and Lattix -</a></li>

<li><a href="https://forums.unrealengine.com/community/community-content-tools-and-tutorials/1459614-a-cross-platform-workflow-for-integrating-third-party-libraries-using-the-conan-package-manager">A cross-platform workflow for integrating third-party libraries using the Conan package manager - Unreal Engine Forums</a></li>

<li><a href="https://blog.conan.io/2018/12/03/Using-Facebook-Folly-with-Conan.html">Using Facebook Folly with Conan</a></li>

<li><a href="https://github.com/conan-io/examples">https://github.com/conan-io/examples</a>
<ul class="org-ul">
<li>Several Conan examples to complement the documentation and blog.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org1130140" class="outline-3">
<h3 id="org1130140"><span class="section-number-3">6.5</span> Install Conan</h3>
<div class="outline-text-3" id="text-6-5">
<p>
<b>Standalone Installers</b> 
</p>

<p>
Conan Standalone Installers for Windows, Linux and Mac OSX which does
not require previous Python installation.
</p>

<ul class="org-ul">
<li><a href="https://conan.io/downloads">https://conan.io/downloads</a></li>
</ul>

<p>
<b>Installation via PIP</b> 
</p>

<p>
Installing Conan requires a Python installation with pip.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ pip instal conan 
</pre>
</div>

<p>
The easiest way to get Python for any platform, including Windows is
through Miniconda distribution which is a lightweight version of
Python Anaconda distribution: 
</p>

<ul class="org-ul">
<li><a href="https://docs.conda.io/en/latest/miniconda.html">https://docs.conda.io/en/latest/miniconda.html</a></li>
</ul>

<p>
<b>Conan Addons for IDEs</b> 
</p>

<p>
Conan Extension (Addon) for Visual Studio 
</p>
<ul class="org-ul">
<li><a href="https://docs.conan.io/en/latest/integrations/ide/visual_studio.html">https://docs.conan.io/en/latest/integrations/ide/visual_studio.html</a></li>
</ul>

<p>
Conan Plugin for JetBrains' CLION IDE: 
</p>
<ul class="org-ul">
<li><a href="https://plugins.jetbrains.com/plugin/11956-conan">https://plugins.jetbrains.com/plugin/11956-conan</a></li>
</ul>
</div>
</div>

<div id="outline-container-org5c9083f" class="outline-3">
<h3 id="org5c9083f"><span class="section-number-3">6.6</span> Conan Package Repositories</h3>
<div class="outline-text-3" id="text-6-6">
<p>
Search Conan Packages at Conan Center repository: 
</p>

<p>
Repository Lists:
</p>
<ul class="org-ul">
<li><a href="https://docs.conan.io/en/latest/uploading_packages/remotes.html">https://docs.conan.io/en/latest/uploading_packages/remotes.html</a></li>
</ul>

<p>
Some Conan Repositories:
</p>

<ul class="org-ul">
<li>Main Repository: <a href="https://bintray.com/conan/conan-center">https://bintray.com/conan/conan-center</a></li>
<li>Others:
<ul class="org-ul">
<li><a href="https://bintray.com/conan/conan-transit">Conan-Transit</a></li>
<li><a href="https://bintray.com/conan-community/conan">Conan-Community</a></li>
<li><a href="https://bintray.com/bincrafters/public-conan">Bincrafters</a> - <a href="https://bincrafters.github.io/">https://bincrafters.github.io/</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org95e4d19" class="outline-3">
<h3 id="org95e4d19"><span class="section-number-3">6.7</span> Libraries in Conan Center</h3>
<div class="outline-text-3" id="text-6-7">
<p>
<b>Libraries in Conan Main Repositories</b> 
</p>

<p>
All libraries in Conan Community: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/conan-community/conan">https://bintray.com/conan-community/conan</a></li>
</ul>

<p>
All libraries in Conan Bincrafters: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan">https://bintray.com/bincrafters/public-conan</a></li>
</ul>

<p>
<b>Selected Conan Libraries</b> 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Conan Recipe</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Fundamental</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/boost%3Aconan">Boost</a></td>
<td class="org-left">Boost Libraries</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/pocoproject/conan/Poco%3Apocoproject">Poco libraries</a></td>
<td class="org-left">Poco framework libraries for network, compression, process and database.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/abseil%3Aconan">Google's abseil</a></td>
<td class="org-left">Google's abseil library - <a href="https://abseil.io/">https://abseil.io/</a></td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/fmt%3Abincrafters/5.3.0%3Astable">fmt</a></td>
<td class="org-left">Fast and type-safe and extensible printf library.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/range-v3/range-v3/range-v3%3Aericniebler">ranges-v3</a></td>
<td class="org-left">Ranges library derived from Boost that will be added to C++20 stdandard library.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/cliutils/CLI11/CLI11%3Acliutils/1.8.0%3Astable">CLI11</a></td>
<td class="org-left">Lightweight header-only command line parser.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/cereal%3Aconan">Cereal</a></td>
<td class="org-left">Header-only serialization library</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/parallelstl%3Aconan">parallel stl</a></td>
<td class="org-left">C++ standard library algorithms with support for execution policies</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/TBB%3Aconan">Intel TBB</a></td>
<td class="org-left">Intel Threading Building Blocks (Intel TBB) for writing parallel C++ programs.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/pugixml%3Abincrafters/1.9%3Astable">PugiXML</a></td>
<td class="org-left">XML Parser library</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/IrrXML%3Aconan">IrrXML</a></td>
<td class="org-left">Simple and fast open source xml parser for C++</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Unit Testing</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/gtest%3Abincrafters">Google Test</a></td>
<td class="org-left">Google unit testing library, aka GTest</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/catchorg/Catch2/Catch2:catchorg/2.7.2:stable">Catch2</a></td>
<td class="org-left">Single header unit test framework.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/doctest%3Abincrafters/2.3.1%3Astable">Doctest</a></td>
<td class="org-left">Header-only unit testing library with fast compile-time.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Data Compression</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/zlib%3Aconan">Zlib</a></td>
<td class="org-left">Zlib compression library</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/bzip2%3Aconan">bzip2</a></td>
<td class="org-left">bzip2 is a freely available, patent free (see below), high-quality data compressor.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Scientific / Math</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/lapack%3Aconan">Conan Lapack</a></td>
<td class="org-left">Lapack linear algebra library</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/openblas%3Aconan">Open BLAS</a></td>
<td class="org-left">OpenBLAS is an optimized BLAS library based on GotoBLAS2 1.13 BSD version.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/eigen%3Aconan">eigen</a></td>
<td class="org-left">Eigen is a C++ template library for linear algebra: matrices, vectors, numerical solvers, and related algorithms.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Computer Graphics</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/libpng%3Aconan">libpng</a></td>
<td class="org-left">Portable Network Graphics An Open, Extensible Image Format with Lossless Compression</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/freetype%3Abincrafters">freetype</a></td>
<td class="org-left">Render text onto bitmaps, and provides support for other font-related operations.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/imgui:bincrafters">imgui</a></td>
<td class="org-left">Bloat-free Immediate Mode Graphical User interface for C++ with minimal dependencies</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/glm%3Ag-truc">glm</a></td>
<td class="org-left">A C++ mathematics library for graphics programming</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/sdl2%3Abincrafters/2.0.9%3Astable">sdl2</a></td>
<td class="org-left">Simple Direct Media Layer</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/glfw%3Abincrafters">glfw</a></td>
<td class="org-left">GLFW is an Open Source, multi-platform library for OpenGL, OpenGL ES and Vulkan development on the desktop.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">It provides a simple API for creating windows, contexts and surfaces, receiving input and events.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Computer Vision and</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>AI - Artificial Inteligence</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/opencv%3Aconan">OpenCV</a></td>
<td class="org-left">Most well-known Library for computer vision and image processing.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/tiny-dnn%3Aconan">tiny-dnn</a></td>
<td class="org-left">tiny-dnn is a C++14 implementation of deep learning on systems with limited computational resource.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Encryption and TSL/SSL</b></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/OpenSSL:conan">OpenSSL</a></td>
<td class="org-left">Most well-known library TLS/SSL - Transport Layer Security</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/cryptopp%3Abincrafters">cryptopp</a></td>
<td class="org-left">Free C++ class library of cryptographic schemes.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/Botan%3Abincrafters">botan</a></td>
<td class="org-left">Botan is a cryptography library written in C++11</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Miscellaneous</b></td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/ncurses%3Aconan">ncurses</a></td>
<td class="org-left">API to write text-based user interfaces, TUIs in a terminal.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/bincrafters/public-conan/libcurl%3Abincrafters">LibCurl</a></td>
<td class="org-left">curl library that provides clients for many network protocols: http, https, ftp, sftp, &#x2026;</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/pybind11%3Aconan">Pybind 11</a></td>
<td class="org-left">Library for creating Python native modules / libraries in C++.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/pistache%3Aconan">pistache</a></td>
<td class="org-left">C++ REST framework written by Mathieu Stefani at Datacratic. It is written in pure C++11.</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/stb%3Aconan">stb - single-file public domain</a></td>
<td class="org-left">stb single-file public domain libraries for C/C++</td>
</tr>

<tr>
<td class="org-left"><a href="https://bintray.com/conan-community/conan/wiringpi%3Aconan">wiringpi</a></td>
<td class="org-left">GPIO Interface library for the Raspberry Pi</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgea124ce" class="outline-3">
<h3 id="orgea124ce"><span class="section-number-3">6.8</span> Command Summary</h3>
<div class="outline-text-3" id="text-6-8">
</div>
<div id="outline-container-org5f57333" class="outline-4">
<h4 id="org5f57333"><span class="section-number-4">6.8.1</span> Search Conan Packages</h4>
<div class="outline-text-4" id="text-6-8-1">
<p>
Search for Poco libraries in Conan Center repository: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ conan search Poco* -r=conan-center
Existing package recipes:

Poco/1.7.8p3@pocoproject/stable
Poco/1.7.9@pocoproject/stable
Poco/1.7.9p1@pocoproject/stable
Poco/1.7.9p2@pocoproject/stable
Poco/1.8.0.1@pocoproject/stable
Poco/1.8.0@pocoproject/stable
Poco/1.8.1@pocoproject/stable
Poco/1.9.0@pocoproject/stable
</pre>
</div>

<p>
Search for Google Test in Conan Center repository: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ conan search gtest/* -r=conan-center
Existing package recipes:

gtest/1.7.0@bincrafters/stable
gtest/1.8.0@bincrafters/stable
gtest/1.8.1@bincrafters/stable
</pre>
</div>

<p>
Search for libcurl package on BinCrafters repository:
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; conan search libcurl/* -r=bincrafters
Existing package recipes:

libcurl/7.50.3@bincrafters/stable
libcurl/7.52.1@bincrafters/stable
libcurl/7.56.1@bincrafters/stable
libcurl/7.60.0@bincrafters/stable
libcurl/7.61.1@bincrafters/stable
</pre>
</div>

<p>
Search for pybind11 on all conan repositories:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ conan search pybind* -r=all
Existing package recipes:

Remote <span class="org-string">'conan-center'</span>:
pybind11/2.2.2@conan/stable
pybind11/2.2.3@conan/stable
pybind11/2.2.4@conan/stable
Remote <span class="org-string">'conan-transit'</span>:
pybind11/0.1.0@jason2506/testing
pybind11/1.4@memsharded/stable
pybind11/any@memsharded/stable

</pre>
</div>
</div>
</div>

<div id="outline-container-orge3cf97d" class="outline-4">
<h4 id="orge3cf97d"><span class="section-number-4">6.8.2</span> List libraries in local cache / local repository</h4>
<div class="outline-text-4" id="text-6-8-2">
<p>
This command lists packages in local cache or local repository.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ conan search
Existing package recipes:

OpenSSL/1.0.2o@conan/stable
Poco/1.9.0@pocoproject/stable
gtest/1.8.1@bincrafters/stable
zlib/1.2.11@conan/stable
</pre>
</div>

<p>
List Conan storage directory ~/.conan on Unix-like (Linux, BSD, OSX &#x2026;)
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree -L 2  ~/.conan/
/home/archbox/.conan/
&#9500;&#9472;&#9472; artifacts.properties
&#9500;&#9472;&#9472; cacert.pem
&#9500;&#9472;&#9472; conan.conf
&#9500;&#9472;&#9472; conan.conf.back
&#9500;&#9472;&#9472; data
&#9474;&#160;&#160; &#9500;&#9472;&#9472; gtest
&#9474;&#160;&#160; &#9500;&#9472;&#9472; OpenSSL
&#9474;&#160;&#160; &#9500;&#9472;&#9472; Poco
&#9474;&#160;&#160; &#9492;&#9472;&#9472; zlib
&#9500;&#9472;&#9472; hooks
&#9474;&#160;&#160; &#9492;&#9472;&#9472; attribute_checker.py
&#9500;&#9472;&#9472; profiles
&#9474;&#160;&#160; &#9492;&#9472;&#9472; default
&#9500;&#9472;&#9472; registry.json
&#9500;&#9472;&#9472; registry.json.lock
&#9500;&#9472;&#9472; settings.yml
&#9492;&#9472;&#9472; version.txt

7 directories, 10 files

</pre>
</div>

<p>
List directory ~/.conan/data 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree -L 3  ~/.conan/data
/home/archbox/.conan/data
&#9500;&#9472;&#9472; gtest
&#9474;&#160;&#160; &#9492;&#9472;&#9472; 1.8.1
&#9474;&#160;&#160;     &#9492;&#9472;&#9472; bincrafters
&#9500;&#9472;&#9472; OpenSSL
&#9474;&#160;&#160; &#9492;&#9472;&#9472; 1.0.2o
&#9474;&#160;&#160;     &#9492;&#9472;&#9472; conan
&#9500;&#9472;&#9472; Poco
&#9474;&#160;&#160; &#9492;&#9472;&#9472; 1.9.0
&#9474;&#160;&#160;     &#9492;&#9472;&#9472; pocoproject
&#9492;&#9472;&#9472; zlib
    &#9492;&#9472;&#9472; 1.2.11
        &#9492;&#9472;&#9472; conan

12 directories, 0 files
</pre>
</div>
</div>
</div>

<div id="outline-container-org67c525c" class="outline-4">
<h4 id="org67c525c"><span class="section-number-4">6.8.3</span> List Remote Repositories:</h4>
<div class="outline-text-4" id="text-6-8-3">
<div class="org-src-container">
<pre class="src src-sh">$ conan remote list

<span class="org-function-name">conan-center</span>: https://conan.bintray.com [Verify SSL: True]
<span class="org-function-name">conan-transit</span>: https://conan-transit.bintray.com [Verify SSL: True]
</pre>
</div>
</div>
</div>

<div id="outline-container-org740fc8e" class="outline-4">
<h4 id="org740fc8e"><span class="section-number-4">6.8.4</span> Add more remote repositories</h4>
<div class="outline-text-4" id="text-6-8-4">
<p>
Add Repositories: 
</p>

<ul class="org-ul">
<li>Add Conan Center (Repository installed by default)</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ conan remote add conan-center https://conan.bintray.com
</pre>
</div>

<ul class="org-ul">
<li>Add Conan Community:</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ conan remote add conan-community https://api.bintray.com/conan/conan-community/conan
</pre>
</div>

<ul class="org-ul">
<li>Add bincrafters</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ conan remote add bincrafters https://api.bintray.com/conan/bincrafters/public-conan
</pre>
</div>
</div>
</div>

<div id="outline-container-org9cf16a5" class="outline-4">
<h4 id="org9cf16a5"><span class="section-number-4">6.8.5</span> Install library in local cache</h4>
<div class="outline-text-4" id="text-6-8-5">
<p>
Example install package libcurl version 7.61.1 from repository BinCrafters:
</p>

<ul class="org-ul">
<li>Installation on Windows 64 bits for 64 bits target. The build type
is Release, however the installation lacks the debug building.</li>
<li>Linux, OS or Nix users don't need to be concerned about
Debug/Release build type.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">&#955; conan install libcurl/7.61.1@bincrafters/stable

<span class="org-function-name">Configuration</span>:
[settings]
<span class="org-variable-name">arch</span>=x86_64
<span class="org-variable-name">arch_build</span>=x86_64
<span class="org-variable-name">build_type</span>=Release
<span class="org-variable-name">compiler</span>=Visual Studio
compiler.runtime=MD
compiler.version=15
<span class="org-variable-name">os</span>=Windows
<span class="org-variable-name">os_build</span>=Windows
[options]
[build_requires]
[env]

libcurl/7.61.1@bincrafters/stable: Not found<span class="org-keyword"> in</span> local cache, looking<span class="org-keyword"> in</span> remotes...
libcurl/7.61.1@bincrafters/stable: Trying with <span class="org-string">'conan-center'</span>...
Downloading conanmanifest.txt
[==================================================] 234B/234B
Downloading conanfile.py
[==================================================] 19.4KB/19.4KB
Downloading conan_export.tgz
[==================================================] 764B/764B
Decompressing conan_export.tgz: 100%|&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;| 764/764 [00:00&lt;00:00, 46.3kB/s]
OpenSSL/1.0.2n@conan/stable: Not found<span class="org-keyword"> in</span> local cache, looking<span class="org-keyword"> in</span> remotes...
OpenSSL/1.0.2n@conan/stable: Trying with <span class="org-string">'conan-center'</span>...
Downloading conanmanifest.txt
[==================================================] 58B/58B
Downloading conanfile.py
[==================================================] 20.1KB/20.1KB
libcurl/7.61.1@bincrafters/stable: Installing package
Requirements
    OpenSSL/1.0.2n@conan/stable from <span class="org-string">'conan-center'</span> - Downloaded
    libcurl/7.61.1@bincrafters/stable from <span class="org-string">'conan-center'</span> - Downloaded
    zlib/1.2.11@conan/stable from <span class="org-string">'conan-center'</span> - Cache
Packages
    OpenSSL/1.0.2n@conan/stable:606fdb601e335c2001bdf31d478826b644747077 - Download
    libcurl/7.61.1@bincrafters/stable:ae6191bc1194317ff7cdbc84d4d302ab49975618 - Download
    zlib/1.2.11@conan/stable:6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7 - Cache

zlib/1.2.11@conan/stable: Already installed!
OpenSSL/1.0.2n@conan/stable: Retrieving package 606fdb601e335c2001bdf31d478826b644747077 from remote <span class="org-string">'conan-center'</span>
Downloading conanmanifest.txt
[==================================================] 4.6KB/4.6KB
Downloading conaninfo.txt
[==================================================] 1.2KB/1.2KB
Downloading conan_package.tgz
[==================================================] 5.6MB/5.6MB
Decompressing conan_package.tgz: 100%|&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;| 5.32M/5.32M [00:00&lt;00:00, 24.0MB/s]
OpenSSL/1.0.2n@conan/stable: Package installed 606fdb601e335c2001bdf31d478826b644747077
libcurl/7.61.1@bincrafters/stable: Retrieving package ae6191bc1194317ff7cdbc84d4d302ab49975618 from remote <span class="org-string">'conan-center'</span>
Downloading conanmanifest.txt
[==================================================] 1.0KB/1.0KB
Downloading conaninfo.txt
[==================================================] 1.8KB/1.8KB
Downloading conan_package.tgz
[==================================================] 704.7KB/704.7KB
Decompressing conan_package.tgz: 100%|&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;| 688k/688k [00:00&lt;00:00, 14.9MB/s]
libcurl/7.61.1@bincrafters/stable: Package installed ae6191bc1194317ff7cdbc84d4d302ab49975618
</pre>
</div>

<p>
Install debug build of libcurl package:
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; conan install libcurl/7.61.1@bincrafters/stable -s <span class="org-variable-name">build_type</span>=Debug
<span class="org-function-name">Configuration</span>:
[settings]
<span class="org-variable-name">arch</span>=x86_64
<span class="org-variable-name">arch_build</span>=x86_64
<span class="org-variable-name">build_type</span>=Debug
<span class="org-variable-name">compiler</span>=Visual Studio
compiler.runtime=MDd
compiler.version=15
<span class="org-variable-name">os</span>=Windows
<span class="org-variable-name">os_build</span>=Windows
[options]
[build_requires]
[env]

 ...  ...  ...  ...  ... 

Decompressing conan_package.tgz: 100%|&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;&#9608;| 967k/967k [00:00&lt;00:00, 15.0MB/s]
libcurl/7.61.1@bincrafters/stable: Package installed 8f5289d9807917ac37fa3752916c824d2a8061ad
</pre>
</div>

<p>
Install debug and release build of a library compiling it from source:
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; conan install libcurl/7.61.1@bincrafters/stable -s <span class="org-variable-name">build_type</span>=None 
</pre>
</div>

<p>
Install  release builds of libcurl for x86 target (32 bits):
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; conan install libcurl/7.61.1@bincrafters/stable -s <span class="org-variable-name">build_type</span>=Release -s <span class="org-variable-name">arch</span>=x86
<span class="org-function-name">Configuration</span>:
[settings]
<span class="org-variable-name">arch</span>=x86
<span class="org-variable-name">arch_build</span>=x86_64
<span class="org-variable-name">build_type</span>=Release
<span class="org-variable-name">compiler</span>=Visual Studio
compiler.runtime=MD
compiler.version=15
<span class="org-variable-name">os</span>=Windows
<span class="org-variable-name">os_build</span>=Windows
[options]
[build_requires]
[env]
</pre>
</div>

<p>
List installed library in local cache:
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; conan search
Existing package recipes:

OpenSSL/1.0.2n@conan/stable
OpenSSL/1.0.2o@conan/stable
Poco/1.9.0@pocoproject/stable
gtest/1.8.1@bincrafters/stable
libcurl/7.61.1@bincrafters/stable
zlib/1.2.11@conan/stable
</pre>
</div>
</div>
</div>

<div id="outline-container-org1d02f29" class="outline-4">
<h4 id="org1d02f29"><span class="section-number-4">6.8.6</span> Show pacakge information</h4>
<div class="outline-text-4" id="text-6-8-6">
<div class="org-src-container">
<pre class="src src-sh">&#955; conan info libcurl/7.61.1@bincrafters/stable

OpenSSL/1.0.2n@conan/stable
    ID: 606fdb601e335c2001bdf31d478826b644747077
    BuildID: None
    Remote: conan-center=https://conan.bintray.com
    URL: http://github.com/lasote/conan-openssl
    License: The current OpenSSL licence is an <span class="org-string">'Apache style'</span> license: https://www.openssl.org/source/license.html
    Recipe: Cache
    Binary: Cache
    Binary remote: conan-center
    Creation date: 2018-05-10 07:47:33
    Required by:
        libcurl/7.61.1@bincrafters/stable
    Requires:
        zlib/1.2.11@conan/stable
libcurl/7.61.1@bincrafters/stable
    ID: ae6191bc1194317ff7cdbc84d4d302ab49975618
    BuildID: None
    Remote: conan-center=https://conan.bintray.com
    URL: http://github.com/bincrafters/conan-libcurl
    Homepage: http://curl.haxx.se
    License: MIT
    Author: Bincrafters <a href="mailto:bincrafters%40gmail.com">&lt;bincrafters@gmail.com&gt;</a>
    Recipe: Cache
    Binary: Cache
    Binary remote: conan-center
    Creation date: 2018-11-16 03:42:43
    Required by:
        PROJECT
    Requires:
        OpenSSL/1.0.2n@conan/stable
        zlib/1.2.11@conan/stable
zlib/1.2.11@conan/stable
    ID: 6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7
    BuildID: None
    Remote: conan-center=https://conan.bintray.com
    URL: http://github.com/conan-community/conan-zlib
    Homepage: https://zlib.net
    License: Zlib
    Author: Conan Community
    Recipe: Cache
    Binary: Cache
    Binary remote: conan-center
    Creation date: 2018-12-21 02:01:48
    Required by:
        OpenSSL/1.0.2n@conan/stable
        libcurl/7.61.1@bincrafters/stable
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5a4e577" class="outline-3">
<h3 id="org5a4e577"><span class="section-number-3">6.9</span> Example CMake/Conan project</h3>
<div class="outline-text-3" id="text-6-9">
</div>
<ol class="org-ol">
<li><a id="orgad94ff3"></a>Project Files<br />
<div class="outline-text-5" id="text-6-9-0-1">
<p>
Gist: <a href="https://gist.github.com/caiorss/5067e2981488aff1b5765b02adbfdffc">https://gist.github.com/caiorss/5067e2981488aff1b5765b02adbfdffc</a> 
</p>

<p>
File: <b>conanfile.txt</b> 
</p>
<ul class="org-ul">
<li>Conan project file.</li>
<li>Poco:shared=False =&gt; Static link the library.</li>
</ul>

<div class="org-src-container">
<pre class="src src-conf">[<span class="org-type">requires</span>]
Poco/1.9.0@pocoproject/stable
gtest/1.8.1@bincrafters/stable

[<span class="org-type">generators</span>]
cmake

[<span class="org-type">options</span>]
<span class="org-variable-name">Poco:shared</span>=False
</pre>
</div>

<p>
File: <b>CMakeLists.txt</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)

<span class="org-comment">#========== Global Configurations =============#</span>
<span class="org-comment">#----------------------------------------------#</span>
<span class="org-function-name">project</span>(ConanTesting CXX)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ===&gt;&gt; Conan bootstrap  ===============</span>

<span class="org-comment"># Automatically install conan packages if they are not installed.</span>
<span class="org-comment"># Assumptions:</span>
<span class="org-comment">#  + The file conanfile.txt is in this directory</span>
<span class="org-comment">#  + This CMakeLists.txt file is in the project ROOT directory.</span>
<span class="org-comment">#  + The conan application is the project $PATH environment variable</span>
<span class="org-comment">#    and accessible from command line.</span>
<span class="org-comment">#-------------------------------------------------</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conanbuildinfo.cmake"</span>)
  <span class="org-function-name">execute_process</span>(
    COMMAND           conan install . --install-folder <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}"</span>
    WORKING_DIRECTORY ${<span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span>}
 )
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conanbuildinfo.cmake)
<span class="org-function-name">conan_basic_setup</span>()

<span class="org-comment">#========== Targets Configurations ============#</span>

<span class="org-function-name">message</span>(<span class="org-string">" [INFO] =&gt;&gt; CONAN_LIBS = ${</span><span class="org-variable-name">CONAN_LIBS</span><span class="org-string">} "</span> )

<span class="org-comment"># ==&gt; Target for testing POCO Libraries </span>
<span class="org-function-name">add_executable</span>(poco demo-poco.cpp)
<span class="org-function-name">target_link_libraries</span>(poco PRIVATE ${<span class="org-variable-name">CONAN_LIBS</span>})

<span class="org-comment"># ==&gt; Target for testing GogleTest </span>
<span class="org-function-name">add_executable</span>(agtest demo-gtest.cpp)
<span class="org-function-name">target_link_libraries</span>(agtest PRIVATE ${<span class="org-variable-name">CONAN_LIBS</span>})

<span class="org-comment"># Add target to run executable </span>
<span class="org-function-name">add_custom_target</span>(run-poco
  COMMAND poco 
  DEPENDS poco 
  WORKING_DIRECTORY ${<span class="org-variable-name">CMAKE_PROJECT_DIR</span>}
  )

<span class="org-function-name">add_custom_target</span>(run-gtest
  COMMAND agtest 
  DEPENDS agtest 
  WORKING_DIRECTORY ${<span class="org-variable-name">CMAKE_PROJECT_DIR</span>}
  )

<span class="org-function-name">install</span>(TARGETS poco agtest  DESTINATION ./bin)
</pre>
</div>

<p>
File: <b>demo-gtest.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">Poco/Process.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gtest/gtest.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">auto</span> <span class="org-variable-name">FunctionObject</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 5 * n + 4; <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>testA, FunctionObject<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>19, FunctionObject<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>testC, FunctionObject<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>123, FunctionObject<span class="org-rainbow-delimiters-depth-3">(</span>5<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>testB, FunctionObject<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>24, FunctionObject<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: <b>demo-poco.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">Poco/Process.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Running POCO Libraries Launch."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Poco Libraries are AWESOME!"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-preprocessor">    #if</span> <span class="org-negation-char">!</span><span class="org-preprocessor">defined</span><span class="org-rainbow-delimiters-depth-2">(</span>_WIN32<span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] I am running on some Unix-like Operating System."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">Poco</span>::<span class="org-constant">Process</span>::launch<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"cat"</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"/etc/protocols"</span><span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-preprocessor">   #else</span>
      <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] I am running on Windows."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">Poco</span>::<span class="org-constant">Process</span>::launch<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"notepad.exe"</span>, <span class="org-rainbow-delimiters-depth-3">{}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-preprocessor">   #endif</span>
   <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</li>
<li><a id="org66bb84a"></a>Building on Windows<br />
<div class="outline-text-5" id="text-6-9-0-2">
<p>
Install Conan packages in the current project at directory ./build/ -
the packages are download from the default remote repository and
stored at the Conan cache. Once they were downloaded, further usages
of those packages will use them from the cache.
</p>

<div class="org-src-container">
<pre class="src src-sh">$  conan install . --install-folder build 

<span class="org-function-name">Configuration</span>:
[settings]
<span class="org-variable-name">arch</span>=x86_64
<span class="org-variable-name">arch_build</span>=x86_64
<span class="org-variable-name">build_type</span>=Release
<span class="org-variable-name">compiler</span>=Visual Studio
compiler.runtime=MD
compiler.version=15
<span class="org-variable-name">os</span>=Windows
<span class="org-variable-name">os_build</span>=Windows
[options]
[build_requires]
[env]

gtest/1.8.1@bincrafters/stable: WARN: Package is corrupted, removing folder: C:\Users\archbox<span class="org-string">\.</span>conan\data\gtest\1.8.1\bincrafters\stable\package\3f7b6d42d6c995a23d193db1f844ed23ae943226
<span class="org-function-name">PROJECT</span>: Installing C:\Users\archbox\conan-test\conanfile.txt
Requirements
    OpenSSL/1.0.2o@conan/stable from <span class="org-string">'conan-center'</span> - Cache
    Poco/1.9.0@pocoproject/stable from <span class="org-string">'conan-center'</span> - Cache
    gtest/1.8.1@bincrafters/stable from <span class="org-string">'conan-center'</span> - Cache
    zlib/1.2.11@conan/stable from <span class="org-string">'conan-center'</span> - Cache
Packages
    OpenSSL/1.0.2o@conan/stable:606fdb601e335c2001bdf31d478826b644747077 - Download
    Poco/1.9.0@pocoproject/stable:09378ed7f51185386e9f04b212b79fe2d12d005c - Download
    gtest/1.8.1@bincrafters/stable:3f7b6d42d6c995a23d193db1f844ed23ae943226 - Download
    zlib/1.2.11@conan/stable:6cc50b139b9c3d27b3e9042d5f5372d327b3a9f7 - Download

 ... ....    ... ....    ... ....    ... ....    ... ....    ... ....    ... .... 

Poco/1.9.0@pocoproject/stable: Package installed 09378ed7f51185386e9f04b212b79fe2d12d005c
<span class="org-function-name">PROJECT</span>: Generator cmake created conanbuildinfo.cmake
<span class="org-function-name">PROJECT</span>: Generator txt created conanbuildinfo.txt
<span class="org-function-name">PROJECT</span>: Generated conaninfo.txt
<span class="org-function-name">PROJECT</span>: Generated graphinfo
</pre>
</div>

<p>
List ./build directory: 
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; ls build<span class="org-sh-escaped-newline">\</span>
conanbuildinfo.cmake  conanbuildinfo.txt  conaninfo.txt  graph_info.json
</pre>
</div>

<p>
Check project packages:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ conan info .

PROJECT
    ID: 78e985959974aade35877b722f1e41355f5575f4
    BuildID: None
    Requires:
        Poco/1.9.0@pocoproject/stable
OpenSSL/1.0.2o@conan/stable
    ID: 35ea421ef4c1d32898da44c28e3cc900bc6459dc
    BuildID: None
    Remote: conan-center=https://conan.bintray.com
    URL: http://github.com/lasote/conan-openssl
    License: The current OpenSSL licence is an <span class="org-string">'Apache style'</span> license: https://www.openssl.org/source/license.html
    Recipe: Cache
    Binary: Cache
    Binary remote: conan-center
    Creation date: 2018-08-27 04:12:47
    Required by:
        Poco/1.9.0@pocoproject/stable
    Requires:
        zlib/1.2.11@conan/stable
Poco/1.9.0@pocoproject/stable
    ID: 67516f54281f3227d74b2b66f92537d98ff1103d
    BuildID: None
    Remote: conan-center=https://conan.bintray.com
    URL: http://github.com/pocoproject/conan-poco
    License: The Boost Software License 1.0
    Recipe: Cache
    Binary: Cache
    Binary remote: conan-center
    Creation date: 2018-08-30 08:28:08
    Required by:
        PROJECT
    Requires:
        OpenSSL/1.0.2o@conan/stable
zlib/1.2.11@conan/stable
    ID: 1d877a3df840030e6a8abb74c5ffb9088d08b47a
    BuildID: None
    Remote: conan-center=https://conan.bintray.com
    URL: http://github.com/conan-community/conan-zlib
    Homepage: https://zlib.net
    License: Zlib
    Author: Conan Community
    Recipe: Cache
    Binary: Cache
    Binary remote: conan-center
    Creation date: 2018-12-21 07:01:48
    Required by:
        OpenSSL/1.0.2o@conan/stable
</pre>
</div>

<p>
Configure CMake on Windows for 64 bits target:
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; cmake -H. -Bbuild -G <span class="org-string">"Visual Studio 15 2017 Win64"</span> -DCMAKE_INSTALL_PREFIX=.
</pre>
</div>

<p>
Compile with release build and install at ./bin:
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; cmake --build build --target install --config Release

  ...  ...  ...  ...  ...  ...  ...  ...  ... 
<span class="org-function-name">PostBuildEvent</span>:
  setlocal
  <span class="org-string">"C:\Program Files\CMake\bin\cmake.exe"</span> -DBUILD_TYPE=Release -P cmake_install.cmake
  <span class="org-keyword">if</span> %errorlevel% neq 0 goto :cmEnd
  :cmEnd
  endlocal &amp; call :cmErrorLevel %errorlevel% &amp; goto :cmDone
  :cmErrorLevel
  <span class="org-keyword">exit</span> /b %1
  :cmDone
  <span class="org-keyword">if</span> %errorlevel% neq 0 goto :VCEnd
  :VCEnd
  -- Install configuration: <span class="org-string">"Release"</span>
  -- Installing: C:/Users/archbox/conan-test/./bin/poco.exe
  -- Installing: C:/Users/archbox/conan-test/./bin/agtest.exe
<span class="org-function-name">FinalizeBuildStatus</span>:
  Deleting file <span class="org-string">"x64\Release\INSTALL\INSTALL.tlog\unsuccessfulbuild"</span>.
  Touching <span class="org-string">"x64\Release\INSTALL\INSTALL.tlog\INSTALL.lastbuildstate"</span>.
Done Building Project <span class="org-string">"C:\Users\archbox\conan-test\build\install.vcxproj"</span> (default targets)<span class="org-builtin">.</span>


Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:11.72
</pre>
</div>

<p>
List directory ./bin 
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; where ls
<span class="org-function-name">C</span>:\Program Files\Git\usr\bin\ls.exe

&#955; ls bin
agtest.exe*  poco.exe*
</pre>
</div>

<p>
Run application bin/agtest.exe:
</p>

<div class="org-src-container">
<pre class="src src-sh">&#955; bin\agtest.exe
Running main() from gmock_main.cc
[==========] Running 3 tests from 3 test cases.
[----------] Global test environment set-up.
[----------] 1 test from testA
[ RUN      ] testA.FunctionObject
[       OK ] testA.FunctionObject (0 ms)
[----------] 1 test from testA (0 ms total)

[----------] 1 test from testC
[ RUN      ] testC.FunctionObject
<span class="org-function-name">C</span>:\Users\archbox\conan-test\demo-gtest.cpp(14): error: Expected equality of these values:
  123
  FunctionObject(5)
    Which is: 29
[  FAILED  ] testC.FunctionObject (0 ms)
[----------] 1 test from testC (0 ms total)

[----------] 1 test from testB
[ RUN      ] testB.FunctionObject
[       OK ] testB.FunctionObject (0 ms)
[----------] 1 test from testB (0 ms total)

[----------] Global test environment tear-down
[==========] 3 tests from 3 test cases ran. (4 ms total)
[  PASSED  ] 2 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] testC.FunctionObject

 1 FAILED TEST

</pre>
</div>

<p>
Note: Due to the following code in CMakeLists.txt, it is not needed to
run the command conan-install before cmake to install the packages as
this block will automatically run the conan-install command if the
packages are not installed in the project ./build directory. It allows
to configure CMake in a single step with $ cmake -Bbuild &#x2026; or open the
project in an IDE which supports CMake without running conan directly.
</p>

<ul class="org-ul">
<li>Summary: with this piece of code, it is not necessary to run conan,
Cmake will run it automatically as a subprocess.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conanbuildinfo.cmake"</span>)
  <span class="org-function-name">execute_process</span>(
    COMMAND           conan install . --install-folder <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}"</span>
    WORKING_DIRECTORY ${<span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span>}
 )
<span class="org-keyword">endif</span>()
</pre>
</div>
</div>
</li>
<li><a id="org7441f39"></a>Building on Linux<br />
<div class="outline-text-5" id="text-6-9-0-3">
<p>
Clone gist:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://gist.github.com/caiorss/5067e2981488aff1b5765b02adbfdffc conan-test2
Cloning into <span class="org-string">'conan-test2'</span>...
<span class="org-function-name">remote</span>: Enumerating objects: 8, done.
<span class="org-function-name">remote</span>: Counting objects: 100% (8/8), done.
<span class="org-function-name">remote</span>: Compressing objects: 100% (7/7), done.
<span class="org-function-name">remote</span>: Total 8 (delta 1), reused 3 (delta 1), pack-reused 0
Unpacking objects: 100% (8/8), done.

</pre>
</div>

<p>
List directory:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ls
CMakeLists.txt  conanfile.txt  demo-gtest.cpp  demo-poco.cpp
</pre>
</div>

<p>
CMake configuration step:
</p>
<ul class="org-ul">
<li>Note: The CMakeLists.txt file is set to automatically run Conan in the
build directory.</li>
<li>Note: The packages weren't download because they are already
cached.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -Bbuild -G Ninja -DCMAKE_INSTALL_PREFIX=.
-- Current conanbuildinfo.cmake directory: /home/archbox/root-scripts/conan-test2/build
-- Conan: Compiler GCC&gt;=5, checking major version 8
-- Conan: Checking correct version: 8
-- Conan: Using cmake global configuration
-- Conan: Adjusting default RPATHs Conan policies
-- Conan: Adjusting language standard
 [INFO] =&gt;&gt; CONAN_LIBS = PocoMongoDB;PocoNet;PocoNetSSL;PocoCrypto;PocoData;PocoDataSQLite;PocoZip;PocoUtil;PocoXML;PocoJSON;PocoFoundation;rt;gmock_main;gmock;gtest;pthread;ssl;crypto;dl;z 
-- Configuring done
-- Generating done
-- Build files have been written to: /home/archbox/root-scripts/conan-test2/build


$ ls build/
bin/         CMakeCache.txt        conanbuildinfo.txt  rules.ninja
CMakeFiles/  cmake_install.cmake   conaninfo.txt
build.ninja  conanbuildinfo.cmake  graph_info.json
</pre>
</div>

<p>
Run all targets: (build all executables and libraries)
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target
[4/4] Linking CXX executable bin/agtest
</pre>
</div>

<p>
Install: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target install
[0/1] Install the project...
-- Install configuration: <span class="org-string">""</span>
-- Installing: /home/archbox/root-scripts/conan-test2/./bin/poco
-- Set runtime path of <span class="org-string">"/home/archbox/root-scripts/conan-test2/./bin/poco"</span> to <span class="org-string">""</span>
-- Installing: /home/archbox/root-scripts/conan-test2/./bin/agtest
-- Set runtime path of <span class="org-string">"/home/archbox/root-scripts/conan-test2/./bin/agtest"</span> to <span class="org-string">""</span>

$ ls bin/
agtest*  poco*
</pre>
</div>

<p>
Run the executable bin/agtest.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ bin/agtest --gtest_list_tests
Running main() from gmock_main.cc
testA.
  FunctionObject
testC.
  FunctionObject
testB.
  FunctionObject


$ bin/agtest 
Running main() from gmock_main.cc
[==========] Running 3 tests from 3 test cases.
[----------] Global test environment set-up.
[----------] 1 test from testA
[ RUN      ] testA.FunctionObject
[       OK ] testA.FunctionObject (0 ms)
[----------] 1 test from testA (0 ms total)

... ... .... 

 1 FAILED TEST
</pre>
</div>

<p>
Run the executable bin/poco
</p>

<pre class="example">
$ # /etc/protocols:
# $Id: protocols,v 1.12 2016/07/08 12:27 ovasik Exp $
#
# Internet (IP) protocols
#
#	from: @(#)protocols	5.1 (Berkeley) 4/17/89
#
# Updated for NetBSD based on RFC 1340, Assigned Numbers (July 1992).
# Last IANA update included dated 2011-05-03
#
# See also http://www.iana.org/assignments/protocol-numbers

ip	0	IP		# internet protocol, pseudo protocol number
hopopt	0	HOPOPT		# hop-by-hop options for ipv6

... .... ... ... .... ... ... .... ... ... .... ... ... .... ... 
</pre>
</div>
</li>
</ol>
</div>
<div id="outline-container-orgffc2793" class="outline-3">
<h3 id="orgffc2793"><span class="section-number-3">6.10</span> Example CMake/Conan project with conan-cmake module</h3>
<div class="outline-text-3" id="text-6-10">
</div>
<ol class="org-ol">
<li><a id="org6376e75"></a>Project Files<br />
<div class="outline-text-5" id="text-6-10-0-1">
<p>
This sample project uses the CMake wrapper <a href="https://github.com/conan-io/cmake-conan">cmake-conan</a> for integrating
Conan and CMake without the file conanfile.txt or running conan from
command line before using CMake. 
</p>

<p>
CMake Module cmake-conan: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/conan-io/cmake-conan">https://github.com/conan-io/cmake-conan</a></li>
</ul>

<p>
Project Gist: 
</p>
<ul class="org-ul">
<li><a href="https://gist.github.com/caiorss/7b0732f5de5ebc40981521e63a122d8e">https://gist.github.com/caiorss/7b0732f5de5ebc40981521e63a122d8e</a></li>
</ul>

<p>
Packages used in this sample project: (Conan reference)
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan/gtest%3Abincrafters/1.8.1%3Astable">gtest/1.8.1@bincrafters/stable</a></li>
<li><a href="https://bintray.com/pocoproject/conan/Poco%3Apocoproject/1.9.0%3Astable">Poco/1.9.0@pocoproject/stable</a></li>
</ul>


<p>
This project can be downloaded with: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Clone repository </span>
$ git clone https://gist.github.com/caiorss/7b0732f5de5ebc40981521e63a122d8e gist 
$ cd gist 

<span class="org-comment-delimiter"># </span><span class="org-comment">Open in QTCreator IDE </span>
$ qtcrator CMakeLists.txt 
</pre>
</div>

<p>
<b>File: CMakeLists.txt</b> 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)

<span class="org-comment">#========== Global Configurations =============#</span>
<span class="org-comment">#----------------------------------------------#</span>
<span class="org-function-name">project</span>(ConanTesting CXX)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES

                <span class="org-comment"># Libraries to be installed locally</span>
                Poco/1.9.0@pocoproject/stable
                gtest/1.8.1@bincrafters/stable

                BASIC_SETUP
                BUILD missing
                )

<span class="org-comment">#========== Find Packages =====================#</span>

<span class="org-function-name">find_package</span>(GTest REQUIRED)

<span class="org-comment"># find_package(Poco  REQUIRED Foundation)</span>

<span class="org-comment">#========== Targets Configurations ============#</span>


<span class="org-comment"># ==&gt; Target for testing POCO Libraries </span>
<span class="org-function-name">add_executable</span>(poco demo-poco.cpp)
<span class="org-function-name">target_link_libraries</span>(poco PRIVATE ${<span class="org-variable-name">CONAN_LIBS</span>})

<span class="org-comment"># ==&gt; Target for testing GogleTest </span>
<span class="org-function-name">add_executable</span>(agtest demo-gtest.cpp)
<span class="org-function-name">target_link_libraries</span>(agtest PRIVATE GTest::GTest GTest::Main)
<span class="org-function-name">add_test</span>(MyGoogleTest agtest)

<span class="org-function-name">install</span>(TARGETS poco agtest  DESTINATION ./bin)
</pre>
</div>

<p>
<b>File: demog-gtest.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">Poco/Process.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gtest/gtest.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">auto</span> <span class="org-variable-name">FunctionObject</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 5 * n + 4; <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>testA, FunctionObject<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
        EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>19, FunctionObject<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>testC, FunctionObject<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
        EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>123, FunctionObject<span class="org-rainbow-delimiters-depth-3">(</span>5<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>testB, FunctionObject<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
        EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>24, FunctionObject<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>File: poco-test.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">Poco/Process.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Running POCO Libraries Launch."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Poco Libraries are AWESOME!"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-preprocessor">    #if</span> <span class="org-negation-char">!</span><span class="org-preprocessor">defined</span><span class="org-rainbow-delimiters-depth-2">(</span>_WIN32<span class="org-rainbow-delimiters-depth-2">)</span>
      <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] I am running on some Unix-like Operating System."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">Poco</span>::<span class="org-constant">Process</span>::launch<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"cat"</span>, <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"/etc/protocols"</span><span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-preprocessor">   #else</span>
      <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] I am running on Windows."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">Poco</span>::<span class="org-constant">Process</span>::launch<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"notepad.exe"</span>, <span class="org-rainbow-delimiters-depth-3">{}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-preprocessor">    #endif</span>

   <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</li>

<li><a id="org18ced0c"></a>Building on Linux/Unix<br />
<div class="outline-text-5" id="text-6-10-0-2">
<p>
Clone repository: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://gist.github.com/caiorss/7b0732f5de5ebc40981521e63a122d8e gist 
Cloning into <span class="org-string">'gist'</span>...
<span class="org-function-name">remote</span>: Enumerating objects: 8, done.
<span class="org-function-name">remote</span>: Counting objects: 100% (8/8), done.
<span class="org-function-name">remote</span>: Compressing objects: 100% (8/8), done.
<span class="org-function-name">remote</span>: Total 8 (delta 1), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (8/8), done.
</pre>
</div>

<p>
Show project files: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ls gist/
CMakeLists.txt  demo-gtest.cpp  demo-poco.cpp
</pre>
</div>

<p>
CMake - configuration =&gt; Generate project files. 
</p>

<ul class="org-ul">
<li>$ cmake -Hgist -Bcache -GNinja -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=.
<ul class="org-ul">
<li>-Hgist
<ul class="org-ul">
<li>=&gt; Set source code location to directory ./gist</li>
</ul></li>
<li>-Bcache
<ul class="org-ul">
<li>=&gt; Set binary output directory to ./cache</li>
</ul></li>
<li>-GNinja
<ul class="org-ul">
<li>=&gt; Use Ninja build instead of Makefile</li>
</ul></li>
<li>-DCMAKE_BUILD_TYPE=Debug
<ul class="org-ul">
<li>=&gt; Enable debug build which generates debugging symbols and disable optimization.</li>
</ul></li>
<li>-DCMAKE_INSTALL_PREFIX=.
<ul class="org-ul">
<li>=&gt; Set install directory to current directory (PWD)</li>
</ul></li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -Hgist -Bcache -GNinja -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_PREFIX=. 

-- The CXX compiler identification is GNU 8.3.1
-- Check for working CXX compiler: /usr/lib64/ccache/c++
-- Check for working CXX compiler: /usr/lib64/ccache/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Downloading conan.cmake from https://github.com/conan-io/cmake-conan
-- Conan: Automatic detection of conan settings from cmake
-- Conan: <span class="org-variable-name">Settings</span>= -s;<span class="org-variable-name">build_type</span>=Debug;-s;<span class="org-variable-name">compiler</span>=gcc;-s;compiler.version=8;-s;compiler.libcxx=libstdc++11
-- Conan executing: conan install . -s <span class="org-variable-name">build_type</span>=Debug -s <span class="org-variable-name">compiler</span>=gcc -s compiler.version=8 -s compiler.libcxx=libstdc++11 -g=cmake --build=missing
-- Configuration:
[settings]
<span class="org-variable-name">arch</span>=x86_64
<span class="org-variable-name">arch_build</span>=x86_64
<span class="org-variable-name">build_type</span>=Debug
<span class="org-variable-name">compiler</span>=gcc
compiler.libcxx=libstdc++11
compiler.version=8
<span class="org-variable-name">os</span>=Linux
<span class="org-variable-name">os_build</span>=Linux
[options]
[build_requires]
[env]

<span class="org-function-name">conanfile.txt</span>: Installing package
Requirements
    OpenSSL/1.0.2o@conan/stable from <span class="org-string">'conan-center'</span> - Cache
    Poco/1.9.0@pocoproject/stable from <span class="org-string">'conan-center'</span> - Cache
    gtest/1.8.1@bincrafters/stable from <span class="org-string">'conan-center'</span> - Cache
    zlib/1.2.11@conan/stable from <span class="org-string">'conan-center'</span> - Cache
Packages
    OpenSSL/1.0.2o@conan/stable:9c111a8074926a7147291383e3d366f41bac77b3 - Cache
    Poco/1.9.0@pocoproject/stable:5d73f6d80f86b797938bd4121e0ee66b325e7063 - Cache
    gtest/1.8.1@bincrafters/stable:884a98ecd973519f5d71b74c29f9e7ddcbd902d4 - Cache
    zlib/1.2.11@conan/stable:761432f3453a17c960259b5b2605153e3bcffd7d - Cache

gtest/1.8.1@bincrafters/stable: Already installed!
zlib/1.2.11@conan/stable: Already installed!
OpenSSL/1.0.2o@conan/stable: Already installed!
Poco/1.9.0@pocoproject/stable: Already installed!
<span class="org-function-name">conanfile.txt</span>: Generator cmake created conanbuildinfo.cmake
<span class="org-function-name">conanfile.txt</span>: Generator txt created conanbuildinfo.txt
<span class="org-function-name">conanfile.txt</span>: Generated conaninfo.txt
<span class="org-function-name">conanfile.txt</span>: Generated graphinfo

-- Conan: Loading conanbuildinfo.cmake
-- Conan: Adjusting output directories
-- Conan: Using cmake global configuration
-- Conan: Adjusting default RPATHs Conan policies
-- Conan: Adjusting language standard
-- Current conanbuildinfo.cmake directory: /home/archbox/projects/cache
-- Conan: Compiler GCC&gt;=5, checking major version 8
-- Conan: Checking correct version: 8
-- Found GTest: /home/archbox/.conan/data/gtest/1.8.1/bincrafters/stable/package/884a98ecd973519f5d71b74c29f9e7ddcbd902d4/lib/libgtestd.a  
-- Looking for C++ include pthread.h
-- Looking for C++ include pthread.h - found
-- Looking for pthread_create
-- Looking for pthread_create - not found
-- Looking for pthread_create<span class="org-keyword"> in</span> pthreads
-- Looking for pthread_create<span class="org-keyword"> in</span> pthreads - not found
-- Looking for pthread_create<span class="org-keyword"> in</span> pthread
-- Looking for pthread_create<span class="org-keyword"> in</span> pthread - found
-- Found Threads: TRUE  
-- Configuring done
-- Generating done
-- Build files have been written to: /home/archbox/projects/cache

</pre>
</div>

<p>
Show cache directory: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree -L 2 cache
cache
&#9500;&#9472;&#9472; bin
&#9474;&#160;&#160; &#9500;&#9472;&#9472; agtest
&#9474;&#160;&#160; &#9492;&#9472;&#9472; poco
&#9500;&#9472;&#9472; build.ninja
&#9500;&#9472;&#9472; CMakeCache.txt
&#9500;&#9472;&#9472; CMakeFiles
&#9474;&#160;&#160; &#9500;&#9472;&#9472; 3.14.3
&#9474;&#160;&#160; &#9500;&#9472;&#9472; agtest.dir
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CheckLibraryExists
&#9474;&#160;&#160; &#9500;&#9472;&#9472; cmake.check_cache
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeError.log
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeOutput.log
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeTmp
&#9474;&#160;&#160; &#9500;&#9472;&#9472; feature_tests.bin
&#9474;&#160;&#160; &#9500;&#9472;&#9472; feature_tests.cxx
&#9474;&#160;&#160; &#9500;&#9472;&#9472; poco.dir
&#9474;&#160;&#160; &#9492;&#9472;&#9472; TargetDirectories.txt
&#9500;&#9472;&#9472; cmake_install.cmake
&#9500;&#9472;&#9472; conanbuildinfo.cmake
&#9500;&#9472;&#9472; conanbuildinfo.txt
&#9500;&#9472;&#9472; conan.cmake
&#9500;&#9472;&#9472; conanfile.txt
&#9500;&#9472;&#9472; conaninfo.txt
&#9500;&#9472;&#9472; graph_info.json
&#9492;&#9472;&#9472; rules.ninja

7 directories, 18 files
</pre>
</div>

<p>
Build all targets: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build cache --target 
[4/4] Linking CXX executable bin/agtest
</pre>
</div>

<p>
Run executable agtest (GoogleTest)
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cache/bin/agtest  
</pre>
</div>

<p>
Run executable poco
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cache/bin/poco 
</pre>
</div>

<p>
Install: 
</p>

<div class="org-src-container">
<pre class="src src-sh"> $ cmake --build cache --target install
 [0/1] Install the project...
 -- Install configuration: <span class="org-string">"Debug"</span>
 -- Installing: /home/archbox/projects/./bin/poco
 -- Set runtime path of <span class="org-string">"/home/archbox/projects/./bin/poco"</span> to <span class="org-string">""</span>
 -- Installing: /home/archbox/projects/./bin/agtest
 -- Set runtime path of <span class="org-string">"/home/archbox/projects/./bin/agtest"</span> to <span class="org-string">""</span>

$ ls bin/
agtest*  poco*

<span class="org-comment-delimiter"># </span><span class="org-comment">Run app ./agtest </span>
$ bin/agtest 

<span class="org-comment-delimiter"># </span><span class="org-comment">Run app poco </span>
$ bin/poco 
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-orga42950e" class="outline-3">
<h3 id="orga42950e"><span class="section-number-3">6.11</span> Make conan-cmake module globally available</h3>
<div class="outline-text-3" id="text-6-11">
<p>
The <a href="https://github.com/conan-io/cmake-conan">cmake-conan</a> cmake module can be installed globally in the system
by moving the file conan.cmake to the default location where CMake
built-in modules are stored. 
</p>

<p>
Those locations are:
</p>

<ul class="org-ul">
<li>For Linux
<ul class="org-ul">
<li><i>/usr/share/cmake/Modules</i></li>
</ul></li>

<li>For Mac OSX
<ul class="org-ul">
<li>Similar path schema to Linux</li>
</ul></li>

<li>For Windows NT
<ul class="org-ul">
<li>C:\\Program Files (x86)\CMake\Modules</li>
</ul></li>
</ul>

<p>
Installation on Linux:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ mkdir -p /usr/share/cmake/Modules/custom &amp;&amp; <span class="org-builtin">cd</span> /usr/share/cmake/Modules/custom
$ curl -O https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake
</pre>
</div>

<p>
Project Usage: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>File - CMakeLists.txt</label><pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(test-package)

<span class="org-comment"># ============= Conan Boosttrap =========================#</span>
<span class="org-function-name">include</span>(custom/conan)

<span class="org-function-name">set</span>(CONAN_PROFILE default)
<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                   Poco/1.9.0@pocoproject/stable
                   gtest/1.8.1@bincrafters/stable
                BASIC_SETUP
                BUILD missing)

<span class="org-comment"># ============= Find Package ===========================#</span>
<span class="org-function-name">add_executable</span>(test-package <span class="org-string">"main.cpp"</span>)
<span class="org-function-name">target_link_libraries</span>(test-package hello)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org87c9b9d" class="outline-2">
<h2 id="org87c9b9d"><span class="section-number-2">7</span> Vcpkg package manager</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-orgbe85076" class="outline-3">
<h3 id="orgbe85076"><span class="section-number-3">7.1</span> Documentation</h3>
<div class="outline-text-3" id="text-7-1">
<ul class="org-ul">
<li>VCPKG Faq: <a href="https://github.com/Microsoft/vcpkg/blob/master/docs/about/faq.md">Frequently Asked Questions</a></li>
</ul>
</div>
</div>

<div id="outline-container-org3703193" class="outline-3">
<h3 id="org3703193"><span class="section-number-3">7.2</span> Windows Vcpkg Intallation</h3>
<div class="outline-text-3" id="text-7-2">
<p>
Assumption: Visual studio development tools are already installed.
</p>

<p>
1 Download and install VCPKG 
</p>
<ul class="org-ul">
<li>Note: Assumes that vcpkg will be installed at <code>C:\vcpkg</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cd C:<span class="org-sh-escaped-newline">\</span>
$ git clone https://github.com/Microsoft/vcpkg
$ cd vcpkg/
$ bootstrap-vcpkg.bat
</pre>
</div>

<p>
2 Run the command Windows Key + R or execute from the terminal the
   following command. It opens the environment variables Window.
</p>

<div class="org-src-container">
<pre class="src src-sh">$ rundll32.exe sysdm.cpl,EditEnvironmentVariables
</pre>
</div>

<p>
3 Set the following environment variables.
</p>

<ul class="org-ul">
<li>Set PATH to <code>%PATH%;C:\vcpkg</code></li>
<li>Add new variable VCPKG_ROOT and set it to: <code>C:\vcpkg</code></li>
</ul>


<p>
4 Test installation. Open a new terminal and enter:
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Show where is the vcpkg.exe executable </span>
<span class="org-function-name">C</span>:\Users\archbox&gt; where vcpkg
<span class="org-function-name">C</span>:\vcpkg\vcpkg.exe

<span class="org-comment-delimiter"># </span><span class="org-comment">Check whether environment variable VCPKG_ROOT is set:</span>
<span class="org-function-name">C</span>:\Users\archbox&gt; echo %VCPKG_ROOT%
<span class="org-function-name">C</span>:\vcpkg

<span class="org-comment-delimiter"># </span><span class="org-comment">List installed package </span>
<span class="org-function-name">C</span>:\Users\archbox&gt;vcpkg list
<span class="org-function-name">freeglut</span>:x64-windows                               3.0.0-5          Open source implementation of GLUT with source a...
<span class="org-function-name">freeglut</span>:x86-windows                               3.0.0-5          Open source implementation of GLUT with source a...
<span class="org-function-name">libjpeg-turbo</span>:x86-windows                          1.5.3-1          libjpeg-turbo is a JPEG image codec that uses SI...
<span class="org-function-name">libpng</span>:x86-windows                                 1.6.35-1         libpng is a library implementing an interface fo...
<span class="org-function-name">opengl</span>:x86-windows                                 0.0-5            Open Graphics Library (OpenGL)[3][4][5] is a cro...
<span class="org-function-name">pybind11</span>:x64-windows                               2.2.3-1          pybind11 is a lightweight header-only library th...
<span class="org-function-name">python3</span>:x64-windows                                3.6.4-2          The Python programming language as an embeddable...
<span class="org-function-name">zlib</span>:x86-windows                                   1.2.11-3         A compression library
</pre>
</div>
</div>
</div>

<div id="outline-container-org49f3eb7" class="outline-3">
<h3 id="org49f3eb7"><span class="section-number-3">7.3</span> Linux Vcpkg Installation</h3>
<div class="outline-text-3" id="text-7-3">
<p>
1 Create install directory 
</p>
<ul class="org-ul">
<li>In this instruction: VCPKG will be installed at directory
$HOME/opt/vcpkg or <code>/home/&lt;&lt;MY-USER&gt;/opt/vcpkg/</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ mkdir -p ~/opt &amp;&amp; <span class="org-builtin">cd</span> ~/opt
</pre>
</div>

<p>
2 Download and compile VCPKG 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://github.com/Microsoft/vcpkg
$ cd vcpkg/
$ sh bootstrap-vcpkg.sh 
</pre>
</div>

<p>
3 Run VCPKG:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./vcpkg
<span class="org-function-name">Commands</span>:
  vcpkg search [pat]              Search for packages available to be built
  vcpkg install &lt;pkg&gt;...          Install a package
  vcpkg remove &lt;pkg&gt;...           Uninstall a package
  vcpkg remove --outdated         Uninstall all out-of-date packages
  vcpkg list                      List installed packages
  vcpkg update                    Display list of packages for updating

  ... ... ... ... ... ....   ... . .. ... . .. ... .. .... 

For more help (including examples) see the accompanying README.md.
</pre>
</div>

<p>
4 Add VCPKG to search $PATH variable in order to be able to call it
from any directory.
</p>

<ul class="org-ul">
<li>Edit: ~/.bashrc or ~/.bash_profile and add the following code and
restart the REPL.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Directory where installed VCPKG</span>
<span class="org-builtin">export</span> <span class="org-variable-name">VCPKG_ROOT</span>=$<span class="org-variable-name">HOME</span>/opt/vcpkg/

<span class="org-comment-delimiter"># </span><span class="org-comment">Make vcpkg tool callable from anywhere </span>
<span class="org-builtin">export</span> <span class="org-variable-name">PATH</span>=$<span class="org-variable-name">PATH</span>:$<span class="org-variable-name">VCPKG_ROOT</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org804e494" class="outline-3">
<h3 id="org804e494"><span class="section-number-3">7.4</span> Show all available packages</h3>
<div class="outline-text-3" id="text-7-4">
<ul class="org-ul">
<li>$ vcpkg search</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ vcpkg search 

3fd                  2.6.2            C++ Framework For Fast Development
abseil               2018-11-08-1     an open-source collection designed to augment the C++ standard library. Abseil...
ace                  6.5.3            The ADAPTIVE Communication Environment
aixlog               1.2.1            Header-only C++ logging library 
alac                 2017-11-03-c3... The Apple Lossless Audio Codec (ALAC) is a lossless audio codec developed by A...
alac-decoder         0.2              ALAC C implementation of a decoder, written from reverse engineering the file ...
alembic              1.7.10           Alembic is an open framework for storing and sharing scene data that includes ...
allegro5             5.2.4.0          Allegro is a cross-platform library mainly aimed at video game and multimedia ...

 ... ...  ... ...  ... ...  ... ...  ... ...  ... ...  ... ... 

aws-sdk-cpp[waf]                      C++ SDK for the AWS waf service
aws-sdk-cpp[waf-regional]             C++ SDK for the AWS waf-regional service
aws-sdk-cpp[workdocs]                 C++ SDK for the AWS workdocs service
aws-sdk-cpp[workmail]                 C++ SDK for the AWS workmail service
aws-sdk-cpp[workspaces]               C++ SDK for the AWS workspaces service
aws-sdk-cpp[xray]                     C++ SDK for the AWS xray service

 ... ...  ... ...  ... ...  ... ...  ... ...  ... ...  ... ... 

boost-polygon        1.68.0           Boost polygon module
boost-pool           1.68.0           Boost pool module
boost-predef         1.68.0           Boost predef module
boost-preprocessor   1.68.0           Boost preprocessor module
boost-process        1.68.0           Boost process module
boost-program-opt... 1.68.0           Boost program_options module
boost-property-map   1.68.0           Boost property_map module
boost-property-tree  1.68.0           Boost property_tree module
boost-proto          1.68.0           Boost proto module
boost-ptr-container  1.68.0           Boost ptr_container module
boost-python         1.68.0-2         Boost python module
boost-qvm            1.68.0           Boost qvm module
boost-random         1.68.0           Boost random module
boost-range          1.68.0           Boost range module

 ... ...  ... ...  ... ...  ... ...  ... ...  ... ...  ... ... 

</pre>
</div>
</div>
</div>
<div id="outline-container-org3828209" class="outline-3">
<h3 id="org3828209"><span class="section-number-3">7.5</span> Removing package</h3>
<div class="outline-text-3" id="text-7-5">
<div class="org-src-container">
<pre class="src src-sh">$ vcpkg.exe remove libjpeg-turbo:x86-windows
Your feedback is important to improve Vcpkg! Please take 3 minutes to complete our survey by running: vcpkg contact --survey
The following packages will be removed:
    libjpeg-turbo:x86-windows
Removing package libjpeg-turbo:x86-windows...
Removing package libjpeg-turbo:x86-windows... done
Purging package libjpeg-turbo:x86-windows...
Purging package libjpeg-turbo:x86-windows... done
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb1428dc" class="outline-3">
<h3 id="orgb1428dc"><span class="section-number-3">7.6</span> Example: Project with spdlog and Boost Ublas</h3>
<div class="outline-text-3" id="text-7-6">
<p>
File: <b>CMakeLists.txt</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)

<span class="org-keyword">if</span>(DEFINED ENV{VCPKG_ROOT} AND NOT DEFINED CMAKE_TOOLCHAIN_FILE)
  <span class="org-function-name">set</span>(CMAKE_TOOLCHAIN_FILE <span class="org-string">"$ENV{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake"</span>
    CACHE STRING <span class="org-string">""</span>)
  <span class="org-function-name">message</span>(<span class="org-string">" [INFO] VCPKG CMAKE_TOOLCHAIN_FILE = ${</span><span class="org-variable-name">CMAKE_TOOLCHAIN_FILE</span><span class="org-string">}"</span>)
<span class="org-keyword">endif</span>()

<span class="org-comment">#========== Global Configurations =============#</span>
<span class="org-comment">#----------------------------------------------#</span>
<span class="org-function-name">project</span>(SpdLogVCPKGTest)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#========== Targets Configurations ============#</span>

<span class="org-comment"># Build an executable (Unix-like OSes generates ./AppDemo1, on</span>
<span class="org-comment"># Windows ./opengDemo1.exe)</span>
<span class="org-comment"># ..........................................</span>
<span class="org-function-name">find_package</span>(spdlog CONFIG REQUIRED)
<span class="org-function-name">add_executable</span>(AppDemo1 demo.cpp)
<span class="org-function-name">target_link_libraries</span>(AppDemo1 PRIVATE spdlog::spdlog)

<span class="org-comment"># Add target to run executable </span>
<span class="org-function-name">add_custom_target</span>(run-app
  COMMAND AppDemo1 
  DEPENDS AppDemo1 
  WORKING_DIRECTORY ${<span class="org-variable-name">CMAKE_PROJECT_DIR</span>}
  )

<span class="org-function-name">install</span>(TARGETS AppDemo1 DESTINATION ./bin)
<span class="org-keyword">if</span>(WIN32)
  <span class="org-comment"># Install DLL depedency.</span>
  <span class="org-comment"># The only way to know the required dependencies is to</span>
  <span class="org-comment"># take a look at the build tree directory &lt;&lt;BUILD-TREE&gt;&gt;\Debug</span>
  <span class="org-function-name">install</span>(FILES ${<span class="org-variable-name">CMAKE_CURRENT_BINARY_DIR</span>}/Debug/fmtd.dll
    DESTINATION <span class="org-string">"bin"</span>)
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
File: <b>demo.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">spdlog/spdlog.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">spdlog/sinks/stdout_sinks.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Headers for vectors </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/numeric/ublas/vector.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/numeric/ublas/io.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">ub</span> = <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::ublas;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">console</span> = <span class="org-constant">spdlog</span>::stdout_logger_mt<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"stdout-console"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    console-&gt;info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Testing logging information to command line"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    console-&gt;info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Welcome to spdlog version {}.{}.{} !"</span>, SPDLOG_VER_MAJOR, SPDLOG_VER_MINOR, SPDLOG_VER_PATCH<span class="org-rainbow-delimiters-depth-2">)</span>;
    console-&gt;warn<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Easy padding in numbers like {:08d}"</span>, 12<span class="org-rainbow-delimiters-depth-2">)</span>;
    console-&gt;critical<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Support for int: {0:d};  hex: {0:x};  oct: {0:o}; bin: {0:b}"</span>, 42<span class="org-rainbow-delimiters-depth-2">)</span>;
    console-&gt;info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Support for floats {:03.2f}"</span>, 1.23456<span class="org-rainbow-delimiters-depth-2">)</span>;
    console-&gt;info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Positional args are {1} {0}.."</span>, <span class="org-string">"too"</span>, <span class="org-string">"supported"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    console-&gt;info<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"{:&gt;8} aligned, {:&lt;8} aligned"</span>, <span class="org-string">"right"</span>, <span class="org-string">"left"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">ub</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">vec1</span><span class="org-rainbow-delimiters-depth-2">(</span>3, 2.2<span class="org-rainbow-delimiters-depth-2">)</span> ; vec1<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = -5.1;
    <span class="org-constant">ub</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">vec2</span><span class="org-rainbow-delimiters-depth-2">(</span>3, -1.2<span class="org-rainbow-delimiters-depth-2">)</span>; vec2<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = 1.1;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Vec1 = "</span> &lt;&lt; vec1 &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"3.0 * Vec1 = "</span> &lt;&lt; 3.0 * vec1 &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Norm1(Vec1) = "</span> &lt;&lt; <span class="org-constant">ub</span>::norm_1<span class="org-rainbow-delimiters-depth-2">(</span>vec1<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Vec2 - Vec1 = "</span> &lt;&lt; vec2 - vec1 &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n Enter RETURN to exit"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Install Vcpkg libraries Boost Ublas and spdlog: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Windows installation </span>
$ vcpkg install spdlog:x64-windows
$ vcpkg install boost-ublas:x64-windows

<span class="org-comment-delimiter"># </span><span class="org-comment">Installation on Linux, OSX, or any other Unix-like OS. </span>
$ vcpkg install spdlog
$ vcpkg install boost-ublas
</pre>
</div>

<p>
<b>Visual Studio</b>
</p>

<ul class="org-ul">
<li>The project can be compiled, modified, debugged and managed by
opening it with Visual Studio as a directory or by invoking Visual
Studio form command developer command prompt with the following
command.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">devenv &lt;PATH-TO-PROJECT DIRECTORY&gt;</span>

<span class="org-comment-delimiter"># </span><span class="org-comment">Assumes that the current directory is the project top directory</span>
$ devenv .
</pre>
</div>

<p>
All CMake Targets can be viewed from the VS Solution Explorer.
</p>


<div class="figure">
<p><a href="images/solution-explorer-visual-spdlog.png"><img src="images/solution-explorer-visual-spdlog.png" alt="solution-explorer-visual-spdlog.png" /></a>
</p>
<p><span class="figure-number">Figure 3: </span>Visual Studio Solution Explorer - CMake Targets</p>
</div>


<div class="figure">
<p><a href="images/cmake-project-vs-spdlog.png"><img src="images/cmake-project-vs-spdlog.png" alt="cmake-project-vs-spdlog.png" /></a>
</p>
<p><span class="figure-number">Figure 4: </span>Running CMake project from Visual Studio.</p>
</div>

<p>
<b>Manual Compilation - CMake Configuration Step</b>
</p>

<p>
CMake Configuration on Windows with Visual Studio building tools as backed:
</p>

<ul class="org-ul">
<li>In the project directory run:</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -Bbuild -G <span class="org-string">"Visual Studio 15 2017 Win64"</span> -DCMAKE_INSTALL_PREFIX=.
</pre>
</div>

<p>
CMake Configuration on Linux using Makefiles: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Configuration using Makefiles </span>
$ cmake -H. -Bbuild -DCMAKE_INSTALL_PREFIX=.

<span class="org-comment-delimiter"># </span><span class="org-comment">Configuration using Ninja building system </span>
$ cmake -H. -Bbuild -G Ninja -DCMAKE_INSTALL_PREFIX=.
</pre>
</div>

<p>
<b>Manual Compilation - CMake Building Step</b>
</p>

<p>
Building all CMake targets (compilation targets to build executables
and libraries):
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target 
</pre>
</div>

<p>
Run install target on Windows:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target install 

  ... ... ... ... .... 
<span class="org-function-name">PrepareForBuild</span>:
  Creating directory <span class="org-string">"x64\Debug\INSTALL\".</span>
<span class="org-string">  Creating directory "</span>x64\Debug\INSTALL\INSTALL.tlog<span class="org-string">\"</span>.
<span class="org-function-name">InitializeBuildStatus</span>:
  Creating <span class="org-string">"x64\Debug\INSTALL\INSTALL.tlog\unsuccessfulbuild"</span> because <span class="org-string">"AlwaysCreate"</span> was specified.
<span class="org-function-name">PostBuildEvent</span>:
  setlocal
  <span class="org-string">"C:\Program Files\CMake\bin\cmake.exe"</span> -DBUILD_TYPE=Debug -P cmake_install.cmake
  <span class="org-keyword">if</span> %errorlevel% neq 0 goto :cmEnd
  :cmEnd
  endlocal &amp; call :cmErrorLevel %errorlevel% &amp; goto :cmDone
  :cmErrorLevel
  <span class="org-keyword">exit</span> /b %1
  :cmDone
  <span class="org-keyword">if</span> %errorlevel% neq 0 goto :VCEnd
  :VCEnd
  -- Install configuration: <span class="org-string">"Debug"</span>
  -- Installing: C:/Users/archbox/Desktop/spdlogtest/./bin/AppDemo1.exe
  -- Up-to-date: C:/Users/archbox/Desktop/spdlogtest/bin/fmtd.dll
<span class="org-function-name">FinalizeBuildStatus</span>:
  Deleting file <span class="org-string">"x64\Debug\INSTALL\INSTALL.tlog\unsuccessfulbuild"</span>.
  Touching <span class="org-string">"x64\Debug\INSTALL\INSTALL.tlog\INSTALL.lastbuildstate"</span>.
Done Building Project <span class="org-string">"C:\Users\archbox\Desktop\spdlogtest\build\install.vcxproj"</span> (default targets)<span class="org-builtin">.</span>
Build succeeded.
 .... ... .... ... .... ... .... ...
</pre>
</div>

<p>
Run install target on Linux:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target install
[2/3] Install the project...
-- Install configuration: <span class="org-string">""</span>
-- Installing: /home/archbox/root-scripts/spdlog/./bin/AppDemo1
</pre>
</div>

<p>
Check install output on Windows:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ls bin
AppDemo1.exe*  fmtd.dll*
</pre>
</div>

<p>
Check install output on Linux:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ls bin/
AppDemo1*
</pre>
</div>

<p>
Run program: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Run on Windows</span>
bin\AppDemo1.exe 

[2019-01-09 16:17:13.360] [stdout-console] [info] Testing logging information to command line
[2019-01-09 16:17:13.361] [stdout-console] [info] Welcome to spdlog version 1.2.0 !
[2019-01-09 16:17:13.361] [stdout-console] [warning] Easy padding<span class="org-keyword"> in</span> numbers like 00000012
[2019-01-09 16:17:13.361] [stdout-console] [critical] Support for int: 42;  hex: 2a;  oct: 52; bin: 101010
[2019-01-09 16:17:13.361] [stdout-console] [info] Support for floats 1.23
[2019-01-09 16:17:13.362] [stdout-console] [info] Positional args are supported too..
[2019-01-09 16:17:13.362] [stdout-console] [info]    right aligned, left     aligned
Vec1 = [3](2.2,2.2,-5.1)
3.0 * Vec1 = [3](6.6,6.6,-15.3)
<span class="org-function-name">Norm1</span>(Vec1) = 9.5
Vec2 - Vec1 = [3](-3.4,-3.4,6.2)

 Enter RETURN to exit
</pre>
</div>
</div>
</div>

<div id="outline-container-orga5ee34e" class="outline-3">
<h3 id="orga5ee34e"><span class="section-number-3">7.7</span> Example: Project with OpenGL + FreeGLUT</h3>
<div class="outline-text-3" id="text-7-7">
<p>
GIST: <a href="https://gist.github.com/caiorss/4e36d7423cfd456f39c26ba476873a3c">Cmake C++ project with VCPKG package manager and OpengGL/FreeGlut</a>
</p>

<p>
File: <b>CMakeLists.txt</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)

<span class="org-keyword">if</span>(DEFINED ENV{VCPKG_ROOT} AND NOT DEFINED CMAKE_TOOLCHAIN_FILE)
  <span class="org-function-name">set</span>(CMAKE_TOOLCHAIN_FILE <span class="org-string">"$ENV{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake"</span>
    CACHE STRING <span class="org-string">""</span>)
    <span class="org-function-name">message</span>(<span class="org-string">" [INFO] VCPKG CMAKE_TOOLCHAIN_FILE = ${</span><span class="org-variable-name">CMAKE_TOOLCHAIN_FILE</span><span class="org-string">}"</span>)
<span class="org-keyword">endif</span>()

<span class="org-comment">#========== Global Configurations =============#</span>
<span class="org-comment">#----------------------------------------------#</span>
<span class="org-function-name">project</span>(OpengGL_Widnows)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-function-name">find_package</span>(OpenGL REQUIRED)
<span class="org-function-name">find_package</span>(GLUT REQUIRED)
<span class="org-function-name">find_package</span>(GLU  REQUIRED)

<span class="org-comment">#========== Targets Configurations ============#</span>

<span class="org-comment"># Build an executable (Unix-like OSes generates ./openglDemo1, on</span>
<span class="org-comment"># Windows ./opengDemo1.exe)</span>
<span class="org-comment"># ..........................................</span>
<span class="org-function-name">add_executable</span>(openglDemo1 opengl1.cpp)
<span class="org-function-name">target_link_libraries</span>(openglDemo1 PRIVATE GLUT::GLUT)

<span class="org-keyword">if</span>(UNIX)
  <span class="org-function-name">target_link_libraries</span>(openglDemo1 PRIVATE GL)
<span class="org-keyword">endif</span>()

<span class="org-comment"># Add extension .bin to executable name to make it easier</span>
<span class="org-comment"># to identify that the binary file is an executable.</span>
<span class="org-comment"># So, it turns  openglDemo1 becomes openglDemo1.bin </span>
<span class="org-keyword">if</span>(UNIX)
  <span class="org-function-name">set_target_properties</span>(openglDemo1 PROPERTIES SUFFIX <span class="org-string">".bin"</span>)
<span class="org-keyword">endif</span>()

<span class="org-comment"># Add target to run executable </span>
<span class="org-function-name">add_custom_target</span>(run-ex1
    COMMAND openglDemo1 
    DEPENDS openglDemo1 
    WORKING_DIRECTORY ${<span class="org-variable-name">CMAKE_PROJECT_DIR</span>}
)

<span class="org-comment"># It installs (copies) the target files to a path relative to CMAKE_INSTALL_PREFIX</span>
<span class="org-comment"># So, it will copy the built files to ${</span><span class="org-variable-name">CMAKE_INSTALL_PREFIX</span><span class="org-comment">}/out</span>
<span class="org-function-name">message</span>(<span class="org-string">" Freeglut DLL = ${</span><span class="org-variable-name">GLUT_RUNTIME_LIBRARY</span><span class="org-string">} ${</span><span class="org-variable-name">FREEGLUT_DYNAMIC</span><span class="org-string">}</span>
<span class="org-string">"</span>) <span class="org-function-name">install</span>(TARGETS openglDemo1 DESTINATION out) <span class="org-function-name">install</span>(FILES
<span class="org-string">"${</span><span class="org-variable-name">CMAKE_CURRENT_BINARY_DIR</span><span class="org-string">}/freeglut.dll"</span> DESTINATION out)
</pre>
</div>

<p>
File: <b>opengl1.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#if</span> <span class="org-preprocessor">defined</span><span class="org-rainbow-delimiters-depth-1">(</span>_WIN32<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">  #include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">windows.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#endif</span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/gl.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glu.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">GL/glut.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">void</span> <span class="org-function-name">renderFunction</span><span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span> ** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">){</span>

    <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"[INFO] Starting OpenGL main loop."</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    glutInit<span class="org-rainbow-delimiters-depth-2">(</span>&amp;argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;  
    glutInitDisplayMode<span class="org-rainbow-delimiters-depth-2">(</span>GLUT_SINGLE | GLUT_RGB<span class="org-rainbow-delimiters-depth-2">)</span>;
    glutInitWindowSize<span class="org-rainbow-delimiters-depth-2">(</span>500, 500<span class="org-rainbow-delimiters-depth-2">)</span>;
    glutCreateWindow<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Window 1"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Display Callback Function </span>
    glutDisplayFunc<span class="org-rainbow-delimiters-depth-2">(</span>&amp;renderFunction<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Start main loop </span>
    glutMainLoop<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"[INFO] Exit OpenGL main loop."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span> <span class="org-function-name">renderFunction</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"[INFO] Running loop."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Clear the current output buffer</span>
    glClear<span class="org-rainbow-delimiters-depth-2">(</span>GL_COLOR_BUFFER_BIT<span class="org-rainbow-delimiters-depth-2">)</span>;   

    <span class="org-comment-delimiter">// </span><span class="org-comment">Rotate 10 degrees counterclockwise around z axis</span>
    glRotated<span class="org-rainbow-delimiters-depth-2">(</span>10, 0, 0, 1<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set the current color (RGB) drawing to blue</span>
    glColor3f<span class="org-rainbow-delimiters-depth-2">(</span>0.0, 0.0, 1.0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Start polygon </span>
    glBegin<span class="org-rainbow-delimiters-depth-2">(</span>GL_POLYGON<span class="org-rainbow-delimiters-depth-2">)</span>;
    glVertex3f<span class="org-rainbow-delimiters-depth-2">(</span>-0.5, -0.5, 0<span class="org-rainbow-delimiters-depth-2">)</span>;
    glVertex3f<span class="org-rainbow-delimiters-depth-2">(</span> 0.5, -0.5, 0<span class="org-rainbow-delimiters-depth-2">)</span>;
    glVertex3f<span class="org-rainbow-delimiters-depth-2">(</span> 0.5,  0.5, 0<span class="org-rainbow-delimiters-depth-2">)</span>;
    glVertex3f<span class="org-rainbow-delimiters-depth-2">(</span>-0.5,  0.5, 0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">End polygon </span>
    glEnd<span class="org-rainbow-delimiters-depth-2">()</span>;

    glFlush<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Install FreeGlut library: 
</p>

<p>
Search FreeGlut library: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ vcpkg search freeglut

freeglut             3.0.0-5          Open source implementation of GLUT with source and binary backwards compatibil...

If your library is not listed, please open an issue at and/or consider making a pull request:
    https://github.com/Microsoft/vcpkg/issues
</pre>
</div>

<p>
Install FreeGlut Library:
</p>

<ul class="org-ul">
<li>$ vcpkg install freeglut:x64-Windows
<ul class="org-ul">
<li>Install library compiled for 64 bits target.</li>
</ul></li>

<li>$ vcpkg install freeglut:x86-Windows
<ul class="org-ul">
<li>Install library compiled for x86 bits target.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ vcpkg install freeglut:x64-Windows

The following packages will be built and installed:
    freeglut[core]:x64-windows
Starting package 1/1: freeglut:x64-windows
Building package freeglut[core]:x64-windows...
A suitable version of git was not found (required v2.20.0)<span class="org-builtin">.</span> Downloading portable git v2.20.0...
Downloading git...
  https://github.com/git-for-windows/git/releases/download/v2.20.0.windows.1/PortableGit-2.20.0-32-bit.7z.exe -&gt; C:\vcpkg\downloads\PortableGit-2.20.0-32-bit.7z.exe
Extracting git...
A suitable version of 7zip was not found (required v18.1.0)<span class="org-builtin">.</span> Downloading portable 7zip v18.1.0...
Downloading 7zip...
  https://www.nuget.org/api/v2/package/7-Zip.CommandLine/18.1.0 -&gt; C:\vcpkg\downloads\7-zip.commandline.18.1.0.nupkg
Extracting 7zip...
A suitable version of nuget was not found (required v4.6.2)<span class="org-builtin">.</span> Downloading portable nuget v4.6.2...
Downloading nuget...
  https://dist.nuget.org/win-x86-commandline/v4.6.2/nuget.exe -&gt; C:\vcpkg\downloads\nuget.exe
-- Downloading http://downloads.sourceforge.net/project/freeglut/freeglut/3.0.0/freeglut-3.0.0.tar.gz...
-- Extracting source C:/vcpkg/downloads/freeglut-3.0.0.tar.gz
-- Configuring x64-windows
-- Building x64-windows-dbg
-- Building x64-windows-rel
-- Performing post-build validation
-- Performing post-build validation done
Building package freeglut[core]:x64-windows... done
Installing package freeglut[core]:x64-windows...
Installing package freeglut[core]:x64-windows... done
Elapsed time for package freeglut:x64-windows: 2.215 min

Total elapsed time: 2.215 min

The package freeglut is compatible with built-in CMake targets:

    find_package(GLUT REQUIRED)
    target_link_libraries(main PRIVATE GLUT::GLUT)
</pre>
</div>

<p>
Clone the GIST for avoiding crating the sources manually: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://gist.github.com/caiorss/4e36d7423cfd456f39c26ba476873a3c opengl-cmake-demo
Cloning into <span class="org-string">'opengl-cmake-demo'</span>...
<span class="org-function-name">remote</span>: Enumerating objects: 4, done.
<span class="org-function-name">remote</span>: Counting objects: 100% (4/4), done.
<span class="org-function-name">remote</span>: Compressing objects: 100% (4/4), done.
Unpacking objects: 100% (4/4), done.
<span class="org-function-name">remote</span>: Total 4 (delta 0), reused 0 (delta 0), pack-reused 0

$ cd opengl-cmake-demo<span class="org-sh-escaped-newline">\</span>

$ dir
 Volume<span class="org-keyword"> in</span> drive C has no label.
 Volume Serial Number is 

 Directory of C:\Users\archbox\Desktop\opengl-cmake-demo

01/08/2019  05:57 PM    &lt;DIR&gt;          .
01/08/2019  05:57 PM    &lt;DIR&gt;          ..
01/08/2019  05:57 PM             1,630 CMakeLists.txt
01/08/2019  05:57 PM             1,188 opengl1.cpp
               2 File(s)          2,818 bytes
               2 Dir(s)   1,157,586,944 bytes free

</pre>
</div>

<p>
Perform CMake configuration step generating building scripts:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -H. -Bbuild -G <span class="org-string">"Visual Studio 15 2017 Win64"</span> -DCMAKE_INSTALL_PREFIX=.
 [INFO] VCPKG CMAKE_TOOLCHAIN_FILE = C:\vcpkg/scripts/buildsystems/vcpkg.cmake
-- The C compiler identification is MSVC 19.16.27025.1
-- The CXX compiler identification is MSVC 19.16.27025.1
 ... ...  ... ...  ... ...  ... ...  ... ...  ... ...  ... ... 
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Found OpenGL: opengl32
-- Found GLUT: C:/vcpkg/installed/x64-windows/debug/lib/freeglut.lib
-- WARNING: you are using the obsolete <span class="org-string">'GLU'</span> package, please use <span class="org-string">'OpenGL'</span> instead
 Freeglut DLL =
-- Configuring done
-- Generating done
-- Build files have been written to: C:/Users/archbox/Desktop/opengl-cmake-demo/build
</pre>
</div>

<p>
Build all targets: 
</p>

<ul class="org-ul">
<li>$ cmake &#x2013;build build &#x2013;config debug</li>
<li>$ cmake &#x2013;build build &#x2013;config release</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --config debug

<span class="org-function-name">Microsoft</span> (R) Build Engine version 15.9.21+g9802d43bc3 for .NET Framework
<span class="org-function-name">Copyright</span> (C) Microsoft Corporation. All rights reserved.

Build started 1/8/2019 6:02:01 PM.
Project <span class="org-string">"C:\Users\archbox\Desktop\opengl-cmake-demo\build\ALL_BUILD.vcxproj"</span> on node 1 (default targets)<span class="org-builtin">.</span>
Project <span class="org-string">"C:\Users\archbox\Desktop\opengl-cmake-demo\build\ALL_BUILD.vcxproj"</span> (1) is building <span class="org-string">"C:\Users\archbox\Desktop\opengl-cmake-demo\buil d\ZERO_CHECK.vcxproj"</span> (2) on node 1 (default targets)<span class="org-builtin">.</span>

 .. .. .   ... .. .   ... .. .   ... .. .   ... .. .   ... .. .   ... .. .   ... .. .   ... .. . 

<span class="org-function-name">ClCompile</span>:
  C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.16.27023\bin\HostX86\x64\CL.exe /c /I<span class="org-string">"C:\vcpkg\installed\x6</span>
<span class="org-string">  4-windows\include"</span> /Zi /W3 /WX- /diagnostics:classic /Od /Ob0 /D WIN32 /D _WINDOWS /D <span class="org-string">"CMAKE_INTDIR=\"Debug\""</span> /D _MBCS /Gm- /EHsc /RTC1 /M
  Dd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Zc:inline /GR /std:c++17 /Fo<span class="org-string">"openglDemo1.dir\Debug\\"</span> /Fd<span class="org-string">"openglDemo1.dir\Debug\vc141.pdb"</span> /Gd
   /TP /errorReport:queue <span class="org-string">"C:\Users\archbox\Desktop\opengl-cmake-demo\opengl1.cpp"</span>
  Microsoft (R) C/C++ Optimizing Compiler Version 19.16.27025.1 for x64
  opengl1.cpp
  Copyright (C) Microsoft Corporation.  All rights reserved.

  cl /c /I<span class="org-string">"C:\vcpkg\installed\x64-windows\include"</span> /Zi /W3 /WX- /diagnostics:classic /Od /Ob0 /D WIN32 /D _WINDOWS /D <span class="org-string">"CMAKE_INTDIR=\"Debug\"</span>
<span class="org-string">  "</span> /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Zc:inline /GR /std:c++17 /Fo<span class="org-string">"openglDemo1.dir\Debug\\"</span> /Fd<span class="org-string">"opengl</span>
<span class="org-string">  Demo1.dir\Debug\vc141.pdb"</span> /Gd /TP /errorReport:queue <span class="org-string">"C:\Users\archbox\Desktop\opengl-cmake-demo\opengl1.cpp"</span>

<span class="org-function-name">Link</span>:
  C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Tools\MSVC\14.16.27023\bin\HostX86\x64\link.exe /ERRORREPORT:QUEUE /OUT:<span class="org-string">"</span>
<span class="org-string">  C:\Users\archbox\Desktop\opengl-cmake-demo\build\Debug\openglDemo1.exe"</span> /INCREMENTAL /NOLOGO <span class="org-string">"C:\vcpkg\installed\x64-windows\debug\lib\free</span>
<span class="org-string">  glut.lib"</span> kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib /MANIFEST /M
  ANIFESTUAC:<span class="org-string">"level='asInvoker' uiAccess='false'"</span> /manifest:embed /DEBUG /PDB:<span class="org-string">"C:/Users/archbox/Desktop/opengl-cmake-demo/build/Debug/openglD</span>
<span class="org-string">  emo1.pdb"</span> /SUBSYSTEM:CONSOLE /TLBID:1 /DYNAMICBASE /NXCOMPAT /IMPLIB:<span class="org-string">"C:/Users/archbox/Desktop/opengl-cmake-demo/build/Debug/openglDemo1.li</span>
<span class="org-string">  b"</span> /MACHINE:X64  /machine:x64 openglDemo1.dir\Debug\opengl1.obj

....   ....   ....   ....   ....   ....   ....   ....   ....   ....   ....   ....   ....   ....   ....   ....   ....   .... 

Done Building Project <span class="org-string">"C:\Users\archbox\Desktop\opengl-cmake-demo\build\ALL_BUILD.vcxproj"</span> (default targets)<span class="org-builtin">.</span>


Build succeeded.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:06.76
</pre>
</div>

<p>
Run executable (target run-ex1):
</p>

<ul class="org-ul">
<li>This is conveniced target was added for making easier to run the
executable from the terminal. It is not needed for IDEs like Visual
Studio, JetBrains - Clion and so on.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target run-ex1
</pre>
</div>


<p>
Compile and run on Linux: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ vcpkg install freeglut   
$ git clone https://gist.github.com/caiorss/4e36d7423cfd456f39c26ba476873a3c opengl
$ cd opengl 
$ cmake -H. -Bbuild 
$ cmake --build build --target run-ex1 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdc88cd6" class="outline-3">
<h3 id="orgdc88cd6"><span class="section-number-3">7.8</span> Example: Project with Nana GUI Library</h3>
<div class="outline-text-3" id="text-7-8">
<p>
GIST: <a href="https://gist.github.com/caiorss/724942d43cd11c6ee5b3461ac067c846">Nana GUI + VCPKG + CMake project</a>
</p>

<p>
File: <b>CMakeLists.txt</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)

<span class="org-keyword">if</span>(DEFINED ENV{VCPKG_ROOT} AND NOT DEFINED CMAKE_TOOLCHAIN_FILE)
  <span class="org-function-name">set</span>(CMAKE_TOOLCHAIN_FILE <span class="org-string">"$ENV{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake"</span>
    CACHE STRING <span class="org-string">""</span>)
    <span class="org-function-name">message</span>(<span class="org-string">" [INFO] VCPKG CMAKE_TOOLCHAIN_FILE = ${</span><span class="org-variable-name">CMAKE_TOOLCHAIN_FILE</span><span class="org-string">}"</span>)
<span class="org-keyword">endif</span>()

<span class="org-comment">#======= Global Project Configuration =========#</span>

<span class="org-function-name">project</span>(DummyProject)
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)     

<span class="org-comment">#========== Targets Configurations ============#</span>

<span class="org-comment">## ==&gt; Target: gui1 - Executable: gui1</span>

<span class="org-function-name">find_package</span>(unofficial-nana CONFIG REQUIRED)
<span class="org-function-name">add_executable</span>(gui1 gui1.cpp)
<span class="org-function-name">target_link_libraries</span>(gui1 PRIVATE
  unofficial::nana::nana fontconfig stdc++fs)

<span class="org-comment"># Add target to run executable gui1 (similar to $ make run)</span>
<span class="org-function-name">add_custom_target</span>(run-gui1
    COMMAND gui1
    DEPENDS gui1
    WORKING_DIRECTORY ${<span class="org-variable-name">CMAKE_PROJECT_DIR</span>}
)

<span class="org-comment"># Install directory relative to ${</span><span class="org-variable-name">CMAKE_PREFIX_PATH</span><span class="org-comment">}</span>
<span class="org-function-name">install</span>(TARGETS gui1 DESTINATION ./bin)
</pre>
</div>

<p>
File: <b>gui1.cpp</b>
</p>

<ul class="org-ul">
<li>Note: Demo code taken from - <a href="http://nanapro.org/en-us/">http://nanapro.org/en-us/</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">nana/gui.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">nana/gui/widgets/label.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">nana/gui/widgets/button.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">nana</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">Define a form.</span>
    <span class="org-type">form</span> <span class="org-variable-name">fm</span>;
    <span class="org-comment-delimiter">//</span><span class="org-comment">Define a label and display a text.</span>
    <span class="org-type">label</span> <span class="org-variable-name">lab</span><span class="org-rainbow-delimiters-depth-2">{</span>fm, <span class="org-string">"Hello, &lt;bold blue size=16&gt;Nana C++ Library&lt;/&gt;"</span><span class="org-rainbow-delimiters-depth-2">}</span>;
    lab.format<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">//</span><span class="org-comment">Define a button and answer the click event.</span>
    <span class="org-type">button</span> <span class="org-variable-name">btn</span><span class="org-rainbow-delimiters-depth-2">{</span>fm, <span class="org-string">"Quit"</span><span class="org-rainbow-delimiters-depth-2">}</span>;
    btn.events<span class="org-rainbow-delimiters-depth-2">()</span>.click<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[</span>&amp;<span class="org-variable-name">fm</span><span class="org-rainbow-delimiters-depth-3">]{</span>
        fm.close<span class="org-rainbow-delimiters-depth-4">()</span>;
    <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">//</span><span class="org-comment">Layout management</span>
    fm.div<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"vert &lt;&gt;&lt;&lt;&gt;&lt;weight=80% text&gt;&lt;&gt;&gt;&lt;&gt;&lt;weight=24&lt;&gt;&lt;button&gt;&lt;&gt;&gt;&lt;&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    fm<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"text"</span><span class="org-rainbow-delimiters-depth-2">]</span>&lt;&lt;lab;
    fm<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"button"</span><span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; btn;
    fm.collocate<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-comment-delimiter">//</span><span class="org-comment">Show the form</span>
    fm.show<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-comment-delimiter">//</span><span class="org-comment">Start to event loop process, it blocks until the form is closed.</span>
    exec<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Project directory: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree -L 1
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; build
&#9500;&#9472;&#9472; CMakeLists.txt
&#9492;&#9472;&#9472; gui1.cpp

1 directory, 2 files
</pre>
</div>

<p>
Install Linux dependency libraries (Tested on Linux Fedora): 
</p>

<ul class="org-ul">
<li>Note: Sometimes VCPKG cannot install system libraries. In this
case, it is necessary to use the current distribution package
manager.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ sudo dnf install libX11-devel.x86_x64
$ sudo dnf install libXft-devel.x86_64
</pre>
</div>

<p>
Clone gist containing the project: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://gist.github.com/caiorss/724942d43cd11c6ee5b3461ac067c846 sample-vcpkg-proj
$ cd sample-vcpkg-proj
</pre>
</div>

<p>
<b>Install package Nana with vcpkg:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ vcpkg install nana

 ...  ...  ...  ... 
-- Using cached /home/archbox/opt/vcpkg/downloads/cnjinhao-nana-v1.6.2.tar.gz
-- Using source at /home/archbox/opt/vcpkg/buildtrees/nana/src/v1.6.2-51b575c248
-- Configuring x64-linux-dbg
-- Configuring x64-linux-rel
-- Building x64-linux-dbg
-- Building x64-linux-rel
-- Performing post-build validation
-- Performing post-build validation done
Building package nana[core]:x64-linux... done
Installing package nana[core]:x64-linux... 
Installing package nana[core]:x64-linux... done
Elapsed time for package nana:x64-linux: 1.825 min

Total elapsed time: 1.825 min

The package nana:x64-linux provides CMake targets:

    find_package(unofficial-nana CONFIG REQUIRED)
    target_link_libraries(main PRIVATE unofficial::nana::nana)
</pre>
</div>

<p>
List installed packages: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ vcpkg list
<span class="org-function-name">boost-accumulators</span>:x64-linux                       1.68.0           Boost accumulators module
<span class="org-function-name">boost-algorithm</span>:x64-linux                          1.68.0           Boost algorithm module
<span class="org-function-name">boost-any</span>:x64-linux                                1.68.0           Boost any module
<span class="org-function-name">boost-array</span>:x64-linux                              1.68.0           Boost array module

... ... ...   ... ... ...   ... ... ...   ... ... ...   ... ... ...   ... ... ...   ... ... ...

<span class="org-function-name">gsl</span>:x64-linux                                      2.4-3            The GNU Scientific Library is a numerical librar...
<span class="org-function-name">gtest</span>:x64-linux                                    1.8.1-1          GoogleTest and GoogleMock testing frameworks.
<span class="org-function-name">libiconv</span>:x64-linux                                 1.15-5           GNU Unicode text conversion
<span class="org-function-name">libjpeg-turbo</span>:x64-linux                            1.5.3-1          libjpeg-turbo is a JPEG image codec that uses SI...
<span class="org-function-name">liblzma</span>:x64-linux                                  5.2.4            Compression library with an API similar to that ...
<span class="org-function-name">libpng</span>:x64-linux                                   1.6.35-1         libpng is a library implementing an interface fo...
<span class="org-function-name">nana</span>:x64-linux                                     1.6.2            Cross-platform library for GUI programming<span class="org-keyword"> in</span> mo...
<span class="org-function-name">pybind11</span>:x64-linux                                 2.2.3-1          pybind11 is a lightweight header-only library th...
<span class="org-function-name">spdlog</span>:x64-linux                                   1.2.1            Very fast, header only, C++ logging library
<span class="org-function-name">zlib</span>:x64-linux                                     1.2.11-3         A compression librar
</pre>
</div>

<p>
Filter nana package: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ vcpkg list | grep nana
<span class="org-function-name">nana</span>:x64-linux                                     1.6.2            Cross-platform library for GUI programming<span class="org-keyword"> in</span> mo...
</pre>
</div>

<p>
<b>Building with CMake Ninja or Makefile</b>
</p>

<p>
Cmake configuration step
</p>

<ul class="org-ul">
<li>Default system building system
<ul class="org-ul">
<li>$ cmake -H. -Bbuild</li>
</ul></li>

<li>Ninja building System:
<ul class="org-ul">
<li>$ cmake -H. -Bbuild -G Ninja</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Install executable at (.) curret directory</span>
$ cmake -H. -Bbuild -G Ninja  -DCMAKE_PREFIX_PATH=.

 [INFO] VCPKG CMAKE_TOOLCHAIN_FILE = /home/archbox/opt/vcpkg/scripts/buildsystems/vcpkg.cmake
-- The C compiler identification is GNU 8.2.1
-- The CXX compiler identification is GNU 8.2.1
-- Check for working C compiler: /usr/lib64/ccache/cc

 ... ... ... ... ... ... 

-- Found Freetype: /home/archbox/build/vcpkg/installed/x64-linux/lib/libfreetype.a (found version <span class="org-string">"2.8.1"</span>) 
-- Found ZLIB: /home/archbox/build/vcpkg/installed/x64-linux/debug/lib/libz.a (found version <span class="org-string">"1.2.11"</span>) 
-- Found PNG: /home/archbox/build/vcpkg/installed/x64-linux/share/png/../../lib/libpng16.a (found version <span class="org-string">"1.6.35"</span>) 
-- Found BZip2: /home/archbox/build/vcpkg/installed/x64-linux/lib/libbz2.a (found version <span class="org-string">"1.0.6"</span>) 
-- Looking for BZ2_bzCompressInit
-- Looking for BZ2_bzCompressInit - found
-- Looking for XOpenDisplay<span class="org-keyword"> in</span> /usr/lib64/libX11.so;/usr/lib64/libXext.so
-- Looking for XOpenDisplay<span class="org-keyword"> in</span> /usr/lib64/libX11.so;/usr/lib64/libXext.so - found

 ... ... ... ... ... ... 

-- Looking for shmat - found
-- Found X11: /usr/lib64/libX11.so
-- Found JPEG: /home/archbox/build/vcpkg/installed/x64-linux/debug/lib/libjpeg.a  
-- Configuring done
-- Generating done
-- Build files have been written to: /home/archbox/root-scripts/vcpkg2/build
</pre>
</div>

<p>
Build all targets: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target 
</pre>
</div>

<p>
Build and run executable target gui1 (target: run-gui1)
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target run-gui1
[3/3] cd /home/archbox/root-scripts/vcpkg2/build &amp;&amp; /home/archbox/root-scripts/vcpkg2/build/gui1
</pre>
</div>

<p>
Install executable: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake --build build --target install
[2/3] Install the project...
-- Install configuration: <span class="org-string">""</span>
-- Installing: /home/archbox/root-scripts/vcpkg2/./bin/gui1
</pre>
</div>

<p>
Run installed executable at ./bin 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ bin/gui1 
</pre>
</div>

<p>
Directory after compilation: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ tree . -L 2
<span class="org-builtin">.</span>
&#9500;&#9472;&#9472; bin
&#9474;&#160;&#160; &#9492;&#9472;&#9472; gui1
&#9500;&#9472;&#9472; build
&#9474;&#160;&#160; &#9500;&#9472;&#9472; build.ninja
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeCache.txt
&#9474;&#160;&#160; &#9500;&#9472;&#9472; CMakeFiles
&#9474;&#160;&#160; &#9500;&#9472;&#9472; cmake_install.cmake
&#9474;&#160;&#160; &#9500;&#9472;&#9472; gui1
&#9474;&#160;&#160; &#9500;&#9472;&#9472; install_manifest.txt
&#9474;&#160;&#160; &#9492;&#9472;&#9472; rules.ninja
&#9500;&#9472;&#9472; CMakeLists.txt
&#9492;&#9472;&#9472; gui1.cpp

3 directories, 9 files
</pre>
</div>

<p>
<b>Analyse executable:</b>
</p>

<p>
Check binary format 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ file bin/gui1 

<span class="org-function-name">bin/gui1</span>: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux),
dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for
GNU/Linux 3.2.0,
<span class="org-variable-name">BuildID</span>[sha1]=b2273c2b397213af8c8b8e8808da1ebc195d3b4d, with
debug_info, not stripped
</pre>
</div>

<p>
Check file size 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">File size </span>
$ du -h bin/gui1
19M     bin/gui1
19M     total
</pre>
</div>

<p>
Remove debugging symbols 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ strip bin/gui1 
</pre>
</div>

<p>
Check file size again: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ du -h bin/gui1
3.3M    bin/gui1
3.3M    total
</pre>
</div>

<p>
Check shared libraries dependencies:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ldd bin/gui1
        linux-vdso.so.1 (0x00007fff18930000)
        libfontconfig.so.1 =&gt; /lib64/libfontconfig.so.1 (0x00007f5f73116000)
        libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f5f72ef7000)
        libX11.so.6 =&gt; /lib64/libX11.so.6 (0x00007f5f72bb6000)
        libXext.so.6 =&gt; /lib64/libXext.so.6 (0x00007f5f729a4000)
        libXft.so.2 =&gt; /lib64/libXft.so.2 (0x00007f5f7278d000)
        libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007f5f723fa000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f5f72066000)
        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007f5f71e4e000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f5f71a8f000)
        libfreetype.so.6 =&gt; /lib64/libfreetype.so.6 (0x00007f5f717d8000)
        libexpat.so.1 =&gt; /lib64/libexpat.so.1 (0x00007f5f7159d000)
        libuuid.so.1 =&gt; /lib64/libuuid.so.1 (0x00007f5f71396000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f5f7335a000)
        libxcb.so.1 =&gt; /lib64/libxcb.so.1 (0x00007f5f7116d000)
        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f5f70f69000)
        libXrender.so.1 =&gt; /lib64/libXrender.so.1 (0x00007f5f70d5e000)
        libbz2.so.1 =&gt; /lib64/libbz2.so.1 (0x00007f5f70b4d000)
        libpng16.so.16 =&gt; /lib64/libpng16.so.16 (0x00007f5f70919000)
        libz.so.1 =&gt; /lib64/libz.so.1 (0x00007f5f70702000)
        libXau.so.6 =&gt; /lib64/libXau.so.6 (0x00007f5f704fe000)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2020-01-15 Wed 17:06</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
