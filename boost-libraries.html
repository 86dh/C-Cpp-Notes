<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-07-30 Tue 14:17 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ Notes - Boost Libraries and complementarty libraries</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp/c++ c++ design patterns gneric programming object oriented metaprogramming"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ Notes - Boost Libraries and complementarty libraries</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgec0f5a8">1. Boost Libraries</a>
<ul>
<li><a href="#org8887cd3">1.1. Overview</a></li>
<li><a href="#org805e50c">1.2. Boost Libraries already in C++ ISO standard</a></li>
<li><a href="#orgfb4b58f">1.3. Compiling Boost with CMake</a></li>
<li><a href="#org2c48cea">1.4. Compiling Boost with CMake and Conan</a></li>
<li><a href="#org01e2174">1.5. Boost Format</a></li>
<li><a href="#org210f758">1.6. Boost Lexical_cast</a></li>
<li><a href="#orgf5e1c8e">1.7. Boost Tokenizer</a></li>
<li><a href="#org091ba7c">1.8. Boost string algo</a></li>
<li><a href="#org2d484c5">1.9. Boost Program Options</a></li>
<li><a href="#orgc4697c5">1.10. Boost Lambda</a></li>
<li><a href="#org61aa2b5">1.11. Boost Operators</a>
<ul>
<li><a href="#orgff3971a">1.11.1. Overview</a></li>
<li><a href="#org9e75d7f">1.11.2. Example</a></li>
</ul>
</li>
<li><a href="#org9412a50">1.12. Boost Range</a></li>
<li><a href="#org8bc5051">1.13. Boost Pointer Container</a></li>
<li><a href="#org0afaa8d">1.14. Boost CPU Timer</a></li>
<li><a href="#orge0a5b85">1.15. Boost Interprocess</a>
<ul>
<li><a href="#org7e5993b">1.15.1. Overview</a></li>
<li><a href="#org91c10ba">1.15.2. Example: Shared memory facilities</a></li>
<li><a href="#org45c0dc6">1.15.3. Example: Shared memory logging with mutex synchronization</a></li>
<li><a href="#org17acc9f">1.15.4. Example: Memory Mapped Files</a></li>
</ul>
</li>
<li><a href="#org901e952">1.16. Boost DateTime</a>
<ul>
<li><a href="#org14ed89e">1.16.1. Overview</a></li>
<li><a href="#orgafdb8ab">1.16.2. Example - Date Manipulation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6a6692d">2. Complementary Libraries</a>
<ul>
<li><a href="#orga0ac75d">2.1. fmtlib (fmt) - Better printf</a></li>
<li><a href="#orgc7584ff">2.2. Range v3 (C++20)</a></li>
<li><a href="#orgc7ace59">2.3. cxx-prettyprint - STL container pretty print</a></li>
<li><a href="#org55ba236">2.4. CLI11 Command Liner Parser Library</a></li>
<li><a href="#orgcd3b3a4">2.5. Cereal - Serialization Library</a></li>
<li><a href="#org84e0502">2.6. TinyXML2 - Lightweight XML parser</a></li>
<li><a href="#org76cd56f">2.7. PugiXML - Lightweight XML parser</a></li>
<li><a href="#org2e3ebbe">2.8. MuParser - Math expression parser</a></li>
<li><a href="#org2c34604">2.9. GTest - Unit Testing Framework</a></li>
<li><a href="#org4ebc86f">2.10. Catch2 - Unit Testing Framework</a></li>
<li><a href="#orgce9d80e">2.11. Doctest - Unit Testing Framewok</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgec0f5a8" class="outline-2">
<h2 id="orgec0f5a8"><span class="section-number-2">1</span> Boost Libraries</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org8887cd3" class="outline-3">
<h3 id="org8887cd3"><span class="section-number-3">1.1</span> Overview</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Boost Libraries are set of peer-reviewed and mostly header-only
libraries used by many projects and applications. They are regarded as
an extension of the C++ standard library and even many features from
the C++ standard come from Boost. Boost provides many facilities for
numerical computing; parsers; template metaprogramming;
network sockets TCP/IP and UDP; inter process communication; shared
memory and so on.  
</p>

<p>
Web Site: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/">https://www.boost.org/</a></li>
</ul>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_70_0/">https://www.boost.org/doc/libs/1_70_0/</a></li>
</ul>

<p>
Boost Library Map: (Moved to)
</p>
<ul class="org-ul">
<li><a href="Libraries.html">Libraries</a></li>
</ul>

<p>
Selected Pages: 
</p>

<ul class="org-ul">
<li><b>Lessons Learned from Specifying Exception-Safety for the C++ Standard Library</b>
<ul class="org-ul">
<li>"This paper represents the knowledge accumulated in response to a
real-world need: that the C++ Standard Template Library exhibit
useful and well-defined interactions with exceptions, the
error-handling mechanism built-in to the core C++ language. It
explores the meaning of exception-safety, reveals surprising
myths about exceptions and genericity, describes valuable tools
for reasoning about program correctness, and outlines an
automated testing procedure for verifying exception-safety."</li>
<li><a href="https://www.boost.org/community/exception_safety.html">https://www.boost.org/community/exception_safety.html</a></li>
</ul></li>

<li><b>Generic Programming Techniques</b>
<ul class="org-ul">
<li>"This is an incomplete survey of some of the generic programming
techniques used in the boost libraries." "</li>
<li><a href="https://www.boost.org/community/generic_programming.html">https://www.boost.org/community/generic_programming.html</a></li>
</ul></li>

<li><b>Counted Body Techniques</b>
<ul class="org-ul">
<li>"Reference counting techniques? Nothing new, you might
think. Every good C++ text that takes you to an intermediate or
advanced level will introduce the concept. It has been explored
with such thoroughness in the past that you might be forgiven for
thinking that everything that can be said has been said. Well,
let's start from first principles and see if we can unearth
something new&#x2026;."</li>
<li><a href="https://www.boost.org/community/counted_body.html">https://www.boost.org/community/counted_body.html</a></li>
</ul></li>

<li><b>Boost Implementation Variations</b>
<ul class="org-ul">
<li>"The interface specifications for boost.org library components
(as well as for quality software in general) are conceptually
separate from implementations of those interfaces. This may not
be obvious, particularly when a component is implemented entirely
within a header, but this separation of interface and
implementation is always assumed. From the perspective of those
concerned with software design, portability, and standardization,
the interface is what is important, while the implementation is
just a detail."</li>
<li><a href="https://www.boost.org/community/implementation_variations.html">https://www.boost.org/community/implementation_variations.html</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org805e50c" class="outline-3">
<h3 id="org805e50c"><span class="section-number-3">1.2</span> Boost Libraries already in C++ ISO standard</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Some Boost libraries are redundant as they are already in the C++ ISO
standard. However, it is worth using them if a compiler to new
C++ standards is not available. 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Boost libraries aready in C++ ISO Standard</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Boost Library</th>
<th scope="col" class="org-left">C++ Standard</th>
<th scope="col" class="org-left">Description</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">equivalent</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Added since C++11</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Boost.Chrono</td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/chrono">std::chrono</a></td>
<td class="org-left">Time interval</td>
</tr>

<tr>
<td class="org-left">Boost.Array</td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/container/array">std::array</a></td>
<td class="org-left">Fixed-size non-dynamically allocated array.</td>
</tr>

<tr>
<td class="org-left">Boost.Foreach</td>
<td class="org-left">C++11 ranged for</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_65_1/doc/html/function.html">Boost.Function</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/function">std::function</a></td>
<td class="org-left">Function type erasure and/or callbacks</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_70_0/libs/bind/doc/html/bind.html">Boost::bind</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/bind">std::bind</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Boost.Heap</td>
<td class="org-left">std::priority_queue</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Boost.Intrusive</td>
<td class="org-left">STL move constructor  and move assignment operator</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_62_0/doc/html/ratio.html">Boost.Ratio</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/numeric/ratio/ratio">std::ratio</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_63_0/doc/html/move.html">Boost.Move</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/move">std::move</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Boost.SaticAssert</td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/language/static_assert">static_assert</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/core/doc/html/core/ref.html">Boost.Ref</a></td>
<td class="org-left">Reference warapers in &lt;functional&gt; header</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/boost_random.html">Boost.Random</a></td>
<td class="org-left">Header &lt;<a href="http://www.cplusplus.com/reference/random/">&lt;random&gt;</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/regex/doc/html/index.html">Boost.Regex</a></td>
<td class="org-left">Library: <a href="https://en.cppreference.com/w/cpp/regex">&lt;regex&gt;</a>  (std::regex)</td>
<td class="org-left">Regular expressions library</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/thread.html">Boost.Thread</a></td>
<td class="org-left">Library: <a href="https://en.cppreference.com/w/cpp/thread">&lt;thread&gt;</a> (std::thread)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_70_0/libs/algorithm/doc/html/index.html">Boost Algorithm Lib</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/algorithm">algorithm library</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Added since C++17</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/optional/doc/html/index.html">Boost.Optional</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/optional">std::optional</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/any.html">Boost.Any</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/any">std::any</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/variant.html">Boost.Variant</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/variant">std::variant</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/filesystem/doc/index.htm">Boost.Filesystem</a></td>
<td class="org-left">Library: <a href="https://en.cppreference.com/w/cpp/filesystem">filesystem</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Boost Containers already in STL and C++ standards: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> Boost containers and functions aready incorpored into STL and C++ ISO Standard.</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Boost container or type</th>
<th scope="col" class="org-left">STL equivalent type</th>
<th scope="col" class="org-left">STL Header</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Since C++11</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">boost lambda</td>
<td class="org-left">C++11 lambdas</td>
<td class="org-left">-</td>
<td class="org-left">Lambda "function" constructor.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/function.html">boost::function</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/function">std::function</a></td>
<td class="org-left">&lt;functional&gt;</td>
<td class="org-left">Container for function or method-call type erasure.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/bind/doc/html/bind.html">boost::bind</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/bind">std::bind</a></td>
<td class="org-left">&lt;functional&gt;</td>
<td class="org-left">Function wrappers.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_70_0/libs/core/doc/html/core/ref.html">boost::ref</a>, boost::cref</td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/ref">std::ref and std::cref</a></td>
<td class="org-left">&lt;functional&gt;&gt;</td>
<td class="org-left">Reference wrappers in header &lt;functional&gt;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_70_0/doc/html/boost/movelib/unique_ptr.html">boost::unique_ptr</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a></td>
<td class="org-left">&lt;memory&gt;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/smart_ptr/doc/html/smart_ptr.html#shared_ptr">boost::shared_ptr</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/memory/shared_ptr">std::shared_ptr</a></td>
<td class="org-left">&lt;memory&gt;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/array.html">boost::array</a></td>
<td class="org-left">std::array</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Non-heap allocated fixed-size array, similar to C-array.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Since C++17</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/any.html">boost::any</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/any">std::any</a></td>
<td class="org-left">&lt;any&gt;</td>
<td class="org-left">Type erasure container for storing any copiable type.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/optional/doc/html/index.html">boost::optional</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/optional">std::optional</a></td>
<td class="org-left">&lt;optional&gt;</td>
<td class="org-left">Container which may or may not have any value.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/variant.html">boost::variant</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/variant">std::variant</a></td>
<td class="org-left">&lt;variant&gt;</td>
<td class="org-left">Discriminated union, a better C-Union</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
Note: 
</p>
<ul class="org-ul">
<li>Reference wrappers in &lt;functional&gt; header:
<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/utility/functional/reference_wrapper">std::reference_wrapper</a></li>
<li><a href="https://en.cppreference.com/w/cpp/utility/functional/ref">std::ref, std::cref</a></li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/bind/doc/html/bind.html">boost::bind</a> and std::bind =&gt; Function for building lambda
functions out of functions with partial arguments, member function
pointers and pointer to member variables.</li>
</ul>

<p>
See:
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/7241993/is-it-smart-to-replace-boostthread-and-boostmutex-with-c11-equivalents">c++ -
Is it smart to replace boost::thread and boost::mutex with c++11
equivalents? - Stack Overflow</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgfb4b58f" class="outline-3">
<h3 id="orgfb4b58f"><span class="section-number-3">1.3</span> Compiling Boost with CMake</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Some boost libraries are not header-only and requires linking against
a pre-compiled static or shared library. The compilation procedure can
be simplified with the CMake module <a href="https://cmake.org/cmake/help/latest/module/FindBoost.html">FindBoost.</a>
</p>

<p>
Some non header-only Boost libraries are:
</p>
<ul class="org-ul">
<li>date_time</li>
<li>iostream</li>
<li>filesystem</li>
<li>program_options</li>
<li>system (for Boost ASIO)</li>
</ul>

<p>
<b>Sample project:</b>
</p>

<p>
File: CMakeLists.txt 
</p>
<ul class="org-ul">
<li>Note: It is assumed that Boost is already installed in the system.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(cmake-boost)
<span class="org-comment">#======================================#</span>

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-function-name">set</span>(Boost_USE_STATIC_LIBS ON)

<span class="org-function-name">find_package</span>(Boost REQUIRED date_time serialization )

<span class="org-function-name">add_executable</span>(boost-app main.cpp)
<span class="org-function-name">target_link_libraries</span>(boost-app Boost::date_time Boost::serialization)
</pre>
</div>

<p>
File: main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/date_time/gregorian/gregorian.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/archive/text_oarchive.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/archive/text_iarchive.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">gr</span> = <span class="org-constant">boost</span>::gregorian;
<span class="org-keyword">namespace</span> <span class="org-constant">dt</span> = <span class="org-constant">boost</span>::date_time;

<span class="org-keyword">class</span> <span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_name</span>;
    <span class="org-type">double</span>      <span class="org-variable-name">m_latitude</span>;
    <span class="org-type">double</span>      <span class="org-variable-name">m_longitude</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by boost to access private data of this class</span>
    <span class="org-keyword">friend</span> <span class="org-keyword">class</span> <span class="org-constant">boost</span>::<span class="org-constant">serialization</span>::<span class="org-type">access</span>;

<span class="org-function-name">public</span>:

    <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">double</span> <span class="org-variable-name">latitude</span>, <span class="org-type">double</span> <span class="org-variable-name">longitude</span><span class="org-rainbow-delimiters-depth-2">)</span>:
        m_name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>
      , m_latitude<span class="org-rainbow-delimiters-depth-2">(</span>latitude<span class="org-rainbow-delimiters-depth-2">)</span>
      , m_longitude<span class="org-rainbow-delimiters-depth-2">(</span>longitude<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">()</span>: Waypoint<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"&lt;EMPTY&gt;"</span>, 0.0, 0.0<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">Waypoint</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> os &lt;&lt; <span class="org-string">" Waypoint{ location = "</span>
                  &lt;&lt; rhs.m_name &lt;&lt; <span class="org-string">" ; lat = "</span>
                  &lt;&lt; rhs.m_latitude &lt;&lt; <span class="org-string">" ; long = "</span>
                  &lt;&lt; rhs.m_longitude &lt;&lt; <span class="org-string">" } "</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-function-name">private</span>:

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by boost serialize</span>
    <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Archive</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
    <span class="org-type">void</span> <span class="org-function-name">serialize</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Archive</span>&amp; <span class="org-variable-name">ar</span>, <span class="org-keyword">const</span> <span class="org-type">unsigned</span> <span class="org-type">int</span> <span class="org-variable-name">version</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">ar</span> &amp; <span class="org-variable-name">m_name</span>;
        <span class="org-type">ar</span> &amp; <span class="org-variable-name">m_latitude</span>;
        <span class="org-type">ar</span> &amp; <span class="org-variable-name">m_longitude</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=========== Boost Date Time ===============\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">d1</span> = <span class="org-constant">gr</span>::date<span class="org-rainbow-delimiters-depth-2">(</span>2009, 10, 20<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" date1 = "</span> &lt;&lt; d1 &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">auto</span> <span class="org-variable-name">mdate</span> = <span class="org-constant">gr</span>::date<span class="org-rainbow-delimiters-depth-2">(</span>2012, 06, 21<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">text</span> = <span class="org-string">" Date mdate is equal to: "</span> + <span class="org-constant">gr</span>::to_iso_string<span class="org-rainbow-delimiters-depth-2">(</span>mdate<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Text =&gt; "</span> &lt;&lt; text;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=========== Boost Serialization ===============\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: this stream fs could be replaced by a real file stream.</span>
    <span class="org-comment-delimiter">//  </span><span class="org-comment">std::ofstream fs("archive.dat");</span>
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">fs</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Mock-file</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Serialization</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">Waypoint</span> <span class="org-variable-name">wp1</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Frankfurt"</span>, 50.1109, 8.6821<span class="org-rainbow-delimiters-depth-3">}</span>;
        <span class="org-type">Waypoint</span> <span class="org-variable-name">wp2</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Bern"</span>,      40.9480, 7.4474<span class="org-rainbow-delimiters-depth-3">}</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">The stream buffer is only written to the destination when</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">this object goes out of scope and the destructor is called.</span>
        <span class="org-constant">boost</span>::<span class="org-constant">archive</span>::<span class="org-type">text_oarchive</span> <span class="org-variable-name">archive</span><span class="org-rainbow-delimiters-depth-3">(</span>fs<span class="org-rainbow-delimiters-depth-3">)</span>;
        archive &lt;&lt; wp1 &lt;&lt; wp2;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Serialized data in 'disk' = "</span> &lt;&lt; fs.str<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;


    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=========== Boost Deserialization ===============\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: Here fs could be replaced by a real input file stream</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">std::ifstream</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">Waypoint</span> <span class="org-variable-name">wpA</span>, <span class="org-variable-name">wpB</span>;
        <span class="org-constant">boost</span>::<span class="org-constant">archive</span>::<span class="org-type">text_iarchive</span> <span class="org-variable-name">archive</span><span class="org-rainbow-delimiters-depth-3">(</span>fs<span class="org-rainbow-delimiters-depth-3">)</span>;
        archive &gt;&gt; wpA &gt;&gt; wpB;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"wpA = "</span> &lt;&lt; wpA &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"wpB = "</span> &lt;&lt; wpB &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Program output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">=========== Boost Date Time ===============

 date1 = 2009-Oct-20
 Text =&gt;  Date mdate is equal to: 20120621
=========== Boost Serialization ===============

Serialized data<span class="org-keyword"> in</span> <span class="org-string">'disk'</span> = 22 serialization::archive 16 0 0 9 Frankfurt 5.01109000000000009e+01 8.68210000000000015e+00 4 Bern 4.09480000000000004e+01 7.44740000000000002e+00

=========== Boost Deserialization ===============

wpA =  Waypoint{ location = Frankfurt ; lat = 50.1109 ; long = 8.6821 } 
wpB =  Waypoint{ location = Bern ; lat = 40.948 ; long = 7.4474 } 
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c48cea" class="outline-3">
<h3 id="org2c48cea"><span class="section-number-3">1.4</span> Compiling Boost with CMake and Conan</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Conan package manager allows a project use mutiple versions of Boost
libraries without prior manual installation that is time consuming as
the library has to be set up for a specific version and
compiler. Conan also provides modular Boost packages that allows
installing individual boost libraries whithout installing everything. 
</p>

<p>
<b>Boost Libraries (whole-package) - Conan References</b>
</p>

<ul class="org-ul">
<li>Boost version 1.64.0 / <a href="https://bintray.com/conan-community/conan/boost%3Aconan/1.64.0%3Astable">boost/1.64.0@conan/stable</a></li>

<li>Boost version 1.68.0 / <a href="https://bintray.com/conan-community/conan/boost%3Aconan/1.68.0%3Astable">boost/1.68.0@conan/stable</a></li>

<li>Boost version 1.69.0 / <a href="https://bintray.com/conan-community/conan/boost%3Aconan/1.69.0%3Astable">boost/1.69.0@conan/stable</a></li>

<li>Boost version 1.7.0  / <a href="https://bintray.com/conan-community/conan/boost%3Aconan/1.70.0%3Astable">boost/1.70.0@conan/stable</a></li>
</ul>


<p>
<b>Modular packages for Boost Libraries</b> 
</p>

<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan/boost_asio%3Abincrafters">boost_asio:bincrafters</a>
<ul class="org-ul">
<li>Portable networking and other low-level I/O, including sockets,
timers, hostname resolution, socket iostreams, serial ports, file
descriptors and Windows HANDLEs, from Chris Kohlhoff</li>
<li>Sample conan references:
<ul class="org-ul">
<li>boost_asio/1.69.0@bincrafters/stable</li>
<li>boost_asio/1.68.0@bincrafters/stable</li>
<li>boost_asio/1.67.0@bincrafters/stable</li>
</ul></li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_fiber%3Abincrafters">boost_fiber:bincrafters</a>
<ul class="org-ul">
<li>(C++11) Userland threads library, from Oliver Kowalke</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_ratio%3Abincrafters">boost_ratio::bincrafters</a>
<ul class="org-ul">
<li>Sample conan reference:  boost_ratio/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_spirit%3Abincrafters">boost_spirit:bincrafters</a>
<ul class="org-ul">
<li>Parser framework represents parsers directly as EBNF grammars in
inlined C++, from Joel de Guzman, Hartmut Kaiser and Dan Nuffer</li>
<li>Sample conan reference: boost_spirit/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_serialization%3Abincrafters">boost_serialization::bincrafters</a></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_tokenizer%3Abincrafters">boost_tokenizer:bincrafters</a>
<ul class="org-ul">
<li>Break of a string or other character sequence into a series of
tokens, from John Bandela.</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_type_index%3Abincrafters">boost_type_index:bincrafters</a>
<ul class="org-ul">
<li>Runtime and Compile time copyable type info, from Antony Polukhin</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_system%3Abincrafters">boost_system:bincrafters</a> 
<ul class="org-ul">
<li>Operating system support, including the diagnostics support that
will be part of the C++0x standard library, from Beman Dawes</li>
<li>Sample conan reference:  boost_system/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_statechart%3Abincrafters">boost_statechart:bincrafters</a>
<ul class="org-ul">
<li>Arbitrarily complex finite state machines can be implemented in
easily readable and maintainable C++ code, from Andreas Huber
Dönni.</li>
<li>Sample conan reference:  boost_statechart/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_stacktrace%3Abincrafters">boost_stacktrace:bincrafters</a>
<ul class="org-ul">
<li>Sample conan reference:  boost_stacktrace/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_range%3Abincrafters">boost_range::bincrafters</a></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_scope_exit%3Abincrafters">boost_scope_exit:bincrafters</a>
<ul class="org-ul">
<li>Execute arbitrary code at scope exit, from Alexander Nasonov</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_signals2%3Abincrafters">boost_signals2:bincrafters</a>
<ul class="org-ul">
<li>Managed signals &amp; slots callback implementation (thread-safe
version 2), from Frank Mori Hess.</li>
<li>Sample Reference: boost_signals2/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_smart_ptr%3Abincrafters">boost_smart_ptr:bincrafters</a>
<ul class="org-ul">
<li>Smart pointer class templates, from Greg Colvin, Beman Dawes,
Peter Dimov, Darin Adler and Glen Fernandes</li>
<li>Sample Reference:  boost_smart_ptr/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_sort%3Abincrafters">boost_sort:bincrafters</a>
<ul class="org-ul">
<li>High-performance templated sort functions, from Steven Ross</li>
<li>Sample Reference:  boost_sort/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_tti%3Abincrafters">boost_tti:bincrafters</a> 
<ul class="org-ul">
<li>Type Traits Introspection library, from Edward Diener</li>
</ul></li>
</ul>


<p>
<b>CMakeLists.txt</b> example: 
</p>

<ul class="org-ul">
<li>Note: It uses Boost version 1.7.0 (Conan reference:
boost/1.70.0@conan/stable) and the sub-packages
Boost::serialization and Boost::date_time.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(conan-boost)

<span class="org-comment">#========================================#</span>

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)

<span class="org-comment"># set(CMAKE_VERBOSE_MAKEFILE ON CACHE BOOL "ON")</span>
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#=========== Conan Bootstrap =================#</span>

<span class="org-function-name">message</span>( [INFO] <span class="org-string">" CMAKE_BUILD_TYPE = ${</span><span class="org-variable-name">CMAKE_BUILD_TYPE</span><span class="org-string">}"</span>)

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)
<span class="org-function-name">set</span>(CONAN_PROFILE default)

<span class="org-function-name">conan_cmake_run</span>( REQUIRES
                 boost/1.70.0@conan/stable
                 BASIC_SETUP
                 BUILD missing )

<span class="org-comment">#=========== Find Package ================#</span>

<span class="org-function-name">set</span>(Boost_USE_STATIC_LIBS ON)

<span class="org-function-name">find_package</span>(Boost REQUIRED date_time serialization )

<span class="org-comment">#=========== Targets ======================#</span>

<span class="org-function-name">add_executable</span>(conan-boost-app main.cpp)
<span class="org-function-name">target_link_libraries</span>(conan-boost-app Boost::date_time Boost::serialization)
</pre>
</div>


<p>
See: 
</p>

<ul class="org-ul">
<li>Announcement: Boost Package Deprecations
<ul class="org-ul">
<li><a href="https://bincrafters.github.io/2018/02/19/Boost-package-deprecations/">https://bincrafters.github.io/2018/02/19/Boost-package-deprecations/</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org01e2174" class="outline-3">
<h3 id="org01e2174"><span class="section-number-3">1.5</span> Boost Format</h3>
<div class="outline-text-3" id="text-1-5">
<p>
The boost library format provides a type-safe printf-like notation
which is concise as the old C-printf functions (printf, sprintf,
fprintf) and less intrusive and verbose than the C++ (&lt;&lt;) insertion
operator. 
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/libs/format/doc/format.html">Boost format</a></li>
<li>Header: &lt;boost/format.hpp&gt;</li>
<li>Functions:
<ul class="org-ul">
<li>boost::str</li>
<li>boost::format</li>
</ul></li>
</ul>

<p>
Using the library: 
</p>
<ul class="org-ul">
<li>As the library is a header-only library as almost all boost
libraries. All what is needed to use it is just include the
following header.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/format.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Example 1: Test in CERN's ROOT REPL.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/format.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-type">double</span> <span class="org-variable-name">x</span> = 10.0;

&gt;&gt; <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-type">basic_format</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7ffcfe86fbd8

&gt;&gt; <span class="org-keyword">auto</span> fmt = <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; fmt
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-type">basic_format</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f8c7b52b020
&gt;&gt;  

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; fmt &lt;&lt; <span class="org-string">"\n"</span>;
 x = 10 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.16228 ; log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.32193

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
 x = 10 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.16228 ; log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.32193
&gt;&gt; 
</pre>
</div>

<p>
Example 2: Multiline code. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Pasting the following code block in the REPL between curly</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">brackets, including them.</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
 <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-2">)</span> 
              % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span> 
<span class="org-comment-delimiter">// </span><span class="org-comment">Output:</span>
x = 10 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.16228 ; log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.32193
</pre>
</div>

<p>
Example 3.A: Turn format object into std::string.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> z = M_PI_2;
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.5707963

&gt;&gt; <span class="org-keyword">auto</span> fm = <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"operation = %1% - z = %2% %1%(%2%) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-string">"sin"</span> % z % <span class="org-constant">std</span>::sin<span class="org-rainbow-delimiters-depth-1">(</span>z<span class="org-rainbow-delimiters-depth-1">)</span> ;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"fm = "</span> &lt;&lt; fm &lt;&lt; <span class="org-string">"\n"</span>;
fm = operation = sin - z = 1.5708 sin<span class="org-rainbow-delimiters-depth-1">(</span>1.5708<span class="org-rainbow-delimiters-depth-1">)</span> = 1

&gt;&gt; <span class="org-constant">std</span>::string result = fm.str<span class="org-rainbow-delimiters-depth-1">()</span>;
&gt;&gt; result
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"operation = sin - z = 1.5708 sin(1.5708) = 1"</span>
</pre>
</div>

<p>
Example 3.B: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string result2 = <span class="org-constant">boost</span>::str<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"operation = %1% - z = %2% %1%(%2%) = %3%"</span><span class="org-rainbow-delimiters-depth-2">)</span> % <span class="org-string">"sin"</span> % z % <span class="org-constant">std</span>::sin<span class="org-rainbow-delimiters-depth-2">(</span>z<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; result2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"operation = sin - z = 1.5708 sin(1.5708) = 1"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org210f758" class="outline-3">
<h3 id="org210f758"><span class="section-number-3">1.6</span> Boost Lexical_cast</h3>
<div class="outline-text-3" id="text-1-6">
<p>
Boost lexical cast is header-only library for converting from
built-int types to string and from string to built-in types. 
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/boost_lexical_cast.html#boost_lexical_cast.motivation">Boost Lexical Cast</a></li>
<li>Header: &lt;boost/format.hpp&gt;</li>
<li>Functions:
<ul class="org-ul">
<li>boost::lexical_cast</li>
</ul></li>
</ul>

<p>
Example: 
</p>

<ul class="org-ul">
<li><b>Headers and namespace:</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/lexical_cast.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Namespace alias </span>
<span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;
</pre>
</div>

<p>
<b>Basic conversions:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"456"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 456

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">".4615e3"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 461.50000

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"inf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> inf

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"34e5"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3400000.0L
&gt;&gt; 

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"inf error"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: 
<span class="org-function-name">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">clone_impl</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">error_info_injector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::bad_lexical_cast<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-1">&gt;</span> 
 caught: bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">" asdsas "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: 
<span class="org-function-name">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">clone_impl</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">error_info_injector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::bad_lexical_cast<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-function-name">caught</span>: bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target
  &gt;&gt; 

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">" 100 "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: 
 <span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">clone_impl</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">error_info_injector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::bad_lexical_cast<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-1">&gt;</span> 
 caught: bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target
&gt;&gt; 
</pre>
</div>

<p>
<b>Catch exceptions:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-type">void</span> <span class="org-function-name">PrintSquareRoot</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">number_str</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">double</span> <span class="org-variable-name">x</span> = <span class="org-constant">boost</span>::lexical_cast<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>number_str<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"x = "</span> &lt;&lt; x
                  &lt;&lt; <span class="org-string">" ; sqrt(x) = "</span> &lt;&lt; <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">boost</span>::<span class="org-type">bad_lexical_cast</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span>
     <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"34.34"</span><span class="org-rainbow-delimiters-depth-1">)</span>
x = 34.34 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 5.86003

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"-125.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
x = -125 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = -nan

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"-12dsad 5.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" 100 "</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target
&gt;&gt; 
</pre>
</div>

<p>
<b>Function try_lexical_convert</b> 
</p>

<p>
Convert from string to built-in type without exceptions. 
</p>

<p>
Pseudo-signature: 
</p>
<ul class="org-ul">
<li>Returns true if succeed to convert source type to target type and
then sets the result variable. Otherwise, the function returns
false.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">boost</span>::<span class="org-constant">conversion</span> 
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Target</span>, <span class="org-keyword">typename</span> <span class="org-type">Source</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
  <span class="org-type">bool</span> <span class="org-function-name">try_lexical_convert</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Source</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">arg</span>, <span class="org-type">Targe</span>&amp; <span class="org-variable-name">result</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> z = 0.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000

&gt;&gt; <span class="org-constant">boost</span>::<span class="org-constant">conversion</span>::try_lexical_convert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200.34"</span>, z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 200.34000

&gt;&gt; <span class="org-constant">boost</span>::<span class="org-constant">conversion</span>::try_lexical_convert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200 error .34"</span>, z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 200.00000

&gt;&gt; <span class="org-constant">boost</span>::<span class="org-constant">conversion</span>::try_lexical_convert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"not-a-number"</span>, z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf5e1c8e" class="outline-3">
<h3 id="orgf5e1c8e"><span class="section-number-3">1.7</span> Boost Tokenizer</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Boost.tokenizer header-only library allows iterating over words or
tokens of a string. 
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_66_0/libs/tokenizer/introduc.htm">https://www.boost.org/doc/libs/1_66_0/libs/tokenizer/introduc.htm</a></li>
</ul>

<p>
Example: 
</p>

<ul class="org-ul">
<li>File: tokenizer.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/tokenizer.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n======= EXPERIMENT 1 ===============\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line1</span> = <span class="org-string">" 10.243, 9, \"game theory\", 200, \"zero sum game\", risk, return, payoff"</span>;
        <span class="org-constant">b</span>::<span class="org-type">tokenizer</span><span class="org-rainbow-delimiters-depth-3">&lt;&gt;</span> <span class="org-variable-name">tok</span><span class="org-rainbow-delimiters-depth-3">{</span>line1<span class="org-rainbow-delimiters-depth-3">}</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">tk</span>: tok<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; tk &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n======= EXPERIMENT 2 ===============\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span> = <span class="org-string">" \"risk reward\" , 200 , \"volatility payoff\" , 98.341 ,timing "</span>;
        <span class="org-constant">b</span>::<span class="org-type">tokenizer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">b</span>::<span class="org-type">escaped_list_separator</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">tok</span><span class="org-rainbow-delimiters-depth-3">{</span>line<span class="org-rainbow-delimiters-depth-3">}</span>;

        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">tk</span>: tok<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; tk &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n======= EXPERIMENT 3 - Old Iterator for-loop API =============\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span> = <span class="org-string">"934, \"boost tokenizer\", C++,   \"C++17 C++20\", rust, \"ada core\" "</span>;

        <span class="org-keyword">using</span> <span class="org-type">tokenizer_t</span> = <span class="org-constant">b</span>::<span class="org-type">tokenizer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">b</span>::<span class="org-type">escaped_list_separator</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>;

        <span class="org-type">tokenizer_t</span> <span class="org-variable-name">tok</span><span class="org-rainbow-delimiters-depth-3">{</span>line<span class="org-rainbow-delimiters-depth-3">}</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">tokenizer_t</span>::<span class="org-type">const_iterator</span> <span class="org-variable-name">it</span> = tok.begin<span class="org-rainbow-delimiters-depth-4">()</span>; it != tok.end<span class="org-rainbow-delimiters-depth-4">()</span>; it++<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; *it &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-rainbow-delimiters-depth-3">}</span>

    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n======= EXPERIMENT 4 ===============\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span> = <span class="org-string">" 100.34, -9.341, 8.62 ,89.235 , 79.513 , 896.2"</span>;

        <span class="org-keyword">using</span> <span class="org-type">tokenizer_t</span> = <span class="org-constant">b</span>::<span class="org-type">tokenizer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">b</span>::<span class="org-type">escaped_list_separator</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>;
        <span class="org-type">tokenizer_t</span> <span class="org-variable-name">tok</span> <span class="org-rainbow-delimiters-depth-3">(</span>line<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">data</span>;

        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">w</span>: tok<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            data.push_back<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-5">(</span>w<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: data<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; x * 100 &lt;&lt; <span class="org-string">" "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Compiling: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ tokenizer.cpp -o <span class="org-keyword">tokenizer.bin</span> --std=c++1z -g -O0 -Wall &amp;&amp; ./tokenizer.bin 
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">======= EXPERIMENT 1 ===============

10
243
9
game
theory
200
zero
sum
game
risk
return
payoff

======= EXPERIMENT 2 ===============

 risk reward 
 200 
 volatility payoff 
 98.341 
timing 

======= EXPERIMENT 3 - Old Iterator for-loop API =============

934
 boost tokenizer
 C++
   C++17 C++20
 rust
 ada core 

======= EXPERIMENT 4 ===============

10034 
-934.1 
862 
8923.5 
7951.3 
89620 
</pre>
</div>
</div>
</div>

<div id="outline-container-org091ba7c" class="outline-3">
<h3 id="org091ba7c"><span class="section-number-3">1.8</span> Boost string algo</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Provides lots of useful string utility functions that are missing in
the standard library. 
</p>

<ul class="org-ul">
<li>Documentation:
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/string_algo/usage.html">Boost String Main Documentation</a></li>
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/string_algo/quickref.html">Quick Referece card.</a></li>
</ul></li>
<li>Header: &lt;boost/algorithm/string.hpp&gt;</li>
<li>Functions:
<ul class="org-ul">
<li>boost::to_upper</li>
<li>boost::to_lower</li>
<li>boost::trim</li>
<li>boost::iends_with</li>
<li>boost::istarts_with</li>
<li>boost::replace</li>
<li>boost::replace_first</li>
</ul></li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Boost header and namespace alias: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/algorithm/string.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">b =&gt; Namespace alias to boost namespace. </span>
<span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;
</pre>
</div>

<p>
Convert string to upper/lower case.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string s = <span class="org-string">" C++ is an old new programmign LANGUAGE"</span>;
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">To upper case </span>
&gt;&gt; <span class="org-constant">b</span>::to_upper<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" C++ IS AN OLD NEW PROGRAMMIGN LANGUAGE"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">To lower case:</span>
&gt;&gt; <span class="org-constant">b</span>::to_lower<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" c++ is an old new programmign language"</span>
</pre>
</div>

<p>
Trim string on both sides: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string ss = <span class="org-string">"   A string with  spaces   "</span>;
&gt;&gt; <span class="org-constant">b</span>::trim<span class="org-rainbow-delimiters-depth-1">(</span>ss<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; ss
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"A string with  spaces"</span>
</pre>
</div>

<p>
Check whether starts with some prefix: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Checks whether first string argument starts with 'industry</span>
&gt;&gt; <span class="org-constant">b</span>::istarts_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"revenues outlook.pdf"</span>, <span class="org-string">"industry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

&gt;&gt; <span class="org-constant">b</span>::istarts_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"industry revenues outlook.pdf"</span>, <span class="org-string">"industry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>

&gt;&gt; <span class="org-constant">b</span>::istarts_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"   industry revenues outlook.pdf"</span>, <span class="org-string">"industry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
</pre>
</div>

<p>
Check whether string ends with some suffix:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Checks whether first strigns ends with suffix '.pdf'</span>
&gt;&gt;  <span class="org-constant">b</span>::iends_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"revenues-outlook.xls"</span>, <span class="org-string">".pdf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

&gt;&gt;  <span class="org-constant">b</span>::iends_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"revenues-outlook.pdf"</span>, <span class="org-string">".pdf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
</pre>
</div>

<p>
Replace all strings: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string words = <span class="org-string">"ASM c++ low c++ ASM  python bytes ASM c++"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Replace 'c++' by 'CEE-PLUS-PLUS'</span>
&gt;&gt; <span class="org-constant">b</span>::replace_all<span class="org-rainbow-delimiters-depth-1">(</span>words, <span class="org-string">"c++"</span>, <span class="org-string">"CEE-PLUS-PLUS"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; words
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"ASM CEE-PLUS-PLUS low CEE-PLUS-PLUS ASM  python bytes ASM CEE-PLUS-PLUS"</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">b</span>::replace_all<span class="org-rainbow-delimiters-depth-1">(</span>words, <span class="org-string">"CEE-PLUS-PLUS"</span>, <span class="org-string">"cpp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; words
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"ASM cpp low cpp ASM  python bytes ASM cpp"</span>
</pre>
</div>


<p>
Split string: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string dataset = <span class="org-string">" -100.23 ; 577.15 ; 99.34 ; 1003.5"</span>;
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> split_vector<span class="org-rainbow-delimiters-depth-1">{}</span>;

&gt;&gt; split_vector
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Split string dataset at delimiter ";"</span>
&gt;&gt; <span class="org-constant">b</span>::split<span class="org-rainbow-delimiters-depth-1">(</span>split_vector, dataset, <span class="org-constant">b</span>::is_any_of<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">";"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Result </span>
&gt;&gt; split_vector
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">" -100.23 "</span>, <span class="org-string">" 577.15 "</span>, <span class="org-string">" 99.34 "</span>, <span class="org-string">" 1003.5"</span> <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2d484c5" class="outline-3">
<h3 id="org2d484c5"><span class="section-number-3">1.9</span> Boost Program Options</h3>
<div class="outline-text-3" id="text-1-9">
<p>
Boost program options is a boost library for parsing and handling
command line options.
</p>
<ul class="org-ul">
<li>Note: This library is non-header only and requires linking.</li>
</ul>

<p>
Documentation:
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_70_0/doc/html/program_options.html">https://www.boost.org/doc/libs/1_70_0/doc/html/program_options.html</a></li>
</ul>

<p>
See: 
</p>
<ul class="org-ul">
<li><a href="https://iscinumpy.gitlab.io/post/comparing-cli11-and-boostpo/">Comparing CLI11 and Boost Program Options</a></li>
</ul>

<p>
<b>Example</b>:
</p>

<p>
File: <b>boost_program_options.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstdint</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/program_options.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">po</span> = <span class="org-constant">boost</span>::program_options;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Positional argument values</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span>              <span class="org-variable-name">server_name</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">server_paths</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Optional argument values</span>
    <span class="org-constant">std</span>::<span class="org-type">uint16_t</span>            <span class="org-variable-name">server_port</span> = 8080;
    <span class="org-constant">std</span>::<span class="org-type">string</span>              <span class="org-variable-name">server_host</span> = <span class="org-string">"0.0.0.0"</span>;
    <span class="org-type">bool</span>                     <span class="org-variable-name">server_show_file</span> = <span class="org-constant">false</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">===== Positional Arguments =====================//</span>

    <span class="org-constant">po</span>::<span class="org-type">variables_map</span> <span class="org-variable-name">vmap</span>;
    <span class="org-constant">po</span>::<span class="org-type">options_description</span> <span class="org-variable-name">desc</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"Small IOT Web Server"</span> <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">po</span>::<span class="org-type">positional_options_description</span> <span class="org-variable-name">pos</span>;
    pos.add<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"name"</span>, 1<span class="org-rainbow-delimiters-depth-2">)</span>;
    pos.add<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"path"</span>, -1<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">==== Optional Arguments =========================//</span>

    desc.add_options<span class="org-rainbow-delimiters-depth-2">()</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"help,h"</span>, <span class="org-string">"Show this help message"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"port,p"</span>,       <span class="org-constant">po</span>::value<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">uint16_t</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>&amp;server_port<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-string">"Set web server port [default 8080]"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"host"</span>,         <span class="org-constant">po</span>::value<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>&amp;server_host<span class="org-rainbow-delimiters-depth-3">)</span>,   <span class="org-string">"Allowed host [default 0.0.0.0]"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"show"</span>,         <span class="org-constant">po</span>::bool_switch<span class="org-rainbow-delimiters-depth-3">(</span>&amp;server_show_file<span class="org-rainbow-delimiters-depth-3">)</span>,     <span class="org-string">"Show directory files [default false]"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"version,v"</span>,                                            <span class="org-string">"Show version and exit"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">---- Positional Arguments ----//</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"name"</span>, <span class="org-constant">po</span>::value<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span>,                       <span class="org-string">"Web Server Name"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"path"</span>, <span class="org-constant">po</span>::value<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span>,          <span class="org-string">"Paths that will be served"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;

    <span class="org-comment-delimiter">//</span><span class="org-comment">==== Parse Command Line Arguments ===============//</span>

    <span class="org-keyword">try</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-keyword">auto</span> <span class="org-variable-name">parsed</span> = <span class="org-constant">po</span>::command_line_parser<span class="org-rainbow-delimiters-depth-3">(</span>argc, argv<span class="org-rainbow-delimiters-depth-3">)</span>
                          .options<span class="org-rainbow-delimiters-depth-3">(</span>desc<span class="org-rainbow-delimiters-depth-3">)</span>
                          .positional<span class="org-rainbow-delimiters-depth-3">(</span>pos<span class="org-rainbow-delimiters-depth-3">)</span>
                         <span class="org-comment-delimiter">// </span><span class="org-comment">.allow_unregistered()</span>
                          .run<span class="org-rainbow-delimiters-depth-3">()</span>;
      <span class="org-constant">po</span>::store<span class="org-rainbow-delimiters-depth-3">(</span>parsed, vmap<span class="org-rainbow-delimiters-depth-3">)</span>;
      <span class="org-constant">po</span>::notify<span class="org-rainbow-delimiters-depth-3">(</span>vmap<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">boost</span>::<span class="org-constant">program_options</span>::<span class="org-type">error</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [ERROR] "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">=== Handle help command line options =============//</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Print help to user if he passes no option -h or --help */</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>vmap.empty<span class="org-rainbow-delimiters-depth-3">()</span> || vmap.count<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"help"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"USAGE: "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-string">" &lt;OPTIONS&gt; &lt;NAME&gt; [&lt;PATH&gt; ...]"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        desc.print<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Show program version when user passes --version or -v */</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>vmap.count<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"version"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Small Http Server version 1.5 PREMIUM "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">=== Handle main command line options =============//</span>


    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>vmap.count<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: missing positional argument [name] - server name"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>vmap.count<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"path"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: missing positional arguments [path] - server path"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    server_name = vmap<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"name"</span><span class="org-rainbow-delimiters-depth-2">]</span>.as<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
    server_paths = vmap<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"path"</span><span class="org-rainbow-delimiters-depth-2">]</span>.as<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;


    <span class="org-constant">std</span>::cout &lt;&lt;<span class="org-string">" &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Server running listening =&gt; "</span>
              &lt;&lt; <span class="org-string">"host "</span> &lt;&lt; server_host
              &lt;&lt; <span class="org-string">" at port "</span> &lt;&lt; server_port
              &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"       Server name: "</span> &lt;&lt; server_name &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Show files option: "</span> &lt;&lt; server_show_file &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Server paths: "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">p</span>: server_paths<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; p ;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;


    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(cppexperiments)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># Copy target file to current directory whenerver it is rebuilt</span>
<span class="org-keyword">function</span>(copy_after_build TARGET_NAME )
    <span class="org-comment"># Note: CMAKE_CURRENT_LIST_DIR is the directory where is this</span>
    <span class="org-comment"># CMakeLists.txt file.</span>
    <span class="org-function-name">set</span>(DESTDIR ${<span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span>}/bin/)
    <span class="org-function-name">file</span>(MAKE_DIRECTORY ${<span class="org-variable-name">DESTDIR</span>})

    <span class="org-comment"># Copy binary file to &lt;CMakeLists.txt didctory&gt;./bin</span>
    <span class="org-comment"># after target is compiled.</span>
    <span class="org-function-name">add_custom_command</span>(TARGET ${<span class="org-variable-name">TARGET_NAME</span>} POST_BUILD
      COMMAND ${<span class="org-variable-name">CMAKE_COMMAND</span>} -E copy
                               $&lt;TARGET_FILE:${<span class="org-variable-name">TARGET_NAME</span>}&gt; ${<span class="org-variable-name">DESTDIR</span>}
                               )
<span class="org-keyword">endfunction</span>()


<span class="org-comment"># ============= Conan Boosttrap =============================#</span>

<span class="org-function-name">set</span>(Boost_USE_STATIC_LIBS ON)
<span class="org-function-name">find_package</span>(Boost REQUIRED program_options)

 <span class="org-comment">#======= Targets Settings ===============+#</span>
<span class="org-function-name">add_executable</span>(boost_program_options boost_program_options.cpp)
<span class="org-function-name">target_link_libraries</span>(boost_program_options Boost::program_options)

<span class="org-comment"># Optional =&gt; Copy the binary (executable) to directory </span>
<span class="org-comment"># ${THIS DIRECTORY}/bin for easy access from command line </span>
<span class="org-function-name">copy_after_build</span>(boost_program_options)
</pre>
</div>

<p>
Build from command line: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ boost_program_options.cpp -o <span class="org-keyword">boost_program_options</span> -std=c++1z -Wall -lboost_program_options -O0 -g 

$ file boost_program_options

<span class="org-function-name">boost_program_options</span>: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux), 
dynamically linked, interpreter /lib64/l, for GNU/Linux 3.2.0, 
<span class="org-variable-name">BuildID</span>[sha1]=3137721ab242577ffad4ec7b70eb48c86c041c69, with debug_info, not stripped
</pre>
</div>

<p>
Build with Cmake from command line: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -Bbuild -H. -GNinja -DCMAKE_BUILD_TYPE=Debug

$ cmake --build build --target
[2/2] Linking CXX executable boost_program_options

$ cd bin 

$ ls 
boost_program_options*
</pre>
</div>

<p>
Show program help: 
</p>

<div class="org-src-container">
<pre class="src src-sh"> $ ./boost_program_options 
<span class="org-function-name">Error</span>: missing positional argument [name] - server name

 $ ./boost_program_options --help
 USAGE: ./boost_program_options &lt;OPTIONS&gt; &lt;NAME&gt; [&lt;PATH&gt; ...]
 Small IOT Web Server:
   -h [ --help ]         Show this help message
   -p [ --port ] arg     Set web server port [default 8080]
   --host arg            Allowed host [default 0.0.0.0]
   --show                Show directory files [default false]
   -v [ --version ]      Show version and exit
   --name arg            Web Server Name
   --path arg            Paths that will be served
</pre>
</div>

<p>
Run with default settings: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./boost_program_options tinyHTTP /var/www/data /var/www /home/user/storage
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 0.0.0.0 at port 8080
       Server name: tinyHTTP
 Show files option: false
 Server paths:  /var/www/data /var/www /home/user/storage
</pre>
</div>

<p>
Run setting port to 9090 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./boost_program_options tinyHTTP /var/www/data /var/www --port 9090
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 0.0.0.0 at port 9090
       Server name: tinyHTTP
 Show files option: false
 Server paths:  /var/www/data /var/www
</pre>
</div>

<p>
Run setting port to 9080 and host to 127.0.0.1 (localhost)
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./boost_program_options tinyHTTP /var/www/data /var/www --port 9080 --host 127.0.0.1
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 127.0.0.1 at port 9080
       Server name: tinyHTTP
 Show files option: false
 Server paths:  /var/www/data /var/www


$ ./boost_program_options tinyHTTP /var/www --port=9080 --host=127.0.0.1
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 127.0.0.1 at port 9080
       Server name: tinyHTTP
 Show files option: false
 Server paths:  /var/www

$ ./boost_program_options tinyHTTP /var/www --port=9080 --host=127.0.0.1 --show
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 127.0.0.1 at port 9080
       Server name: tinyHTTP
 Show files option: true
 Server paths:  /var/www
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc4697c5" class="outline-3">
<h3 id="orgc4697c5"><span class="section-number-3">1.10</span> Boost Lambda</h3>
<div class="outline-text-3" id="text-1-10">
<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/lambda.html#introduction">Boost.Lambda</a></li>
</ul>

<p>
Notes: 
</p>

<p>
boost::bind from Boost.Lambda is already in C++ standard since C++11
and the placeholders, _1, _2 are in the namespace
std::placeholders. 
</p>

<p>
STL lambda placeholders does not support arithmetic expressions like
boost lambda placeholders. For instance, the following code generates
a lambda expression shown after it.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Boost lambda placeholder</label><pre class="src src-cpp">3.0 * <span class="org-constant">boost</span>::<span class="org-constant">lambda</span>::_1 + 10.0
</pre>
</div>

<p>
Equivalent lambda expression (lambda object):
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Equivalent C++11 lambda function.</label><pre class="src src-cpp"><span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3.0 * x + 10.0<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Examples:</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/lambda/lambda.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/lambda/loops.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Namespace alias: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bl</span> = <span class="org-constant">boost</span>::lambda;
</pre>
</div>

<p>
Creating a function of one argument:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> funOf1Arg = 10.0 * <span class="org-constant">bl</span>::_1 - 20.0;

&gt;&gt; funOf1Arg<span class="org-rainbow-delimiters-depth-1">(</span>20<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 180.00000

&gt;&gt; funOf1Arg<span class="org-rainbow-delimiters-depth-1">(</span>6.7<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 47.000000
&gt; 
</pre>
</div>

<p>
Creating a function of two arguments: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> funOf2ArgsA = 10.0 * <span class="org-constant">bl</span>::_1 + 6 * <span class="org-constant">bl</span>::_2 - 20;

&gt;&gt; funOf2ArgsA<span class="org-rainbow-delimiters-depth-1">(</span>3, 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 34.000000

&gt;&gt; funOf2ArgsA<span class="org-rainbow-delimiters-depth-1">(</span>5, 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 36.000000


&gt;&gt; <span class="org-keyword">auto</span> funOf2 = <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">" ; y = "</span> &lt;&lt; <span class="org-constant">bl</span>::_2 &lt;&lt; <span class="org-string">"\n"</span>;

&gt;&gt; funOf2<span class="org-rainbow-delimiters-depth-1">(</span>100, <span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 x = 100 ; y = hello

&gt;&gt; funOf2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">'z'</span>, <span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
z ; y = hello
</pre>
</div>

<p>
Lambda placeholder and STL "algorithms":
</p>

<ul class="org-ul">
<li>Algorithm std::for_each</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">xs</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>100, 200, 50, -70, 80, 45<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
100
200
50
-70
80
45
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Increase at 25%</span>
&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">std</span>::cout &lt;&lt; 1.25 * <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
125
250
62.5
-87.5
100
56.25
&gt;&gt; 

&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 100, 200, 50, -70, 80, 45 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">std</span>::cout &lt;&lt; 1.25 * <span class="org-constant">bl</span>::_1 + 10.0 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
135
260
72.5
-77.5
110
66.25
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Algorithm std::transform</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> out<span class="org-rainbow-delimiters-depth-1">(</span>xs.size<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-constant">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, out.begin<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">bl</span>::<span class="org-type">_1</span> * 3.0 + 100<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 400.00000, 700.00000, 250.00000, -110.00000, 340.00000, 235.00000 <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Divide every element of xs by 100.0 and insert it at vector out. </span>
&gt;&gt; <span class="org-constant">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, out.begin<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">bl</span>::_1 / 100.0<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 1.0000000, 2.0000000, 0.50000000, -0.70000000, 0.80000000, 0.45000000 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Lambda expressions for control structures</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> yds<span class="org-rainbow-delimiters-depth-1">{</span>200, 40, 5, 9, 20, 40, 90, 35<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>yds.begin<span class="org-rainbow-delimiters-depth-2">()</span>, yds.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">bl</span>::if_then<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-constant">bl</span>::_1 &gt; 25, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
200
40
40
90
35

<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>yds.begin<span class="org-rainbow-delimiters-depth-3">()</span>, yds.end<span class="org-rainbow-delimiters-depth-3">()</span>, 
              <span class="org-constant">bl</span>::if_then<span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-constant">bl</span>::_1 &gt; 25, <span class="org-constant">std</span>::cout &lt;&lt; 4.5 * <span class="org-constant">bl</span>::_1 - 20.0 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Output: </span>
880
160
160
385
137.5
</pre>
</div>
</div>
</div>

<div id="outline-container-org61aa2b5" class="outline-3">
<h3 id="org61aa2b5"><span class="section-number-3">1.11</span> Boost Operators</h3>
<div class="outline-text-3" id="text-1-11">
</div>
<div id="outline-container-orgff3971a" class="outline-4">
<h4 id="orgff3971a"><span class="section-number-4">1.11.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-11-1">
<p>
There are about 50 operators in C++ that can be overloaded which makes
implementing them repetitive and cumbersome. Boost operators is a
header-only library simplifies operator overloading by implementing
redundant operators in terms of each other. For instance, from the
operator less-than or (&lt;), boost operators can automatically generate
the operators (&lt;=), (&gt;) and (&gt;=). The library uses the CRT (Curious
Recurring Template Design Pattern) for generating the operators at
compile-time.
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/utility/operators.htm">Boost.Operators</a></li>
</ul>

<p>
Headers: 
</p>
<ul class="org-ul">
<li>&lt;boost/operators.hpp&gt;</li>
</ul>
</div>
</div>
<div id="outline-container-org9e75d7f" class="outline-4">
<h4 id="org9e75d7f"><span class="section-number-4">1.11.2</span> Example</h4>
<div class="outline-text-4" id="text-1-11-2">
<ul class="org-ul">
<li>File: <a href="src/boost/boost-operators.cpp">file:src/boost/boost-operators.cpp</a></li>
<li>Gist: <a href="https://gist.github.com/caiorss/3682847393fd42b4001c9c71a74e2c37">boost-operators.cpp</a></li>
<li>Online Compiler: <a href="https://rextester.com/UZGM54875">https://rextester.com/UZGM54875</a></li>
</ul>

<p>
Compilation: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Compile </span>
$ clang++ boost-operator.cpp -o <span class="org-keyword">boost-operator.bin</span> -std=c++1z -g -O0 -Wall
<span class="org-comment-delimiter"># </span><span class="org-comment">Run </span>
$ ./boost-operator.bin
</pre>
</div>

<p>
<b>Parts</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/operators.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Class Vec3D: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Class Vec3D - three dimensional vector of 3 coordinates X, Y, Z</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Vec3D</span>: <span class="org-keyword">public</span> <span class="org-constant">boost</span>::<span class="org-type">less_than_comparable</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Vec3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
           , <span class="org-keyword">public</span> <span class="org-constant">boost</span>::<span class="org-type">addable</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Vec3D</span>, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
    <span class="org-type">double</span> <span class="org-variable-name">m_x</span>, <span class="org-variable-name">m_y</span>, <span class="org-variable-name">m_z</span>;
<span class="org-function-name">public</span>:
    <span class="org-function-name">Vec3D</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span>, <span class="org-type">double</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">double</span> <span class="org-function-name">norm</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Stream insertion operator =&gt; Make class printable </span>
    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">vec</span><span class="org-rainbow-delimiters-depth-2">)</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by: boost::less_than_comparable&lt;Vec3D&gt;</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">From this operator, boost implements the operators (&lt;=), (&gt;), (&gt;=)</span>
    <span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by: boost::addable&lt;Vec3D, double&gt;</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Boost implements: operator+(Vec3D, double) and operator+(double, Vec3D)</span>
    <span class="org-keyword">friend</span> <span class="org-type">Vec3D</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Vec3D</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>;   
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
The templated class <b>boost::less_than_comparable&lt;T&gt;</b> requires that the
client code implements the operator function less-than (&lt;) or: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>Operator less-than (&lt;) required by boost::less_than_comparable</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Implementation: </span>
<span class="org-type">bool</span>
<span class="org-keyword">operator</span><span class="org-function-name">&lt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-keyword">return</span> lhs.norm<span class="org-rainbow-delimiters-depth-2">()</span> &lt; rhs.norm<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
From the operator less-than (&lt;), the templated class implements the
following operator functions: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>Operators generated by boost::less_than_comparable</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&gt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&gt;=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
The templated class <b>boost::addable&lt;Vec3D, double&gt;</b> requires the client
code supplying the operator (+=):
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>Operator function required by boost::addable&lt;Vec3D, double&gt;</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">Vec3D</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;   

<span class="org-comment-delimiter">// </span><span class="org-comment">Implementation or definition:</span>
<span class="org-type">Vec3D</span>&amp;
<span class="org-keyword">operator</span><span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span>  <span class="org-variable-name">d</span> = rhs;
    lhs = <span class="org-rainbow-delimiters-depth-2">{</span>lhs.m_x + d, lhs.m_y + d, lhs.m_z + d<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">return</span> lhs;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
From the operator (+=), the class boost::addable generates the
operators: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>Operator functions generated by boost::addable&lt;Vec3D, double&gt;</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">Vec3D</span> <span class="org-keyword">operator</span><span class="org-function-name">+</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;   
<span class="org-keyword">friend</span> <span class="org-type">Vec3D</span> <span class="org-keyword">operator</span><span class="org-function-name">+</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">rhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;   
</pre>
</div>

<p>
Function: disp used for displaying variables
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">variable_t</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">disp</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">variableName</span>, <span class="org-type">variable_t</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">value</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; "</span> &lt;&lt; variableName &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; value &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Function Main</b>
</p>

<p>
Variables:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Vec3D</span> <span class="org-variable-name">v1</span> = <span class="org-rainbow-delimiters-depth-1">{</span>3, 5, 6<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-type">Vec3D</span> <span class="org-variable-name">v2</span> = <span class="org-rainbow-delimiters-depth-1">{</span>12, 5, 9<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1"</span>, v1<span class="org-rainbow-delimiters-depth-1">)</span>; disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v2"</span>, v2<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1.norm()"</span>, v1.norm<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v2.norm()"</span>, v2.norm<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Program Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=&gt;&gt; v1 = Vec3D{  x = 3 ; y = 5 ; z = 6 } 
=&gt;&gt; v2 = Vec3D{  x = 12 ; y = 5 ; z = 9 } 
=&gt;&gt; v1.norm() = 8.3666
=&gt;&gt; v2.norm() = 15.8114
</pre>
</div>

<p>
Experiment 1: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n EXPERIMENT 1 boost::less_than_comparable&lt;Vec3D&gt;"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------------"</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &lt;  v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &lt; v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &lt;  v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&lt;<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;   

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &lt;= v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &lt;= v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &lt;= v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&lt;=<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &gt;  v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &gt; v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &gt;  v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&gt;<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &gt;=  v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &gt;= v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &gt;=  v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&gt;=<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
</pre>
</div>

<p>
Program Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> EXPERIMENT 1 boost::less_than_comparable&lt;Vec3D&gt;
--------------------------------------------------
[a] v1 &lt;  v2 = true
[b] v1 &lt;  v2 = true

[a] v1 &lt;= v2 = true
[b] v1 &lt;= v2 = true

[a] v1 &gt;  v2 = false
[b] v1 &gt;  v2 = false

[a] v1 &gt;=  v2 = false
[b] v1 &gt;=  v2 = false
</pre>
</div>

<p>
Experiment 2: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n EXPERIMENT 2 boost::less_than_comparable&lt;Vec3D&gt;"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------------"</span> &lt;&lt; <span class="org-string">"\n"</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1 + 5.0"</span>, v1 + 5.0<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"operator+(v1, 5.0)"</span>, <span class="org-keyword">operator</span>+<span class="org-rainbow-delimiters-depth-2">(</span>v1, 5.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"5.0 + v1"</span>, 5.0 + v1<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"operator+(5.0, v1"</span>, <span class="org-keyword">operator</span>+<span class="org-rainbow-delimiters-depth-2">(</span>5.0, v1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1"</span>, v1<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> EXPERIMENT 2 boost::less_than_comparable&lt;Vec3D&gt;
--------------------------------------------------
 =&gt;&gt; v1 + 5.0 = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; operator+(v1, 5.0) = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; 5.0 + v1 = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; operator+(5.0, v1 = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; v1 = Vec3D{  x = 3 ; y = 5 ; z = 6 } 
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9412a50" class="outline-3">
<h3 id="org9412a50"><span class="section-number-3">1.12</span> Boost Range</h3>
<div class="outline-text-3" id="text-1-12">
<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/range/doc/html/index.html">Boost.Range</a></li>
</ul>

<p>
New Version of Range Library - v3
</p>
<ul class="org-ul">
<li><a href="https://ericniebler.github.io/range-v3/index.html">https://ericniebler.github.io/range-v3/index.html</a></li>
</ul>

<p>
Headers and functionality: 
</p>
<ul class="org-ul">
<li>&lt;boost/range.hpp&gt;</li>
<li>&lt;boost/range/adapators.hpp&gt;</li>
<li>&lt;boost/range/algorithm.hpp&gt;</li>
<li>&lt;boost/range/algorithm_ext/for_each.hpp&gt;</li>
<li>&lt;boost/range/algorithm/copy.hpp&gt;</li>
<li>&lt;boost/range/adaptor/reversed.hpp&gt;</li>
<li>&lt;boost/range/adaptor/transformed.hpp&gt;</li>
</ul>

<p>
Namespaces: 
</p>
<ul class="org-ul">
<li>boost</li>
<li>boost::adaptors</li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/adaptors.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Include all algorithms </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/copy.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/adaptor/reversed.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/adaptor/transformed.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;
<span class="org-keyword">namespace</span> <span class="org-constant">ba</span> = <span class="org-constant">boost</span>::adaptors;
</pre>
</div>



<ul class="org-ul">
<li>Boost for_each rage:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/for_each.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">auto</span> <span class="org-variable-name">xs</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>100, 80, 60, 70, 98, 45, 173<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Boost Range - for_each </span>
&gt;&gt; <span class="org-constant">boost</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
100
80
60
70
98
45
173

<span class="org-comment-delimiter">// </span><span class="org-comment">STL for_each: </span>
&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
100
80
60
70
98
45
173
</pre>
</div>


<ul class="org-ul">
<li>Boost sort:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/sort.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; <span class="org-keyword">auto</span> ys = xs;
&gt;&gt; ys
<span class="org-rainbow-delimiters-depth-1">{</span> 100, 80, 60, 70, 98, 45, 173 <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">----- Bost range ------------ // </span>
&gt;&gt; <span class="org-constant">boost</span>::sort<span class="org-rainbow-delimiters-depth-1">(</span>ys<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; ys
<span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">--- STL Range ------------- // </span>

&gt;&gt; <span class="org-keyword">auto</span> zs = xs;
&gt;&gt; zs
 <span class="org-rainbow-delimiters-depth-1">{</span> 100, 80, 60, 70, 98, 45, 173 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-constant">std</span>::sort<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; xs
 <span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Boost copy</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/copy.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> out;

&gt;&gt; <span class="org-constant">boost</span>::copy<span class="org-rainbow-delimiters-depth-1">(</span>xs, <span class="org-constant">std</span>::back_inserter<span class="org-rainbow-delimiters-depth-2">(</span>out<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Boost transform</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> weights = <span class="org-rainbow-delimiters-depth-1">{</span>10.2, 5.60, 8.25<span class="org-rainbow-delimiters-depth-1">}</span>;
&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ts<span class="org-rainbow-delimiters-depth-1">(</span>weights.size<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-constant">boost</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>weights, ts.begin<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x / 100.0; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; ts
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 0.10200000, 0.056000000, 0.082500000 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8bc5051" class="outline-3">
<h3 id="org8bc5051"><span class="section-number-3">1.13</span> Boost Pointer Container</h3>
<div class="outline-text-3" id="text-1-13">
<p>
The C++ Standard Template Library - STL does not work well with
polymorphic types as polymorphic objects cannot be stored in container
directly due to object slicing, only the base part is copied and the
derived is discarded; storing polymorphic objects with smart pointers
pointers is memory and exception safe. However, it is still cumbersome
and does not plays well with STL algorithms such as std::sort or
std::for_each with functors or lambda wrappers due to STL algorithms
be designed to work with values, not pointers.
</p>

<p>
The boost pointer container library provides STL-like containers for
holding heap-allocated objects or polymorphic objects. The containers
provide interoperability with STL algorithms; non-pointer notation for
accessing object members; single memory-ownership.  
</p>

<p>
Note: If there is shared ownership semantics, in other words, multiple
objects need to point to a polymorphic object during their entire
lifetime, then this library is not suitable to this use case. In this
situation, the best solution is to use a container of shared pointers
such as std::vector&lt;std::shared&lt;T&gt;&gt;. 
</p>

<p>
See: <a href="https://web.archive.org/web/20050413215843/http://www.oonumerics.org:80/tmpw00/kuehl.html">STL and OO Don't Easily Mix</a>
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/libs/ptr_container/doc/ptr_container.html">Pointer Container</a></li>
<li>Headers:
<ul class="org-ul">
<li>&lt;boost/ptr_container/ptr_vector.hpp&gt;</li>
<li>&lt;boost/ptr_container/ptr_deque.hpp&gt;</li>
<li>&lt;boost/ptr_container/nullable.hpp&gt;</li>
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/ptr_container/doc/headers.html">Full list</a></li>
</ul></li>
<li>Containers:
<ul class="org-ul">
<li>ptr_vector</li>
<li>ptr_deque</li>
<li>ptr_list</li>
<li>ptr_map</li>
<li>ptr_set</li>
</ul></li>
<li>Functions:
<ul class="org-ul">
<li>boost::str</li>
<li>boost::format</li>
</ul></li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Source: 
</p>
<ul class="org-ul">
<li>File: <a href="src/boost/boost-pointer-container.cpp">file:src/boost/boost-pointer-container.cpp</a></li>
<li>Online Compiler: <a href="https://rextester.com/LIJMMS16329">https://rextester.com/LIJMMS16329</a></li>
</ul>

<p>
Compiling and running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ boost-pointer-container.cpp -o <span class="org-keyword">boost-pointer-container.bin</span> -std=c++1z -g -O0 -Wall 
$ ./boost-pointer-container.bin
</pre>
</div>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/ptr_container/ptr_vector.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Sample class hierarchy: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>Base class of sample hierarchy.</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-keyword">static</span> <span class="org-keyword">auto</span> <span class="org-function-name">nextID</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">static</span> <span class="org-type">int</span> <span class="org-variable-name">i</span> = 0;
       <span class="org-keyword">return</span> ++i;
    <span class="org-rainbow-delimiters-depth-2">}</span>       

    <span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Destructor of base class must always be virtual</span>
    <span class="org-keyword">virtual</span> ~<span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
    <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">int</span> = 0;
    <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> = 0;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>Class DerivedA - Derived class of Base</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">DerivedA</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>    
<span class="org-function-name">public</span>:
    <span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">m_id</span>;

    <span class="org-function-name">DerivedA</span><span class="org-rainbow-delimiters-depth-2">()</span>: m_id<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Base</span>::nextID<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>  -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> <span class="org-string">"DerivedA"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> m_id;
    <span class="org-rainbow-delimiters-depth-2">}</span>   
    ~<span class="org-function-name">DerivedA</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Class DerivedA deleted. =&gt; Object ID = "</span>
                  &lt;&lt; m_id &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>Class DerivedB - Derived class of Base</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">DerivedB</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">m_id</span>;
<span class="org-function-name">public</span>:     
    <span class="org-function-name">DerivedB</span><span class="org-rainbow-delimiters-depth-2">()</span>: m_id<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Base</span>::nextID<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> <span class="org-string">"DerivedB"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> m_id;
    <span class="org-rainbow-delimiters-depth-2">}</span>       
    ~<span class="org-function-name">DerivedB</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Class DerivedB deleted. =&gt; ObjectID = "</span>
                  &lt;&lt; m_id  &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Function showType: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">showType</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object ID = "</span> &lt;&lt; obj.getID<span class="org-rainbow-delimiters-depth-2">()</span>
                  &lt;&lt;  <span class="org-string">" Class type = "</span> &lt;&lt; obj.getType<span class="org-rainbow-delimiters-depth-2">()</span>
                  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Main Function</b>
</p>

<p>
Experiment 0: STL Container olding non-polymorphic objects
(non-dynamically allocated, type is known at compile-time).
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-1">&gt;</span> xsa;
xsa.push_back<span class="org-rainbow-delimiters-depth-1">(</span>DerivedA<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xsa.push_back<span class="org-rainbow-delimiters-depth-1">(</span>DerivedA<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xsa.emplace_back<span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Run std::for_each"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xsa.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xsa.end<span class="org-rainbow-delimiters-depth-2">()</span>, showType<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Experiment 1: STL container holding polymorphic objects:
</p>

<ul class="org-ul">
<li>Note: STL algorithms require lambda wrappers.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n === EXPERIMENT 1 =============================="</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">shared_ptr</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Base<span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> xs;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedB<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedB<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; xs[0]  type "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
          &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; xs[2]  type "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
          &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>,
              <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">pBase</span><span class="org-rainbow-delimiters-depth-2">){</span>
                      showType<span class="org-rainbow-delimiters-depth-3">(</span>*pBase<span class="org-rainbow-delimiters-depth-3">)</span>;
              <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> identifiers1;
<span class="org-function-name">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>,
               <span class="org-constant">std</span>::back_inserter<span class="org-rainbow-delimiters-depth-2">(</span>identifiers1<span class="org-rainbow-delimiters-depth-2">)</span>,
               <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">pBase</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> pBase-&gt;getID<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Experiment 2: Boost ptr_vector 
</p>

<ul class="org-ul">
<li>Notes:
<ul class="org-ul">
<li>Accessing elements ps[0] uses conventional notation without (-&gt;)
arrow operator.</li>
<li>STL algorithms does not need lambda or functor wrappers.</li>
<li>Memory solely owned by ptr_vector (single-ownership)</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">boost</span>::<span class="org-type">ptr_vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>Base<span class="org-rainbow-delimiters-depth-1">&gt;</span> ps;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedA</span><span class="org-rainbow-delimiters-depth-1">)</span>;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedB</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedA</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedB</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; ps[0]  type "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; ps[1]  type "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; ps[2]  type "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> identifiers2;
<span class="org-function-name">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>,
               <span class="org-constant">std</span>::back_inserter<span class="org-rainbow-delimiters-depth-2">(</span>identifiers2<span class="org-rainbow-delimiters-depth-2">)</span>,
               <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Base</span>::getID, <span class="org-constant">std</span>::<span class="org-constant">placeholders</span>::_1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n ==&gt; Show objects before deleting last item "</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>ps.begin<span class="org-rainbow-delimiters-depth-2">()</span>, ps.end<span class="org-rainbow-delimiters-depth-2">()</span>, showType<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n ==&gt; Show objects after deleting last item "</span> &lt;&lt; <span class="org-string">"\n"</span>;
ps.pop_back<span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>ps.begin<span class="org-rainbow-delimiters-depth-2">()</span>, ps.end<span class="org-rainbow-delimiters-depth-2">()</span>, showType<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" ============= END ================="</span> &lt;&lt; <span class="org-string">"\n"</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org0afaa8d" class="outline-3">
<h3 id="org0afaa8d"><span class="section-number-3">1.14</span> Boost CPU Timer</h3>
<div class="outline-text-3" id="text-1-14">
<p>
Boost CPU timer is library used for measuring the CPU time spend on
some computation, the time is reported to the user after the timer
object is destroyed at the current scope.
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_70_0/libs/timer/doc/cpu_timers.html">cpu_timers</a></li>
</ul>

<p>
<b>Code Example</b> 
</p>

<p>
The boost cpu timer library is used to measure the time for computing
<a href="https://en.wikipedia.org/wiki/Fibonacci_number">fibonacci</a> numbers using recursive and non-recursive functions.
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.14 FATAL_ERROR)
<span class="org-function-name">project</span>(boost-cpu-time-test)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-function-name">find_package</span>(Boost REQUIRED timer)
<span class="org-function-name">add_executable</span>(cputime cputime.cpp)
<span class="org-function-name">target_link_libraries</span>(cputime Boost::timer)
</pre>
</div>

<p>
File: cputime.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">random</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/timer/timer.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Macro for displaying variables</span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">DISP_EXPR</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n [INFO] "</span> &lt;&lt; #expr &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>expr<span class="org-rainbow-delimiters-depth-1">)</span>  &lt;&lt; <span class="org-string">"\n"</span>

<span class="org-keyword">using</span> <span class="org-type">ulong</span> = <span class="org-type">unsigned</span> <span class="org-type">long</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>;
<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_non_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">ulong</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =========== Iterations: 30 ======== "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">starts measuring time here when object 't' is constructed.</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_non_recursive<span class="org-rainbow-delimiters-depth-4">(</span>30<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">report timer when object (t) is destroyed (RAII)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_recursive<span class="org-rainbow-delimiters-depth-4">(</span>30<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =========== Iterations: 40 ========= "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_non_recursive<span class="org-rainbow-delimiters-depth-4">(</span>40<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_recursive<span class="org-rainbow-delimiters-depth-4">(</span>40<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =========== Iterations: 50 ========= "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_non_recursive<span class="org-rainbow-delimiters-depth-4">(</span>50<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_recursive<span class="org-rainbow-delimiters-depth-4">(</span>50<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">----------------------------------------------------------//</span>

<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>n &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> 1; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> fibonacci_recursive<span class="org-rainbow-delimiters-depth-2">(</span>n - 1<span class="org-rainbow-delimiters-depth-2">)</span> + fibonacci_recursive<span class="org-rainbow-delimiters-depth-2">(</span>n - 2<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_non_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">ulong</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">ulong</span> <span class="org-variable-name">a</span> = 0, <span class="org-variable-name">b</span> = 1, <span class="org-variable-name">next</span> = 0;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">i</span> = 0UL; i &lt; n; ++i<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        next = a + b;
        a = b;
        b = next;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> next;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Command line compilation: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Debug build =&gt; Debug symbols ON and optimizations disabled </span>
$ g++ cputime.cpp -o <span class="org-keyword">cputime.bin</span> -std=c++1z -g -O0 -Wall -Wextra -lboost_timer

<span class="org-comment-delimiter"># </span><span class="org-comment">Release build =&gt; Debug symbols OFF and optimizations enabled </span>
$ g++ cputime.cpp -o <span class="org-keyword">cputime.bin</span> -std=c++1z -O3 -funroll-loops -flto -Wall -Wextra -lboost_timer
</pre>
</div>

<p>
Output for debug build: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./cputime.bin 
 =========== Iterations: 30 ======== 

 [INFO] fibonacci_non_recursive(30) = 1346269
 0.000104s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(30) = 1346269
 0.045962s wall, 0.050000s user + 0.000000s system = 0.050000s CPU (108.8%)
 =========== Iterations: 40 ========= 

 [INFO] fibonacci_non_recursive(40) = 165580141
 0.000031s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(40) = 165580141
 0.833593s wall, 0.830000s user + 0.000000s system = 0.830000s CPU (99.6%)
 =========== Iterations: 50 ========= 

 [INFO] fibonacci_non_recursive(50) = 20365011074
 0.000003s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(50) = 20365011074
 102.039261s wall, 101.750000s user + 0.000000s system = 101.750000s CPU (99.7%)

</pre>
</div>

<p>
Output for release build: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./cputime.bin 
 =========== Iterations: 30 ======== 

 [INFO] fibonacci_non_recursive(30) = 1346269
 0.000161s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(30) = 1346269
 0.020816s wall, 0.020000s user + 0.000000s system = 0.020000s CPU (96.1%)
 =========== Iterations: 40 ========= 

 [INFO] fibonacci_non_recursive(40) = 165580141
 0.000031s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(40) = 165580141
 0.399674s wall, 0.400000s user + 0.000000s system = 0.400000s CPU (100.1%)
 =========== Iterations: 50 ========= 

 [INFO] fibonacci_non_recursive(50) = 20365011074
 0.000005s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(50) = 20365011074
 46.683056s wall, 46.410000s user + 0.040000s system = 46.450000s CPU (99.5%) 
</pre>
</div>
</div>
</div>

<div id="outline-container-orge0a5b85" class="outline-3">
<h3 id="orge0a5b85"><span class="section-number-3">1.15</span> Boost Interprocess</h3>
<div class="outline-text-3" id="text-1-15">
</div>
<div id="outline-container-org7e5993b" class="outline-4">
<h4 id="org7e5993b"><span class="section-number-4">1.15.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-15-1">
<p>
<a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess.html">Boost.Interprocess</a> is a library that provides wrappers or a common
interface for many operating-system-specific inter process
communication (IPC) primitive functions. The library provides wrappers
to the following IPC facilities:
</p>

<ul class="org-ul">
<li>File locking</li>
<li>Mutex</li>
<li>Semaphore</li>
<li>Shared Memory</li>
<li>Memory Mapped File</li>
<li>Message Queue</li>
</ul>
</div>
</div>
<div id="outline-container-org91c10ba" class="outline-4">
<h4 id="org91c10ba"><span class="section-number-4">1.15.2</span> Example: Shared memory facilities</h4>
<div class="outline-text-4" id="text-1-15-2">
<p>
Shared memory is the fastest IPC inter-process communication mechanism
available in most operating systems for exchanging data between
processes in the same machine. The share memory IPC allows data to be
shared by multiple processes without any copying overhead which makes
it faster than sockets, message passing and so on. However, using
operating systems shared memory APIs directly is not easy or
portable. Boost inter-process library provides many facilities that
encapsulates operating systems APIs with a higher level interface that
makes the code portable across many operating systems.
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess.html">Boost.InterProcess</a></li>
</ul>

<p>
This code provide many client/server examples about using the
Boost.Interprocess shared memory API and also about how to allocate
STL containers in a shared memory segment. 
</p>

<p>
<b>Source Code</b> 
</p>
<ul class="org-ul">
<li><a href="src/boost/boost-shared-memory1.cpp">file:src/boost/boost-shared-memory1.cpp</a></li>
</ul>

<p>
<b>Headers</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/shared_memory_object.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/sync/named_mutex.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/managed_shared_memory.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/segment_manager.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Namespace alias: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;
</pre>
</div>

<p>
Templates: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Generic Shared Memory Allocator */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">ShmemAllocator</span> = <span class="org-constant">bi</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-constant">bi</span>::<span class="org-constant">managed_shared_memory</span>::segment_manager<span class="org-rainbow-delimiters-depth-1">&gt;</span> ;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Generic STL vector allocated in shared memory */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">ShmemVector</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-type">ShmemAllocator</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ;
</pre>
</div>

<p>
Class SharedMemoryCleaner uses the RAII (Resource Acquisition Is
Initialization) for deleting shared memory segments when out of
scope. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">RAII Object for removing shared memory segment. */</span>
<span class="org-keyword">struct</span> <span class="org-type">SharedMemoryCleaner</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_name</span>;
   <span class="org-function-name">SharedMemoryCleaner</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>

   ~<span class="org-function-name">SharedMemoryCleaner</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] Remove shared memory segment { name = "</span> &lt;&lt; m_name &lt;&lt; <span class="org-string">" }"</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">bi</span>::<span class="org-constant">shared_memory_object</span>::remove<span class="org-rainbow-delimiters-depth-3">(</span>m_name.c_str<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Function Declarations: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">serverA</span><span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-type">int</span> <span class="org-function-name">clientA</span><span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-type">int</span> <span class="org-function-name">serverB</span><span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-type">int</span> <span class="org-function-name">clientB</span><span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-type">int</span> <span class="org-function-name">serverC</span><span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-type">int</span> <span class="org-function-name">clientC</span><span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<p>
Main Function: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">using</span> <span class="org-type">DispatchTable</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string, <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>;
     <span class="org-type">DispatchTable</span> <span class="org-variable-name">table</span> = <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"serverA"</span>, &amp;serverA<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"clientA"</span>, &amp;clientA<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"serverB"</span>, &amp;serverB<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"clientB"</span>, &amp;clientB<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"serverC"</span>, &amp;serverC<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"clientC"</span>, &amp;clientC<span class="org-rainbow-delimiters-depth-3">}</span>
     <span class="org-rainbow-delimiters-depth-2">}</span>;

     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: invalid arguments."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-keyword">return</span> EXIT_SUCCESS;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = table.find<span class="org-rainbow-delimiters-depth-2">(</span>argv<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>it == table.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: invalid command."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-keyword">return</span> EXIT_FAILURE;       
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Execute function </span>
     <span class="org-keyword">return</span> it-&gt;second<span class="org-rainbow-delimiters-depth-2">()</span>;           
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Function: ServerA.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Print string (char array) to shared memory </span>
<span class="org-type">int</span> <span class="org-function-name">serverA</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Create shared memory wrapper object </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>
                 <span class="org-comment-delimiter">// </span><span class="org-comment">Creates shared memory segment if it does not exist </span>
                 <span class="org-constant">bi</span>::open_or_create,
                 <span class="org-string">"shared_memory_segment"</span>,
                 <span class="org-constant">bi</span>::read_write
               <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">RAII object that removes the segment when out of scope </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">shm_remove</span> = SharedMemoryCleaner<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_memory_segment"</span><span class="org-rainbow-delimiters-depth-2">)</span>; 
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set size of the shared memory segment in Kb (kbytes = 1024 bytes)</span>
    shm.truncate<span class="org-rainbow-delimiters-depth-2">(</span>1024<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">1kb (kbytes)</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Map the shared memory segment to current process</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_write<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to shared memory </span>
    <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Print to shared memory</span>
    <span class="org-type">char</span>* <span class="org-variable-name">pChar</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::sprintf<span class="org-rainbow-delimiters-depth-2">(</span>pChar, <span class="org-string">" ==&gt; String written to shared memory segment"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Keep the server Alive as the shared memory segment is not </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">persistent on Windows. </span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to EXIT "</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Function: clientA.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Print string (char array) to shared memory </span>
<span class="org-type">int</span> <span class="org-function-name">clientA</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Create shared memory wrapper object </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-comment-delimiter">// </span><span class="org-comment">Creates shared memory segment if it does not exist </span>
       <span class="org-constant">bi</span>::open_only,
       <span class="org-string">"shared_memory_segment"</span>,
       <span class="org-constant">bi</span>::read_only
       <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_only<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Interpret shared memory as a pointer to char* </span>
    <span class="org-type">char</span>* <span class="org-variable-name">pMessage</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Content of shared memory = "</span> &lt;&lt; pMessage &lt;&lt; <span class="org-string">"\n"</span>;    
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Function: serverB.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Allocate double[] array in shared memory */</span>
<span class="org-type">int</span> <span class="org-function-name">serverB</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>   
     <span class="org-constant">bi</span>::open_or_create,
     <span class="org-string">"shared_memory_segment"</span>,
     <span class="org-constant">bi</span>::read_write
     <span class="org-rainbow-delimiters-depth-2">}</span>;
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm_remove</span> = SharedMemoryCleaner<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_memory_segment"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     shm.truncate<span class="org-rainbow-delimiters-depth-2">(</span>1024<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">1kb (kbytes)</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_write<span class="org-rainbow-delimiters-depth-2">}</span>;
     <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Allocate array of 5 doubles in the shared memory </span>
     <span class="org-type">double</span>* <span class="org-variable-name">arr</span> = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-2">(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">[</span>5<span class="org-rainbow-delimiters-depth-2">]</span>;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> = 100.34;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> = 200.5;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = -5.6;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span> = 9.10;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> = 10.5;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Keep the server Alive as the shared memory segment is not </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">persistent on Windows. </span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to EXIT "</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Function clientB:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Retrieve double[] array from shared memory */</span>
<span class="org-type">int</span> <span class="org-function-name">clientB</span><span class="org-rainbow-delimiters-depth-1">(){</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>
          <span class="org-constant">bi</span>::open_only, 
         <span class="org-string">"shared_memory_segment"</span>,
          <span class="org-constant">bi</span>::read_only 
     <span class="org-rainbow-delimiters-depth-2">}</span>;
     <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_only<span class="org-rainbow-delimiters-depth-2">}</span>;

     <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-type">double</span>* <span class="org-variable-name">arr</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[0] = "</span> &lt;&lt; arr<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[1] = "</span> &lt;&lt; arr<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[2] = "</span> &lt;&lt; *<span class="org-rainbow-delimiters-depth-2">(</span>arr + 2<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[3] = "</span> &lt;&lt; *<span class="org-rainbow-delimiters-depth-2">(</span>arr + 3<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[4] = "</span> &lt;&lt; arr<span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Function: ServerC. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Allocate STL container in shared memory  </span>
<span class="org-type">int</span> <span class="org-function-name">serverC</span><span class="org-rainbow-delimiters-depth-1">(){</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Remove shared memory segment if it already exists </span>
     <span class="org-constant">bi</span>::<span class="org-constant">shared_memory_object</span>::remove<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_seg"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-keyword">auto</span> <span class="org-variable-name">segment</span> = <span class="org-constant">bi</span>::managed_shared_memory<span class="org-rainbow-delimiters-depth-2">(</span>
             <span class="org-constant">bi</span>::open_or_create,
             <span class="org-string">"shared_seg"</span>, <span class="org-comment-delimiter">// </span><span class="org-comment">segment name </span>
             4096              <span class="org-comment-delimiter">// </span><span class="org-comment">4 kbytes </span>
             <span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm_remove</span> = SharedMemoryCleaner<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_seg"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Segment manager pointer </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Type: managed_shared_memory::segment_manage* </span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">segmgr</span> = segment.get_segment_manager<span class="org-rainbow-delimiters-depth-2">()</span>;
     segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"text"</span><span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-string">"'Hello world shared memory'"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"speed"</span><span class="org-rainbow-delimiters-depth-2">)(</span>10.50<span class="org-rainbow-delimiters-depth-2">)</span>;
     segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"nodes"</span><span class="org-rainbow-delimiters-depth-2">)(</span>100<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">=== Allocate STL Vector in Shared Memory === // </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Build shared memory allocator </span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">aloc</span> = ShmemAllocator<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>segmgr<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Instantiate vector in shared memory </span>
     <span class="org-type">ShmemVector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>* <span class="org-variable-name">pVector</span> = segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ShmemVector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"avector"</span><span class="org-rainbow-delimiters-depth-2">)(</span>aloc<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;reserve<span class="org-rainbow-delimiters-depth-2">(</span>50<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>4.5<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>10.3<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>100.50<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>20.0<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to EXIT "</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>


<p>
Function: ClientC.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">clientC</span><span class="org-rainbow-delimiters-depth-1">(){</span>
      <span class="org-keyword">auto</span> <span class="org-variable-name">segment</span> = <span class="org-constant">bi</span>::managed_shared_memory<span class="org-rainbow-delimiters-depth-2">(</span>
              <span class="org-constant">bi</span>::open_or_create,
              <span class="org-string">"shared_seg"</span>, <span class="org-comment-delimiter">// </span><span class="org-comment">segment name </span>
              4096          <span class="org-comment-delimiter">// </span><span class="org-comment">4 kbytes </span>
            <span class="org-rainbow-delimiters-depth-2">)</span>;  

      <span class="org-keyword">auto</span> <span class="org-variable-name">segmgr</span> = segment.get_segment_manager<span class="org-rainbow-delimiters-depth-2">()</span>;
      <span class="org-constant">std</span>::<span class="org-type">pair</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>*, <span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">p1</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"speed"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Speed = "</span> &lt;&lt; *p1.first &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-keyword">auto</span> <span class="org-variable-name">pairNodes</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"nodes"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Nodes = "</span> &lt;&lt; *pairNodes.first &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-keyword">auto</span> <span class="org-variable-name">pairText</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"text"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Text = "</span> &lt;&lt; *pairText.first &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-comment-delimiter">// </span><span class="org-comment">C++17 - Structured Binding</span>
      <span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">[</span>pVector, _<span class="org-rainbow-delimiters-depth-2">]</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ShmemVector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"avector"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; pVector-&gt;size() = "</span> &lt;&lt; pVector-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; pVector[0] = "</span> &lt;&lt; pVector-&gt;<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-2">[](</span>0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; pVector[1] = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>*pVector<span class="org-rainbow-delimiters-depth-2">)[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-type">size_t</span> <span class="org-variable-name">idx</span> = 0;
      <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: *pVector<span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"pVector["</span> &lt;&lt; idx++ &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt;  x &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-type">double</span> <span class="org-variable-name">speed</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter new speed: "</span>;
      <span class="org-constant">std</span>::cin &gt;&gt; speed;
      *p1.first = speed;

      pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>speed<span class="org-rainbow-delimiters-depth-2">)</span>;

      <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
<b>Compile on Linux, OSX or any other Unix-like OS</b>
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">GCC  </span>
$ g++ boost-shared-memory1.cpp -o <span class="org-keyword">boost-shared-memory1.bin</span> -std=c++1z -Wall -lpthread -lrt

<span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ boost-shared-memory1.cpp -o <span class="org-keyword">boost-shared-memory1.bin</span> -std=c++1z -Wall -lpthread -lrt
</pre>
</div>

<p>
<b>Compile on Windows</b> 
</p>

<p>
Compile with Visual C++ or MSVC (VC++)
</p>

<div class="org-src-container">
<pre class="src src-bat">$ cl.exe boost-shared-memory1.cpp /<span class="org-type">Fe</span>:boost-shared-memory1.exe /<span class="org-type">EHsc</span> /<span class="org-type">std</span>:c++17 ...
  /<span class="org-type">GA</span> /<span class="org-type">MDd</span> /<span class="org-type">nologo</span> /<span class="org-type">I</span> C:\boost\boost_1_69_0 /<span class="org-type">link</span> /<span class="org-type">LIBPATH</span>:C:\boost\lib
</pre>
</div>

<p>
Compile with Mingw (GCC)
</p>

<div class="org-src-container">
<pre class="src src-bat">$ g++ boost-shared-memory1.cpp -<span class="org-type">o</span> <span class="org-keyword">boost-shared-memory1.exe</span> -<span class="org-type">std</span>=c++1z -<span class="org-type">I</span> C:\boost\boost_1_69_0
</pre>
</div>

<p>
<b>Running functions serverA and clientA</b>
</p>

<p>
The process that runs serverA in terminal 1 allocates a string in the
shared memory and the process running in the terminal 2 displays the
string from fetched from shared memory. 
</p>

<p>
Terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe serverA
Enter RETURN to EXIT
</pre>
</div>

<p>
Terminal 2: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe clientA
 Content of shared memory =  ==&gt; String written to shared memory segment
</pre>
</div>

<p>
<b>Running functions serverB and clientB</b> 
</p>

<p>
Terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt;
<span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe serverB
Enter RETURN to EXIT
</pre>
</div>

<p>
Terminal 2: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt;boost-shared-memory1.exe clientB
arr[0] = 100.34
arr[1] = 200.5
arr[2] = -5.6
arr[3] = 9.1
arr[4] = 10.5
</pre>
</div>

<p>
<b>Running functions serverC and clientC</b> 
</p>

<p>
The process running in terminal 1 (serverC) allocates several variables in the
shared memory and an std::vector&lt;double&gt; container and the process
running in the terminal 2 (clientC) reads the shared memory and
updates the variable speed and the vector container. The changes in
the std::vector container are persistent on each execution of the
process in terminal 2 while the process running the command serverC is
running. 
</p>

<p>
Terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe serverC
Enter RETURN to EXIT
</pre>
</div>

<p>
Terminal 2: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe clientC
Speed = 100.665
Nodes = 100
Text = <span class="org-string">'Hello world shared memory'</span>
 =&gt; pVector-&gt;size() = 5
 =&gt; pVector[0] = 4.5
 =&gt; pVector[1] = 10.3
pVector[0] = 4.5
pVector[1] = 10.3
pVector[2] = 100.5
pVector[3] = 20
pVector[4] = 100.665
Enter new speed: 40.51

<span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe clientC
Speed = 40.51
Nodes = 100
Text = <span class="org-string">'Hello world shared memory'</span>
 =&gt; pVector-&gt;size() = 6
 =&gt; pVector[0] = 4.5
 =&gt; pVector[1] = 10.3
pVector[0] = 4.5
pVector[1] = 10.3
pVector[2] = 100.5
pVector[3] = 20
pVector[4] = 100.665
pVector[5] = 40.51
Enter new speed: ^C

</pre>
</div>
</div>
</div>

<div id="outline-container-org45c0dc6" class="outline-4">
<h4 id="org45c0dc6"><span class="section-number-4">1.15.3</span> Example: Shared memory logging with mutex synchronization</h4>
<div class="outline-text-4" id="text-1-15-3">
<p>
This sample program emulates a client that sends logging message to a
shared memory segment and a server that receives the logging messages
from the shared memory and prints them to the standard output
stdout. A named mutex object is used for coordinating both processes. 
</p>

<p>
<b>File:</b>
</p>
<ul class="org-ul">
<li><a href="src/boost/boost-shared-memory-logger.cpp">file:src/boost/boost-shared-memory-logger.cpp</a></li>
</ul>

<p>
<b>Headers:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstring</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">strok </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">ctime</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">chrono</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/shared_memory_object.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/sync/named_mutex.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/sync/scoped_lock.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
<b>Namespace Alias</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;
</pre>
</div>

<p>
<b>Function Main</b> 
</p>

<p>
Create shared memory segment: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create shared memory wrapper object </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">bi</span>::open_or_create,  
        <span class="org-string">"logger_shm"</span>,
        <span class="org-constant">bi</span>::read_write
<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Set size of the shared memory segment in Kb (kbytes = 1024 bytes)</span>
shm.truncate<span class="org-rainbow-delimiters-depth-1">(</span>4096<span class="org-rainbow-delimiters-depth-1">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">4kb (kbytes)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Map the shared memory segment to current process</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-1">{</span>shm, <span class="org-constant">bi</span>::read_write<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to shared memory </span>
<span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<p>
Create a named mutex object for process synchronizing the shared memory
access: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create mutex Object </span>
<span class="org-function-name">bi</span>::named_mutex amutex<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">bi</span>::open_or_create, <span class="org-string">"logger_mutex"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Check command line arguments: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"$ "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">" [-client|-server]"</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">std</span>::string cmd = argv<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>;
</pre>
</div>

<p>
Server command: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>cmd == <span class="org-string">"-server"</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-type">char</span>* <span class="org-variable-name">pMessage</span> = <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">)</span> pMem;
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [TRACE] Waiting logging message "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-comment-delimiter">// </span><span class="org-comment">Acquire mutex lock blocking this thread </span>
         amutex.lock<span class="org-rainbow-delimiters-depth-3">()</span>;
         <span class="org-comment-delimiter">// </span><span class="org-comment">Print logging memssage from shared memory </span>
         <span class="org-constant">std</span>::cout &lt;&lt; pMessage &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Client command: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>cmd == <span class="org-string">"-client"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Interpret shared memory as a pointer an null-terminated</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">array of characters </span>
    <span class="org-type">char</span>* <span class="org-variable-name">pMessage</span> = <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">)</span> pMem;
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span>;
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Enter line: "</span>;
        <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cin, line<span class="org-rainbow-delimiters-depth-3">)</span>;           
        <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">ss</span>;
        <span class="org-keyword">auto</span> <span class="org-variable-name">now</span> = <span class="org-constant">std</span>::<span class="org-constant">chrono</span>::<span class="org-constant">system_clock</span>::now<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-constant">std</span>::<span class="org-type">time_t</span> <span class="org-variable-name">ttp</span> = <span class="org-constant">std</span>::<span class="org-constant">chrono</span>::<span class="org-constant">system_clock</span>::to_time_t<span class="org-rainbow-delimiters-depth-3">(</span>now<span class="org-rainbow-delimiters-depth-3">)</span>;
        ss &lt;&lt; <span class="org-string">" [INFO] "</span> &lt;&lt; strtok<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::ctime<span class="org-rainbow-delimiters-depth-4">(</span>&amp;ttp<span class="org-rainbow-delimiters-depth-4">)</span>, <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-string">" - "</span> &lt;&lt; line;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Print to shared memory (pointer by pMessage)</span>
        <span class="org-constant">std</span>::sprintf<span class="org-rainbow-delimiters-depth-3">(</span>pMessage, <span class="org-string">"%s"</span>, ss.str<span class="org-rainbow-delimiters-depth-4">()</span>.c_str<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Release mutex lock </span>
        amutex.unlock<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>      
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Compiling on Linux or any other Unix-like OS:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ boost-shared-memory-logger.cpp -o <span class="org-keyword">logger.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt  
<span class="org-comment-delimiter"># </span><span class="org-comment">GCC</span>
$ gcc++ boost-shared-memory-logger.cpp -o <span class="org-keyword">logger.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt  
</pre>
</div>

<p>
<b>Compiling on Windows with MingW/GCC</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ boost-logger.cpp -o <span class="org-keyword">boost-logger.exe</span> -IC:\boost\boost_1_69_0
</pre>
</div>

<p>
<b>Compiling on Windows with MSVC (VC++)</b>
</p>

<p>
Problem faced when compiling wiht MSVC:
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/9628527/linker-error-lnk1104-with-libboost-filesystem-vc100-mt-s-1-49-lib">c++ - Linker error LNK1104 with 'libboost_filesystem-vc100-mt-s-1_49.lib' - Stack Overflow</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cl.exe boost-logger.cpp /Fe:boost-logger1.exe /EHsc /GA /MDd /nologo /I C:\boost\boost_1_69_0 /link /LIBPATH:C:\boost\lib
</pre>
</div>

<p>
Run program as server in terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./logger.bin -server
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:13:26 2019 - price 10% up
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:13:38 2019 - price change 4.5 down
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:14:07 2019 - new forecast arriving soon
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:14:11 2019 - new data
 [TRACE] Waiting logging message 
 ... ...  ... ...  ... ...  ... ... 
</pre>
</div>

<p>
Run program as client in terminal 2: 
</p>
<ul class="org-ul">
<li>User type messages in this terminal and they are sent to the shared
memory buffer, then mutex lock is released what makes the server
process print the message from the shared memory to standard output.</li>
</ul>


<div class="org-src-container">
<pre class="src src-sh">$ ./logger.bin -client
 =&gt; Enter line: price 10% up
 =&gt; Enter line: price change 4.5 down
 =&gt; Enter line: new forecast arriving soon
 =&gt; Enter line: new data
 =&gt; Enter line: ^C
</pre>
</div>
</div>
</div>
<div id="outline-container-org17acc9f" class="outline-4">
<h4 id="org17acc9f"><span class="section-number-4">1.15.4</span> Example: Memory Mapped Files</h4>
<div class="outline-text-4" id="text-1-15-4">
</div>
<ol class="org-ol">
<li><a id="org704c7d3"></a>Overview<br />
<div class="outline-text-5" id="text-1-15-4-1">
<p>
Most operating systems have system-calls or APIs for mapping files
into a process' address space or virtual memory which allows reading
and writing to a file as it was a memory. Any changes in memory-mapped
file memory segment is immediately written to the disk. 
</p>

<p>
Among other things, memory-mapped files provide the following
benefits:
</p>

<ul class="org-ul">
<li>Faster and more performant file processing, specially for big files
of Gigabyte-size (big-data).</li>

<li>Persistence and serialization:
<ul class="org-ul">
<li>Simplified serialization, any object allocated in a memory-mapped
file segment is automatically written to the mapped file in a
disk. And deserialization only requires reading the object from
the memory or just casting a pointer without any special
deserialization code.</li>
</ul></li>
</ul>

<p>
Operating System APIs: 
</p>

<ul class="org-ul">
<li>Unix-like OSes or POSIX (Linux, MacOSX, Android, BSD, QNX &#x2026;)
<ul class="org-ul">
<li>Uses the system-call or API: <a href="https://en.wikipedia.org/wiki/Mmap">mmap</a> for memory-mapped files.</li>
</ul></li>

<li>Windows NT, Windows CE:
<ul class="org-ul">
<li>Uses the Win32 APIs: <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/winbase/nf-winbase-createfilemappinga">CreateFileMapping</a>, <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/memoryapi/nf-memoryapi-mapviewoffile">MapViewOFile</a>, <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/memoryapi/nf-memoryapi-unmapviewoffile">UnmapViewOfFile</a></li>
</ul></li>
</ul>

<p>
The boost interprocess library provides a generalized interface to
those operating system specific memory-mapping file APIs. The library
also provides a C++ friendly notation, memory-allocators, memory
managers and so on that simplifies the usage on many different
operating systems.
</p>

<p>
See also: 
</p>
<ul class="org-ul">
<li>Boost.Interprocess: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess/sharedmemorybetweenprocesses.html#interprocess.sharedmemorybetweenprocesses.mapped_file">Memory Mapped Files</a></li>
<li>Boost.Interprocess: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_mapped_files">Managed Mapped Files</a></li>
<li><a href="http://john.freml.in/mmap-pattern">John Fremlin's blog: The mmap pattern</a></li>
<li><a href="https://stackoverflow.com/questions/7159271/live-c-objects-that-live-in-memory-mapped-files">"live C++ objects that live in memory mapped files"? - Stack Overflow</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/standard/io/memory-mapped-files">Memory-Mapped Files | Microsoft Docs</a></li>
<li><a href="https://software.intel.com/en-us/articles/introduction-to-programming-with-persistent-memory-from-intel">Introduction to Programming with Persistent Memory from Intel | Intel® Software</a></li>
<li><a href="http://blogs.microsoft.co.il/sasha/2016/01/21/myth-busting-memory-mapped-files-and-shared-memory-on-windows/">Myth-Busting: Memory-Mapped Files and Shared Memory on Windows | All Your Base Are Belong To Us</a></li>
<li><a href="https://en.wikipedia.org/wiki/Memory-mapped_file">Memory-mapped file - Wikipedia</a></li>
<li><a href="https://pymotw.com/2/mmap/">mmap – Memory-map files - Python Module of the Week</a></li>
</ul>
</div>
</li>
<li><a id="org662c1f0"></a>Code<br />
<div class="outline-text-5" id="text-1-15-4-2">
<p>
<b>File</b>:
</p>
<ul class="org-ul">
<li><a href="src/boost/boost-memory-mapped-file.cpp">file:src/boost/boost-memory-mapped-file.cpp</a></li>
</ul>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/managed_mapped_file.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/file_mapping.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
<b>Namespace alias:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess; 
</pre>
</div>

<p>
<b>Template aliases:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Generic Memory-mapped file allocator */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">MMFAllocator</span> = <span class="org-constant">bi</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-constant">bi</span>::<span class="org-constant">managed_mapped_file</span>::segment_manager<span class="org-rainbow-delimiters-depth-1">&gt;</span> ;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Generic STL vector allocated in memory-mapped file */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">MMFVector</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-type">MMFAllocator</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ;
</pre>
</div>

<p>
<b>Function Main</b>
</p>

<p>
Intial definitions: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">constexpr</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">fileName</span> = <span class="org-string">"memory-dump.dat"</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">size_t</span>      <span class="org-variable-name">fileSize</span> = 4096; <span class="org-comment-delimiter">// </span><span class="org-comment">4 kbytes</span>
<span class="org-type">bool</span> <span class="org-variable-name">flagFileExists</span>            = fileExists<span class="org-rainbow-delimiters-depth-1">(</span>fileName<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Manged file mapping object =&gt; Creates the file if it does not exists </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">mf</span> = <span class="org-constant">bi</span>::managed_mapped_file<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">bi</span>::open_or_create, fileName, fileSize<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Check if file exits, if does not exist yet, then initial data is
written to the file by allocating data in the mapped memory. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-negation-char">!</span>flagFileExists<span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Executed when the file did not exist </span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Setting file data"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
     mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"NumberOfNodes"</span><span class="org-rainbow-delimiters-depth-2">)(</span>100<span class="org-rainbow-delimiters-depth-2">)</span>;   
     mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"Speed"</span><span class="org-rainbow-delimiters-depth-2">)(</span>200.0<span class="org-rainbow-delimiters-depth-2">)</span>;
     mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"Text"</span><span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-string">"'Allocated text in memory mapped file'"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Allocate std::vector&lt;double&gt;</span>
     <span class="org-type">MMFAllocator</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">aloc1</span><span class="org-rainbow-delimiters-depth-2">(</span>mf.get_segment_manager<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-type">MMFVector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>* <span class="org-variable-name">pVector</span> = mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">MMFVector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"AVector"</span><span class="org-rainbow-delimiters-depth-2">)(</span>aloc1<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;reserve<span class="org-rainbow-delimiters-depth-2">(</span>20<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>40.5<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>98.10<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>-50.45<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span>;        

     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
If the file already exists, then it is mapped into the current
process' virtual memory and the data extracted just by reading the
memory, any modification to this mapped segment is written to the file
memory-dump.dat. 
</p>

<p>
Get variable: NumberOfNodes and increment it.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">======= Executed when file already exists =========// </span>

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Retrieving objects from memory mapped file"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-comment-delimiter">// </span><span class="org-comment">Retrieve variable NumberOfNodes with very explicitly and verbose notation </span>
<span class="org-function-name">std</span>::<span class="org-type">pair</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*, <span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> pairResult1 =  mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"NumberOfNodes"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>pairResult1.first == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] I cannot find the object 'NumberOfNodes'"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Number of nodes = "</span> &lt;&lt; *pairResult1.first  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">(</span>*pairResult1.first<span class="org-rainbow-delimiters-depth-1">)</span>++;
</pre>
</div>

<p>
Get variable 'Text' and display it. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Retrieve variable text</span>
<span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">[</span>pText, _size1 <span class="org-rainbow-delimiters-depth-1">]</span> = mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"Text"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>pText != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Text = "</span> &lt;&lt; *pText &lt;&lt; <span class="org-string">"\n"</span>;
</pre>
</div>

<p>
Get variable 'Speed' and update it with value read from user input. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Retrieve variable speed</span>
<span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">[</span>pSpeed, _size2 <span class="org-rainbow-delimiters-depth-1">]</span> = mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"Speed"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>pSpeed != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Speed = "</span> &lt;&lt; *pSpeed &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Set new speed := "</span>;
<span class="org-function-name">std</span>::cin &gt;&gt; *pSpeed;
</pre>
</div>

<p>
Get vector named 'AVector', display, and update it. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Rerieve vector</span>
<span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">[</span>pVector, _size3<span class="org-rainbow-delimiters-depth-1">]</span> = mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">MMFVector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"AVector"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>pVector != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n pVector-&gt;size() = "</span> &lt;&lt; pVector-&gt;size<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-type">size_t</span> <span class="org-variable-name">idx</span> = 0;
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: *pVector<span class="org-rainbow-delimiters-depth-1">)</span>
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" pVector["</span> &lt;&lt; idx++ &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::endl ;  

pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-1">(</span>*pSpeed<span class="org-rainbow-delimiters-depth-1">)</span>;    
<span class="org-keyword">return</span> 0;
</pre>
</div>

<p>
<b>Compile on Linux or any other Unix-like OS</b>
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ boost-memory-mapped-file.cpp -o <span class="org-keyword">boost-memory-mapped-file.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt 
<span class="org-comment-delimiter"># </span><span class="org-comment">GCC</span>
$ g++ boost-memory-mapped-file.cpp -o <span class="org-keyword">boost-memory-mapped-file.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt 
</pre>
</div>

<p>
<b>Compile on Windows</b>
</p>

<p>
Compile with MSVC (VC++)
</p>

<div class="org-src-container">
<pre class="src src-bat">$ cl.exe boost-memory-mapped-file.cpp /<span class="org-type">Fe</span>:boost-memory-mapped-file.exe /<span class="org-type">EHsc</span> /<span class="org-type">std</span>:c++17 ...
   /<span class="org-type">GA</span> /<span class="org-type">MDd</span> /<span class="org-type">nologo</span> /<span class="org-type">I</span> C:\boost\boost_1_69_0 /<span class="org-type">link</span> /<span class="org-type">LIBPATH</span>:C:\boost\lib
</pre>
</div>

<p>
Compile with Mingw
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ boost-memory-mapped-file.cpp -o <span class="org-keyword">boost-memory-mapped-file.exe</span> -std=c++1z -I C:\boost\boost_1_69_0
</pre>
</div>

<p>
<b>Running</b> 
</p>

<p>
Running for the first time, before the file 'memory-dump.dat'
exists. Note: (compiled with Mingw).
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-memory-mapped-file.exe

 [INFO] Setting file data
</pre>
</div>

<p>
Running for the second time: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-memory-mapped-file.exe

 [INFO] Retrieving objects from memory mapped file
Number of nodes = 100
Text = <span class="org-string">'Allocated text in memory mapped file'</span>
Speed = 200
 =&gt; Set new speed := 4.51

 pVector-&gt;size() = 4
 pVector[0] = 40.5
 pVector[1] = 98.1
 pVector[2] = -50.45
 pVector[3] = 10
</pre>
</div>

<p>
Running for the third time: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-memory-mapped-file.exe
 [INFO] Retrieving objects from memory mapped file
Number of nodes = 101
Text = <span class="org-string">'Allocated text in memory mapped file'</span>
Speed = 4.51
 =&gt; Set new speed := 125.75

 pVector-&gt;size() = 5
 pVector[0] = 40.5
 pVector[1] = 98.1
 pVector[2] = -50.45
 pVector[3] = 10
 pVector[4] = 4.51
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-org901e952" class="outline-3">
<h3 id="org901e952"><span class="section-number-3">1.16</span> Boost DateTime</h3>
<div class="outline-text-3" id="text-1-16">
</div>
<div id="outline-container-org14ed89e" class="outline-4">
<h4 id="org14ed89e"><span class="section-number-4">1.16.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-16-1">
<p>
Documentation:
</p>
<ul class="org-ul">
<li>Boost: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/date_time.html">Date Time</a></li>
<li><a href="http://www.crystalclearsoftware.com/libraries/date_time/release_1_33/date_time/doxy.html">Doxygen</a></li>
<li><a href="http://www.crystalclearsoftware.com/libraries/date_time/date_time.pdf">PDF Documentation</a></li>
</ul>

<p>
Documentation Code Examples: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/date_time/examples.html#date_time.examples.days_alive">Date Time Examples</a></li>
</ul>

<p>
Headers: 
</p>
<ul class="org-ul">
<li>&lt;boost/date_time/date.hpp&gt;</li>
<li>&lt;boost/date_time/date_formatting.hpp&gt;</li>
<li>&lt;boost/date_time/date_duration.hpp&gt;</li>
<li>&lt;boost/date_time/time.hpp&gt;</li>
<li>&lt;boost/date_time/gregorian/gregorian.hpp&gt;</li>
</ul>

<p>
Library Dependency:
</p>
<ul class="org-ul">
<li>Requires linkign the library <b>-lboost_date_time</b> with GCC or Clang.</li>
</ul>

<p>
Motivation: 
</p>

<blockquote>
<p>
The motivation for this library comes from working with and helping
build several date-time libraries on several projects. Date-time
libraries provide fundamental infrastructure for most development
projects. However, most of them have limitations in their ability to
calculate, format, convert, or perform some other functionality. For
example, most libraries do not correctly handle leap seconds,
provide concepts such as infinity, or provide the ability to use
high resolution or network time sources. These libraries also tend
to be rigid in their representation of dates and times. Thus
customized policies for a project or subproject are not possible.
</p>
</blockquote>

<p>
Domain Concepts: 
</p>
<ul class="org-ul">
<li>Time Point</li>
<li>Time Duration</li>
<li>Time Interval</li>
</ul>

<p>
Calendar Systems: 
</p>
<ul class="org-ul">
<li>Gregorian System</li>
<li>UTC - UTC (Coordinated Universal Time)</li>
</ul>
</div>
</div>
<div id="outline-container-orgafdb8ab" class="outline-4">
<h4 id="orgafdb8ab"><span class="section-number-4">1.16.2</span> Example - Date Manipulation</h4>
<div class="outline-text-4" id="text-1-16-2">
<p>
Search where is Boost Date time on Linux/Fedora: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ls /lib/ | grep -i date
kconf_update_bin/
libboost_date_time.a
libboost_date_time.so@
libboost_date_time.so.1.67.0*
</pre>
</div>

<p>
<b>Simple tests in CERN ROOT REPL:</b>
</p>

<p>
Load library in REPL:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/date_time/gregorian/gregorian.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Load shared library </span>
gSystem-&gt;Load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib/libboost_date_time.so"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">namespace</span> <span class="org-constant">g</span> = <span class="org-constant">boost</span>::gregorian;
<span class="org-keyword">namespace</span> <span class="org-constant">dt</span> = <span class="org-constant">boost</span>::date_time;
</pre>
</div>

<p>
Construct a date from year-month-day, for instance 
(year = 2009, month = 10, day = 20):
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> d1 = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2009, 10, 20<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647050

&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; <span class="org-string">"d1 = "</span> &lt;&lt; d1 &lt;&lt; <span class="org-string">"\n"</span>;
d1 = 2009-Oct-20
</pre>
</div>


<p>
Get current Date: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> today = <span class="org-constant">g</span>::<span class="org-constant">day_clock</span>::local_day<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647030

&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; <span class="org-string">"today = "</span> &lt;&lt; today &lt;&lt; <span class="org-string">"\n"</span>;
today = 2019-Apr-02
&gt;&gt; 
</pre>
</div>

<p>
Convert date to string: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> mdate = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2012, 06, 21<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba70a8

&gt;&gt; <span class="org-constant">g</span>::to_simple_string<span class="org-rainbow-delimiters-depth-1">(</span>mdate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"2012-Jun-21"</span>

&gt;&gt; <span class="org-constant">g</span>::to_iso_string<span class="org-rainbow-delimiters-depth-1">(</span>mdate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"20120621"</span>

&gt;&gt; <span class="org-constant">g</span>::to_iso_extended_string<span class="org-rainbow-delimiters-depth-1">(</span>mdate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"2012-06-21"</span>
</pre>
</div>


<p>
Parse Date with ISO format YYYYMMDD:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> p = <span class="org-constant">gr</span>::from_undelimited_string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"20100921"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7014

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" p = "</span> &lt;&lt; p &lt;&lt; <span class="org-string">"\n"</span>;
 p = 2010-Sep-21
</pre>
</div>

<p>
Parse Date with ISO format YYYY-MM-DD: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">g</span>::from_simple_string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"2001-10-11"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; <span class="org-keyword">auto</span> s1 = <span class="org-constant">g</span>::from_simple_string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"2001-10-11"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647010

<span class="org-comment-delimiter">// </span><span class="org-comment">========= Parse Date =============</span>
&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; <span class="org-string">"s1 = "</span> &lt;&lt; s1 &lt;&lt; <span class="org-string">"\n"</span>;
s1 = 2001-Oct-11
</pre>
</div>


<p>
Get year component:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">date</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date, <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::gregorian_calendar, 
 <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date_duration<span class="org-rainbow-delimiters-depth-2">&gt;</span>::year_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x79588b0
&gt;&gt; 

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2001

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>s1.year<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2001
&gt;&gt; 
</pre>
</div>

<p>
Get month component:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.month<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">date</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date, <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::gregorian_calendar, 
<span class="org-function-name">boost</span>::<span class="org-constant">gregorian</span>::date_duration<span class="org-rainbow-delimiters-depth-2">&gt;</span>::month_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x7d69550

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.month<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>s1.month<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; 
</pre>
</div>

<p>
Get day component: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.day<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">date</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date, <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::gregorian_calendar, 
<span class="org-function-name">boost</span>::<span class="org-constant">gregorian</span>::date_duration<span class="org-rainbow-delimiters-depth-2">&gt;</span>::day_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f9bfc0

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.day<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 11

&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; s1.day<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
11
</pre>
</div>

<p>
Get day of Week: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> dw = s1.day_of_week<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">greg_weekday</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d764702e

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> dw
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.day_of_week<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>dw<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
</pre>
</div>

<p>
Get day of Week as Enumeration:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> dw = s1.day_of_week<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">greg_weekday</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d764702e

&gt;&gt; dw.as_enum<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-constant">greg_weekday</span>::weekday_enum<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">weekdays</span>::Thursday<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; dw.as_enum<span class="org-rainbow-delimiters-depth-1">()</span> == <span class="org-constant">dt</span>::<span class="org-constant">weekdays</span>::Thursday
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>  
</pre>
</div>

<p>
Get day of Week as C-string (const char*): 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; dw.as_short_string<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Thu"</span>

&gt;&gt; dw.as_long_string<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Thursday"</span>
</pre>
</div>

<p>
Get day of year (number of elapsed days until the date s1)
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.day_of_year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-constant">date</span>::day_of_year_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x8000e30

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.day_of_year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 284

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>s1.day_of_year<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 284
</pre>
</div>

<p>
Get difference between two dates in days: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> date_a = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2009, 10, 20<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647068

&gt;&gt; <span class="org-keyword">auto</span> date_b = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2011, 1, 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d764706c

&gt;&gt; <span class="org-keyword">auto</span> diff = date_b - date_a
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date_duration</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647070

&gt;&gt; diff.days<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 438
</pre>
</div>

<p>
<b>Date arithmetics:</b>
</p>

<p>
Add days to a date: 
</p>

<ul class="org-ul">
<li>Add 200 days to date 2005-09-25</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> date_a = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2005, 9, 25<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7048

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a = "</span> &lt;&lt; date_a &lt;&lt; <span class="org-string">"\n"</span>;
date_a = 2005-Sep-25

<span class="org-comment-delimiter">// </span><span class="org-comment">Create a new date object = date_a + 200 days </span>
&gt;&gt; <span class="org-keyword">auto</span> date_b = date_a + <span class="org-constant">g</span>::days<span class="org-rainbow-delimiters-depth-1">(</span>200<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7060

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_b = "</span> &lt;&lt; date_b &lt;&lt; <span class="org-string">"\n"</span>;
date_b = 2006-Apr-13

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a + 200 days = "</span> &lt;&lt; date_a + <span class="org-constant">g</span>::days<span class="org-rainbow-delimiters-depth-1">(</span>200<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
date_a + 200 days = 2006-Apr-13

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a + 1200 days = "</span> &lt;&lt; date_a + <span class="org-constant">g</span>::days<span class="org-rainbow-delimiters-depth-1">(</span>1200<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
date_a + 1200 days = 2009-Jan-07
</pre>
</div>

<p>
Add months to a date: 
</p>
<ul class="org-ul">
<li>Add 5 months to date 2005-09-25</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> date_a = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2005, 9, 25<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7048

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a + 5 months  = "</span> &lt;&lt; date_a + <span class="org-constant">g</span>::months<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
date_a + 5 months  = 2006-Feb-25
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org6a6692d" class="outline-2">
<h2 id="org6a6692d"><span class="section-number-2">2</span> Complementary Libraries</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orga0ac75d" class="outline-3">
<h3 id="orga0ac75d"><span class="section-number-3">2.1</span> fmtlib (fmt) - Better printf</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Fmt is a highly popular library for printing  in a formatted way just
like the old C's printf, however fmt is type safe like std::ostream
IO, however its format specifiers are more concise and based on Python
ones.
</p>

<p>
Web Site:
</p>
<ul class="org-ul">
<li><a href="http://fmtlib.net/latest/index.html">http://fmtlib.net/latest/index.html</a></li>
</ul>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/fmtlib/fmt">https://github.com/fmtlib/fmt</a></li>
</ul>

<p>
Conan Refence: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan/fmt%3Abincrafters/5.3.0%3Astable">fmt/5.3.0@bincrafters/stable</a></li>
</ul>

<p>
<b>Library Local Installation for header-only usage</b> 
</p>

<p>
Installation at: ~/dev/include/fmt 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://github.com/fmtlib/fmt

<span class="org-comment-delimiter"># </span><span class="org-comment">Build directory /home/&lt;USER&gt;/dev on Linux </span>
$ mkdir -p ~/dev &amp;&amp; <span class="org-builtin">cd</span> dev                           
<span class="org-comment-delimiter"># </span><span class="org-comment">Clone repository </span>
$ git clone https://github.com/fmtlib/fmt
<span class="org-comment-delimiter"># </span><span class="org-comment">Extract headers </span>
$ cp -r -v fmt/include ~/dev/
<span class="org-comment-delimiter"># </span><span class="org-comment">Delete fmt directory </span>
$ rm -rf fmt 
</pre>
</div>

<p>
Testing code: File - <b>fmttest.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">If defined before including fmt, uses it as header-only library</span>
<span class="org-preprocessor">#define</span> <span class="org-variable-name">FMT_HEADER_ONLY</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Basic functionality</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/core.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">fmt string literals "name"_a, "product"_a</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/format.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Print to streams std::cout, std::cerr, std::ostream</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/ostream.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/color.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;fmt/color.h&gt;</span>

<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">fmt</span>::<span class="org-constant">literals</span>;

<span class="org-type">void</span> <span class="org-function-name">printHeader</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">header</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n{}\n"</span>, header<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"---------------------------------------------\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 1 - Boolean  *************"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" true == {0} ; false == {1} \n"</span>, <span class="org-constant">true</span>, <span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-2">)</span>;


    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 2 - Numeric Base  *********"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [BASES] =&gt; dec: {0:d} ; hex = 0x{0:X} "</span>
               <span class="org-string">" ; oct = {0:o} ; bin = 0b{0:b} \n"</span>, 241 <span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 3 - Positional arguments ****"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" first = {0}, 2nd = {1}, 1st = {1}, 3rd = {2}\n"</span>,
                200, <span class="org-string">"hello"</span>, 5.615<span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"**** EXPERIMENT 4 - Named Arguments ********* "</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [A] Product =&gt; product = {0} id = {1} price = {2}\n"</span>
               ,<span class="org-string">"oranges 1 kg"</span>, 200, 10.6758 <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Requires: #include &lt;fmt/format.h&gt;</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">using namespace fmt::literals;</span>
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [B] Product =&gt; product = {product} id = {id} price = {price:.2F}\n"</span>
               , <span class="org-string">"product"</span>_a = <span class="org-string">"oranges 1 kg"</span>, <span class="org-string">"id"</span>_a = 200, <span class="org-string">"price"</span>_a = 10.6758 <span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" [B] Product =&gt; product = {product} id = {id} price = {price:.2F}\n"</span>
               , <span class="org-constant">fmt</span>::arg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"product"</span>, <span class="org-string">"oranges 1 kg"</span><span class="org-rainbow-delimiters-depth-3">)</span>
               , <span class="org-constant">fmt</span>::arg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"id"</span>,  200<span class="org-rainbow-delimiters-depth-3">)</span>
               , <span class="org-constant">fmt</span>::arg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"price"</span>, 10.6758 <span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"************ Colored Output ******************"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-constant">fmt</span>::fg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">fmt</span>::<span class="org-constant">color</span>::aqua<span class="org-rainbow-delimiters-depth-3">)</span> | <span class="org-constant">fmt</span>::<span class="org-constant">emphasis</span>::bold,
               <span class="org-string">" [INFO] Voltage Leval  = {0:+.3F}\n"</span>, 10.6478<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-constant">fmt</span>::fg<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">fmt</span>::<span class="org-constant">color</span>::red<span class="org-rainbow-delimiters-depth-3">)</span> | <span class="org-constant">fmt</span>::<span class="org-constant">emphasis</span>::underline,
               <span class="org-string">" [ERROR] Fatal Error, shutdown systems code  0x{0:X}\n"</span>, 2651<span class="org-rainbow-delimiters-depth-2">)</span>;


    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 5 - Numeric Formatting ******"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">double</span> <span class="org-variable-name">x</span> = 20.0;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"The square root of x = {}\n"</span>, <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    x = 28524.0;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" log(x) = {:.2F}  (2 digit precision)\n"</span>, <span class="org-constant">std</span>::log<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" log(x) = {:+.6F} (6 digit precision)\n"</span>, <span class="org-constant">std</span>::log<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" 2000 * log(x) = {:+.6G} (6 digit precision)\n"</span>, 1e5 * <span class="org-constant">std</span>::log<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"  log(x) = {0:+.8E} ; sqrt(x) = {1:+8E} (8 digit precision)\n"</span>,
               <span class="org-constant">std</span>::log<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 6 - Print numeric table ******"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">int</span> <span class="org-variable-name">i</span> = 0;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0.0; x &lt;= 4.0; x += 0.5<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"{0:8d}{1:10.5F}{2:10.5F}\n"</span>, i++, x, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    printHeader<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ***** EXPERIMENT 7 - Print table to file *******"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">std::ofstream file("/tmp/table.txt");</span>
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">file</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Fake file</span>

    i = 0;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: Requires &lt;fmt/ostream.h&gt;</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = -4.0; x &lt;= 4.0; x += 1.0<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span>file, <span class="org-string">"{0:8d}{1:10.5F}{2:10.5F}\n"</span>, i++, x, <span class="org-constant">std</span>::exp<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"File content = \n{0}"</span>, file.str<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Program output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> ***** EXPERIMENT 1 - Boolean  *************
---------------------------------------------
 true == true ; false == false 

 ***** EXPERIMENT 2 - Numeric Base  *********
---------------------------------------------
 [BASES] =&gt; dec: 241 ; hex = 0xF1  ; oct = 361 ; bin = 0b11110001 

 ***** EXPERIMENT 3 - Positional arguments ****
---------------------------------------------
 first = 200, 2nd = hello, 1st = hello, 3rd = 5.615

**** EXPERIMENT 4 - Named Arguments ********* 
---------------------------------------------
 [A] Product =&gt; product = oranges 1 kg id = 200 price = 10.6758
 [B] Product =&gt; product = oranges 1 kg id = 200 price = 10.68
 [B] Product =&gt; product = oranges 1 kg id = 200 price = 10.68

************ Colored Output ******************
---------------------------------------------
&#27;[1m&#27;[38;2;000;255;255m [INFO] Voltage Leval  = +10.648
&#27;[0m&#27;[4m&#27;[38;2;255;000;000m [ERROR] Fatal Error, shutdown systems code  0xA5B
&#27;[0m
 ***** EXPERIMENT 5 - Numeric Formatting ******
---------------------------------------------
The square root of x = 4.47213595499958
 log(x) = 10.26  (2 digit precision)
 log(x) = +10.258501 (6 digit precision)
 2000 * log(x) = +1.02585e+06 (6 digit precision)
  log(x) = +1.02585011E+01 ; sqrt(x) = +1.688905E+02 (8 digit precision)

 ***** EXPERIMENT 6 - Print numeric table ******
---------------------------------------------
       0   0.00000   1.00000
       1   0.50000   1.64872
       2   1.00000   2.71828
       3   1.50000   4.48169
       4   2.00000   7.38906
       5   2.50000  12.18249
       6   3.00000  20.08554
       7   3.50000  33.11545
       8   4.00000  54.59815

 ***** EXPERIMENT 7 - Print table to file *******
---------------------------------------------
File content = 
       0  -4.00000   0.01832
       1  -3.00000   0.04979
       2  -2.00000   0.13534
       3  -1.00000   0.36788
       4   0.00000   1.00000
       5   1.00000   2.71828
       6   2.00000   7.38906
       7   3.00000  20.08554
       8   4.00000  54.59815
</pre>
</div>

<p>
Compilation: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall -I$<span class="org-variable-name">HOME</span>/dev/include 

<span class="org-comment-delimiter"># </span><span class="org-comment">Or, on Linux</span>
$ clang++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall -I/home/&lt;USER&gt;/dev/include 

<span class="org-comment-delimiter"># </span><span class="org-comment">Or, On OSX </span>
$ clang++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall -I/Users/&lt;USER&gt;/dev/include 
</pre>
</div>

<p>
The code can be compiled without specifying the include path, by
adding the following code to the file  <b>~/.profile</b> on Linux.
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">------------ Local Libraries Installation ---------------------</span>
<span class="org-variable-name">LOCAL_LIB_PATH</span>=~/dev
<span class="org-builtin">export</span> <span class="org-variable-name">CPLUS_INCLUDE_PATH</span>=$<span class="org-variable-name">LOCAL_LIB_PATH</span>/include:$<span class="org-variable-name">CPLUS_INCLUDE_PATH</span>
<span class="org-builtin">export</span> <span class="org-variable-name">C_INCLUDE_PATH</span>=$<span class="org-variable-name">LOCAL_LIB_PATH</span>/include:$<span class="org-variable-name">C_INCLUDE_PATH</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LIBRARY_PATH</span>=$<span class="org-variable-name">LOCAL_LIB_PATH</span>/lib:$<span class="org-variable-name">LIBRARY_PATH</span>
<span class="org-builtin">export</span> <span class="org-variable-name">LD_LIBRARY_PATH</span>=$<span class="org-variable-name">LOCAL_LIB_PATH</span>/lib:$<span class="org-variable-name">LD_LIBRARY_PATH</span>
</pre>
</div>

<p>
After this configuration was set, the code can be compiled with:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall

<span class="org-comment-delimiter"># </span><span class="org-comment">Header only compilation takes 2 seconds </span>
$ time g++  fmttest.cpp -o <span class="org-keyword">app.bin</span> -std=c++1z -Wall

real    0m1.824s
user    0m1.650s
sys     0m0.156s
</pre>
</div>

<p>
Once the environment variabble CPLUS_INCLUDE_PATH is set, the library
can be loaded from CERN's Root or Cling REPL with:  
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#define</span> <span class="org-variable-name">FMT_HEADER_ONLY</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/format.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/color.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fmt/ostream.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = {0:.5F}, sqrt(x) = {1:+.8F}\n"</span>, 20.6, <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-2">(</span>20.6<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>
 x = 20.60000, sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = +4.53872229
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Print with color foreground blue </span>
&gt;&gt; <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">fmt</span>::fg<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">fmt</span>::<span class="org-constant">color</span>::blue<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-string">" [INFO] x = {0:.5E}\n"</span>, 20.6<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> x = 2.06000E+01

<span class="org-comment-delimiter">// </span><span class="org-comment">Print with background color blue </span>
&gt;&gt; <span class="org-constant">fmt</span>::print<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">fmt</span>::bg<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">fmt</span>::<span class="org-constant">color</span>::blue<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-string">" [INFO] x = {0:.5E}\n"</span>, 20.6<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> x = 2.06000E+01
&gt;&gt; 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc7584ff" class="outline-3">
<h3 id="orgc7584ff"><span class="section-number-3">2.2</span> Range v3 (C++20)</h3>
<div class="outline-text-3" id="text-2-2">
<p>
Ranges v3 is a header-only generic library that will be included in
the <a href="https://en.cppreference.com/w/cpp/ranges">C++20 ranges</a> and provides stl-like algorithms that can operate on
ranges, also known as pairs of iterators. The benefit of the range v3
library over STL algorithms and iterator pairs is that the greater
composability and that the calling code does not need to specify the
iterator pair explicitly.
</p>

<p>
Resources: 
</p>

<ul class="org-ul">
<li>Documentation:
<ul class="org-ul">
<li><a href="https://ericniebler.github.io/range-v3/">https://ericniebler.github.io/range-v3/</a></li>
</ul></li>

<li>Conan Reference:
<ul class="org-ul">
<li><a href="https://bintray.com/range-v3/range-v3/range-v3%3Aericniebler">range-v3/0.5.0@ericniebler/stable</a></li>
</ul></li>

<li>Github Repsitory:
<ul class="org-ul">
<li><a href="https://github.com/ericniebler/range-v3">https://github.com/ericniebler/range-v3</a></li>
</ul></li>

<li>C++ Standard Proposal:
<ul class="org-ul">
<li><a href="https://ericniebler.github.io/std/wg21/D4128.html">https://ericniebler.github.io/std/wg21/D4128.html</a></li>

<li><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4128.html">Ranges for the Standard Library, Revision 1</a></li>
</ul></li>

<li>C++20 - &lt;ranges&gt; header
<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/ranges">https://en.cppreference.com/w/cpp/ranges</a></li>
</ul></li>

<li>Videos:
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=mFUXNMfaciE">CppCon 2015: Eric Niebler "Ranges for the Standard Library"</a></li>
<li><a href="https://www.youtube.com/watch?v=4p21wBOplPQ">Introduction to C++ Ranges - Fluent C++</a></li>
<li><a href="https://www.youtube.com/watch?v=OI0YFgEscGQ">C++ Russia 2018: Arno Schödl, From Iterators To Ranges</a></li>
</ul></li>
</ul>

<p>
Headers: 
</p>
<ul class="org-ul">
<li>Include all features:
<ul class="org-ul">
<li>&lt;range/v3/all.hpp&gt;  (Note: It increase the compile-time)</li>
</ul></li>

<li>Algorithms
<ul class="org-ul">
<li>&lt;range/v3/action/join.hpp&gt;</li>
<li>&lt;range/v3/algorithm/copy.hpp&gt;</li>
<li>&lt;range/v3/algorithm/for_each.hpp&gt;</li>
<li>&lt;range/v3/algorithm/mismatch.hpp&gt;</li>
</ul></li>

<li>All
<ul class="org-ul">
<li>&lt;range/v3/view/transform.hpp&gt;</li>
<li>&lt;range/v3/core.hpp&gt;</li>
<li>&lt;range/v3/view/all.hpp&gt;</li>
<li>&lt;range/v3/view/concat.hpp&gt;</li>
<li>&lt;range/v3/view/group_by.hpp&gt;</li>
<li>&lt;range/v3/view/iota.hpp&gt;</li>
<li>&lt;range/v3/view/join.hpp&gt;</li>
<li>&lt;range/v3/view/repeat_n.hpp&gt;</li>
<li>&lt;range/v3/view/single.hpp&gt;</li>
<li>&lt;range/v3/view/take.hpp&gt;</li>
<li>&lt;range/v3/view/transform.hpp&gt;</li>
</ul></li>
</ul>

<p>
Built-in Range Views: 
</p>
<ul class="org-ul">
<li>Views are lazily evaluated algorithms that are computed on demand
without any wasteful allocation.</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">adjacent_remove_if</td>
<td class="org-left">drop_while</td>
<td class="org-left">map</td>
<td class="org-left">split</td>
</tr>

<tr>
<td class="org-left">all</td>
<td class="org-left">empty</td>
<td class="org-left">move</td>
<td class="org-left">stride</td>
</tr>

<tr>
<td class="org-left">any_range</td>
<td class="org-left">filter</td>
<td class="org-left">parital_sum</td>
<td class="org-left">tail</td>
</tr>

<tr>
<td class="org-left">bounded</td>
<td class="org-left">for_each</td>
<td class="org-left">remove_if</td>
<td class="org-left">take</td>
</tr>

<tr>
<td class="org-left">c_str</td>
<td class="org-left">generate</td>
<td class="org-left">repeat</td>
<td class="org-left">take_exactly</td>
</tr>

<tr>
<td class="org-left">chunck</td>
<td class="org-left">generate_n</td>
<td class="org-left">repetat_n</td>
<td class="org-left">take_while</td>
</tr>

<tr>
<td class="org-left">concat</td>
<td class="org-left">group_by</td>
<td class="org-left">replace</td>
<td class="org-left">tokenize</td>
</tr>

<tr>
<td class="org-left">const_</td>
<td class="org-left">indirect</td>
<td class="org-left">replace_if</td>
<td class="org-left">transform</td>
</tr>

<tr>
<td class="org-left">counted</td>
<td class="org-left">interspece</td>
<td class="org-left">reverse</td>
<td class="org-left">unbounded</td>
</tr>

<tr>
<td class="org-left">delimit</td>
<td class="org-left">iota</td>
<td class="org-left">single</td>
<td class="org-left">unique</td>
</tr>

<tr>
<td class="org-left">drop</td>
<td class="org-left">join</td>
<td class="org-left">slice</td>
<td class="org-left">zip_with</td>
</tr>
</tbody>
</table>

<p>
Built-in Range Actions: 
</p>
<ul class="org-ul">
<li>Actions are eager sequence algorithms that operates on containers
and returns containers.</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">drop</td>
<td class="org-left">push_front</td>
<td class="org-left">stable_sort</td>
</tr>

<tr>
<td class="org-left">drop_while</td>
<td class="org-left">remove_if</td>
<td class="org-left">stride</td>
</tr>

<tr>
<td class="org-left">erase</td>
<td class="org-left">shuffle</td>
<td class="org-left">take</td>
</tr>

<tr>
<td class="org-left">insert</td>
<td class="org-left">slice</td>
<td class="org-left">take_while</td>
</tr>

<tr>
<td class="org-left">join</td>
<td class="org-left">sort</td>
<td class="org-left">transform</td>
</tr>

<tr>
<td class="org-left">push_back</td>
<td class="org-left">split</td>
<td class="org-left">unique</td>
</tr>
</tbody>
</table>

<p>
Comparison Range Views X Range Actions: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Range Views</th>
<th scope="col" class="org-left">Range Actions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Lazy sequence algorithms</td>
<td class="org-left">Eager sequence algorithms</td>
</tr>

<tr>
<td class="org-left">Lightweightm, non owning</td>
<td class="org-left">Operates on containers and returns containers.</td>
</tr>

<tr>
<td class="org-left">Doesn't perform allocation</td>
<td class="org-left">Performs allocation</td>
</tr>

<tr>
<td class="org-left">Composable</td>
<td class="org-left">Composable</td>
</tr>

<tr>
<td class="org-left">Non-mutating</td>
<td class="org-left">Potentially mutating</td>
</tr>
</tbody>
</table>


<p>
<b>Example:</b>
</p>

<ul class="org-ul">
<li>Complete source: 
<ul class="org-ul">
<li><a href="https://gist.github.com/caiorss/6d1ca8c20e71ea72866fe799408c6add#file-main1-cpp">Experiments with C++ ranges v3 Library  - Gisthub</a></li>
<li>File: <a href="https://gist.github.com/caiorss/6d1ca8c20e71ea72866fe799408c6add#file-main1-cpp">main1.cpp</a></li>
</ul></li>
</ul>

<p>
<b>Main Function - Range Algorithms Experiments</b>
</p>

<ul class="org-ul">
<li>Experiment 1A:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   +------------------------------------+\n"</span>
              &lt;&lt; <span class="org-string">"   | Range Algorithms Experiments       |\n"</span>
              &lt;&lt; <span class="org-string">"   +------------------------------------+\n"</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">printLambda</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-1">}</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">std::cout &lt;&lt; view::iota(2, 10) &lt;&lt; std::endl;</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------//</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1 A - for_each ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
    <span class="org-rainbow-delimiters-depth-1">{</span>

        <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span>8, 9, 20, 25<span class="org-rainbow-delimiters-depth-2">}</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Print numbers"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>xs, printLambda<span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"c++"</span>, <span class="org-string">"c++17"</span>, <span class="org-string">"C++20"</span>, <span class="org-string">"asm"</span>, <span class="org-string">"ADA"</span><span class="org-rainbow-delimiters-depth-2">}</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Print words"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>xs, printLambda<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">  +------------------------------------+
  | Range Algorithms Experiments       |
  +------------------------------------+

=== EXPERIMENT 1 A - for_each ===
=&gt; Print numbers
x = 8
x = 9
x = 20
x = 25
=&gt; Print words
x = 8
x = 9
x = 20
x = 25
</pre>
</div>

<ul class="org-ul">
<li>Experiment 1B</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1 B - for_each ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">astr</span> = <span class="org-string">"bolts"</span>;
    <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>astr, printLambda<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1 B - for_each ===
x = b
x = o
x = l
x = t
x = s
</pre>
</div>

<ul class="org-ul">
<li>Experiment 2</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 2 - sort ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs2</span> = <span class="org-rainbow-delimiters-depth-2">{</span>10.45, -30.0, 45.0, 8.2, 100.0, 10.6<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Reverse vector"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE xs2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">ranges</span>::sort<span class="org-rainbow-delimiters-depth-2">(</span>xs2<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER xs2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 2 - sort ===
Reverse vector
BEFORE xs2 = [6]( 10.45 -30 45 8.2 100 10.6  )
AFTER xs2 = [6]( -30 8.2 10.45 10.6 45 100  )
</pre>
</div>


<ul class="org-ul">
<li>Experiment 3</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 3 - fill ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs2</span><span class="org-rainbow-delimiters-depth-2">(</span>10, 0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE  A xs2 = "</span> &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>xs2 <span class="org-rainbow-delimiters-depth-2">)</span>&lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFOREB B xs2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::fill<span class="org-rainbow-delimiters-depth-2">(</span>xs2, 10<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER 1 =&gt; x2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::fill<span class="org-rainbow-delimiters-depth-2">(</span>xs2, 5<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER 2 =&gt; x2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 3 - fill ===
BEFORE  A xs2 = [0,0,0,0,0,0,0,0,0,0]
BEFOREB B xs2 = [10]( 0 0 0 0 0 0 0 0 0 0  )
AFTER 1 =&gt; x2 = [10]( 10 10 10 10 10 10 10 10 10 10  )
AFTER 2 =&gt; x2 = [10]( 5 5 5 5 5 5 5 5 5 5  )
</pre>
</div>

<ul class="org-ul">
<li>Experiment 4:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 4 - reverse ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"c++"</span>, <span class="org-string">"c++17"</span>, <span class="org-string">"C++20"</span>, <span class="org-string">"asm"</span>, <span class="org-string">"ADA"</span><span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE =&gt; words = "</span> &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::reverse<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER =&gt; words = "</span> &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 4 - reverse ===
BEFORE =&gt; words = [c++,c++17,C++20,asm,ADA]
AFTER =&gt; words = [ADA,asm,C++20,c++17,c++]
</pre>
</div>


<ul class="org-ul">
<li>Experiment 5:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 5 - remove_if ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xvec</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 5, 10, 1, 4, 1, 2, 8, 20, 100, 10, 1<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE =&gt; xvec = "</span> &lt;&lt; xvec &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Erase remove idiom</span>
    xvec.erase<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">ranges</span>::remove_if<span class="org-rainbow-delimiters-depth-3">(</span>xvec, <span class="org-rainbow-delimiters-depth-4">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-4">){</span> <span class="org-keyword">return</span> x == 1; <span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>, xvec.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER  =&gt; xvec = "</span> &lt;&lt; xvec &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 5 - remove_if ===
BEFORE =&gt; xvec = [13]( 1 2 5 10 1 4 1 2 8 20 100 10 1  )
AFTER  =&gt; xvec = [9]( 2 5 10 4 2 8 20 100 10  )
</pre>
</div>

<ul class="org-ul">
<li>Experiment 6:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 6 - find ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xvec</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 5, 10, 1, 4, 1, 2<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = <span class="org-constant">ranges</span>::find<span class="org-rainbow-delimiters-depth-2">(</span>xvec, 10<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>it != xvec.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [OK] Found value == 10 =&gt; *it = "</span> &lt;&lt; *it &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Position = "</span>
                   &lt;&lt; <span class="org-constant">ranges</span>::distance<span class="org-rainbow-delimiters-depth-3">(</span>xvec.begin<span class="org-rainbow-delimiters-depth-4">()</span>, it<span class="org-rainbow-delimiters-depth-3">)</span>
                   &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">else</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [FAIL] Not found  value "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 6 - find ===
[OK] Found value == 10 =&gt; *it = 10
Position = 3
</pre>
</div>

<ul class="org-ul">
<li>Experiment 7:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 7 - accumulator ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xvec</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 5, 10, 1, 4, 1, 2<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">int</span> <span class="org-variable-name">result</span> = <span class="org-constant">ranges</span>::accumulate<span class="org-rainbow-delimiters-depth-2">(</span>xvec, 0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; ranges::accumulate(xvec, 0) = "</span>
              &lt;&lt; result &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 7 - accumulator ===
=&gt; ranges::accumulate(xvec, 0) = 26
</pre>
</div>

<p>
<b>Range View Experiments</b> 
</p>

<ul class="org-ul">
<li>Experiment 1A</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"  +------------------------------------+\n"</span>
          &lt;&lt; <span class="org-string">"   | Range View Experiments             |\n"</span>
          &lt;&lt; <span class="org-string">"   +------------------------------------+\n"</span>;

<span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1A - view::all"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">'x'</span>, <span class="org-string">'y'</span>, <span class="org-string">'m'</span>, <span class="org-string">'k'</span>, <span class="org-string">'m'</span><span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [1] =&gt; std::view(xs) = "</span>
              &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>xs<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n [2] =&gt; xs = "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span>&amp;&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-3">(</span>xs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1A - view::all
[1] =&gt; std::view(xs) = [x,y,m,k,m]

[2] =&gt; xs = x y m k m
</pre>
</div>

<ul class="org-ul">
<li>Experiment 1B</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1B - view::reverse ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">'x'</span>, <span class="org-string">'y'</span>, <span class="org-string">'m'</span>, <span class="org-string">'k'</span>, <span class="org-string">'m'</span><span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::reverse<span class="org-rainbow-delimiters-depth-3">(</span>xs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER xs = "</span> &lt;&lt; xs &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1B - view::reverse ===
m k m y x
AFTER xs = [5]( x y m k m  )
</pre>
</div>

<ul class="org-ul">
<li>Experiment 1C:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1C - view::transform ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span>100, 5, 20, 9, 10, 6<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">a_lambda</span> = <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> 5 * x -10; <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: xs | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-3">(</span>a_lambda<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-comment-delimiter">//</span><span class="org-comment">std::cout &lt;&lt; " AFTER xs = " &lt;&lt; xs &lt;&lt; std::endl;</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1C - view::transform ===
490 15 90 35 40 20
</pre>
</div>

<ul class="org-ul">
<li>Experiment 2A:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 2A - Range adaptors pipeline ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">a_lambda</span> = <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> 5 * x -10; <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Iota view = "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-3">(</span>1<span class="org-rainbow-delimiters-depth-3">)</span> | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-3">(</span>8<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">=== EXPERIMENT 2A - Range adaptors pipeline ===
=&gt; Iota view =  1 2 3 4 5 6 7 8
</pre>
</div>


<ul class="org-ul">
<li>Expeirment 2B</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 2B - Range adaptors pipeline ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Iota view [B] = \n"</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">aview</span> =
              <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-2">(</span>1<span class="org-rainbow-delimiters-depth-2">)</span>
            | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>
            | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> 5 * x + 6; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] aview = "</span> &lt;&lt; aview &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] aview | reverse = "</span>
              &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>aview | <span class="org-constant">view</span>::reverse<span class="org-rainbow-delimiters-depth-2">)</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n Iteration 1 =&gt; "</span>;
    <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>aview, <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-constant">std</span>::cout &lt;&lt; a &lt;&lt; <span class="org-string">" "</span>; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n Iteration 2 =&gt; "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: aview | <span class="org-constant">view</span>::reverse<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 2B - Range adaptors pipeline ===
=&gt; Iota view [B] = 
[INFO] aview = [11,16,21,26,31]
[INFO] aview | reverse = [31,26,21,16,11]

Iteration 1 =&gt; 11 16 21 26 31 
Iteration 2 =&gt; 31 26 21 16 11 
</pre>
</div>


<ul class="org-ul">
<li>Experiment 3A</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 3A - enumerate ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"c++"</span>, <span class="org-string">"c++17"</span>, <span class="org-string">"C++20"</span>, <span class="org-string">"asm"</span> <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ==== Loop 1 ==== "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::enumerate<span class="org-rainbow-delimiters-depth-3">(</span>words<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; n = "</span> &lt;&lt; x.first
                  &lt;&lt; <span class="org-string">" ; w = "</span> &lt;&lt; x.second &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ==== Loop 2 ==== "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: words | <span class="org-constant">view</span>::enumerate<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; n = "</span> &lt;&lt; x.first
                  &lt;&lt; <span class="org-string">" ; w = "</span> &lt;&lt; x.second &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 3A - enumerate ===
==== Loop 1 ==== 
=&gt; n = 0 ; w = c++
=&gt; n = 1 ; w = c++17
=&gt; n = 2 ; w = C++20
=&gt; n = 3 ; w = asm
==== Loop 2 ==== 
=&gt; n = 0 ; w = c++
=&gt; n = 1 ; w = c++17
=&gt; n = 2 ; w = C++20
=&gt; n = 3 ; w = asm
</pre>
</div>

<ul class="org-ul">
<li>Experiment 4A:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 4 - ranges::accumulate withe iterator ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">aview</span> = <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-2">(</span>2<span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span><span class="org-keyword">return</span> 3.0 * x - 5; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" aview = "</span> &lt;&lt; aview &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" accumulate(aview) = "</span> &lt;&lt; <span class="org-constant">ranges</span>::accumulate<span class="org-rainbow-delimiters-depth-2">(</span>aview, 0.0<span class="org-rainbow-delimiters-depth-2">)</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">=== EXPERIMENT 4 - <span class="org-constant">ranges</span>::accumulate withe iterator ===
aview = <span class="org-rainbow-delimiters-depth-1">[</span>1,4,7,10,13,16,19,22,25,28,31,34,37,40,43<span class="org-rainbow-delimiters-depth-1">]</span>
accumulate<span class="org-rainbow-delimiters-depth-1">(</span>aview<span class="org-rainbow-delimiters-depth-1">)</span> = 330
</pre>
</div>

<ul class="org-ul">
<li>Experiment 5</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 5 - Copy Range to destination ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">output</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">aview</span> = <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> 6 * n - 10;<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE =&gt; output = "</span> &lt;&lt; output &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::copy<span class="org-rainbow-delimiters-depth-2">(</span>aview, <span class="org-constant">ranges</span>::back_inserter<span class="org-rainbow-delimiters-depth-3">(</span>output<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER =&gt; output = "</span> &lt;&lt; output &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 5 - Copy Range to destination ===
BEFORE =&gt; output = [0](  )
AFTER =&gt; output = [10]( 20 26 32 38 44 50 56 62 68 74  )
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc7ace59" class="outline-3">
<h3 id="orgc7ace59"><span class="section-number-3">2.3</span> cxx-prettyprint - STL container pretty print</h3>
<div class="outline-text-3" id="text-2-3">
<p>
Description:
</p>
<ul class="org-ul">
<li>"A header-only library for C++(0x) that allows automagic pretty-printing of any container."</li>
<li>Note: as this library is single-file and header-only, it does not need any
pre-compilation. All that is needed for using it is to download the
file prettyprint.hpp and add it to the project directory or any
other include directory.</li>
</ul>

<p>
Website:
</p>
<ul class="org-ul">
<li><a href="http://louisdx.github.io/cxx-prettyprint/">http://louisdx.github.io/cxx-prettyprint/</a></li>
</ul>

<p>
Repository:
</p>
<ul class="org-ul">
<li><a href="https://github.com/louisdx/cxx-prettyprint">https://github.com/louisdx/cxx-prettyprint</a></li>
</ul>

<p>
<b>Examples in CERN-Root REPL</b>
</p>

<p>
Step 1: Download the library and start the CERN's ROOT Repl (Cling).
</p>

<div class="org-src-container">
<pre class="src src-sh">$ curl -O -L https://raw.githubusercontent.com/louisdx/cxx-prettyprint/master/prettyprint.hpp

$ ~/opt/root/bin/root.exe
   ------------------------------------------------------------
  | Welcome to ROOT 6.14/04                http://root.cern.ch |
  |                               (c) 1995-2018, The ROOT Team |
  | Built for linuxx8664gcc                                    |
  | From tags/v6-14-04@v6-14-04, Aug 23 2018, 17:00:44         |
  | Try <span class="org-string">'.help'</span>, <span class="org-string">'.demo'</span>, <span class="org-string">'.license'</span>, <span class="org-string">'.credits'</span>, <span class="org-string">'.quit'</span>/<span class="org-string">'.q'</span> |
   ------------------------------------------------------------
</pre>
</div>

<p>
Include header in the repl:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; #include <span class="org-string">"prettyprint.hpp""</span>
</pre>
</div>

<p>
Print vector:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> xs = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>434.4, -10.54, 9.654, 45.23, -10.56<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">------- Print Vector -----------------//</span>
&gt;&gt;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" xs = "</span> &lt;&lt; xs &lt;&lt; <span class="org-constant">std</span>::endl;
 xs = <span class="org-rainbow-delimiters-depth-1">[</span>5<span class="org-rainbow-delimiters-depth-1">](</span>434.4 -10.54 9.654 45.23 -10.56 <span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt;
</pre>
</div>

<p>
Print tuple:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> t = <span class="org-constant">std</span>::make_tuple<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-2">)</span>, 100<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">tuple</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"hello"</span>, 100 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" t = "</span> &lt;&lt; t &lt;&lt; <span class="org-constant">std</span>::endl;
 t = <span class="org-rainbow-delimiters-depth-1">(</span>hello, 100<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; <span class="org-keyword">auto</span> tt = <span class="org-constant">std</span>::make_tuple<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-2">)</span>, 100, <span class="org-string">'x'</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">tuple</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-type">int</span>, <span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">"hello"</span>, 100, <span class="org-string">'x'</span> <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" tt = "</span> &lt;&lt; tt &lt;&lt; <span class="org-constant">std</span>::endl;
 tt = <span class="org-rainbow-delimiters-depth-1">(</span>hello, 100, x<span class="org-rainbow-delimiters-depth-1">)</span>

</pre>
</div>

<p>
Print map:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> dataset <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"USD"</span>, 200.3<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"BRL"</span>, 451.34<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"CAD"</span>, 400.5<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"AUD"</span>, 34.65<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" dataset = "</span> &lt;&lt; dataset &lt;&lt; <span class="org-constant">std</span>::endl;
 dataset = <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-rainbow-delimiters-depth-2">(</span>AUD, 34.65<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>BRL, 451.34<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>CAD, 400.5<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-rainbow-delimiters-depth-2">(</span>USD, 200.3<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">]</span>
&gt;&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org55ba236" class="outline-3">
<h3 id="org55ba236"><span class="section-number-3">2.4</span> CLI11 Command Liner Parser Library</h3>
<div class="outline-text-3" id="text-2-4">
<p>
CLI11 is a small and lightweight header-only library for command line
parsing.
</p>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/CLIUtils/CLI11">https://github.com/CLIUtils/CLI11</a></li>
</ul>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://cliutils.gitlab.io/CLI11Tutorial/">https://cliutils.gitlab.io/CLI11Tutorial/</a></li>
</ul>

<p>
Doxygen API docs: 
</p>
<ul class="org-ul">
<li><a href="https://cliutils.github.io/CLI11/">https://cliutils.github.io/CLI11/</a></li>
</ul>

<p>
Conan reference: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/cliutils/CLI11/CLI11%3Acliutils/1.8.0%3Astable">CLI11/1.8.0@cliutils/stable</a></li>
</ul>


<p>
<b>Sample Project:</b>
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(cli11-app)

<span class="org-comment">#========================================#</span>

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#=========== Conan Bootstrap =================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)
<span class="org-function-name">set</span>(CONAN_PROFILE default)

<span class="org-function-name">conan_cmake_run</span>( REQUIRES
                 CLI11/1.8.0@cliutils/stable
                 BASIC_SETUP
                 BUILD missing )

<span class="org-comment">#=========== Find Package ================#</span>

<span class="org-function-name">find_package</span>(CLI11 REQUIRED)

<span class="org-comment">#=========== Targets ======================#</span>

<span class="org-comment"># Note: CLI11 is a header-only library and does not need Linking</span>
<span class="org-function-name">add_executable</span>(httpserver main.cpp)
</pre>
</div>

<p>
File: <b>main.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">CLI/CLI.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">CLI</span>::<span class="org-type">App</span> <span class="org-variable-name">app</span><span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"C++ http Web Server"</span><span class="org-rainbow-delimiters-depth-2">}</span>;
    app.footer<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n Creator: Somebody else."</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Sets the current path that will be served by the http server</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">dir</span> = <span class="org-string">"default"</span>;
    app.add_option<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"directory"</span>, dir, <span class="org-string">"Directory served"</span><span class="org-rainbow-delimiters-depth-2">)</span>-&gt;required<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Sets the port that the server will listen to</span>
    <span class="org-type">int</span> <span class="org-variable-name">port</span> = 8080;
    app.add_option<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"-p,--port"</span>, port, <span class="org-string">"TCP port which the server will bind/listen to"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Set the the hostname that the server will listen to</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Default: 0.0.0.0 =&gt; Listen all hosts</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">host</span> = <span class="org-string">"0.0.0.0"</span>;
    app.add_option<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"--host"</span>, host, <span class="org-string">"Host name that the sever will listen to."</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     app.validate_positionals<span class="org-rainbow-delimiters-depth-2">()</span>;
    CLI11_PARSE<span class="org-rainbow-delimiters-depth-2">(</span>app, argc, argv<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Running server at port = "</span> &lt;&lt; port
              &lt;&lt; <span class="org-string">"\n and listen to host = "</span> &lt;&lt; host
              &lt;&lt; <span class="org-string">"\n serving directory = "</span> &lt;&lt; dir &lt;&lt; <span class="org-string">"\n"</span>;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Sample program output: 
</p>

<ul class="org-ul">
<li>Display help:</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./httpserver -h
C++ http Web Server
<span class="org-function-name">Usage</span>: ./httpserver [OPTIONS] directory

<span class="org-function-name">Positionals</span>:
  directory TEXT REQUIRED     Directory served

<span class="org-function-name">Options</span>:
  -h,--help                   Print this help message and exit
  -p,--port INT               TCP port which the server will bind/listen to
  --host TEXT                 Host name that the sever will listen to.

 Creator: Somebody else.
</pre>
</div>

<ul class="org-ul">
<li>Run app.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./httpserver 
directory is required
Run with --help for more information.

$ ./httpserver /var/data/www
Running server at port = 8080
 and listen to host = 0.0.0.0
 servind directory = /var/data/www


$ ./httpserver /var/data/www --port=9090
Running server at port = 9090
 and listen to host = 0.0.0.0
 serving directory = /var/data/www


$ ./httpserver --port=9090 --host=localhost /home/user/pages
Running server at port = 9090
 and listen to host = localhost
 serving directory = /home/user/pages
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcd3b3a4" class="outline-3">
<h3 id="orgcd3b3a4"><span class="section-number-3">2.5</span> Cereal - Serialization Library</h3>
<div class="outline-text-3" id="text-2-5">
<p>
Cereal is a lightweight header-only library for serialization which
supports a wide variety of serialization formats such as binary, XML
and JSON. The library also provides lots of facilities for serializing
and deserializing STL containers.
</p>

<ul class="org-ul">
<li>License: BSD</li>

<li>Documentation and official web site:
<ul class="org-ul">
<li><a href="https://uscilab.github.io/cereal">https://uscilab.github.io/cereal</a></li>
</ul></li>

<li>Github Repository:
<ul class="org-ul">
<li><a href="https://github.com/USCiLab/cereal">https://github.com/USCiLab/cereal</a></li>
</ul></li>

<li>Conan Reference:
<ul class="org-ul">
<li><a href="https://bintray.com/conan-community/conan/cereal%3Aconan/1.2.2%3Astable">cereal/1.2.2@conan/stable</a></li>
</ul></li>
</ul>

<p>
<b>Serialization Challenges</b>
</p>

<p>
Despite what it may look like, serialization is not easy, there are
lots of serialization pitfalls that a library shoudl deal with:
</p>

<ul class="org-ul">
<li><span class="underline">Machine endianess</span>:
<ul class="org-ul">
<li>The order that bytes of numeric data are loaded into memory
depends on the machine architecture, therefore a numeric data
stored in a binary file generated in a machine with a <b>little
endian</b> processor, may be read in a wrong way by a <b>big endian</b>
machine. So, in order to be portable, a binary file must use a
default endianess independent of the any processor.</li>
</ul></li>

<li><span class="underline">Data Sizes</span>:
<ul class="org-ul">
<li>C and C++ binary sizes of fundamental data types such
as int, long and long long are not constant across different
operating systems and machine architectures. So a value of long
type save in binary format in one machine may be read in a wrong
way in a machine where the long type has a different size in
bytes. The only way to ensure that the data type is portable and
avoid bad surprises is to use fixed width integers from header
&lt;stdint&gt; uint32_t, uint64_t and so on.</li>
</ul></li>

<li><span class="underline">Data Versioning</span>
<ul class="org-ul">
<li>In order to avoid data corruption, a serialization format should
support multiple versions of the data structure being
serialized and check the version of the data whenever it is
deserialized from any stream.</li>
</ul></li>
</ul>

<p>
<b>Supported Serialization Formats:</b>
</p>

<ul class="org-ul">
<li>XML</li>
<li>JSON</li>
<li>Binary</li>
</ul>

<p>
<b>Headers:</b>
</p>

<ul class="org-ul">
<li>Serialization formats:
<ul class="org-ul">
<li>Binary Format:
<ul class="org-ul">
<li>&lt;cereal/archives/binary.hpp&gt;</li>
</ul></li>

<li>Portable Binary Format:
<ul class="org-ul">
<li>&lt;cereal/archives/portable_binary.hpp&gt;</li>
</ul></li>

<li>XML
<ul class="org-ul">
<li>&lt;cereal/archives/xml.hpp&gt;</li>
</ul></li>

<li>JSON - JavaScript Object Notation
<ul class="org-ul">
<li>&lt;cereal/archives/json.hpp&gt;</li>
</ul></li>
</ul></li>

<li>Support for serializing STL containers
<ul class="org-ul">
<li>&lt;cereal/types/vector.hpp&gt; =&gt; STL Vector std::vector serialization</li>
</ul></li>

<li>Support for polymorphic types serialization
<ul class="org-ul">
<li>&lt;cereal/types/polymorphic.hpp&gt;</li>
</ul></li>
</ul>


<p>
Sample Code:
</p>
<ul class="org-ul">
<li>File: cereal_test.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">std::ofstream</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">std::stringstream</span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cereal/archives/binary.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">#include &lt;cereal/archives/portable_binary.hpp&gt;</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cereal/archives/xml.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cereal/archives/json.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Allows std::vector serialization</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cereal/types/vector.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">struct</span> <span class="org-type">DummyClass</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span> <span class="org-variable-name">x</span>;
    <span class="org-type">float</span>  <span class="org-variable-name">y</span>;
    <span class="org-type">size_t</span> <span class="org-variable-name">N</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">list</span>;

    <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">()</span>: x<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>, y<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">)</span>, N<span class="org-rainbow-delimiters-depth-2">(</span>0<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">float</span> <span class="org-variable-name">y</span>, <span class="org-type">size_t</span> <span class="org-variable-name">N</span><span class="org-rainbow-delimiters-depth-2">)</span>
        : x<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>, y<span class="org-rainbow-delimiters-depth-2">(</span>y<span class="org-rainbow-delimiters-depth-2">)</span>, N<span class="org-rainbow-delimiters-depth-2">(</span>N<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">Add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        list.push_back<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Archive</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
    <span class="org-type">void</span> <span class="org-function-name">serialize</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Archive</span>&amp; <span class="org-variable-name">archive</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Archive without name-value pair</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------------</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">archive(x, y, N, list);</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Archive with name-value pair</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------</span>
        archive<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"x"</span>, x<span class="org-rainbow-delimiters-depth-4">)</span>,
                <span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"y"</span>, y<span class="org-rainbow-delimiters-depth-4">)</span>,
                <span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"N"</span>, N<span class="org-rainbow-delimiters-depth-4">)</span>,
                <span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"list"</span>, <span class="org-type">list</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        os &lt;&lt; <span class="org-string">"DummyClass { x = "</span> &lt;&lt; x
           &lt;&lt; <span class="org-string">" ; y = "</span> &lt;&lt; y
           &lt;&lt; <span class="org-string">" ; N = "</span> &lt;&lt; N
           &lt;&lt; <span class="org-string">" } =&gt; "</span>;
        os &lt;&lt; <span class="org-string">" List[ "</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">e</span>: list<span class="org-rainbow-delimiters-depth-3">)</span>
            os &lt;&lt; <span class="org-string">" "</span> &lt;&lt; e;
        os &lt;&lt; <span class="org-string">" ] "</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">============ Binary Serialization ==================//</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Memory "file" simulating a disk file</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">mock_file</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 1 - Serialize object to binary file ===\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">outArchive</span>   = <span class="org-constant">cereal</span>::BinaryOutputArchive<span class="org-rainbow-delimiters-depth-3">(</span>mock_file<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-3">{</span>100.6534, 45.5f, 100<span class="org-rainbow-delimiters-depth-3">}</span>;
        obj.Add<span class="org-rainbow-delimiters-depth-3">(</span>100<span class="org-rainbow-delimiters-depth-3">)</span>; obj.Add<span class="org-rainbow-delimiters-depth-3">(</span>200<span class="org-rainbow-delimiters-depth-3">)</span>; obj.Add<span class="org-rainbow-delimiters-depth-3">(</span>50<span class="org-rainbow-delimiters-depth-3">)</span>; obj.Add<span class="org-rainbow-delimiters-depth-3">(</span>80<span class="org-rainbow-delimiters-depth-3">)</span>;
        outArchive<span class="org-rainbow-delimiters-depth-3">(</span>obj<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Content of mock-file =  "</span> &lt;&lt; mock_file.str<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 2 - Deserialize object from binary file ====\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">inArchive</span> = <span class="org-constant">cereal</span>::BinaryInputArchive<span class="org-rainbow-delimiters-depth-3">(</span>mock_file<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">cls</span>;
        inArchive<span class="org-rainbow-delimiters-depth-3">(</span>cls<span class="org-rainbow-delimiters-depth-3">)</span>;
        cls.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">============= XML Serialization ============================//</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">auto xmlFile = std::ofstream("/tmp/dataset.xml");</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">xmlFile</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 3 - Serialize object to XML file ====\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">outArchive</span> = <span class="org-constant">cereal</span>::XMLOutputArchive<span class="org-rainbow-delimiters-depth-3">(</span>xmlFile<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj1</span><span class="org-rainbow-delimiters-depth-3">{</span>200.0, -802.5f, 900<span class="org-rainbow-delimiters-depth-3">}</span>;
        obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>100<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>200<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>50<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>80<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj2</span><span class="org-rainbow-delimiters-depth-3">{</span>400.0, -641.f, 300<span class="org-rainbow-delimiters-depth-3">}</span>;
        outArchive<span class="org-rainbow-delimiters-depth-3">(</span>obj1, obj2<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: Cereal uses RAII to flush the archive output, so the output is only</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">guaranteeed to be written to the stream when the archive go out of escope.</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] xmlFile = "</span> &lt;&lt; xmlFile.str<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 4 - Deserialize object from XML file ===\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">inArchive</span> = <span class="org-constant">cereal</span>::XMLInputArchive<span class="org-rainbow-delimiters-depth-3">(</span>xmlFile<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj1</span>, <span class="org-variable-name">obj2</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Read two objects from stream</span>
        inArchive<span class="org-rainbow-delimiters-depth-3">(</span>obj1, obj2<span class="org-rainbow-delimiters-depth-3">)</span>;
        obj1.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
        obj2.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">============= JSON Serialization =================================//</span>


    <span class="org-comment-delimiter">// </span><span class="org-comment">auto xmlFile = std::ofstream("/tmp/dataset.xml");</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">jsonFile</span> = <span class="org-constant">std</span>::stringstream<span class="org-rainbow-delimiters-depth-2">{}</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 5 - Serialize object to JSON file ====\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">outArchive</span> = <span class="org-constant">cereal</span>::JSONOutputArchive<span class="org-rainbow-delimiters-depth-3">(</span>jsonFile<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj1</span><span class="org-rainbow-delimiters-depth-3">{</span>200.0, -802.5f, 900<span class="org-rainbow-delimiters-depth-3">}</span>;
        obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>100<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>200<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>50<span class="org-rainbow-delimiters-depth-3">)</span>; obj1.Add<span class="org-rainbow-delimiters-depth-3">(</span>80<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj2</span><span class="org-rainbow-delimiters-depth-3">{</span>400.0, -641.f, 300<span class="org-rainbow-delimiters-depth-3">}</span>;
        outArchive<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"object1"</span>, obj1<span class="org-rainbow-delimiters-depth-4">)</span>,
                   <span class="org-constant">cereal</span>::make_nvp<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"object2"</span>, obj2<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [TRACE] JSON File =\n"</span> &lt;&lt; jsonFile.str<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n=== Experiment 6 - Deserialize object from JSON file ====\n"</span> ;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">inArchive</span> = <span class="org-constant">cereal</span>::JSONInputArchive<span class="org-rainbow-delimiters-depth-3">(</span>jsonFile<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">obj1</span>, <span class="org-variable-name">obj2</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Read two objects from stream</span>
        inArchive<span class="org-rainbow-delimiters-depth-3">(</span>obj1, obj2<span class="org-rainbow-delimiters-depth-3">)</span>;
        obj1.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
        obj2.show<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Program output:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./cereal_test.bin

=== Experiment 1 - Serialize object to binary file ===
 Content of mock-file =  6&#65533;;N&#65533;)Y@&#0;&#0;6Bd&#0;&#0;&#0;&#0;&#0;&#0;&#0;&#4;&#0;&#0;&#0;&#0;&#0;&#0;&#0;d&#0;&#0;&#0;&#65533;&#0;&#0;&#0;2&#0;&#0;&#0;P&#0;&#0;&#0;

=== Experiment 2 - Deserialize object from binary file ====
DummyClass { x = 100.653 ; y = 45.5 ; N = 100 } =&gt;  List[  100 200 50 80 ]

=== Experiment 3 - Serialize object to XML file ====
 [TRACE] xmlFile = &lt;?xml <span class="org-variable-name">version</span>=<span class="org-string">"1.0"</span> <span class="org-variable-name">encoding</span>=<span class="org-string">"utf-8"</span>?&gt;
&lt;cereal&gt;
        &lt;value0&gt;
                &lt;x&gt;200&lt;/x&gt;
                &lt;y&gt;-802.5&lt;/y&gt;
                &lt;N&gt;900&lt;/N&gt;
                &lt;list <span class="org-variable-name">size</span>=<span class="org-string">"dynamic"</span>&gt;
                        &lt;value0&gt;100&lt;/value0&gt;
                        &lt;value1&gt;200&lt;/value1&gt;
                        &lt;value2&gt;50&lt;/value2&gt;
                        &lt;value3&gt;80&lt;/value3&gt;
                &lt;/list&gt;
        &lt;/value0&gt;
        &lt;value1&gt;
                &lt;x&gt;400&lt;/x&gt;
                &lt;y&gt;-641&lt;/y&gt;
                &lt;N&gt;300&lt;/N&gt;
                &lt;list <span class="org-variable-name">size</span>=<span class="org-string">"dynamic"</span>/&gt;
        &lt;/value1&gt;
&lt;/cereal&gt;



=== Experiment 4 - Deserialize object from XML file ===
DummyClass { x = 200 ; y = -802.5 ; N = 900 } =&gt;  List[  100 200 50 80 ]
DummyClass { x = 400 ; y = -641 ; N = 300 } =&gt;  List[  ]

=== Experiment 5 - Serialize object to JSON file ====
 [TRACE] JSON File =
{
    <span class="org-string">"object1"</span>: {
        <span class="org-string">"x"</span>: 200.0,
        <span class="org-string">"y"</span>: -802.5,
        <span class="org-string">"N"</span>: 900,
        <span class="org-string">"list"</span>: [
            100,
            200,
            50,
            80
        ]
    },
    <span class="org-string">"object2"</span>: {
        <span class="org-string">"x"</span>: 400.0,
        <span class="org-string">"y"</span>: -641.0,
        <span class="org-string">"N"</span>: 300,
        <span class="org-string">"list"</span>: []
    }
}

=== Experiment 6 - Deserialize object from JSON file ====
DummyClass { x = 200 ; y = -802.5 ; N = 900 } =&gt;  List[  100 200 50 80 ]
DummyClass { x = 400 ; y = -641 ; N = 300 } =&gt;  List[  ]
</pre>
</div>
</div>
</div>

<div id="outline-container-org84e0502" class="outline-3">
<h3 id="org84e0502"><span class="section-number-3">2.6</span> TinyXML2 - Lightweight XML parser</h3>
<div class="outline-text-3" id="text-2-6">
<p>
Simple and ligtweight C++ library for parsing XML files.
</p>

<p>
Site:
</p>
<ul class="org-ul">
<li><a href="http://leethomason.github.io/tinyxml2/">http://leethomason.github.io/tinyxml2/</a></li>
</ul>

<p>
Repository:
</p>
<ul class="org-ul">
<li><a href="https://github.com/leethomason/tinyxml2">https://github.com/leethomason/tinyxml2</a></li>
</ul>

<p>
Conan Reference: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/nicolastagliani/tinyxml2/tinyxml2%3Anicolastagliani/7.0.1%3Astable">tinyxml2/7.0.1@nicolastagliani/stable</a></li>
</ul>

<p>
Conan package repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/nicolastagliani/conan-tinyxml2/">https://github.com/nicolastagliani/conan-tinyxml2/</a></li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Full Project Code: 
</p>

<ul class="org-ul">
<li><a href="https://gist.github.com/caiorss/351e291b8df2b0fc8e1bba5c86b7ee4d">https://gist.github.com/caiorss/351e291b8df2b0fc8e1bba5c86b7ee4d</a></li>
</ul>


<p>
File: <b>tinyxml2-test.cpp</b>
</p>

<ul class="org-ul">
<li>This file parses the XML taken from <a href="https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml">eurofxref-daily.xml</a> which
contains a set of FX exchange rates.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">tinyxml2.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#define</span> <span class="org-variable-name">ENABLE_ASSERT</span>

<span class="org-preprocessor">#ifdef</span> ENABLE_ASSERT
<span class="org-preprocessor">#define</span> <span class="org-function-name">M_ASSERT</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span> \
      <span class="org-rainbow-delimiters-depth-1">{</span> \
         <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span><span class="org-rainbow-delimiters-depth-3">(</span>expr<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">){</span> \
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"ASSERTION FAILURE: \n"</span>; \
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" =&gt; Condition: "</span> &lt;&lt; #expr &lt;&lt; <span class="org-string">"\n"</span>; \
            <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" =&gt;  Function: "</span> &lt;&lt; __FUNCTION__ &lt;&lt; <span class="org-string">"\n"</span>; \
            <span class="org-constant">std</span>::cerr &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; <span class="org-string">"\n"</span>; \
            <span class="org-constant">std</span>::terminate<span class="org-rainbow-delimiters-depth-3">()</span>; \
         <span class="org-rainbow-delimiters-depth-2">}</span> \
      <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-preprocessor">#else</span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">M_ASSERT</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">#endif</span>

<span class="org-keyword">using</span> <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLText</span>;
<span class="org-keyword">using</span> <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLElement</span>;
<span class="org-keyword">using</span> <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLNode</span>;

<span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">exchangeRatesXML</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Running TinyXMl2 "</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLDocument</span> <span class="org-variable-name">doc</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>doc.Parse<span class="org-rainbow-delimiters-depth-3">(</span> exchangeRatesXML<span class="org-rainbow-delimiters-depth-3">)</span> != <span class="org-constant">tinyxml2</span>::XML_SUCCESS<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [ERROR] Failed to parse XML"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [OK] XML parsed successfully"</span> &lt;&lt; <span class="org-constant">std</span>::endl;


    <span class="org-constant">tinyxml2</span>::<span class="org-type">XMLPrinter</span> <span class="org-variable-name">printer</span>;
    doc.Print<span class="org-rainbow-delimiters-depth-2">(</span>&amp;printer<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Value: doc.FirstChild()-&gt;Value() = "</span> &lt;&lt; doc.FirstChild<span class="org-rainbow-delimiters-depth-2">()</span>-&gt;Value<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-type">XMLElement</span>* <span class="org-variable-name">elem</span> = doc.FirstChildElement<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    M_ASSERT<span class="org-rainbow-delimiters-depth-2">(</span>elem != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>elem<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Element found. OK "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; Element Name = "</span> &lt;&lt; elem-&gt;Name<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-type">XMLElement</span>* <span class="org-variable-name">elem1</span> = elem-&gt;FirstChildElement<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    M_ASSERT<span class="org-rainbow-delimiters-depth-2">(</span>elem1 != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; Found Node Name: "</span> &lt;&lt; elem1-&gt;ToElement<span class="org-rainbow-delimiters-depth-2">()</span>-&gt;Name<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

    <span class="org-type">XMLElement</span>* <span class="org-variable-name">elem2</span> = elem1-&gt;FirstChildElement<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    M_ASSERT<span class="org-rainbow-delimiters-depth-2">(</span>elem2 != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">time</span> = elem2-&gt;Attribute<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"time"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    M_ASSERT<span class="org-rainbow-delimiters-depth-2">(</span>time != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">XML node with: &lt;Cube time = 'xxxx-xx-xx'&gt;</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Time = "</span> &lt;&lt; time &lt;&lt; <span class="org-string">"\n\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ===== Exchange rates per Euro ===="</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">XMLElement</span>* <span class="org-variable-name">e</span> = elem2-&gt;FirstChildElement<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-3">)</span>
             ; e != <span class="org-constant">nullptr</span>; e = e-&gt;NextSiblingElement<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; e-&gt;Attribute<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"currency"</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>15<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-3">(</span>e-&gt;Attribute<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"rate"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-keyword">return</span> doc.ErrorID<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Source: https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml</span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">exchangeRatesXML</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">   &lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="org-string">   &lt;gesmes:Envelope </span>
<span class="org-string">                xmlns:gesmes="http://www.gesmes.org/xml/2002-08-01" </span>
<span class="org-string">                xmlns="http://www.ecb.int/vocabulary/2002-08-01/eurofxref"&gt;</span>

<span class="org-string">           &lt;gesmes:subject&gt;Reference rates&lt;/gesmes:subject&gt;</span>
<span class="org-string">           &lt;gesmes:Sender&gt;</span>
<span class="org-string">                   &lt;gesmes:name&gt;European Central Bank&lt;/gesmes:name&gt;</span>
<span class="org-string">           &lt;/gesmes:Sender&gt;</span>
<span class="org-string">           &lt;Cube&gt;</span>
<span class="org-string">                   &lt;Cube time='2019-06-14'&gt;</span>
<span class="org-string">                           &lt;Cube currency='USD' rate='1.1265'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='JPY' rate='121.90'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='BGN' rate='1.9558'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='CZK' rate='25.540'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='DKK' rate='7.4676'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='GBP' rate='0.89093'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='HUF' rate='321.53'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='PLN' rate='4.2534'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='RON' rate='4.7233'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='SEK' rate='10.6390'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='CHF' rate='1.1211'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='ISK' rate='141.50'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='NOK' rate='9.7728'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='HRK' rate='7.4105'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='RUB' rate='72.3880'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='TRY' rate='6.6427'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='AUD' rate='1.6324'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='BRL' rate='4.3423'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='CAD' rate='1.5018'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='CNY' rate='7.7997'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='HKD' rate='8.8170'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='IDR' rate='16128.10'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='ILS' rate='4.0518'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='INR' rate='78.6080'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='KRW' rate='1333.60'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='MXN' rate='21.6073'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='MYR' rate='4.6981'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='NZD' rate='1.7241'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='PHP' rate='58.539'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='SGD' rate='1.5403'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='THB' rate='35.101'/&gt;</span>
<span class="org-string">                           &lt;Cube currency='ZAR' rate='16.6529'/&gt;</span>
<span class="org-string">                   &lt;/Cube&gt;</span>
<span class="org-string">           &lt;/Cube&gt;</span>
<span class="org-string">   &lt;/gesmes:Envelope&gt;</span>
<span class="org-string">)</span><span class="org-default">"</span>;
</pre>
</div>

<p>
File: <b>CMakeLists.txt</b> 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(tinyxml2-test)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#=========== Conan Bootstrap =================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)
<span class="org-function-name">set</span>(CONAN_PROFILE default)

<span class="org-function-name">conan_cmake_run</span>( REQUIRES
                 tinyxml2/7.0.1@nicolastagliani/stable
                 BASIC_SETUP
                 BUILD missing )

<span class="org-comment">#=========== Find Package ================#</span>

<span class="org-function-name">include</span>(tinyxml2_helper.cmake)

<span class="org-comment">#=========== Targets =====================# </span>

<span class="org-function-name">add_executable</span>(tinyxml2-test tinyxml2-test.cpp)
<span class="org-function-name">target_link_libraries</span>(tinyxml2-test PRIVATE ${<span class="org-variable-name">tinyxml2_LIBRARY</span>})
</pre>
</div>

<p>
File: <b>tinyxml2_helper.cmake</b> 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-comment"># Credits: https://github.com/nicolastagliani/conan-tinyxml2/issues/3</span>
<span class="org-function-name">include</span>( FindPackageHandleStandardArgs )

<span class="org-function-name">find_path</span>( tinyxml2_INCLUDE_DIR
  NAMES
    tinyxml2.h
  PATHS
    ${<span class="org-variable-name">CONAN_INCLUDE_DIRS_TINYXML2</span>}
)

<span class="org-function-name">find_library</span>( tinyxml2_LIBRARY
  NAMES
    ${<span class="org-variable-name">CONAN_LIBS_TINYXML2</span>}
  PATHS
    ${<span class="org-variable-name">CONAN_LIB_DIRS_TINYXML2</span>}
)

<span class="org-function-name">find_package_handle_standard_args</span>( tinyxml2 DEFAULT_MSG
  tinyxml2_INCLUDE_DIR
)

<span class="org-keyword">if</span>( tinyxml2_FOUND )
  <span class="org-function-name">set</span>( tinyxml2_INCLUDE_DIRS ${<span class="org-variable-name">tinyxml2_INCLUDE_DIR</span>} )
  <span class="org-function-name">set</span>( tinyxml2_LIBRARIES ${<span class="org-variable-name">tinyxml2_LIBRARY</span>} )

  <span class="org-function-name">get_filename_component</span>( tinyxml2_CONFIG_PATH ${<span class="org-variable-name">CONAN_TINYXML2_ROOT</span>} DIRECTORY )
  <span class="org-function-name">get_filename_component</span>( tinyxml2_HASH ${<span class="org-variable-name">CONAN_TINYXML2_ROOT</span>} NAME )
  <span class="org-function-name">get_filename_component</span>( tinyxml2_CONFIG_PATH ${<span class="org-variable-name">tinyxml2_CONFIG_PATH</span>} DIRECTORY )
  <span class="org-function-name">set</span>( tinyxml2_CONFIG_PATH  ${<span class="org-variable-name">tinyxml2_CONFIG_PATH</span>}/build/${<span class="org-variable-name">tinyxml2_HASH</span>} )
  <span class="org-function-name">set</span>( tinyxml2_CONFIG_FILENAME tinyxml2Config.cmake )

  <span class="org-function-name">find_file</span>( tinyxml2_CONFIG_DIR
      ${<span class="org-variable-name">tinyxml2_CONFIG_FILENAME</span>}
    HINTS
      ${<span class="org-variable-name">tinyxml2_CONFIG_PATH</span>}
  )

  <span class="org-keyword">if</span>( tinyxml2_CONFIG_DIR-NOTFOUND )
    <span class="org-function-name">set</span>( tinyxml2_CONFIG <span class="org-string">""</span> )
  <span class="org-keyword">else</span>()
    <span class="org-function-name">set</span>( tinyxml2_CONFIG ${<span class="org-variable-name">tinyxml2_CONFIG_DIR</span>} )
  <span class="org-keyword">endif</span>()

  <span class="org-function-name">mark_as_advanced</span>(
    tinyxml2_INCLUDE_DIR
    tinyxml2_LIBRARY
    tinyxml2_DIR
    tinyxml2_CONFIG
  )
<span class="org-keyword">else</span>()
  <span class="org-function-name">set</span>( tinyxml2_DIR <span class="org-string">""</span> CACHE STRING
    <span class="org-string">"An optional hint to a tinyxml2 directory"</span>
  )
<span class="org-keyword">endif</span>()
</pre>
</div>

<p>
<b>Build</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://gist.github.com/caiorss/351e291b8df2b0fc8e1bba5c86b7ee4d gist 
$ cd gist 

<span class="org-comment-delimiter"># </span><span class="org-comment">Build with QT Creator </span>
$ qtcreator CMakeLists.txt 

<span class="org-comment-delimiter"># </span><span class="org-comment">Build from command line </span>
$ cmake -H. -Bbuild -DCMAKE_BUILD_TYPE=Debug
$ cmake --build build --target
</pre>
</div>

<p>
<b>Program Output:</b> 
</p>
<ul class="org-ul">
<li>Meaning: USD 1.127 =&gt; Means that 1 Euro = 1.127 USD or that the
exchange rate is 1.127 per Euro.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ build/bin/tinyxml2-test 

 [INFO] Running TinyXMl2 
 [OK] XML parsed successfully
<span class="org-function-name">Value</span>: doc.FirstChild()-&gt;Value() = xml <span class="org-variable-name">version</span>=<span class="org-string">"1.0"</span> <span class="org-variable-name">encoding</span>=<span class="org-string">"UTF-8"</span>
 Element found. OK 
 =&gt;&gt; Element Name = gesmes:Envelope
 =&gt;&gt; Found Node Name: Cube
 =&gt; Time = 2019-06-14

 ===== Exchange rates per Euros ====
       USD          1.127
       JPY        121.900
       BGN          1.956
       CZK         25.540
       DKK          7.468
       GBP          0.891
       HUF        321.530
       PLN          4.253
       RON          4.723
       SEK         10.639
       CHF          1.121
       ISK        141.500
       NOK          9.773
       HRK          7.410
       RUB         72.388
       TRY          6.643
       AUD          1.632
       BRL          4.342
       CAD          1.502
       CNY          7.800
       HKD          8.817
       IDR      16128.100
       ILS          4.052
       INR         78.608
       KRW       1333.600
       MXN         21.607
       MYR          4.698
       NZD          1.724
       PHP         58.539
       SGD          1.540
       THB         35.101
       ZAR         16.653
</pre>
</div>
</div>
</div>

<div id="outline-container-org76cd56f" class="outline-3">
<h3 id="org76cd56f"><span class="section-number-3">2.7</span> PugiXML - Lightweight XML parser</h3>
<div class="outline-text-3" id="text-2-7">
<p>
PugiXML is lightweight XML parsing library with DOM (Document Object
Model) transversing and XPATH capabilities. 
</p>

<p>
Official Web Site: 
</p>
<ul class="org-ul">
<li><a href="https://pugixml.org/">https://pugixml.org/</a></li>
</ul>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://pugixml.org/docs/manual.html">https://pugixml.org/docs/manual.html</a></li>
</ul>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/zeux/pugixml">https://github.com/zeux/pugixml</a></li>
</ul>

<p>
Conan Reference: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan/pugixml%3Abincrafters/1.9%3Astable">pugixml/1.9@bincrafters/stable</a></li>
</ul>


<p>
<b>Example:</b> 
</p>

<p>
File: <b>pugixml_test1.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">pugixml.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">extern</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">exchangeRatesXML</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">This input stream 'is' can be replaced by</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">any other input stream without any code modification</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">such as:  std::ifstream is("/tmp/input-file.xml")</span>
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">is</span><span class="org-rainbow-delimiters-depth-2">{</span>exchangeRatesXML<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">pugi</span>::<span class="org-type">xml_document</span>     <span class="org-variable-name">doc</span>;
    <span class="org-constant">pugi</span>::<span class="org-type">xml_parse_result</span> <span class="org-variable-name">result</span> = doc.load<span class="org-rainbow-delimiters-depth-2">(</span>is<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>result<span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] Failed to parse the XML. Invalid file."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::exit<span class="org-rainbow-delimiters-depth-3">(</span>EXIT_FAILURE<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">sender_name</span> = doc.child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                  .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Sender"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                                  .child_value<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:name"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">type: const char*</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">subject</span> = doc.child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                      .child_value<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:subject"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">time</span> = doc.child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>.attribute<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"time"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                   .value<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ========= DOCUMENT INFO ================"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Sender name = "</span> &lt;&lt; sender_name &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;     Subject = "</span> &lt;&lt; subject &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;        Time = "</span> &lt;&lt; time &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">auto</span> <span class="org-variable-name">parent</span> = doc.child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"gesmes:Envelope"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                              .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>
                              .child<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt;<span class="org-string">"\n Exchange Rates per EURO "</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">node</span> : parent<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; node.attribute<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"currency"</span><span class="org-rainbow-delimiters-depth-3">)</span>.value<span class="org-rainbow-delimiters-depth-3">()</span>
                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-3">(</span>node.attribute<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"rate"</span><span class="org-rainbow-delimiters-depth-4">)</span>.value<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n\n *********** Extracting Data with XPATH ********\n\n"</span>;

    <span class="org-constant">pugi</span>::<span class="org-type">xpath_node</span> <span class="org-variable-name">sender_name2</span> = doc.select_node<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"//gesmes:name"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Sender = "</span> &lt;&lt; sender_name2.node<span class="org-rainbow-delimiters-depth-2">()</span>.child_value<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">auto</span> <span class="org-variable-name">time2</span> = doc.select_node<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"//Cube[@time]"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Time = "</span> &lt;&lt; time2.node<span class="org-rainbow-delimiters-depth-2">()</span>.attribute<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"time"</span><span class="org-rainbow-delimiters-depth-2">)</span>.value<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt;<span class="org-string">"\n Exchange Rates per EURO - Extracted with XPATH "</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Type: pugi::xpath_node_set</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">dataNodes</span> = doc.select_nodes<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"/gesmes:Envelope/Cube/Cube/Cube"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">n</span> : dataNodes<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; n.node<span class="org-rainbow-delimiters-depth-3">()</span>.attribute<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"currency"</span><span class="org-rainbow-delimiters-depth-3">)</span>.value<span class="org-rainbow-delimiters-depth-3">()</span>
                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-3">(</span>n.node<span class="org-rainbow-delimiters-depth-4">()</span>.attribute<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"rate"</span><span class="org-rainbow-delimiters-depth-4">)</span>.value<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Source: https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml</span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">exchangeRatesXML</span> = R<span class="org-default">"</span><span class="org-string">(</span>
<span class="org-string">   &lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="org-string">   &lt;gesmes:Envelope</span>
<span class="org-string">                xmlns:gesmes="http://www.gesmes.org/xml/2002-08-01"</span>
<span class="org-string">                xmlns="http://www.ecb.int/vocabulary/2002-08-01/eurofxref"&gt;</span>

<span class="org-string">       &lt;gesmes:subject&gt;Reference rates&lt;/gesmes:subject&gt;</span>
<span class="org-string">       &lt;gesmes:Sender&gt;</span>
<span class="org-string">           &lt;gesmes:name&gt;European Central Bank&lt;/gesmes:name&gt;</span>
<span class="org-string">       &lt;/gesmes:Sender&gt;</span>
<span class="org-string">       &lt;Cube&gt;</span>
<span class="org-string">           &lt;Cube time='2019-06-14'&gt;</span>
<span class="org-string">               &lt;Cube currency='USD' rate='1.1265'/&gt;</span>
<span class="org-string">               &lt;Cube currency='JPY' rate='121.90'/&gt;</span>
<span class="org-string">               &lt;Cube currency='BGN' rate='1.9558'/&gt;</span>
<span class="org-string">               &lt;Cube currency='CZK' rate='25.540'/&gt;</span>
<span class="org-string">               &lt;Cube currency='DKK' rate='7.4676'/&gt;</span>
<span class="org-string">               &lt;Cube currency='GBP' rate='0.89093'/&gt;</span>
<span class="org-string">               &lt;Cube currency='HUF' rate='321.53'/&gt;</span>
<span class="org-string">               &lt;Cube currency='PLN' rate='4.2534'/&gt;</span>
<span class="org-string">               &lt;Cube currency='RON' rate='4.7233'/&gt;</span>
<span class="org-string">               &lt;Cube currency='SEK' rate='10.6390'/&gt;</span>
<span class="org-string">               &lt;Cube currency='CHF' rate='1.1211'/&gt;</span>
<span class="org-string">               &lt;Cube currency='ISK' rate='141.50'/&gt;</span>
<span class="org-string">               &lt;Cube currency='NOK' rate='9.7728'/&gt;</span>
<span class="org-string">               &lt;Cube currency='HRK' rate='7.4105'/&gt;</span>
<span class="org-string">           &lt;/Cube&gt;</span>
<span class="org-string">       &lt;/Cube&gt;</span>
<span class="org-string">   &lt;/gesmes:Envelope&gt;</span>
<span class="org-string">)</span><span class="org-default">"</span>;

</pre>
</div>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(purgixml)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Boosttrap =========================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-comment"># Possible values "default" and "llvm8"</span>
<span class="org-function-name">set</span>(CONAN_PROFILE default)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                  pugixml/1.9@bincrafters/stable
                BASIC_SETUP
                BUILD missing)

<span class="org-comment"># ============= Find Package ===========================#</span>

<span class="org-function-name">find_package</span>(pugixml REQUIRED)

<span class="org-comment">#============= Targets Settings ========================#</span>

<span class="org-function-name">add_executable</span>(pugixml_test1 pugixml_test1.cpp)
<span class="org-function-name">target_link_libraries</span>(pugixml_test1 pugixml)
</pre>
</div>

<p>
Program output: 
</p>

<div class="org-src-container">
<pre class="src src-text">========= DOCUMENT INFO ================
 =&gt; Sender name = European Central Bank
 =&gt;     Subject = Reference rates
 =&gt;        Time = 2019-06-14

 Exchange Rates per EURO 
       USD     1.127
       JPY   121.900
       BGN     1.956
       CZK    25.540
       DKK     7.468
       GBP     0.891
       HUF   321.530
       PLN     4.253
       RON     4.723
       SEK    10.639
       CHF     1.121
       ISK   141.500
       NOK     9.773
       HRK     7.410


 *********** Extracting Data with XPATH ********

 Sender = European Central Bank
 Time = 2019-06-14

 Exchange Rates per EURO - Extracted with XPATH 
       USD     1.127
       JPY   121.900
       BGN     1.956
       CZK    25.540
       DKK     7.468
       GBP     0.891
       HUF   321.530
       PLN     4.253
       RON     4.723
       SEK    10.639
       CHF     1.121
       ISK   141.500
       NOK     9.773
       HRK     7.410
</pre>
</div>
</div>
</div>

<div id="outline-container-org2e3ebbe" class="outline-3">
<h3 id="org2e3ebbe"><span class="section-number-3">2.8</span> MuParser - Math expression parser</h3>
<div class="outline-text-3" id="text-2-8">
<p>
MuParser is a simple math expression parser library without any
dependencies.
</p>

<p>
Web Site: 
</p>
<ul class="org-ul">
<li><a href="https://beltoforion.de/article.php?a=muparser">https://beltoforion.de/article.php?a=muparser</a></li>
</ul>

<p>
Repository: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/beltoforion/muparser/">https://github.com/beltoforion/muparser/</a></li>
</ul>

<p>
Conan Reference: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/conan-community/conan/muparser%3Aconan/2.2.6%3Astable">muparser/2.2.6@conan/stable</a></li>
</ul>

<p>
<b>Sample Project</b>
</p>

<p>
File: <b>CMakeLists.txt</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(cppexperiments)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-comment"># Possible values "default" and "llvm8"</span>
<span class="org-function-name">set</span>(CONAN_PROFILE default)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                muparser/2.2.6@conan/stable
                BASIC_SETUP
                BUILD missing)

 <span class="org-comment">#======= Targets Settings ===============+#</span>

<span class="org-function-name">add_executable</span>(muparser1_formula muparser1_formula.cpp)
<span class="org-function-name">target_link_libraries</span>(muparser1_formula muparser)
</pre>
</div>

<p>
File: <b>muparser1_formula.cpp</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">muParser.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Defined for UNIX-like: Linux, Mac OSX, QNX, ...</span>
<span class="org-preprocessor">#if</span> __unix__
<span class="org-preprocessor">  #include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">unistd.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#endif</span>

<span class="org-type">bool</span> <span class="org-function-name">isTTY_terminal</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-preprocessor">   #if</span> __unix__
      <span class="org-keyword">return</span> ::ttyname<span class="org-rainbow-delimiters-depth-2">(</span>STDIN_FILENO<span class="org-rainbow-delimiters-depth-2">)</span> != <span class="org-constant">nullptr</span>;
<span class="org-preprocessor">   #else</span>
      <span class="org-keyword">return</span> <span class="org-constant">false</span>;
<span class="org-preprocessor">   #endif</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">double</span> <span class="org-function-name">future_value</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">PV</span>, <span class="org-type">double</span> <span class="org-variable-name">rate</span>, <span class="org-type">double</span> <span class="org-variable-name">nper</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> PV * <span class="org-constant">std</span>::pow<span class="org-rainbow-delimiters-depth-2">(</span>1 + rate / 100.0, nper<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-constant">mu</span>::<span class="org-type">Parser</span> <span class="org-variable-name">p1</span>;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n====== EXPERIMENT 1 - Simple math expression ======="</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    p1.SetExpr<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"2^1 + 2^3 + 2^4"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [*] p1-A value: "</span>
              &lt;&lt; p1.GetExpr<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; p1.Eval<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    p1.SetExpr<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"3.5 * 10 - sin(3.1415) * 2.0 + sqrt(10) / 100.0 + 2^3"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [*] p1-B value: "</span>
              &lt;&lt; p1.GetExpr<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; p1.Eval<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n====== EXPERIMENT 2 - Expression with variables ======="</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    p1.DefineConst<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"pi"</span>, 3.1415<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">double</span> <span class="org-variable-name">x</span> = 10.0, <span class="org-variable-name">y</span> = 4.5;
    p1.DefineVar<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"x"</span>, &amp;x<span class="org-rainbow-delimiters-depth-2">)</span>;
    p1.DefineVar<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"y"</span>, &amp;y<span class="org-rainbow-delimiters-depth-2">)</span>;
    p1.SetExpr<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" 3 * pi + sin(pi) + 4 * x + y - 5"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [*] p1-C value: "</span>
              &lt;&lt; p1.GetExpr<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; p1.Eval<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n====== EXPERIMENT 3 - Expression with custom function ======="</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    p1.DefineFun<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"fv"</span>, &amp;future_value<span class="org-rainbow-delimiters-depth-2">)</span>;

    p1.DefineFun<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"payoff"</span>, <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">double</span> <span class="org-variable-name">S</span>, <span class="org-type">double</span> <span class="org-variable-name">K</span><span class="org-rainbow-delimiters-depth-3">){</span>
        <span class="org-keyword">return</span> <span class="org-constant">std</span>::max<span class="org-rainbow-delimiters-depth-4">(</span>S - K, 0.0<span class="org-rainbow-delimiters-depth-4">)</span>;
    <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    p1.SetExpr<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"fv(100, 2, 8) + payoff(100, 90)"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [*] p1-D value: "</span> &lt;&lt; p1.GetExpr<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; p1.Eval<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;


    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n====== EXPERIMENT 4 - Parser error handling ======="</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">When an error happens it throws an exception: mu::ParserError</span>
    <span class="org-keyword">try</span><span class="org-rainbow-delimiters-depth-2">{</span>
        p1.SetExpr<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"10.2 * 5.0 + a * 3"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-type">double</span> <span class="org-variable-name">value</span> = p1.Eval<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [*] p1-E value: "</span> &lt;&lt; value &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">mu</span>::<span class="org-type">ParserError</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] p1-C Parser error: "</span> &lt;&lt; ex.GetMsg<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n====== EXPERIMENT 5 - Calutor Interactive Shell ======"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>isTTY_terminal<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" === Calculator Started OK. ====="</span> &lt;&lt; <span class="org-constant">std</span>::endl;

        <span class="org-constant">mu</span>::<span class="org-type">Parser</span> <span class="org-variable-name">p2</span>;
        <span class="org-type">double</span> <span class="org-variable-name">ans</span> = 0.0;
        p2.DefineVar<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"ans"</span>, &amp;ans<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span>;

        <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cin.good<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" EXPR =&gt; "</span>;
            <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">std</span>::cin, line<span class="org-rainbow-delimiters-depth-4">)</span>;

            <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-4">(</span>line == <span class="org-string">""</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-keyword">continue</span>;

            <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-4">(</span>line == <span class="org-string">"quit"</span><span class="org-rainbow-delimiters-depth-4">)</span>
                <span class="org-keyword">break</span>;

            p2.SetExpr<span class="org-rainbow-delimiters-depth-4">(</span>line<span class="org-rainbow-delimiters-depth-4">)</span>;
            <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-4">{</span>
                ans = p2.Eval<span class="org-rainbow-delimiters-depth-5">()</span>;
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; ans = "</span> &lt;&lt; ans &lt;&lt; <span class="org-string">"\n\n"</span>;
            <span class="org-rainbow-delimiters-depth-4">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">mu</span>::<span class="org-type">ParserError</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-4">)</span>
            <span class="org-rainbow-delimiters-depth-4">{</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] Parser error "</span> &lt;&lt; ex.GetMsg<span class="org-rainbow-delimiters-depth-5">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
            <span class="org-rainbow-delimiters-depth-4">}</span>
        <span class="org-rainbow-delimiters-depth-3">}</span>

    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-preprocessor">#if</span> _WIN32
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to exit. "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-preprocessor">#endif</span>
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Program output:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./muparser1_formula 

====== EXPERIMENT 1 - Simple math expression =======
 [*] p1-A value: 2^1 + 2^3 + 2^4  = 26
 [*] p1-B value: 3.5 * 10 - sin(3.1415) * 2.0 + sqrt(10) / 100.0 + 2^3  = 43.0314

====== EXPERIMENT 2 - Expression with variables =======
 [*] p1-C value:  3 * pi + sin(pi) + 4 * x + y - 5  = 48.9246

====== EXPERIMENT 3 - Expression with custom <span class="org-keyword">function</span> =======
 [*] p1-D value: fv(100, 2, 8) + payoff(100, 90)  = 127.166

====== EXPERIMENT 4 - Parser error handling =======
 [ERROR] p1-C Parser error: Unexpected token <span class="org-string">"a"</span> found at position 13.

====== EXPERIMENT 5 - Calutor Interactive Shell ======
 === Calculator Started OK. =====
 EXPR =&gt; 9.81 * sin(3.1415 / 2.0) + 100 * sqrt(285.6) + exp(3.65)
 =&gt; ans = 1738.26

 EXPR =&gt; ans / 100.0 - 80.0
 =&gt; ans = -62.6174

 EXPR =&gt; ans * ans
 =&gt; ans = 3920.94

 EXPR =&gt; 

</pre>
</div>
</div>
</div>

<div id="outline-container-org2c34604" class="outline-3">
<h3 id="org2c34604"><span class="section-number-3">2.9</span> GTest - Unit Testing Framework</h3>
<div class="outline-text-3" id="text-2-9">
<p>
GTest or Google test is one of the most used and most popular test
frameworks which supports many features such as mocks; test fixtures;
parameterized tests; XML test report in JUnit / xUnit format; test
discovery and integration with IDEs, namely Eclipse, QTCreator and
Visual Studio.
</p>


<p>
Official Web site:
</p>
<ul class="org-ul">
<li><a href="https://github.com/google/googletest">https://github.com/google/googletest</a></li>
</ul>

<p>
Some Tutorial/Primers: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/google/googletest/blob/master/googletest/docs/primer.md">Google Test Primer</a> (Official)</li>
<li><a href="https://docs.microsoft.com/en-us/visualstudio/test/how-to-use-google-test-for-cpp?view=vs-2019">How to use Google Test for C++ - Visual Studio | Microsoft Docs</a></li>
<li><a href="http://www.yolinux.com/TUTORIALS/Cpp-GoogleTest.html">GoogleTest: C++ unit test framework</a></li>
<li><a href="https://developer.ibm.com/articles/au-googletestingframework/">A quick introduction to the Google C++ Testing Framework – IBM Developer</a></li>
</ul>

<p>
Conan Reference: 
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/conan-community/conan/gtest%3Aconan/1.8.0%3Astable">gtest/1.8.0@conan/stable</a></li>
</ul>

<p>
Test Runner for GTest: 
</p>
<ul class="org-ul">
<li><a href="https://github.com/nholthaus/gtest-runner">https://github.com/nholthaus/gtest-runner</a></li>
</ul>

<p>
CMake Integration:
</p>
<ul class="org-ul">
<li><a href="https://cmake.org/cmake/help/latest/module/FindGTest.html">FindGTest — CMake 3.14.4 Documentation</a></li>
</ul>

<p>
Fatal Assertions: 
</p>
<ul class="org-ul">
<li>ASSERT_TRUE</li>
<li>ASSERT_FALSE</li>
<li>ASSERT_EQ(val1, val2)</li>
<li>ASSERT_NE(val1, val2)</li>
<li>ASSERT_LT</li>
<li>ASSERT_GT</li>
<li>ASSERT_GE</li>
</ul>

<p>
Non-fatal assertions Macros: 
</p>

<ul class="org-ul">
<li>EXPECT_TRUE</li>
<li>EXPECT_FALSE</li>
<li>EXPECT_EQ</li>
<li>EXPECT_NQ</li>
<li>EXPECT_DOUBLE_EQ</li>
<li>EXPECT_FLOAT_EQ</li>
<li>EXPECT_NEAR(value1, value2, absolute_tolerance)</li>
<li>TEST(&lt;NAME&gt;, ){ &#x2026; &lt;BODY&gt; .. }</li>
<li>EXPECT_FLOAT_EQ</li>
</ul>

<p>
<b>Example: Usage with CMake and QTCreator</b>
</p>

<p>
Get the source code: 
</p>
<ul class="org-ul">
<li>Gist: <a href="https://gist.github.com/caiorss/eb2fc15b7ed322ccac5ee496585e54e9">Sample Project CMake and GTest with Conan</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ git clone https://gist.github.com/caiorss/eb2fc15b7ed322ccac5ee496585e54e9 gist &amp;&amp; <span class="org-builtin">cd</span> gist
Cloning into <span class="org-string">'gist'</span>...
<span class="org-function-name">remote</span>: Enumerating objects: 4, done.
<span class="org-function-name">remote</span>: Counting objects: 100% (4/4), done.
<span class="org-function-name">remote</span>: Compressing objects: 100% (4/4), done.
<span class="org-function-name">remote</span>: Total 4 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (4/4), done.

$ ls
CMakeLists.txt  gtest-experiment.cpp

<span class="org-comment-delimiter"># </span><span class="org-comment">Open with QT Creator, Visual Studio or build from command line </span>
$ qtcreator CMakeList.txt 

<span class="org-comment-delimiter"># </span><span class="org-comment">Open with Visual Studio </span>
$ devenv CMakeLists.txt 
</pre>
</div>

<p>
<b>File: gtest-experiment.cpp</b>
</p>

<p>
Headers:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">gtest/gtest.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Implementations: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">==================== Implementation ========================</span>

<span class="org-type">int</span> <span class="org-function-name">factorial</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-type">int</span> <span class="org-variable-name">prod</span> = 1;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 1; i &lt;= n; i++<span class="org-rainbow-delimiters-depth-2">)</span>
        prod *= i;
    <span class="org-keyword">return</span> prod;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">struct</span> <span class="org-type">Date</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">int</span> <span class="org-variable-name">year</span>;
    <span class="org-type">int</span> <span class="org-variable-name">month</span>;
    <span class="org-type">int</span> <span class="org-variable-name">day</span>;
    <span class="org-function-name">Date</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
    <span class="org-function-name">Date</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">year</span>, <span class="org-type">int</span> <span class="org-variable-name">month</span>, <span class="org-type">int</span> <span class="org-variable-name">day</span><span class="org-rainbow-delimiters-depth-2">)</span>
        : year<span class="org-rainbow-delimiters-depth-2">(</span>year<span class="org-rainbow-delimiters-depth-2">)</span>
        , month<span class="org-rainbow-delimiters-depth-2">(</span>month<span class="org-rainbow-delimiters-depth-2">)</span>
        , day<span class="org-rainbow-delimiters-depth-2">(</span>day<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Comparison operator required by  EXPECT_EQ</span>
    <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">==</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Date</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> year  == rhs.year
            &amp;&amp; month == rhs.month
            &amp;&amp; day   == rhs.day;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Necessary for make class printable in GTest</span>
    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">Date</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> os &lt;&lt; <span class="org-string">"Date { "</span> &lt;&lt; rhs.year &lt;&lt; <span class="org-string">" ; "</span>
                  &lt;&lt; rhs.month &lt;&lt; <span class="org-string">" ; "</span>
                  &lt;&lt; rhs.day &lt;&lt; <span class="org-string">" } "</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">Date</span> <span class="org-function-name">GregorianEasterSunday</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">int</span> <span class="org-variable-name">c</span> = y / 100;
    <span class="org-type">int</span> <span class="org-variable-name">n</span> = y - 19 * <span class="org-rainbow-delimiters-depth-2">(</span> y / 19 <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">int</span> <span class="org-variable-name">k</span> = <span class="org-rainbow-delimiters-depth-2">(</span> c - 17 <span class="org-rainbow-delimiters-depth-2">)</span> / 25;
    <span class="org-type">int</span> <span class="org-variable-name">i</span> = c - c / 4 - <span class="org-rainbow-delimiters-depth-2">(</span> c - k <span class="org-rainbow-delimiters-depth-2">)</span> / 3 + 19 * n + 15;
    i = i - 30 * <span class="org-rainbow-delimiters-depth-2">(</span> i / 30 <span class="org-rainbow-delimiters-depth-2">)</span>;
    i = i - <span class="org-rainbow-delimiters-depth-2">(</span> i / 28 <span class="org-rainbow-delimiters-depth-2">)</span> * <span class="org-rainbow-delimiters-depth-2">(</span> 1 - <span class="org-rainbow-delimiters-depth-3">(</span> i / 28 <span class="org-rainbow-delimiters-depth-3">)</span>
          * <span class="org-rainbow-delimiters-depth-3">(</span> 29 / <span class="org-rainbow-delimiters-depth-4">(</span> i + 1 <span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>
          * <span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-rainbow-delimiters-depth-4">(</span> 21 - n <span class="org-rainbow-delimiters-depth-4">)</span> / 11 <span class="org-rainbow-delimiters-depth-3">)</span> <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">int</span> <span class="org-variable-name">j</span> = y + y / 4 + i + 2 - c + c / 4;
    j = j - 7 * <span class="org-rainbow-delimiters-depth-2">(</span> j / 7 <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">int</span> <span class="org-variable-name">l</span> = i - j;
    <span class="org-type">int</span> <span class="org-variable-name">m</span> = 3 + <span class="org-rainbow-delimiters-depth-2">(</span> l + 40 <span class="org-rainbow-delimiters-depth-2">)</span> / 44;
    <span class="org-type">int</span> <span class="org-variable-name">d</span> = l + 28 - 31 * <span class="org-rainbow-delimiters-depth-2">(</span> m / 4 <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">return</span> Date<span class="org-rainbow-delimiters-depth-2">(</span>y, m, d<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Test code: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">//</span><span class="org-comment">=============== Tests ====================================//</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>FactorialTest, test1<span class="org-rainbow-delimiters-depth-1">){</span>
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>6,        factorial<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>24,       factorial<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>120,      factorial<span class="org-rainbow-delimiters-depth-3">(</span>5<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>3628800,  factorial<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Expect greater than</span>
    EXPECT_GT<span class="org-rainbow-delimiters-depth-2">(</span>10000000, factorial<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Expect not equal</span>
    EXPECT_NE<span class="org-rainbow-delimiters-depth-2">(</span>25, factorial<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>FactorialTestFailure, testFailure<span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Deliberately fails for demonstration purposes</span>
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>6, factorial<span class="org-rainbow-delimiters-depth-3">(</span>3<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>4, factorial<span class="org-rainbow-delimiters-depth-3">(</span>4<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>6, factorial<span class="org-rainbow-delimiters-depth-3">(</span>2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">TEST</span><span class="org-rainbow-delimiters-depth-1">(</span>GregorianEaster, testdates<span class="org-rainbow-delimiters-depth-1">){</span>
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>Date<span class="org-rainbow-delimiters-depth-3">(</span>2005, 3, 27<span class="org-rainbow-delimiters-depth-3">)</span>, GregorianEasterSunday<span class="org-rainbow-delimiters-depth-3">(</span>2005<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>Date<span class="org-rainbow-delimiters-depth-3">(</span>2008, 3, 23<span class="org-rainbow-delimiters-depth-3">)</span>, GregorianEasterSunday<span class="org-rainbow-delimiters-depth-3">(</span>2008<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    EXPECT_EQ<span class="org-rainbow-delimiters-depth-2">(</span>Date<span class="org-rainbow-delimiters-depth-3">(</span>2010, 4, 4<span class="org-rainbow-delimiters-depth-3">)</span>,  GregorianEasterSunday<span class="org-rainbow-delimiters-depth-3">(</span>2010<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>File: CMakeLists.txt</b>
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>( GtestsExperiment
         VERSION      0.1
         DESCRIPTION  <span class="org-string">"Experiment with Gtest uni testing framework"</span>
        )
<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                gtest/1.8.1@bincrafters/stable
                BASIC_SETUP
                BUILD missing
                )

<span class="org-comment">#============= Find Packages ================================#</span>

<span class="org-function-name">find_package</span>(GTest REQUIRED)

<span class="org-comment">#---------------------------------------------------#</span>
<span class="org-comment">#             Targets Settings                      #</span>
<span class="org-comment">#---------------------------------------------------#</span>

<span class="org-function-name">add_executable</span>(gtest-experiment gtest-experiment.cpp)
<span class="org-function-name">target_link_libraries</span>(gtest-experiment GTest::GTest GTest::Main)
<span class="org-function-name">add_test</span>(GTestExperiment gtest-experiment)
</pre>
</div>

<p>
<b>Test Output:</b>
</p>


<div class="figure">
<p><a href="images/gtest-framework-console.png"><img src="images/gtest-framework-console.png" alt="gtest-framework-console.png" /></a>
</p>
<p><span class="figure-number">Figure 1: </span>Test output in Command Line</p>
</div>


<div class="figure">
<p><a href="images/gtest-framework-qtcreator.png"><img src="images/gtest-framework-qtcreator.png" alt="gtest-framework-qtcreator.png" /></a>
</p>
<p><span class="figure-number">Figure 2: </span>QTCreator Test Discovery</p>
</div>
</div>
</div>

<div id="outline-container-org4ebc86f" class="outline-3">
<h3 id="org4ebc86f"><span class="section-number-3">2.10</span> Catch2 - Unit Testing Framework</h3>
<div class="outline-text-3" id="text-2-10">
<p>
Advatanges over other test frameworks:
</p>

<ul class="org-ul">
<li>Header-only library, so it requires no linking step or linking
dependencies.</li>

<li>Uses C++ operators instead of many macros such as (X &gt; 20) instead of
EXPECT_GT(X, 20) (expect grater than) as in GTest (Google's test)</li>

<li>BDD - Behavior Driven Development</li>

<li>Property-based testing - testing with several random values and
combination of random values.</li>

<li>Test with multiple data or data table which frees the user from
writing lots boilerplate ASSERT_EQUAL(x, y). A single REQUIRE macro
can be used for test a whole list of cartesian pairs such as (x, y,z, expected)</li>

<li>XML output in JUnit, xUnit format.</li>
</ul>

<p>
Problem:
</p>
<ul class="org-ul">
<li>Compile-time can be a bit slow due to the library be header-only.</li>
</ul>

<p>
Repository:
</p>
<ul class="org-ul">
<li><a href="https://github.com/catchorg/Catch2">https://github.com/catchorg/Catch2</a></li>
</ul>

<p>
Conan Reference:
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/catchorg/Catch2/Catch2:catchorg/2.7.2:stable">Catch2/2.7.2@catchorg/stable</a></li>
</ul>

<p>
Code Examples:
</p>
<ul class="org-ul">
<li><a href="https://github.com/catchorg/Catch2/tree/master/examples">https://github.com/catchorg/Catch2/tree/master/examples</a></li>
<li><a href="https://github.com/catchorg/Catch2/blob/master/projects/SelfTest/UsageTests/Generators.tests.cpp">Test Generators</a> - testing with multiple data</li>
</ul>

<p>
Tutorial:
</p>
<ul class="org-ul">
<li><a href="https://github.com/catchorg/Catch2/blob/master/docs/tutorial.md#top">Catch2/tutorial.md at master · catchorg/Catch2 · GitHub</a></li>
<li><a href="https://mariusbancila.ro/blog/2018/03/29/writing-cpp-unit-tests-with-catch2/">Writing C++ unit tests with Catch2</a> - BDD - Behavior Driven Development.</li>
</ul>

<p>
Misc:
</p>
<ul class="org-ul">
<li><a href="https://levelofindirection.com/blog/catch2-released.html">Catch2 Released : Level of Indirection</a></li>
<li><a href="https://codingnest.com/the-future-of-catch2/">The future of Catch2 — The Coding Nest</a></li>
</ul>

<p>
Example simple test:
</p>

<p>
File: testcatch2.cpp
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">catch2/catch.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>


<span class="org-type">int</span> <span class="org-function-name">formula</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> 4 * x + 2 * y;
<span class="org-rainbow-delimiters-depth-1">}</span>

TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test function furmula A"</span>, <span class="org-string">"[tag1]"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>3, 4<span class="org-rainbow-delimiters-depth-3">)</span> == 20 <span class="org-rainbow-delimiters-depth-2">)</span>;
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>4, 5<span class="org-rainbow-delimiters-depth-3">)</span> == 26 <span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test function formula B"</span>, <span class="org-string">"[tag2]"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>0, 0<span class="org-rainbow-delimiters-depth-3">)</span> == 0  <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Intentionally fails</span>
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>2, 5<span class="org-rainbow-delimiters-depth-3">)</span> == 10 <span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">struct</span> <span class="org-type">TestData</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-variable-name">y</span>, <span class="org-variable-name">expected</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;


TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Testing with struct"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">t</span> = GENERATE<span class="org-rainbow-delimiters-depth-2">(</span> values<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">TestData</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>
    <span class="org-rainbow-delimiters-depth-4">{</span>
        <span class="org-rainbow-delimiters-depth-5">{</span>3,  4, 20<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>4,  5, 26<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>0,  0,  0<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>-1, 4,  6<span class="org-rainbow-delimiters-depth-5">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Fails</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span> 2, 2, 12<span class="org-rainbow-delimiters-depth-5">}</span>
    <span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>t.x, t.y<span class="org-rainbow-delimiters-depth-3">)</span> == t.expected<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Testing with structured bindings"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">[</span>x, y, z<span class="org-rainbow-delimiters-depth-2">]</span> = GENERATE<span class="org-rainbow-delimiters-depth-2">(</span> table&lt;<span class="org-type">int</span>, <span class="org-type">int</span>, <span class="org-type">int</span>&gt;<span class="org-rainbow-delimiters-depth-3">(</span>
    <span class="org-rainbow-delimiters-depth-4">{</span>
        <span class="org-rainbow-delimiters-depth-5">{</span>3,  4, 20<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>4,  5, 26<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>0,  0,  0<span class="org-rainbow-delimiters-depth-5">}</span>
       ,<span class="org-rainbow-delimiters-depth-5">{</span>2, 2, 12<span class="org-rainbow-delimiters-depth-5">}</span>
    <span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    REQUIRE<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>x, y<span class="org-rainbow-delimiters-depth-3">)</span> == z<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
File: CMakeLists.txt - CMake building script integrated with Conan.
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(Catch2_testing)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                Catch2/2.7.2@catchorg/stable
                BASIC_SETUP
                BUILD missing
                )
<span class="org-comment">#============= Find Packages ================================#</span>

<span class="org-function-name">find_package</span>(Catch2 REQUIRED)

<span class="org-comment">#---------------------------------------------------#</span>
<span class="org-comment">#             Targets Settings                      #</span>
<span class="org-comment">#---------------------------------------------------#</span>

<span class="org-function-name">add_executable</span>(testcatch2 testcatch2.cpp test-main.cpp)
<span class="org-function-name">target_link_libraries</span>(testcatch2)
</pre>
</div>

<p>
Test runner help option:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./testcatch2 -h

Catch v2.7.2
<span class="org-function-name">usage</span>:
  testcatch2 [&lt;test name|pattern|tags&gt; ... ] options

where options are:
  -?, -h, --help                            display usage information
  -l, --list-tests                          list all/matching test cases
  -t, --list-tags                           list all/matching tags
  -s, --success                             include successful tests<span class="org-keyword"> in</span>
                                            output
  -b, --break                               break into debugger on failure
  -e, --nothrow                             skip exception tests
  -i, --invisibles                          show invisibles (tabs, newlines)
  -o, --out &lt;filename&gt;                      output filename
  -r, --reporter &lt;name&gt;                     reporter to use (defaults to
                                            console)
  -n, --name &lt;name&gt;                         suite name
  -a, --abort                               abort at first failure
  -x, --abortx &lt;no. failures&gt;               abort after x failures
  -w, --warn &lt;warning name&gt;                 enable warnings
  -d, --durations &lt;yes|no&gt;                  show test durations
  -f, --input-file &lt;filename&gt;               load test names to run from a
                                            file
  -#, --filenames-as-tags                   adds a tag for the filename
  -c, --section &lt;section name&gt;              specify section to run
  -v, --verbosity &lt;quiet|normal|high&gt;       set output verbosity
  --list-test-names-only                    list all/matching test cases
                                            names only
  --list-reporters                          list all reporters
  --order &lt;decl|lex|rand&gt;                   test case order (defaults to
                                            decl)
  --rng-seed &lt;<span class="org-string">'time'</span>|number&gt;                set a specific seed for random
                                            numbers
  --use-colour &lt;yes|no&gt;                     should output be colourised
  --libidentify                             report name and version according
                                            to libidentify standard
  --wait-for-keypress &lt;start|<span class="org-keyword">exit</span>|both&gt;     waits for a keypress before
                                            exiting
  --benchmark-resolution-multiple           multiple of clock resolution to
  &lt;multiplier&gt;                              run benchmarks

For more detailed usage please see the project docs


</pre>
</div>

<p>
Test runner test list:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./testcatch2 --list-tests
All available test cases:
  Test <span class="org-keyword">function</span> <span class="org-function-name">furmula</span> A
      [tag1]
  Test <span class="org-keyword">function</span> <span class="org-function-name">formula</span> B
      [tag2]
  Testing with struct
  Testing with structured bindings
4 test cases

</pre>
</div>

<p>
Test runner output:
</p>

<div class="org-src-container">
<pre class="src src-text">$ ./testcatch2

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
testcatch2 is a Catch v2.7.2 host application.
Run with -? for options

-------------------------------------------------------------------------------
Test function formula B
-------------------------------------------------------------------------------
/home/archbox/Documents/projects/fquant/testcatch2.cpp:17
...............................................................................

/home/archbox/Documents/projects/fquant/testcatch2.cpp:21: FAILED:
  REQUIRE( formula(2, 5) == 10 )
with expansion:
  18 == 10

-------------------------------------------------------------------------------
Testing with struct
-------------------------------------------------------------------------------
/home/archbox/Documents/projects/fquant/testcatch2.cpp:31
...............................................................................

/home/archbox/Documents/projects/fquant/testcatch2.cpp:41: FAILED:
  REQUIRE( formula(t.x, t.y) == t.expected )
with expansion:
  4 == 6

===============================================================================
test cases:  4 |  2 passed | 2 failed
assertions: 13 | 11 passed | 2 failed
</pre>
</div>
</div>
</div>

<div id="outline-container-orgce9d80e" class="outline-3">
<h3 id="orgce9d80e"><span class="section-number-3">2.11</span> Doctest - Unit Testing Framewok</h3>
<div class="outline-text-3" id="text-2-11">
<p>
Doctest is a unit test framework based on catch2 test framework,
however doctest has a much faster compile-time than many other
unit-test frameworks.
</p>

<p>
Advantages:
</p>
<ul class="org-ul">
<li>Easy of use</li>
<li>Faster compile-time</li>
<li>Easy to integrate, header-only-library</li>
<li>Operator based testing: CHECK(VALUE == EXPECTED), CHECK(x &gt; 10)
instead of No need to use macros ASSERT_EQ, ASSERT_NEQ (not equal)
as in GTest.</li>
</ul>

<p>
Disadvantages:
</p>
<ul class="org-ul">
<li>No XML output with jUnit standard similar to GTest standard.</li>
<li>No integration with IDE</li>
<li>No data-driven test, aka parameterized test, or test with a list of value tuples.</li>
</ul>

<p>
Repository:
</p>
<ul class="org-ul">
<li><a href="https://github.com/onqtam/doctest">https://github.com/onqtam/doctest</a></li>
</ul>

<p>
Conan Reference:
</p>
<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan/doctest%3Abincrafters/2.3.1%3Astable">doctest/2.3.1@bincrafters/stable</a></li>
</ul>

<p>
Conan Package:
</p>
<ul class="org-ul">
<li><a href="https://github.com/bincrafters/conan-doctest">https://github.com/bincrafters/conan-doctest</a></li>
</ul>

<p>
Code Examples:
</p>
<ul class="org-ul">
<li><a href="https://github.com/onqtam/doctest/tree/master/examples">https://github.com/onqtam/doctest/tree/master/examples</a></li>
</ul>

<p>
Features:
</p>
<ul class="org-ul">
<li><a href="https://github.com/onqtam/doctest/blob/master/doc/markdown/features.md">https://github.com/onqtam/doctest/blob/master/doc/markdown/features.md</a></li>
</ul>

<p>
See:
</p>
<ul class="org-ul">
<li><a href="https://accu.org/index.php/journals/2343">ACCU - doctest – the Lightest C++ Unit Testing Framewor</a></li>
<li><a href="https://www.codeproject.com/Articles/1156938/doctest-the-lightest-Cplusplus-unit-testing-framew">doctest - the lightest C++ unit testing framework - CodeProject</a></li>
</ul>

<p>
Video:
</p>
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=eH1CxEC29l8">CppCon 2017: Viktor Kirilov “Mix Tests and Production Code With Doctest&#x2026;” - YouTube</a></li>
</ul>

<p>
Usage:
</p>

<ul class="org-ul">
<li>File: doctest_experiment.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#define</span> <span class="org-variable-name">DOCTEST_CONFIG_IMPLEMENT_WITH_MAIN</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">doctest.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">formula</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> 4 * x + 2 * y;
<span class="org-rainbow-delimiters-depth-1">}</span>

TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test function furmula A"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>3, 4<span class="org-rainbow-delimiters-depth-3">)</span> == 20 <span class="org-rainbow-delimiters-depth-2">)</span>;
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>4, 5<span class="org-rainbow-delimiters-depth-3">)</span> == 26 <span class="org-rainbow-delimiters-depth-2">)</span>;
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>4, 5<span class="org-rainbow-delimiters-depth-3">)</span> &lt; 100 <span class="org-rainbow-delimiters-depth-2">)</span>;
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>4, 5<span class="org-rainbow-delimiters-depth-3">)</span> != 0 <span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

TEST_CASE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Test function formula B"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>0, 0<span class="org-rainbow-delimiters-depth-3">)</span> == 0  <span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Intentionally fails</span>
    CHECK<span class="org-rainbow-delimiters-depth-2">(</span> formula<span class="org-rainbow-delimiters-depth-3">(</span>2, 5<span class="org-rainbow-delimiters-depth-3">)</span> == 10 <span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>File: CMakeLists.txt integrated with Conan</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>( doctest_experiment
         VERSION      0.1
         DESCRIPTION  <span class="org-string">"A doctest experiment"</span>
        )
<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># ============= Conan Bootstrap =============================#</span>

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)

<span class="org-function-name">conan_cmake_run</span>(REQUIRES
                doctest/2.3.1@bincrafters/stable
                BASIC_SETUP
                BUILD missing
                )

<span class="org-comment">#============= Find Packages ================================#</span>

<span class="org-function-name">find_package</span>(doctest 2.3.1 REQUIRED)

<span class="org-comment">#---------------------------------------------------#</span>
<span class="org-comment">#             Targets Settings                      #</span>
<span class="org-comment">#---------------------------------------------------#</span>

<span class="org-function-name">add_executable</span>(doctest_experiment doctest_experiment.cpp)
<span class="org-function-name">copy_after_build</span>(doctest_experiment)
<span class="org-comment"># target_link_libraries(doctest_experiment doctest::doctest)</span>
</pre>
</div>

<p>
Show options:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ bin/doctest_experiment -h
[doctest] doctest version is <span class="org-string">"2.3.1"</span>
[doctest]
[doctest] boolean values: <span class="org-string">"1/on/yes/true"</span> or <span class="org-string">"0/off/no/false"</span>
[doctest] filter  values: <span class="org-string">"str1,str2,str3"</span> (comma separated strings)
[doctest]
[doctest] filters use wildcards for matching strings
[doctest] something passes a filter if any of the strings<span class="org-keyword"> in</span> a filter matches
[doctest]
[doctest] ALL FLAGS, OPTIONS AND FILTERS ALSO AVAILABLE WITH A <span class="org-string">"dt-"</span> PREFIX!!!
[doctest]
[doctest] Query flags - the program quits after them. Available:

 -?,   --help, -h                      prints this message
 -v,   --version                       prints the version
 -c,   --count                         prints the number of matching tests
 -ltc, --list-test-cases               lists all matching tests by name
 -lts, --list-test-suites              lists all matching test suites
 -lr,  --list-reporters                lists all registered reporters

[doctest] The available &lt;int&gt;/&lt;string&gt; options/filters are:

 -tc,  --test-case=&lt;filters&gt;           filters     tests by their name
 -tce, --test-case-exclude=&lt;filters&gt;   filters OUT tests by their name
 -sf,  --source-file=&lt;filters&gt;         filters     tests by their file
 -sfe, --source-file-exclude=&lt;filters&gt; filters OUT tests by their file
 -ts,  --test-suite=&lt;filters&gt;          filters     tests by their test suite
 -tse, --test-suite-exclude=&lt;filters&gt;  filters OUT tests by their test suite
 -sc,  --subcase=&lt;filters&gt;             filters     subcases by their name
 -sce, --subcase-exclude=&lt;filters&gt;     filters OUT subcases by their name
 -r,   --reporters=&lt;filters&gt;           reporters to use (console is default)
 -o,   --out=&lt;string&gt;                  output filename
 -ob,  --order-by=&lt;string&gt;             how the tests should be ordered
                                       &lt;string&gt; - by [file/suite/name/rand]
 -rs,  --rand-seed=&lt;int&gt;               seed for random ordering
 -f,   --first=&lt;int&gt;                   the first test passing the filters to
                                       execute - for range-based execution
 -l,   --last=&lt;int&gt;                    the last test passing the filters to
                                       execute - for range-based execution
 -aa,  --abort-after=&lt;int&gt;             stop after &lt;int&gt; failed assertions
 -scfl,--subcase-filter-levels=&lt;int&gt;   apply filters for the first &lt;int&gt; levels

[doctest] Bool options - can be used like flags and true is assumed. Available:

 -s,   --success=&lt;bool&gt;                include successful assertions<span class="org-keyword"> in</span> output
 -cs,  --case-sensitive=&lt;bool&gt;         filters being treated as case sensitive
 -e,   --exit=&lt;bool&gt;                   exits after the tests finish
 -d,   --duration=&lt;bool&gt;               prints the time duration of each test
 -nt,  --no-throw=&lt;bool&gt;               skips exceptions-related assert checks
 -ne,  --no-exitcode=&lt;bool&gt;            returns (or exits) always with success
 -nr,  --no-run=&lt;bool&gt;                 skips all runtime doctest operations
 -nv,  --no-version=&lt;bool&gt;             omit the framework version<span class="org-keyword"> in</span> the output
 -nc,  --no-colors=&lt;bool&gt;              disables colors<span class="org-keyword"> in</span> output
 -fc,  --force-colors=&lt;bool&gt;           use colors even when not<span class="org-keyword"> in</span> a tty
 -nb,  --no-breaks=&lt;bool&gt;              disables breakpoints<span class="org-keyword"> in</span> debuggers
 -ns,  --no-skip=&lt;bool&gt;                don<span class="org-string">'t skip test cases marked as skip</span>
<span class="org-string"> -gfl, --gnu-file-line=&lt;bool&gt;          :n: vs (n): for line numbers in output</span>
<span class="org-string"> -npf, --no-path-filenames=&lt;bool&gt;      only filenames and no paths in output</span>
<span class="org-string"> -nln, --no-line-numbers=&lt;bool&gt;        0 instead of real line numbers in output</span>

<span class="org-string">[doctest] for more information visit the project documentation</span>
</pre>
</div>

<p>
Test runner test listing:
</p>

<div class="org-src-container">
<pre class="src src-sh">$ bin/doctest_experiment --list-test-cases
[doctest] listing all test case names
===============================================================================
Test <span class="org-keyword">function</span> <span class="org-function-name">furmula</span> A
Test <span class="org-keyword">function</span> <span class="org-function-name">formula</span> B
================================================
</pre>
</div>

<p>
Run tests: (Note: It is printed with colored output)
</p>

<div class="org-src-container">
<pre class="src src-text">$ bin/doctest_experiment
[doctest] doctest version is "2.3.1"
[doctest] run with "--help" for options
===============================================================================
/home/archbox/Documents/projects/fquant/doctest_experiment.cpp:21:
TEST CASE:  Test function formula B

/home/archbox/Documents/projects/fquant/doctest_experiment.cpp:25: ERROR: CHECK( formula(2, 5) == 10 ) is NOT correct!
  values: CHECK( 18 == 10 )

===============================================================================
[doctest] test cases:      2 |      1 passed |      1 failed |      0 skipped
[doctest] assertions:      6 |      5 passed |      1 failed |
[doctest] Status: FAILURE!
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2019-07-30 Tue 14:17</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
