<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2019-05-01 Wed 11:39 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ Notes - Boost Libraries</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp/c++ c++ design patterns gneric programming object oriented metaprogramming"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ Notes - Boost Libraries</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgfa7c9c1">1. Boost Libraries</a>
<ul>
<li><a href="#orgaf79e3d">1.1. Boost Libraries already in C++ ISO standard</a></li>
<li><a href="#org6907c62">1.2. Boost Format</a></li>
<li><a href="#orgc4b3d70">1.3. Boost Lexical_cast</a></li>
<li><a href="#org105c230">1.4. Boost string algo</a></li>
<li><a href="#org120aab7">1.5. Boost Lambda</a></li>
<li><a href="#org3335a0a">1.6. Boost Operators</a>
<ul>
<li><a href="#org628465a">1.6.1. Overview</a></li>
<li><a href="#org0c35979">1.6.2. Example</a></li>
</ul>
</li>
<li><a href="#orga83edaa">1.7. Boost Range</a></li>
<li><a href="#orgea1fac9">1.8. Boost Pointer Container</a></li>
<li><a href="#orge8727ae">1.9. Boost Interprocess</a>
<ul>
<li><a href="#org28c432b">1.9.1. Overview</a></li>
<li><a href="#orgb06bd15">1.9.2. Example: Shared memory facilities</a></li>
<li><a href="#orgccbdd2d">1.9.3. Example: Shared memory logging with mutex synchronization</a></li>
<li><a href="#org12c59e0">1.9.4. Example: Memory Mapped Files</a></li>
</ul>
</li>
<li><a href="#orgd319f92">1.10. Boost DateTime</a>
<ul>
<li><a href="#org28eaf6f">1.10.1. Overview</a></li>
<li><a href="#orgc6e7588">1.10.2. Example - Date Manipulation</a></li>
</ul>
</li>
<li><a href="#org005c8d4">1.11. Library Map</a>
<ul>
<li><a href="#orgd55ec9e">1.11.1. Math</a></li>
<li><a href="#orgb9a09de">1.11.2. Parallel Computing</a></li>
<li><a href="#org8fd1c23">1.11.3. String Utilities</a></li>
<li><a href="#orge84f231">1.11.4. Template Metaprogramming facilities</a></li>
<li><a href="#org1fcfb86">1.11.5. Design Patterns and Object Oriented Design Patterns</a></li>
<li><a href="#org322bd3b">1.11.6. Command Line Options</a></li>
<li><a href="#org9b573c0">1.11.7. Debugging, Logging and Assertions</a></li>
<li><a href="#org95cf416">1.11.8. Network - Sockets - TCP/IP</a></li>
<li><a href="#org92f43d1">1.11.9. Shared Libraries and Plugins - DLL, DSO, SO</a></li>
<li><a href="#org135754e">1.11.10. Subprocess and inter process communication - IPC</a></li>
<li><a href="#org7a018f2">1.11.11. Low level and byte manipulation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf061fd8">2. Complementary Libraries</a>
<ul>
<li><a href="#orgbf7d196">2.1. Range v3 (C++20)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<ul class="org-ul">
<li><a href='index.html'>Index</a></li>
</ul>

<div id="outline-container-orgfa7c9c1" class="outline-2">
<h2 id="orgfa7c9c1"><span class="section-number-2">1</span> Boost Libraries</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgaf79e3d" class="outline-3">
<h3 id="orgaf79e3d"><span class="section-number-3">1.1</span> Boost Libraries already in C++ ISO standard</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Some Boost libraries are redundant as they are already in the C++ ISO
standard. However, it is worth using them if a compiler to new
C++ standards is not available. 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Boost libraries aready in C++ ISO Standard</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Boost Library</th>
<th scope="col" class="org-left">C++ Standard</th>
<th scope="col" class="org-left">Description</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">equivalent</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Added since C++11</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Boost.Chrono</td>
<td class="org-left">std::chrono</td>
<td class="org-left">Time interval</td>
</tr>

<tr>
<td class="org-left">Boost.Array</td>
<td class="org-left">std::array</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Boost.Foreach</td>
<td class="org-left">C++11 ranged for</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_65_1/doc/html/function.html">Boost.Function</a></td>
<td class="org-left">std::function</td>
<td class="org-left">Function type erasure and callbacks</td>
</tr>

<tr>
<td class="org-left">Boost.Heap</td>
<td class="org-left">std::priority_queue</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Boost.Intrusive</td>
<td class="org-left">STL move constructor  and move assignment operator</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_62_0/doc/html/ratio.html">Boost.Ratio</a></td>
<td class="org-left">std::ratio</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_63_0/doc/html/move.html">Boost.Move</a></td>
<td class="org-left">std::move</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Boost.SaticAssert</td>
<td class="org-left">std::static_assert</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/core/doc/html/core/ref.html">Boost.Ref</a></td>
<td class="org-left">Reference warapers in &lt;functional&gt; header</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/boost_random.html">Boost.Random</a></td>
<td class="org-left">Header &lt;random&gt;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/regex/doc/html/index.html">Boost.Regex</a></td>
<td class="org-left">Library: <a href="https://en.cppreference.com/w/cpp/regex">&lt;regex&gt;</a>  (std::regex)</td>
<td class="org-left">Regular expressions library</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/thread.html">Boost.Thread</a></td>
<td class="org-left">Library: <a href="https://en.cppreference.com/w/cpp/thread">&lt;thread&gt;</a> (std::thread)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Added since C++17</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/optional/doc/html/index.html">Boost.Optional</a></td>
<td class="org-left">std::optional</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/any.html">Boost.Any</a></td>
<td class="org-left">std::any</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/variant.html">Boost.Variant</a></td>
<td class="org-left">std::variant</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/filesystem/doc/index.htm">Boost.Filesystem</a></td>
<td class="org-left">Library: <a href="https://en.cppreference.com/w/cpp/filesystem">filesystem</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Boost Containers already in STL and C++ standards: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> Boost containers and functions aready incorpored into STL and C++ ISO Standard.</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Boost container or type</th>
<th scope="col" class="org-left">STL equivalent type</th>
<th scope="col" class="org-left">STL Header</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Since C++11</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">boost lambda</td>
<td class="org-left">C++11 lambdas</td>
<td class="org-left">-</td>
<td class="org-left">Lambda "function" constructor.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/function.html">boost::function</a></td>
<td class="org-left">std::function</td>
<td class="org-left">&lt;functional&gt;</td>
<td class="org-left">Container for function or method-call type erasure.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/bind/doc/html/bind.html">boost::bind</a></td>
<td class="org-left">std::bind</td>
<td class="org-left">&lt;functional&gt;</td>
<td class="org-left">Function wrappers.</td>
</tr>

<tr>
<td class="org-left">boost::ref, boost::cref</td>
<td class="org-left">std::cref and std::ref</td>
<td class="org-left">&lt;functional&gt;&gt;</td>
<td class="org-left">Reference wrappers in header &lt;functional&gt;</td>
</tr>

<tr>
<td class="org-left">boost::unique_ptr</td>
<td class="org-left">std::unique_ptr</td>
<td class="org-left">&lt;memory&gt;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/smart_ptr/doc/html/smart_ptr.html#shared_ptr">boost::shared_ptr</a></td>
<td class="org-left">std::shared_ptr</td>
<td class="org-left">&lt;memory&gt;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/array.html">boost::array</a></td>
<td class="org-left">std::array</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Non-heap allocated fixed-size array, similar to C-array.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Since C++17</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/any.html">boost::any</a></td>
<td class="org-left">std::any</td>
<td class="org-left">&lt;any&gt;</td>
<td class="org-left">Type erasure container for storing any copiable type.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/optional/doc/html/index.html">boost::optional</a></td>
<td class="org-left">std::optional</td>
<td class="org-left">&lt;optional&gt;</td>
<td class="org-left">Container which may or may not have any value.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/variant.html">boost::variant</a></td>
<td class="org-left">std::variant</td>
<td class="org-left">&lt;variant&gt;</td>
<td class="org-left">Discriminated union, a better C-Union</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
Note: 
</p>
<ul class="org-ul">
<li>Reference wrappers in &lt;functional&gt; header:
<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/utility/functional/reference_wrapper">std::reference_wrapper</a></li>
<li><a href="https://en.cppreference.com/w/cpp/utility/functional/ref">std::ref, std::cref</a></li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/bind/doc/html/bind.html">boost::bind</a> and std::bind =&gt; Function for building lambda
functions out of functions with partial arguments, member function
pointers and pointer to member variables.</li>
</ul>

<p>
See:
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/7241993/is-it-smart-to-replace-boostthread-and-boostmutex-with-c11-equivalents">c++ - Is it smart to replace boost::thread and boost::mutex with c++11 equivalents? - Stack Overflow</a></li>
</ul>
</div>
</div>
<div id="outline-container-org6907c62" class="outline-3">
<h3 id="org6907c62"><span class="section-number-3">1.2</span> Boost Format</h3>
<div class="outline-text-3" id="text-1-2">
<p>
The boost library format provides a type-safe printf-like notation
which is concise as the old C-printf functions (printf, sprintf,
fprintf) and less intrusive and verbose than the C++ (&lt;&lt;) insertion
operator. 
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/libs/format/doc/format.html">Boost format</a></li>
<li>Header: &lt;boost/format.hpp&gt;</li>
<li>Functions:
<ul class="org-ul">
<li>boost::str</li>
<li>boost::format</li>
</ul></li>
</ul>

<p>
Using the library: 
</p>
<ul class="org-ul">
<li>As the library is a header-only library as almost all boost
libraries. All what is needed to use it is just include the
following header.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/format.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Example 1: Test in CERN's ROOT REPL.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/format.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-type">double</span> <span class="org-variable-name">x</span> = 10.0;

&gt;&gt; <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-type">basic_format</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7ffcfe86fbd8

&gt;&gt; <span class="org-keyword">auto</span> fmt = <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; fmt
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-type">basic_format</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f8c7b52b020
&gt;&gt;  

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; fmt &lt;&lt; <span class="org-string">"\n"</span>;
 x = 10 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.16228 ; log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.32193

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
 x = 10 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.16228 ; log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.32193
&gt;&gt; 
</pre>
</div>

<p>
Example 2: Multiline code. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Pasting the following code block in the REPL between curly</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">brackets, including them.</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
 <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-2">)</span> 
              % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span> 
<span class="org-comment-delimiter">// </span><span class="org-comment">Output:</span>
x = 10 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.16228 ; log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.32193
</pre>
</div>

<p>
Example 3.A: Turn format object into std::string.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> z = M_PI_2;
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.5707963

&gt;&gt; <span class="org-keyword">auto</span> fm = <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"operation = %1% - z = %2% %1%(%2%) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-string">"sin"</span> % z % <span class="org-constant">std</span>::sin<span class="org-rainbow-delimiters-depth-1">(</span>z<span class="org-rainbow-delimiters-depth-1">)</span> ;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"fm = "</span> &lt;&lt; fm &lt;&lt; <span class="org-string">"\n"</span>;
fm = operation = sin - z = 1.5708 sin<span class="org-rainbow-delimiters-depth-1">(</span>1.5708<span class="org-rainbow-delimiters-depth-1">)</span> = 1

&gt;&gt; <span class="org-constant">std</span>::string result = fm.str<span class="org-rainbow-delimiters-depth-1">()</span>;
&gt;&gt; result
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"operation = sin - z = 1.5708 sin(1.5708) = 1"</span>
</pre>
</div>

<p>
Example 3.B: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string result2 = <span class="org-constant">boost</span>::str<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"operation = %1% - z = %2% %1%(%2%) = %3%"</span><span class="org-rainbow-delimiters-depth-2">)</span> % <span class="org-string">"sin"</span> % z % <span class="org-constant">std</span>::sin<span class="org-rainbow-delimiters-depth-2">(</span>z<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; result2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"operation = sin - z = 1.5708 sin(1.5708) = 1"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc4b3d70" class="outline-3">
<h3 id="orgc4b3d70"><span class="section-number-3">1.3</span> Boost Lexical_cast</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Boost lexical cast is header-only library for converting from
built-int types to string and from string to built-in types. 
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/boost_lexical_cast.html#boost_lexical_cast.motivation">Boost Lexical Cast</a></li>
<li>Header: &lt;boost/format.hpp&gt;</li>
<li>Functions:
<ul class="org-ul">
<li>boost::lexical_cast</li>
</ul></li>
</ul>

<p>
Example: 
</p>

<ul class="org-ul">
<li><b>Headers and namespace:</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/lexical_cast.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Namespace alias </span>
<span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;
</pre>
</div>

<p>
<b>Basic conversions:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"456"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 456

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">".4615e3"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 461.50000

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"inf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> inf

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"34e5"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3400000.0L
&gt;&gt; 

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"inf error"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: 
<span class="org-function-name">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">clone_impl</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">error_info_injector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::bad_lexical_cast<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-1">&gt;</span> 
 caught: bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">" asdsas "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: 
<span class="org-function-name">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">clone_impl</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">error_info_injector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::bad_lexical_cast<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-function-name">caught</span>: bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target
  &gt;&gt; 

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">" 100 "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: 
 <span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">clone_impl</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">error_info_injector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::bad_lexical_cast<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-1">&gt;</span> 
 caught: bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target
&gt;&gt; 
</pre>
</div>

<p>
<b>Catch exceptions:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-type">void</span> <span class="org-function-name">PrintSquareRoot</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">number_str</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">double</span> <span class="org-variable-name">x</span> = <span class="org-constant">boost</span>::lexical_cast<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>number_str<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"x = "</span> &lt;&lt; x
                  &lt;&lt; <span class="org-string">" ; sqrt(x) = "</span> &lt;&lt; <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">boost</span>::<span class="org-type">bad_lexical_cast</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span>
     <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"34.34"</span><span class="org-rainbow-delimiters-depth-1">)</span>
x = 34.34 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 5.86003

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"-125.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
x = -125 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = -nan

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"-12dsad 5.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" 100 "</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target
&gt;&gt; 
</pre>
</div>

<p>
<b>Function try_lexical_convert</b> 
</p>

<p>
Convert from string to built-in type without exceptions. 
</p>

<p>
Pseudo-signature: 
</p>
<ul class="org-ul">
<li>Returns true if succeed to convert source type to target type and
then sets the result variable. Otherwise, the function returns
false.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">boost</span>::<span class="org-constant">conversion</span> 
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Target</span>, <span class="org-keyword">typename</span> <span class="org-type">Source</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
  <span class="org-type">bool</span> <span class="org-function-name">try_lexical_convert</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Source</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">arg</span>, <span class="org-type">Targe</span>&amp; <span class="org-variable-name">result</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> z = 0.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000

&gt;&gt; <span class="org-constant">boost</span>::<span class="org-constant">conversion</span>::try_lexical_convert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200.34"</span>, z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 200.34000

&gt;&gt; <span class="org-constant">boost</span>::<span class="org-constant">conversion</span>::try_lexical_convert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200 error .34"</span>, z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 200.00000

&gt;&gt; <span class="org-constant">boost</span>::<span class="org-constant">conversion</span>::try_lexical_convert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"not-a-number"</span>, z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
</pre>
</div>
</div>
</div>
<div id="outline-container-org105c230" class="outline-3">
<h3 id="org105c230"><span class="section-number-3">1.4</span> Boost string algo</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Provides lots of useful string utility functions that are missing in
the standard library. 
</p>

<ul class="org-ul">
<li>Documentation:
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/string_algo/usage.html">Boost String Main Documentation</a></li>
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/string_algo/quickref.html">Quick Referece card.</a></li>
</ul></li>
<li>Header: &lt;boost/algorithm/string.hpp&gt;</li>
<li>Functions:
<ul class="org-ul">
<li>boost::to_upper</li>
<li>boost::to_lower</li>
<li>boost::trim</li>
<li>boost::iends_with</li>
<li>boost::istarts_with</li>
<li>boost::replace</li>
<li>boost::replace_first</li>
</ul></li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Boost header and namespace alias: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/algorithm/string.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">b =&gt; Namespace alias to boost namespace. </span>
<span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;
</pre>
</div>

<p>
Convert string to upper/lower case.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string s = <span class="org-string">" C++ is an old new programmign LANGUAGE"</span>;
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">To upper case </span>
&gt;&gt; <span class="org-constant">b</span>::to_upper<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" C++ IS AN OLD NEW PROGRAMMIGN LANGUAGE"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">To lower case:</span>
&gt;&gt; <span class="org-constant">b</span>::to_lower<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" c++ is an old new programmign language"</span>
</pre>
</div>

<p>
Trim string on both sides: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string ss = <span class="org-string">"   A string with  spaces   "</span>;
&gt;&gt; <span class="org-constant">b</span>::trim<span class="org-rainbow-delimiters-depth-1">(</span>ss<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; ss
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"A string with  spaces"</span>
</pre>
</div>

<p>
Check whether starts with some prefix: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Checks whether first string argument starts with 'industry</span>
&gt;&gt; <span class="org-constant">b</span>::istarts_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"revenues outlook.pdf"</span>, <span class="org-string">"industry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

&gt;&gt; <span class="org-constant">b</span>::istarts_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"industry revenues outlook.pdf"</span>, <span class="org-string">"industry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>

&gt;&gt; <span class="org-constant">b</span>::istarts_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"   industry revenues outlook.pdf"</span>, <span class="org-string">"industry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
</pre>
</div>

<p>
Check whether string ends with some suffix:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Checks whether first strigns ends with suffix '.pdf'</span>
&gt;&gt;  <span class="org-constant">b</span>::iends_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"revenues-outlook.xls"</span>, <span class="org-string">".pdf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

&gt;&gt;  <span class="org-constant">b</span>::iends_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"revenues-outlook.pdf"</span>, <span class="org-string">".pdf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
</pre>
</div>

<p>
Replace all strings: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string words = <span class="org-string">"ASM c++ low c++ ASM  python bytes ASM c++"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Replace 'c++' by 'CEE-PLUS-PLUS'</span>
&gt;&gt; <span class="org-constant">b</span>::replace_all<span class="org-rainbow-delimiters-depth-1">(</span>words, <span class="org-string">"c++"</span>, <span class="org-string">"CEE-PLUS-PLUS"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; words
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"ASM CEE-PLUS-PLUS low CEE-PLUS-PLUS ASM  python bytes ASM CEE-PLUS-PLUS"</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">b</span>::replace_all<span class="org-rainbow-delimiters-depth-1">(</span>words, <span class="org-string">"CEE-PLUS-PLUS"</span>, <span class="org-string">"cpp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; words
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"ASM cpp low cpp ASM  python bytes ASM cpp"</span>
</pre>
</div>


<p>
Split string: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string dataset = <span class="org-string">" -100.23 ; 577.15 ; 99.34 ; 1003.5"</span>;
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> split_vector<span class="org-rainbow-delimiters-depth-1">{}</span>;

&gt;&gt; split_vector
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Split string dataset at delimiter ";"</span>
&gt;&gt; <span class="org-constant">b</span>::split<span class="org-rainbow-delimiters-depth-1">(</span>split_vector, dataset, <span class="org-constant">b</span>::is_any_of<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">";"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Result </span>
&gt;&gt; split_vector
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">" -100.23 "</span>, <span class="org-string">" 577.15 "</span>, <span class="org-string">" 99.34 "</span>, <span class="org-string">" 1003.5"</span> <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org120aab7" class="outline-3">
<h3 id="org120aab7"><span class="section-number-3">1.5</span> Boost Lambda</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/lambda.html#introduction">Boost.Lambda</a></li>
</ul>

<p>
Notes: 
</p>

<p>
boost::bind from Boost.Lambda is already in C++ standard since C++11
and the placeholders, _1, _2 are in the namespace
std::placeholders. 
</p>

<p>
STL lambda placeholders does not support arithmetic expressions like
boost lambda placeholders. For instance, the following code generates
a lambda expression shown after it.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Boost lambda placeholder</label><pre class="src src-cpp">3.0 * <span class="org-constant">boost</span>::<span class="org-constant">lambda</span>::_1 + 10.0
</pre>
</div>

<p>
Equivalent lambda expression (lambda object):
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Equivalent C++11 lambda function.</label><pre class="src src-cpp"><span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3.0 * x + 10.0<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Examples:</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/lambda/lambda.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/lambda/loops.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Namespace alias: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bl</span> = <span class="org-constant">boost</span>::lambda;
</pre>
</div>

<p>
Creating a function of one argument:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> funOf1Arg = 10.0 * <span class="org-constant">bl</span>::_1 - 20.0;

&gt;&gt; funOf1Arg<span class="org-rainbow-delimiters-depth-1">(</span>20<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 180.00000

&gt;&gt; funOf1Arg<span class="org-rainbow-delimiters-depth-1">(</span>6.7<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 47.000000
&gt; 
</pre>
</div>

<p>
Creating a function of two arguments: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> funOf2ArgsA = 10.0 * <span class="org-constant">bl</span>::_1 + 6 * <span class="org-constant">bl</span>::_2 - 20;

&gt;&gt; funOf2ArgsA<span class="org-rainbow-delimiters-depth-1">(</span>3, 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 34.000000

&gt;&gt; funOf2ArgsA<span class="org-rainbow-delimiters-depth-1">(</span>5, 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 36.000000


&gt;&gt; <span class="org-keyword">auto</span> funOf2 = <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">" ; y = "</span> &lt;&lt; <span class="org-constant">bl</span>::_2 &lt;&lt; <span class="org-string">"\n"</span>;

&gt;&gt; funOf2<span class="org-rainbow-delimiters-depth-1">(</span>100, <span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 x = 100 ; y = hello

&gt;&gt; funOf2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">'z'</span>, <span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
z ; y = hello
</pre>
</div>

<p>
Lambda placeholder and STL "algorithms":
</p>

<ul class="org-ul">
<li>Algorithm std::for_each</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">xs</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>100, 200, 50, -70, 80, 45<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
100
200
50
-70
80
45
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Increase at 25%</span>
&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">std</span>::cout &lt;&lt; 1.25 * <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
125
250
62.5
-87.5
100
56.25
&gt;&gt; 

&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 100, 200, 50, -70, 80, 45 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">std</span>::cout &lt;&lt; 1.25 * <span class="org-constant">bl</span>::_1 + 10.0 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
135
260
72.5
-77.5
110
66.25
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Algorithm std::transform</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> out<span class="org-rainbow-delimiters-depth-1">(</span>xs.size<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-constant">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, out.begin<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">bl</span>::<span class="org-type">_1</span> * 3.0 + 100<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 400.00000, 700.00000, 250.00000, -110.00000, 340.00000, 235.00000 <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Divide every element of xs by 100.0 and insert it at vector out. </span>
&gt;&gt; <span class="org-constant">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, out.begin<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">bl</span>::_1 / 100.0<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 1.0000000, 2.0000000, 0.50000000, -0.70000000, 0.80000000, 0.45000000 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Lambda expressions for control structures</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> yds<span class="org-rainbow-delimiters-depth-1">{</span>200, 40, 5, 9, 20, 40, 90, 35<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>yds.begin<span class="org-rainbow-delimiters-depth-2">()</span>, yds.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">bl</span>::if_then<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-constant">bl</span>::_1 &gt; 25, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
200
40
40
90
35

<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>yds.begin<span class="org-rainbow-delimiters-depth-3">()</span>, yds.end<span class="org-rainbow-delimiters-depth-3">()</span>, 
              <span class="org-constant">bl</span>::if_then<span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-constant">bl</span>::_1 &gt; 25, <span class="org-constant">std</span>::cout &lt;&lt; 4.5 * <span class="org-constant">bl</span>::_1 - 20.0 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Output: </span>
880
160
160
385
137.5
</pre>
</div>
</div>
</div>

<div id="outline-container-org3335a0a" class="outline-3">
<h3 id="org3335a0a"><span class="section-number-3">1.6</span> Boost Operators</h3>
<div class="outline-text-3" id="text-1-6">
</div>
<div id="outline-container-org628465a" class="outline-4">
<h4 id="org628465a"><span class="section-number-4">1.6.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
There are about 50 operators in C++ that can be overloaded which makes
implementing them repetitive and cumbersome. Boost operators is a
header-only library simplifies operator overloading by implementing
redundant operators in terms of each other. For instance, from the
operator less-than or (&lt;), boost operators can automatically generate
the operators (&lt;=), (&gt;) and (&gt;=). The library uses the CRT (Curious
Recurring Template Design Pattern) for generating the operators at
compile-time.
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/utility/operators.htm">Boost.Operators</a></li>
</ul>

<p>
Headers: 
</p>
<ul class="org-ul">
<li>&lt;boost/operators.hpp&gt;</li>
</ul>
</div>
</div>
<div id="outline-container-org0c35979" class="outline-4">
<h4 id="org0c35979"><span class="section-number-4">1.6.2</span> Example</h4>
<div class="outline-text-4" id="text-1-6-2">
<ul class="org-ul">
<li>File: <a href="src/boost/boost-operators.cpp">file:src/boost/boost-operators.cpp</a></li>
<li>Gist: <a href="https://gist.github.com/caiorss/3682847393fd42b4001c9c71a74e2c37">boost-operators.cpp</a></li>
<li>Online Compiler: <a href="https://rextester.com/UZGM54875">https://rextester.com/UZGM54875</a></li>
</ul>

<p>
Compilation: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Compile </span>
$ clang++ boost-operator.cpp -o <span class="org-keyword">boost-operator.bin</span> -std=c++1z -g -O0 -Wall
<span class="org-comment-delimiter"># </span><span class="org-comment">Run </span>
$ ./boost-operator.bin
</pre>
</div>

<p>
<b>Parts</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/operators.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Class Vec3D: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Class Vec3D - three dimensional vector of 3 coordinates X, Y, Z</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Vec3D</span>: <span class="org-keyword">public</span> <span class="org-constant">boost</span>::<span class="org-type">less_than_comparable</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Vec3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
           , <span class="org-keyword">public</span> <span class="org-constant">boost</span>::<span class="org-type">addable</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Vec3D</span>, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
    <span class="org-type">double</span> <span class="org-variable-name">m_x</span>, <span class="org-variable-name">m_y</span>, <span class="org-variable-name">m_z</span>;
<span class="org-function-name">public</span>:
    <span class="org-function-name">Vec3D</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span>, <span class="org-type">double</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">double</span> <span class="org-function-name">norm</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Stream insertion operator =&gt; Make class printable </span>
    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">vec</span><span class="org-rainbow-delimiters-depth-2">)</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by: boost::less_than_comparable&lt;Vec3D&gt;</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">From this operator, boost implements the operators (&lt;=), (&gt;), (&gt;=)</span>
    <span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by: boost::addable&lt;Vec3D, double&gt;</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Boost implements: operator+(Vec3D, double) and operator+(double, Vec3D)</span>
    <span class="org-keyword">friend</span> <span class="org-type">Vec3D</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Vec3D</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>;   
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
The templated class <b>boost::less_than_comparable&lt;T&gt;</b> requires that the
client code implements the operator function less-than (&lt;) or: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>Operator less-than (&lt;) required by boost::less_than_comparable</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Implementation: </span>
<span class="org-type">bool</span>
<span class="org-keyword">operator</span><span class="org-function-name">&lt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-keyword">return</span> lhs.norm<span class="org-rainbow-delimiters-depth-2">()</span> &lt; rhs.norm<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
From the operator less-than (&lt;), the templated class implements the
following operator functions: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>Operators generated by boost::less_than_comparable</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&gt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&gt;=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
The templated class <b>boost::addable&lt;Vec3D, double&gt;</b> requires the client
code supplying the operator (+=):
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>Operator function required by boost::addable&lt;Vec3D, double&gt;</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">Vec3D</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;   

<span class="org-comment-delimiter">// </span><span class="org-comment">Implementation or definition:</span>
<span class="org-type">Vec3D</span>&amp;
<span class="org-keyword">operator</span><span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span>  <span class="org-variable-name">d</span> = rhs;
    lhs = <span class="org-rainbow-delimiters-depth-2">{</span>lhs.m_x + d, lhs.m_y + d, lhs.m_z + d<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">return</span> lhs;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
From the operator (+=), the class boost::addable generates the
operators: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>Operator functions generated by boost::addable&lt;Vec3D, double&gt;</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">Vec3D</span> <span class="org-keyword">operator</span><span class="org-function-name">+</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;   
<span class="org-keyword">friend</span> <span class="org-type">Vec3D</span> <span class="org-keyword">operator</span><span class="org-function-name">+</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">rhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;   
</pre>
</div>

<p>
Function: disp used for displaying variables
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">variable_t</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">disp</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">variableName</span>, <span class="org-type">variable_t</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">value</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; "</span> &lt;&lt; variableName &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; value &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Function Main</b>
</p>

<p>
Variables:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Vec3D</span> <span class="org-variable-name">v1</span> = <span class="org-rainbow-delimiters-depth-1">{</span>3, 5, 6<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-type">Vec3D</span> <span class="org-variable-name">v2</span> = <span class="org-rainbow-delimiters-depth-1">{</span>12, 5, 9<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1"</span>, v1<span class="org-rainbow-delimiters-depth-1">)</span>; disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v2"</span>, v2<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1.norm()"</span>, v1.norm<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v2.norm()"</span>, v2.norm<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Program Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=&gt;&gt; v1 = Vec3D{  x = 3 ; y = 5 ; z = 6 } 
=&gt;&gt; v2 = Vec3D{  x = 12 ; y = 5 ; z = 9 } 
=&gt;&gt; v1.norm() = 8.3666
=&gt;&gt; v2.norm() = 15.8114
</pre>
</div>

<p>
Experiment 1: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n EXPERIMENT 1 boost::less_than_comparable&lt;Vec3D&gt;"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------------"</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &lt;  v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &lt; v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &lt;  v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&lt;<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;   

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &lt;= v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &lt;= v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &lt;= v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&lt;=<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &gt;  v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &gt; v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &gt;  v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&gt;<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &gt;=  v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &gt;= v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &gt;=  v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&gt;=<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
</pre>
</div>

<p>
Program Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> EXPERIMENT 1 boost::less_than_comparable&lt;Vec3D&gt;
--------------------------------------------------
[a] v1 &lt;  v2 = true
[b] v1 &lt;  v2 = true

[a] v1 &lt;= v2 = true
[b] v1 &lt;= v2 = true

[a] v1 &gt;  v2 = false
[b] v1 &gt;  v2 = false

[a] v1 &gt;=  v2 = false
[b] v1 &gt;=  v2 = false
</pre>
</div>

<p>
Experiment 2: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n EXPERIMENT 2 boost::less_than_comparable&lt;Vec3D&gt;"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------------"</span> &lt;&lt; <span class="org-string">"\n"</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1 + 5.0"</span>, v1 + 5.0<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"operator+(v1, 5.0)"</span>, <span class="org-keyword">operator</span>+<span class="org-rainbow-delimiters-depth-2">(</span>v1, 5.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"5.0 + v1"</span>, 5.0 + v1<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"operator+(5.0, v1"</span>, <span class="org-keyword">operator</span>+<span class="org-rainbow-delimiters-depth-2">(</span>5.0, v1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1"</span>, v1<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> EXPERIMENT 2 boost::less_than_comparable&lt;Vec3D&gt;
--------------------------------------------------
 =&gt;&gt; v1 + 5.0 = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; operator+(v1, 5.0) = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; 5.0 + v1 = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; operator+(5.0, v1 = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; v1 = Vec3D{  x = 3 ; y = 5 ; z = 6 } 
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga83edaa" class="outline-3">
<h3 id="orga83edaa"><span class="section-number-3">1.7</span> Boost Range</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/range/doc/html/index.html">Boost.Range</a></li>
</ul>

<p>
New Version of Range Library - v3
</p>
<ul class="org-ul">
<li><a href="https://ericniebler.github.io/range-v3/index.html">https://ericniebler.github.io/range-v3/index.html</a></li>
</ul>

<p>
Headers and functionality: 
</p>
<ul class="org-ul">
<li>&lt;boost/range.hpp&gt;</li>
<li>&lt;boost/range/adapators.hpp&gt;</li>
<li>&lt;boost/range/algorithm.hpp&gt;</li>
<li>&lt;boost/range/algorithm_ext/for_each.hpp&gt;</li>
<li>&lt;boost/range/algorithm/copy.hpp&gt;</li>
<li>&lt;boost/range/adaptor/reversed.hpp&gt;</li>
<li>&lt;boost/range/adaptor/transformed.hpp&gt;</li>
</ul>

<p>
Namespaces: 
</p>
<ul class="org-ul">
<li>boost</li>
<li>boost::adaptors</li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/adaptors.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Include all algorithms </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/copy.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/adaptor/reversed.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/adaptor/transformed.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;
<span class="org-keyword">namespace</span> <span class="org-constant">ba</span> = <span class="org-constant">boost</span>::adaptors;
</pre>
</div>



<ul class="org-ul">
<li>Boost for_each rage:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/for_each.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">auto</span> <span class="org-variable-name">xs</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>100, 80, 60, 70, 98, 45, 173<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Boost Range - for_each </span>
&gt;&gt; <span class="org-constant">boost</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
100
80
60
70
98
45
173

<span class="org-comment-delimiter">// </span><span class="org-comment">STL for_each: </span>
&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
100
80
60
70
98
45
173
</pre>
</div>


<ul class="org-ul">
<li>Boost sort:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/sort.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; <span class="org-keyword">auto</span> ys = xs;
&gt;&gt; ys
<span class="org-rainbow-delimiters-depth-1">{</span> 100, 80, 60, 70, 98, 45, 173 <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">----- Bost range ------------ // </span>
&gt;&gt; <span class="org-constant">boost</span>::sort<span class="org-rainbow-delimiters-depth-1">(</span>ys<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; ys
<span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">--- STL Range ------------- // </span>

&gt;&gt; <span class="org-keyword">auto</span> zs = xs;
&gt;&gt; zs
 <span class="org-rainbow-delimiters-depth-1">{</span> 100, 80, 60, 70, 98, 45, 173 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-constant">std</span>::sort<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; xs
 <span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Boost copy</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/copy.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> out;

&gt;&gt; <span class="org-constant">boost</span>::copy<span class="org-rainbow-delimiters-depth-1">(</span>xs, <span class="org-constant">std</span>::back_inserter<span class="org-rainbow-delimiters-depth-2">(</span>out<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Boost transform</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> weights = <span class="org-rainbow-delimiters-depth-1">{</span>10.2, 5.60, 8.25<span class="org-rainbow-delimiters-depth-1">}</span>;
&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ts<span class="org-rainbow-delimiters-depth-1">(</span>weights.size<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-constant">boost</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>weights, ts.begin<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x / 100.0; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; ts
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 0.10200000, 0.056000000, 0.082500000 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgea1fac9" class="outline-3">
<h3 id="orgea1fac9"><span class="section-number-3">1.8</span> Boost Pointer Container</h3>
<div class="outline-text-3" id="text-1-8">
<p>
The C++ Standard Template Library - STL does not work well with
polymorphic types as polymorphic objects cannot be stored in container
directly due to object slicing, only the base part is copied and the
derived is discarded; storing polymorphic objects with smart pointers
pointers is memory and exception safe. However, it is still cumbersome
and does not plays well with STL algorithms such as std::sort or
std::for_each with functors or lambda wrappers due to STL algorithms
be designed to work with values, not pointers.
</p>

<p>
The boost pointer container library provides STL-like containers for
holding heap-allocated objects or polymorphic objects. The containers
provide interoperability with STL algorithms; non-pointer notation for
accessing object members; single memory-ownership.  
</p>

<p>
Note: If there is shared ownership semantics, in other words, multiple
objects need to point to a polymorphic object during their entire
lifetime, then this library is not suitable to this use case. In this
situation, the best solution is to use a container of shared pointers
such as std::vector&lt;std::shared&lt;T&gt;&gt;. 
</p>

<p>
See: <a href="https://web.archive.org/web/20050413215843/http://www.oonumerics.org:80/tmpw00/kuehl.html">STL and OO Don't Easily Mix</a>
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/libs/ptr_container/doc/ptr_container.html">Pointer Container</a></li>
<li>Headers:
<ul class="org-ul">
<li>&lt;boost/ptr_container/ptr_vector.hpp&gt;</li>
<li>&lt;boost/ptr_container/ptr_deque.hpp&gt;</li>
<li>&lt;boost/ptr_container/nullable.hpp&gt;</li>
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/ptr_container/doc/headers.html">Full list</a></li>
</ul></li>
<li>Containers:
<ul class="org-ul">
<li>ptr_vector</li>
<li>ptr_deque</li>
<li>ptr_list</li>
<li>ptr_map</li>
<li>ptr_set</li>
</ul></li>
<li>Functions:
<ul class="org-ul">
<li>boost::str</li>
<li>boost::format</li>
</ul></li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Source: 
</p>
<ul class="org-ul">
<li>File: <a href="src/boost/boost-pointer-container.cpp">file:src/boost/boost-pointer-container.cpp</a></li>
<li>Online Compiler: <a href="https://rextester.com/LIJMMS16329">https://rextester.com/LIJMMS16329</a></li>
</ul>

<p>
Compiling and running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ boost-pointer-container.cpp -o <span class="org-keyword">boost-pointer-container.bin</span> -std=c++1z -g -O0 -Wall 
$ ./boost-pointer-container.bin
</pre>
</div>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/ptr_container/ptr_vector.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Sample class hierarchy: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>Base class of sample hierarchy.</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-keyword">static</span> <span class="org-keyword">auto</span> <span class="org-function-name">nextID</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">static</span> <span class="org-type">int</span> <span class="org-variable-name">i</span> = 0;
       <span class="org-keyword">return</span> ++i;
    <span class="org-rainbow-delimiters-depth-2">}</span>       

    <span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Destructor of base class must always be virtual</span>
    <span class="org-keyword">virtual</span> ~<span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
    <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">int</span> = 0;
    <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> = 0;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>Class DerivedA - Derived class of Base</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">DerivedA</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>    
<span class="org-function-name">public</span>:
    <span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">m_id</span>;

    <span class="org-function-name">DerivedA</span><span class="org-rainbow-delimiters-depth-2">()</span>: m_id<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Base</span>::nextID<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>  -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> <span class="org-string">"DerivedA"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> m_id;
    <span class="org-rainbow-delimiters-depth-2">}</span>   
    ~<span class="org-function-name">DerivedA</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Class DerivedA deleted. =&gt; Object ID = "</span>
                  &lt;&lt; m_id &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>Class DerivedB - Derived class of Base</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">DerivedB</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">m_id</span>;
<span class="org-function-name">public</span>:     
    <span class="org-function-name">DerivedB</span><span class="org-rainbow-delimiters-depth-2">()</span>: m_id<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Base</span>::nextID<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> <span class="org-string">"DerivedB"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> m_id;
    <span class="org-rainbow-delimiters-depth-2">}</span>       
    ~<span class="org-function-name">DerivedB</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Class DerivedB deleted. =&gt; ObjectID = "</span>
                  &lt;&lt; m_id  &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Function showType: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">showType</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object ID = "</span> &lt;&lt; obj.getID<span class="org-rainbow-delimiters-depth-2">()</span>
                  &lt;&lt;  <span class="org-string">" Class type = "</span> &lt;&lt; obj.getType<span class="org-rainbow-delimiters-depth-2">()</span>
                  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Main Function</b>
</p>

<p>
Experiment 0: STL Container olding non-polymorphic objects
(non-dynamically allocated, type is known at compile-time).
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-1">&gt;</span> xsa;
xsa.push_back<span class="org-rainbow-delimiters-depth-1">(</span>DerivedA<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xsa.push_back<span class="org-rainbow-delimiters-depth-1">(</span>DerivedA<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xsa.emplace_back<span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Run std::for_each"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xsa.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xsa.end<span class="org-rainbow-delimiters-depth-2">()</span>, showType<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Experiment 1: STL container holding polymorphic objects:
</p>

<ul class="org-ul">
<li>Note: STL algorithms require lambda wrappers.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n === EXPERIMENT 1 =============================="</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">shared_ptr</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Base<span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> xs;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedB<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedB<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; xs[0]  type "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
          &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; xs[2]  type "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
          &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>,
              <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">pBase</span><span class="org-rainbow-delimiters-depth-2">){</span>
                      showType<span class="org-rainbow-delimiters-depth-3">(</span>*pBase<span class="org-rainbow-delimiters-depth-3">)</span>;
              <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> identifiers1;
<span class="org-function-name">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>,
               <span class="org-constant">std</span>::back_inserter<span class="org-rainbow-delimiters-depth-2">(</span>identifiers1<span class="org-rainbow-delimiters-depth-2">)</span>,
               <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">pBase</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> pBase-&gt;getID<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Experiment 2: Boost ptr_vector 
</p>

<ul class="org-ul">
<li>Notes:
<ul class="org-ul">
<li>Accessing elements ps[0] uses conventional notation without (-&gt;)
arrow operator.</li>
<li>STL algorithms does not need lambda or functor wrappers.</li>
<li>Memory solely owned by ptr_vector (single-ownership)</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">boost</span>::<span class="org-type">ptr_vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>Base<span class="org-rainbow-delimiters-depth-1">&gt;</span> ps;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedA</span><span class="org-rainbow-delimiters-depth-1">)</span>;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedB</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedA</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedB</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; ps[0]  type "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; ps[1]  type "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; ps[2]  type "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> identifiers2;
<span class="org-function-name">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>,
               <span class="org-constant">std</span>::back_inserter<span class="org-rainbow-delimiters-depth-2">(</span>identifiers2<span class="org-rainbow-delimiters-depth-2">)</span>,
               <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Base</span>::getID, <span class="org-constant">std</span>::<span class="org-constant">placeholders</span>::_1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n ==&gt; Show objects before deleting last item "</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>ps.begin<span class="org-rainbow-delimiters-depth-2">()</span>, ps.end<span class="org-rainbow-delimiters-depth-2">()</span>, showType<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n ==&gt; Show objects after deleting last item "</span> &lt;&lt; <span class="org-string">"\n"</span>;
ps.pop_back<span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>ps.begin<span class="org-rainbow-delimiters-depth-2">()</span>, ps.end<span class="org-rainbow-delimiters-depth-2">()</span>, showType<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" ============= END ================="</span> &lt;&lt; <span class="org-string">"\n"</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-orge8727ae" class="outline-3">
<h3 id="orge8727ae"><span class="section-number-3">1.9</span> Boost Interprocess</h3>
<div class="outline-text-3" id="text-1-9">
</div>
<div id="outline-container-org28c432b" class="outline-4">
<h4 id="org28c432b"><span class="section-number-4">1.9.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
<a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess.html">Boost.Interprocess</a> is a library that provides wrappers or a common
interface for many operating-system-specific inter process
communication (IPC) primitive functions. The library provides wrappers
to the following IPC facilities:
</p>

<ul class="org-ul">
<li>File locking</li>
<li>Mutex</li>
<li>Semaphore</li>
<li>Shared Memory</li>
<li>Memory Mapped File</li>
<li>Message Queue</li>
</ul>
</div>
</div>
<div id="outline-container-orgb06bd15" class="outline-4">
<h4 id="orgb06bd15"><span class="section-number-4">1.9.2</span> Example: Shared memory facilities</h4>
<div class="outline-text-4" id="text-1-9-2">
<p>
Shared memory is the fastest IPC inter-process communication mechanism
available in most operating systems for exchanging data between
processes in the same machine. The share memory IPC allows data to be
shared by multiple processes without any copying overhead which makes
it faster than sockets, message passing and so on. However, using
operating systems shared memory APIs directly is not easy or
portable. Boost inter-process library provides many facilities that
encapsulates operating systems APIs with a higher level interface that
makes the code portable across many operating systems.
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess.html">Boost.InterProcess</a></li>
</ul>

<p>
This code provide many client/server examples about using the
Boost.Interprocess shared memory API and also about how to allocate
STL containers in a shared memory segment. 
</p>

<p>
<b>Source Code</b> 
</p>
<ul class="org-ul">
<li><a href="src/boost/boost-shared-memory1.cpp">file:src/boost/boost-shared-memory1.cpp</a></li>
</ul>

<p>
<b>Headers</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/shared_memory_object.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/sync/named_mutex.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/managed_shared_memory.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/segment_manager.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Namespace alias: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;
</pre>
</div>

<p>
Templates: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Generic Shared Memory Allocator */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">ShmemAllocator</span> = <span class="org-constant">bi</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-constant">bi</span>::<span class="org-constant">managed_shared_memory</span>::segment_manager<span class="org-rainbow-delimiters-depth-1">&gt;</span> ;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Generic STL vector allocated in shared memory */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">ShmemVector</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-type">ShmemAllocator</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ;
</pre>
</div>

<p>
Class SharedMemoryCleaner uses the RAII (Resource Acquisition Is
Initialization) for deleting shared memory segments when out of
scope. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">RAII Object for removing shared memory segment. */</span>
<span class="org-keyword">struct</span> <span class="org-type">SharedMemoryCleaner</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_name</span>;
   <span class="org-function-name">SharedMemoryCleaner</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>

   ~<span class="org-function-name">SharedMemoryCleaner</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] Remove shared memory segment { name = "</span> &lt;&lt; m_name &lt;&lt; <span class="org-string">" }"</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">bi</span>::<span class="org-constant">shared_memory_object</span>::remove<span class="org-rainbow-delimiters-depth-3">(</span>m_name.c_str<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Function Declarations: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">serverA</span><span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-type">int</span> <span class="org-function-name">clientA</span><span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-type">int</span> <span class="org-function-name">serverB</span><span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-type">int</span> <span class="org-function-name">clientB</span><span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-type">int</span> <span class="org-function-name">serverC</span><span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-type">int</span> <span class="org-function-name">clientC</span><span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<p>
Main Function: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">using</span> <span class="org-type">DispatchTable</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string, <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>;
     <span class="org-type">DispatchTable</span> <span class="org-variable-name">table</span> = <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"serverA"</span>, &amp;serverA<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"clientA"</span>, &amp;clientA<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"serverB"</span>, &amp;serverB<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"clientB"</span>, &amp;clientB<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"serverC"</span>, &amp;serverC<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"clientC"</span>, &amp;clientC<span class="org-rainbow-delimiters-depth-3">}</span>
     <span class="org-rainbow-delimiters-depth-2">}</span>;

     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: invalid arguments."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-keyword">return</span> EXIT_SUCCESS;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = table.find<span class="org-rainbow-delimiters-depth-2">(</span>argv<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>it == table.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: invalid command."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-keyword">return</span> EXIT_FAILURE;       
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Execute function </span>
     <span class="org-keyword">return</span> it-&gt;second<span class="org-rainbow-delimiters-depth-2">()</span>;           
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Function: ServerA.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Print string (char array) to shared memory </span>
<span class="org-type">int</span> <span class="org-function-name">serverA</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Create shared memory wrapper object </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>
                 <span class="org-comment-delimiter">// </span><span class="org-comment">Creates shared memory segment if it does not exist </span>
                 <span class="org-constant">bi</span>::open_or_create,
                 <span class="org-string">"shared_memory_segment"</span>,
                 <span class="org-constant">bi</span>::read_write
               <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">RAII object that removes the segment when out of scope </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">shm_remove</span> = SharedMemoryCleaner<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_memory_segment"</span><span class="org-rainbow-delimiters-depth-2">)</span>; 
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set size of the shared memory segment in Kb (kbytes = 1024 bytes)</span>
    shm.truncate<span class="org-rainbow-delimiters-depth-2">(</span>1024<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">1kb (kbytes)</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Map the shared memory segment to current process</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_write<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to shared memory </span>
    <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Print to shared memory</span>
    <span class="org-type">char</span>* <span class="org-variable-name">pChar</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::sprintf<span class="org-rainbow-delimiters-depth-2">(</span>pChar, <span class="org-string">" ==&gt; String written to shared memory segment"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Keep the server Alive as the shared memory segment is not </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">persistent on Windows. </span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to EXIT "</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Function: clientA.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Print string (char array) to shared memory </span>
<span class="org-type">int</span> <span class="org-function-name">clientA</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Create shared memory wrapper object </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-comment-delimiter">// </span><span class="org-comment">Creates shared memory segment if it does not exist </span>
       <span class="org-constant">bi</span>::open_only,
       <span class="org-string">"shared_memory_segment"</span>,
       <span class="org-constant">bi</span>::read_only
       <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_only<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Interpret shared memory as a pointer to char* </span>
    <span class="org-type">char</span>* <span class="org-variable-name">pMessage</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Content of shared memory = "</span> &lt;&lt; pMessage &lt;&lt; <span class="org-string">"\n"</span>;    
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Function: serverB.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Allocate double[] array in shared memory */</span>
<span class="org-type">int</span> <span class="org-function-name">serverB</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>   
     <span class="org-constant">bi</span>::open_or_create,
     <span class="org-string">"shared_memory_segment"</span>,
     <span class="org-constant">bi</span>::read_write
     <span class="org-rainbow-delimiters-depth-2">}</span>;
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm_remove</span> = SharedMemoryCleaner<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_memory_segment"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     shm.truncate<span class="org-rainbow-delimiters-depth-2">(</span>1024<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">1kb (kbytes)</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_write<span class="org-rainbow-delimiters-depth-2">}</span>;
     <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Allocate array of 5 doubles in the shared memory </span>
     <span class="org-type">double</span>* <span class="org-variable-name">arr</span> = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-2">(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">[</span>5<span class="org-rainbow-delimiters-depth-2">]</span>;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> = 100.34;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> = 200.5;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = -5.6;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span> = 9.10;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> = 10.5;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Keep the server Alive as the shared memory segment is not </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">persistent on Windows. </span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to EXIT "</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Function clientB:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Retrieve double[] array from shared memory */</span>
<span class="org-type">int</span> <span class="org-function-name">clientB</span><span class="org-rainbow-delimiters-depth-1">(){</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>
          <span class="org-constant">bi</span>::open_only, 
         <span class="org-string">"shared_memory_segment"</span>,
          <span class="org-constant">bi</span>::read_only 
     <span class="org-rainbow-delimiters-depth-2">}</span>;
     <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_only<span class="org-rainbow-delimiters-depth-2">}</span>;

     <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-type">double</span>* <span class="org-variable-name">arr</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[0] = "</span> &lt;&lt; arr<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[1] = "</span> &lt;&lt; arr<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[2] = "</span> &lt;&lt; *<span class="org-rainbow-delimiters-depth-2">(</span>arr + 2<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[3] = "</span> &lt;&lt; *<span class="org-rainbow-delimiters-depth-2">(</span>arr + 3<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[4] = "</span> &lt;&lt; arr<span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Function: ServerC. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Allocate STL container in shared memory  </span>
<span class="org-type">int</span> <span class="org-function-name">serverC</span><span class="org-rainbow-delimiters-depth-1">(){</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Remove shared memory segment if it already exists </span>
     <span class="org-constant">bi</span>::<span class="org-constant">shared_memory_object</span>::remove<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_seg"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-keyword">auto</span> <span class="org-variable-name">segment</span> = <span class="org-constant">bi</span>::managed_shared_memory<span class="org-rainbow-delimiters-depth-2">(</span>
             <span class="org-constant">bi</span>::open_or_create,
             <span class="org-string">"shared_seg"</span>, <span class="org-comment-delimiter">// </span><span class="org-comment">segment name </span>
             4096              <span class="org-comment-delimiter">// </span><span class="org-comment">4 kbytes </span>
             <span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm_remove</span> = SharedMemoryCleaner<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_seg"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Segment manager pointer </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Type: managed_shared_memory::segment_manage* </span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">segmgr</span> = segment.get_segment_manager<span class="org-rainbow-delimiters-depth-2">()</span>;
     segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"text"</span><span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-string">"'Hello world shared memory'"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"speed"</span><span class="org-rainbow-delimiters-depth-2">)(</span>10.50<span class="org-rainbow-delimiters-depth-2">)</span>;
     segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"nodes"</span><span class="org-rainbow-delimiters-depth-2">)(</span>100<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">=== Allocate STL Vector in Shared Memory === // </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Build shared memory allocator </span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">aloc</span> = ShmemAllocator<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>segmgr<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Instantiate vector in shared memory </span>
     <span class="org-type">ShmemVector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>* <span class="org-variable-name">pVector</span> = segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ShmemVector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"avector"</span><span class="org-rainbow-delimiters-depth-2">)(</span>aloc<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;reserve<span class="org-rainbow-delimiters-depth-2">(</span>50<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>4.5<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>10.3<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>100.50<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>20.0<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to EXIT "</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>


<p>
Function: ClientC.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">clientC</span><span class="org-rainbow-delimiters-depth-1">(){</span>
      <span class="org-keyword">auto</span> <span class="org-variable-name">segment</span> = <span class="org-constant">bi</span>::managed_shared_memory<span class="org-rainbow-delimiters-depth-2">(</span>
              <span class="org-constant">bi</span>::open_or_create,
              <span class="org-string">"shared_seg"</span>, <span class="org-comment-delimiter">// </span><span class="org-comment">segment name </span>
              4096          <span class="org-comment-delimiter">// </span><span class="org-comment">4 kbytes </span>
            <span class="org-rainbow-delimiters-depth-2">)</span>;  

      <span class="org-keyword">auto</span> <span class="org-variable-name">segmgr</span> = segment.get_segment_manager<span class="org-rainbow-delimiters-depth-2">()</span>;
      <span class="org-constant">std</span>::<span class="org-type">pair</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>*, <span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">p1</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"speed"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Speed = "</span> &lt;&lt; *p1.first &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-keyword">auto</span> <span class="org-variable-name">pairNodes</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"nodes"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Nodes = "</span> &lt;&lt; *pairNodes.first &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-keyword">auto</span> <span class="org-variable-name">pairText</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"text"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Text = "</span> &lt;&lt; *pairText.first &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-comment-delimiter">// </span><span class="org-comment">C++17 - Structured Binding</span>
      <span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">[</span>pVector, _<span class="org-rainbow-delimiters-depth-2">]</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ShmemVector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"avector"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; pVector-&gt;size() = "</span> &lt;&lt; pVector-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; pVector[0] = "</span> &lt;&lt; pVector-&gt;<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-2">[](</span>0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; pVector[1] = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>*pVector<span class="org-rainbow-delimiters-depth-2">)[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-type">size_t</span> <span class="org-variable-name">idx</span> = 0;
      <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: *pVector<span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"pVector["</span> &lt;&lt; idx++ &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt;  x &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-type">double</span> <span class="org-variable-name">speed</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter new speed: "</span>;
      <span class="org-constant">std</span>::cin &gt;&gt; speed;
      *p1.first = speed;

      pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>speed<span class="org-rainbow-delimiters-depth-2">)</span>;

      <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
<b>Compile on Linux, OSX or any other Unix-like OS</b>
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">GCC  </span>
$ g++ boost-shared-memory1.cpp -o <span class="org-keyword">boost-shared-memory1.bin</span> -std=c++1z -Wall -lpthread -lrt

<span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ boost-shared-memory1.cpp -o <span class="org-keyword">boost-shared-memory1.bin</span> -std=c++1z -Wall -lpthread -lrt
</pre>
</div>

<p>
<b>Compile on Windows</b> 
</p>

<p>
Compile with Visual C++ or MSVC (VC++)
</p>

<div class="org-src-container">
<pre class="src src-bat">$ cl.exe boost-shared-memory1.cpp /<span class="org-type">Fe</span>:boost-shared-memory1.exe /<span class="org-type">EHsc</span> /<span class="org-type">std</span>:c++17 ...
  /<span class="org-type">GA</span> /<span class="org-type">MDd</span> /<span class="org-type">nologo</span> /<span class="org-type">I</span> C:\boost\boost_1_69_0 /<span class="org-type">link</span> /<span class="org-type">LIBPATH</span>:C:\boost\lib
</pre>
</div>

<p>
Compile with Mingw (GCC)
</p>

<div class="org-src-container">
<pre class="src src-bat">$ g++ boost-shared-memory1.cpp -<span class="org-type">o</span> <span class="org-keyword">boost-shared-memory1.exe</span> -<span class="org-type">std</span>=c++1z -<span class="org-type">I</span> C:\boost\boost_1_69_0
</pre>
</div>

<p>
<b>Running functions serverA and clientA</b>
</p>

<p>
The process that runs serverA in terminal 1 allocates a string in the
shared memory and the process running in the terminal 2 displays the
string from fetched from shared memory. 
</p>

<p>
Terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe serverA
Enter RETURN to EXIT
</pre>
</div>

<p>
Terminal 2: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe clientA
 Content of shared memory =  ==&gt; String written to shared memory segment
</pre>
</div>

<p>
<b>Running functions serverB and clientB</b> 
</p>

<p>
Terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt;
<span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe serverB
Enter RETURN to EXIT
</pre>
</div>

<p>
Terminal 2: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt;boost-shared-memory1.exe clientB
arr[0] = 100.34
arr[1] = 200.5
arr[2] = -5.6
arr[3] = 9.1
arr[4] = 10.5
</pre>
</div>

<p>
<b>Running functions serverC and clientC</b> 
</p>

<p>
The process running in terminal 1 (serverC) allocates several variables in the
shared memory and an std::vector&lt;double&gt; container and the process
running in the terminal 2 (clientC) reads the shared memory and
updates the variable speed and the vector container. The changes in
the std::vector container are persistent on each execution of the
process in terminal 2 while the process running the command serverC is
running. 
</p>

<p>
Terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe serverC
Enter RETURN to EXIT
</pre>
</div>

<p>
Terminal 2: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe clientC
Speed = 100.665
Nodes = 100
Text = <span class="org-string">'Hello world shared memory'</span>
 =&gt; pVector-&gt;size() = 5
 =&gt; pVector[0] = 4.5
 =&gt; pVector[1] = 10.3
pVector[0] = 4.5
pVector[1] = 10.3
pVector[2] = 100.5
pVector[3] = 20
pVector[4] = 100.665
Enter new speed: 40.51

<span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe clientC
Speed = 40.51
Nodes = 100
Text = <span class="org-string">'Hello world shared memory'</span>
 =&gt; pVector-&gt;size() = 6
 =&gt; pVector[0] = 4.5
 =&gt; pVector[1] = 10.3
pVector[0] = 4.5
pVector[1] = 10.3
pVector[2] = 100.5
pVector[3] = 20
pVector[4] = 100.665
pVector[5] = 40.51
Enter new speed: ^C

</pre>
</div>
</div>
</div>

<div id="outline-container-orgccbdd2d" class="outline-4">
<h4 id="orgccbdd2d"><span class="section-number-4">1.9.3</span> Example: Shared memory logging with mutex synchronization</h4>
<div class="outline-text-4" id="text-1-9-3">
<p>
This sample program emulates a client that sends logging message to a
shared memory segment and a server that receives the logging messages
from the shared memory and prints them to the standard output
stdout. A named mutex object is used for coordinating both processes. 
</p>

<p>
<b>File:</b>
</p>
<ul class="org-ul">
<li><a href="src/boost/boost-shared-memory-logger.cpp">file:src/boost/boost-shared-memory-logger.cpp</a></li>
</ul>

<p>
<b>Headers:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstring</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">strok </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">ctime</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">chrono</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/shared_memory_object.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/sync/named_mutex.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/sync/scoped_lock.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
<b>Namespace Alias</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;
</pre>
</div>

<p>
<b>Function Main</b> 
</p>

<p>
Create shared memory segment: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create shared memory wrapper object </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">bi</span>::open_or_create,  
        <span class="org-string">"logger_shm"</span>,
        <span class="org-constant">bi</span>::read_write
<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Set size of the shared memory segment in Kb (kbytes = 1024 bytes)</span>
shm.truncate<span class="org-rainbow-delimiters-depth-1">(</span>4096<span class="org-rainbow-delimiters-depth-1">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">4kb (kbytes)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Map the shared memory segment to current process</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-1">{</span>shm, <span class="org-constant">bi</span>::read_write<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to shared memory </span>
<span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<p>
Create a named mutex object for process synchronizing the shared memory
access: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create mutex Object </span>
<span class="org-function-name">bi</span>::named_mutex amutex<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">bi</span>::open_or_create, <span class="org-string">"logger_mutex"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Check command line arguments: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"$ "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">" [-client|-server]"</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">std</span>::string cmd = argv<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>;
</pre>
</div>

<p>
Server command: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>cmd == <span class="org-string">"-server"</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-type">char</span>* <span class="org-variable-name">pMessage</span> = <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">)</span> pMem;
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [TRACE] Waiting logging message "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-comment-delimiter">// </span><span class="org-comment">Acquire mutex lock blocking this thread </span>
         amutex.lock<span class="org-rainbow-delimiters-depth-3">()</span>;
         <span class="org-comment-delimiter">// </span><span class="org-comment">Print logging memssage from shared memory </span>
         <span class="org-constant">std</span>::cout &lt;&lt; pMessage &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Client command: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>cmd == <span class="org-string">"-client"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Interpret shared memory as a pointer an null-terminated</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">array of characters </span>
    <span class="org-type">char</span>* <span class="org-variable-name">pMessage</span> = <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">)</span> pMem;
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span>;
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Enter line: "</span>;
        <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cin, line<span class="org-rainbow-delimiters-depth-3">)</span>;           
        <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">ss</span>;
        <span class="org-keyword">auto</span> <span class="org-variable-name">now</span> = <span class="org-constant">std</span>::<span class="org-constant">chrono</span>::<span class="org-constant">system_clock</span>::now<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-constant">std</span>::<span class="org-type">time_t</span> <span class="org-variable-name">ttp</span> = <span class="org-constant">std</span>::<span class="org-constant">chrono</span>::<span class="org-constant">system_clock</span>::to_time_t<span class="org-rainbow-delimiters-depth-3">(</span>now<span class="org-rainbow-delimiters-depth-3">)</span>;
        ss &lt;&lt; <span class="org-string">" [INFO] "</span> &lt;&lt; strtok<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::ctime<span class="org-rainbow-delimiters-depth-4">(</span>&amp;ttp<span class="org-rainbow-delimiters-depth-4">)</span>, <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-string">" - "</span> &lt;&lt; line;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Print to shared memory (pointer by pMessage)</span>
        <span class="org-constant">std</span>::sprintf<span class="org-rainbow-delimiters-depth-3">(</span>pMessage, <span class="org-string">"%s"</span>, ss.str<span class="org-rainbow-delimiters-depth-4">()</span>.c_str<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Release mutex lock </span>
        amutex.unlock<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>      
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Compiling on Linux or any other Unix-like OS:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ boost-shared-memory-logger.cpp -o <span class="org-keyword">logger.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt  
<span class="org-comment-delimiter"># </span><span class="org-comment">GCC</span>
$ gcc++ boost-shared-memory-logger.cpp -o <span class="org-keyword">logger.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt  
</pre>
</div>

<p>
<b>Compiling on Windows with MingW/GCC</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ boost-logger.cpp -o <span class="org-keyword">boost-logger.exe</span> -IC:\boost\boost_1_69_0
</pre>
</div>

<p>
<b>Compiling on Windows with MSVC (VC++)</b>
</p>

<p>
Problem faced when compiling wiht MSVC:
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/9628527/linker-error-lnk1104-with-libboost-filesystem-vc100-mt-s-1-49-lib">c++ - Linker error LNK1104 with 'libboost_filesystem-vc100-mt-s-1_49.lib' - Stack Overflow</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cl.exe boost-logger.cpp /Fe:boost-logger1.exe /EHsc /GA /MDd /nologo /I C:\boost\boost_1_69_0 /link /LIBPATH:C:\boost\lib
</pre>
</div>

<p>
Run program as server in terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./logger.bin -server
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:13:26 2019 - price 10% up
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:13:38 2019 - price change 4.5 down
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:14:07 2019 - new forecast arriving soon
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:14:11 2019 - new data
 [TRACE] Waiting logging message 
 ... ...  ... ...  ... ...  ... ... 
</pre>
</div>

<p>
Run program as client in terminal 2: 
</p>
<ul class="org-ul">
<li>User type messages in this terminal and they are sent to the shared
memory buffer, then mutex lock is released what makes the server
process print the message from the shared memory to standard output.</li>
</ul>


<div class="org-src-container">
<pre class="src src-sh">$ ./logger.bin -client
 =&gt; Enter line: price 10% up
 =&gt; Enter line: price change 4.5 down
 =&gt; Enter line: new forecast arriving soon
 =&gt; Enter line: new data
 =&gt; Enter line: ^C
</pre>
</div>
</div>
</div>
<div id="outline-container-org12c59e0" class="outline-4">
<h4 id="org12c59e0"><span class="section-number-4">1.9.4</span> Example: Memory Mapped Files</h4>
<div class="outline-text-4" id="text-1-9-4">
</div>
<ol class="org-ol">
<li><a id="orgfd66bac"></a>Overview<br />
<div class="outline-text-5" id="text-1-9-4-1">
<p>
Most operating systems have system-calls or APIs for mapping files
into a process' address space or virtual memory which allows reading
and writing to a file as it was a memory. Any changes in memory-mapped
file memory segment is immediately written to the disk. 
</p>

<p>
Among other things, memory-mapped files provide the following
benefits:
</p>

<ul class="org-ul">
<li>Faster and more performant file processing, specially for big files
of Gigabyte-size (big-data).</li>

<li>Persistence and serialization:
<ul class="org-ul">
<li>Simplified serialization, any object allocated in a memory-mapped
file segment is automatically written to the mapped file in a
disk. And deserialization only requires reading the object from
the memory or just casting a pointer without any special
deserialization code.</li>
</ul></li>
</ul>

<p>
Operating System APIs: 
</p>

<ul class="org-ul">
<li>Unix-like OSes or POSIX (Linux, MacOSX, Android, BSD, QNX &#x2026;)
<ul class="org-ul">
<li>Uses the system-call or API: <a href="https://en.wikipedia.org/wiki/Mmap">mmap</a> for memory-mapped files.</li>
</ul></li>

<li>Windows NT, Windows CE:
<ul class="org-ul">
<li>Uses the Win32 APIs: <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/winbase/nf-winbase-createfilemappinga">CreateFileMapping</a>, <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/memoryapi/nf-memoryapi-mapviewoffile">MapViewOFile</a>, <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/memoryapi/nf-memoryapi-unmapviewoffile">UnmapViewOfFile</a></li>
</ul></li>
</ul>

<p>
The boost interprocess library provides a generalized interface to
those operating system specific memory-mapping file APIs. The library
also provides a C++ friendly notation, memory-allocators, memory
managers and so on that simplifies the usage on many different
operating systems.
</p>

<p>
See also: 
</p>
<ul class="org-ul">
<li>Boost.Interprocess: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess/sharedmemorybetweenprocesses.html#interprocess.sharedmemorybetweenprocesses.mapped_file">Memory Mapped Files</a></li>
<li>Boost.Interprocess: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_mapped_files">Managed Mapped Files</a></li>
<li><a href="http://john.freml.in/mmap-pattern">John Fremlin's blog: The mmap pattern</a></li>
<li><a href="https://stackoverflow.com/questions/7159271/live-c-objects-that-live-in-memory-mapped-files">"live C++ objects that live in memory mapped files"? - Stack Overflow</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/standard/io/memory-mapped-files">Memory-Mapped Files | Microsoft Docs</a></li>
<li><a href="https://software.intel.com/en-us/articles/introduction-to-programming-with-persistent-memory-from-intel">Introduction to Programming with Persistent Memory from Intel | Intel® Software</a></li>
<li><a href="http://blogs.microsoft.co.il/sasha/2016/01/21/myth-busting-memory-mapped-files-and-shared-memory-on-windows/">Myth-Busting: Memory-Mapped Files and Shared Memory on Windows | All Your Base Are Belong To Us</a></li>
<li><a href="https://en.wikipedia.org/wiki/Memory-mapped_file">Memory-mapped file - Wikipedia</a></li>
<li><a href="https://pymotw.com/2/mmap/">mmap – Memory-map files - Python Module of the Week</a></li>
</ul>
</div>
</li>
<li><a id="org71564e7"></a>Code<br />
<div class="outline-text-5" id="text-1-9-4-2">
<p>
<b>File</b>:
</p>
<ul class="org-ul">
<li><a href="src/boost/boost-memory-mapped-file.cpp">file:src/boost/boost-memory-mapped-file.cpp</a></li>
</ul>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/managed_mapped_file.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/file_mapping.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
<b>Namespace alias:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess; 
</pre>
</div>

<p>
<b>Template aliases:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Generic Memory-mapped file allocator */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">MMFAllocator</span> = <span class="org-constant">bi</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-constant">bi</span>::<span class="org-constant">managed_mapped_file</span>::segment_manager<span class="org-rainbow-delimiters-depth-1">&gt;</span> ;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Generic STL vector allocated in memory-mapped file */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">MMFVector</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-type">MMFAllocator</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ;
</pre>
</div>

<p>
<b>Function Main</b>
</p>

<p>
Intial definitions: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">constexpr</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">fileName</span> = <span class="org-string">"memory-dump.dat"</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">size_t</span>      <span class="org-variable-name">fileSize</span> = 4096; <span class="org-comment-delimiter">// </span><span class="org-comment">4 kbytes</span>
<span class="org-type">bool</span> <span class="org-variable-name">flagFileExists</span>            = fileExists<span class="org-rainbow-delimiters-depth-1">(</span>fileName<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Manged file mapping object =&gt; Creates the file if it does not exists </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">mf</span> = <span class="org-constant">bi</span>::managed_mapped_file<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">bi</span>::open_or_create, fileName, fileSize<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Check if file exits, if does not exist yet, then initial data is
written to the file by allocating data in the mapped memory. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-negation-char">!</span>flagFileExists<span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Executed when the file did not exist </span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Setting file data"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
     mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"NumberOfNodes"</span><span class="org-rainbow-delimiters-depth-2">)(</span>100<span class="org-rainbow-delimiters-depth-2">)</span>;   
     mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"Speed"</span><span class="org-rainbow-delimiters-depth-2">)(</span>200.0<span class="org-rainbow-delimiters-depth-2">)</span>;
     mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"Text"</span><span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-string">"'Allocated text in memory mapped file'"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Allocate std::vector&lt;double&gt;</span>
     <span class="org-type">MMFAllocator</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">aloc1</span><span class="org-rainbow-delimiters-depth-2">(</span>mf.get_segment_manager<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-type">MMFVector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>* <span class="org-variable-name">pVector</span> = mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">MMFVector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"AVector"</span><span class="org-rainbow-delimiters-depth-2">)(</span>aloc1<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;reserve<span class="org-rainbow-delimiters-depth-2">(</span>20<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>40.5<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>98.10<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>-50.45<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span>;        

     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
If the file already exists, then it is mapped into the current
process' virtual memory and the data extracted just by reading the
memory, any modification to this mapped segment is written to the file
memory-dump.dat. 
</p>

<p>
Get variable: NumberOfNodes and increment it.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">======= Executed when file already exists =========// </span>

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Retrieving objects from memory mapped file"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-comment-delimiter">// </span><span class="org-comment">Retrieve variable NumberOfNodes with very explicitly and verbose notation </span>
<span class="org-function-name">std</span>::<span class="org-type">pair</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*, <span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> pairResult1 =  mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"NumberOfNodes"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>pairResult1.first == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] I cannot find the object 'NumberOfNodes'"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Number of nodes = "</span> &lt;&lt; *pairResult1.first  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">(</span>*pairResult1.first<span class="org-rainbow-delimiters-depth-1">)</span>++;
</pre>
</div>

<p>
Get variable 'Text' and display it. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Retrieve variable text</span>
<span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">[</span>pText, _size1 <span class="org-rainbow-delimiters-depth-1">]</span> = mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"Text"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>pText != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Text = "</span> &lt;&lt; *pText &lt;&lt; <span class="org-string">"\n"</span>;
</pre>
</div>

<p>
Get variable 'Speed' and update it with value read from user input. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Retrieve variable speed</span>
<span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">[</span>pSpeed, _size2 <span class="org-rainbow-delimiters-depth-1">]</span> = mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"Speed"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>pSpeed != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Speed = "</span> &lt;&lt; *pSpeed &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Set new speed := "</span>;
<span class="org-function-name">std</span>::cin &gt;&gt; *pSpeed;
</pre>
</div>

<p>
Get vector named 'AVector', display, and update it. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Rerieve vector</span>
<span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">[</span>pVector, _size3<span class="org-rainbow-delimiters-depth-1">]</span> = mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">MMFVector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"AVector"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>pVector != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n pVector-&gt;size() = "</span> &lt;&lt; pVector-&gt;size<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-type">size_t</span> <span class="org-variable-name">idx</span> = 0;
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: *pVector<span class="org-rainbow-delimiters-depth-1">)</span>
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" pVector["</span> &lt;&lt; idx++ &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::endl ;  

pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-1">(</span>*pSpeed<span class="org-rainbow-delimiters-depth-1">)</span>;    
<span class="org-keyword">return</span> 0;
</pre>
</div>

<p>
<b>Compile on Linux or any other Unix-like OS</b>
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ boost-memory-mapped-file.cpp -o <span class="org-keyword">boost-memory-mapped-file.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt 
<span class="org-comment-delimiter"># </span><span class="org-comment">GCC</span>
$ g++ boost-memory-mapped-file.cpp -o <span class="org-keyword">boost-memory-mapped-file.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt 
</pre>
</div>

<p>
<b>Compile on Windows</b>
</p>

<p>
Compile with MSVC (VC++)
</p>

<div class="org-src-container">
<pre class="src src-bat">$ cl.exe boost-memory-mapped-file.cpp /<span class="org-type">Fe</span>:boost-memory-mapped-file.exe /<span class="org-type">EHsc</span> /<span class="org-type">std</span>:c++17 ...
   /<span class="org-type">GA</span> /<span class="org-type">MDd</span> /<span class="org-type">nologo</span> /<span class="org-type">I</span> C:\boost\boost_1_69_0 /<span class="org-type">link</span> /<span class="org-type">LIBPATH</span>:C:\boost\lib
</pre>
</div>

<p>
Compile with Mingw
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ boost-memory-mapped-file.cpp -o <span class="org-keyword">boost-memory-mapped-file.exe</span> -std=c++1z -I C:\boost\boost_1_69_0
</pre>
</div>

<p>
<b>Running</b> 
</p>

<p>
Running for the first time, before the file 'memory-dump.dat'
exists. Note: (compiled with Mingw).
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-memory-mapped-file.exe

 [INFO] Setting file data
</pre>
</div>

<p>
Running for the second time: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-memory-mapped-file.exe

 [INFO] Retrieving objects from memory mapped file
Number of nodes = 100
Text = <span class="org-string">'Allocated text in memory mapped file'</span>
Speed = 200
 =&gt; Set new speed := 4.51

 pVector-&gt;size() = 4
 pVector[0] = 40.5
 pVector[1] = 98.1
 pVector[2] = -50.45
 pVector[3] = 10
</pre>
</div>

<p>
Running for the third time: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-memory-mapped-file.exe
 [INFO] Retrieving objects from memory mapped file
Number of nodes = 101
Text = <span class="org-string">'Allocated text in memory mapped file'</span>
Speed = 4.51
 =&gt; Set new speed := 125.75

 pVector-&gt;size() = 5
 pVector[0] = 40.5
 pVector[1] = 98.1
 pVector[2] = -50.45
 pVector[3] = 10
 pVector[4] = 4.51
</pre>
</div>
</div>
</li>
</ol>
</div>
</div>

<div id="outline-container-orgd319f92" class="outline-3">
<h3 id="orgd319f92"><span class="section-number-3">1.10</span> Boost DateTime</h3>
<div class="outline-text-3" id="text-1-10">
</div>
<div id="outline-container-org28eaf6f" class="outline-4">
<h4 id="org28eaf6f"><span class="section-number-4">1.10.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-10-1">
<p>
Documentation:
</p>
<ul class="org-ul">
<li>Boost: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/date_time.html">Date Time</a></li>
<li><a href="http://www.crystalclearsoftware.com/libraries/date_time/release_1_33/date_time/doxy.html">Doxygen</a></li>
<li><a href="http://www.crystalclearsoftware.com/libraries/date_time/date_time.pdf">PDF Documentation</a></li>
</ul>

<p>
Documentation Code Examples: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/date_time/examples.html#date_time.examples.days_alive">Date Time Examples</a></li>
</ul>

<p>
Headers: 
</p>
<ul class="org-ul">
<li>&lt;boost/date_time/date.hpp&gt;</li>
<li>&lt;boost/date_time/date_formatting.hpp&gt;</li>
<li>&lt;boost/date_time/date_duration.hpp&gt;</li>
<li>&lt;boost/date_time/time.hpp&gt;</li>
<li>&lt;boost/date_time/gregorian/gregorian.hpp&gt;</li>
</ul>

<p>
Library Dependency:
</p>
<ul class="org-ul">
<li>Requires linkign the library <b>-lboost_date_time</b> with GCC or Clang.</li>
</ul>

<p>
Motivation: 
</p>

<blockquote>
<p>
The motivation for this library comes from working with and helping
build several date-time libraries on several projects. Date-time
libraries provide fundamental infrastructure for most development
projects. However, most of them have limitations in their ability to
calculate, format, convert, or perform some other functionality. For
example, most libraries do not correctly handle leap seconds,
provide concepts such as infinity, or provide the ability to use
high resolution or network time sources. These libraries also tend
to be rigid in their representation of dates and times. Thus
customized policies for a project or subproject are not possible.
</p>
</blockquote>

<p>
Domain Concepts: 
</p>
<ul class="org-ul">
<li>Time Point</li>
<li>Time Duration</li>
<li>Time Interval</li>
</ul>

<p>
Calendar Systems: 
</p>
<ul class="org-ul">
<li>Gregorian System</li>
<li>UTC - UTC (Coordinated Universal Time)</li>
</ul>
</div>
</div>
<div id="outline-container-orgc6e7588" class="outline-4">
<h4 id="orgc6e7588"><span class="section-number-4">1.10.2</span> Example - Date Manipulation</h4>
<div class="outline-text-4" id="text-1-10-2">
<p>
Search where is Boost Date time on Linux/Fedora: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ls /lib/ | grep -i date
kconf_update_bin/
libboost_date_time.a
libboost_date_time.so@
libboost_date_time.so.1.67.0*
</pre>
</div>

<p>
<b>Simple tests in CERN ROOT REPL:</b>
</p>

<p>
Load library in REPL:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/date_time/gregorian/gregorian.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Load shared library </span>
gSystem-&gt;Load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib/libboost_date_time.so"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">namespace</span> <span class="org-constant">g</span> = <span class="org-constant">boost</span>::gregorian;
<span class="org-keyword">namespace</span> <span class="org-constant">dt</span> = <span class="org-constant">boost</span>::date_time;
</pre>
</div>

<p>
Construct a date from year-month-day, for instance 
(year = 2009, month = 10, day = 20):
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> d1 = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2009, 10, 20<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647050

&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; <span class="org-string">"d1 = "</span> &lt;&lt; d1 &lt;&lt; <span class="org-string">"\n"</span>;
d1 = 2009-Oct-20
</pre>
</div>


<p>
Get current Date: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> today = <span class="org-constant">g</span>::<span class="org-constant">day_clock</span>::local_day<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647030

&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; <span class="org-string">"today = "</span> &lt;&lt; today &lt;&lt; <span class="org-string">"\n"</span>;
today = 2019-Apr-02
&gt;&gt; 
</pre>
</div>

<p>
Convert date to string: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> mdate = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2012, 06, 21<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba70a8

&gt;&gt; <span class="org-constant">g</span>::to_simple_string<span class="org-rainbow-delimiters-depth-1">(</span>mdate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"2012-Jun-21"</span>

&gt;&gt; <span class="org-constant">g</span>::to_iso_string<span class="org-rainbow-delimiters-depth-1">(</span>mdate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"20120621"</span>

&gt;&gt; <span class="org-constant">g</span>::to_iso_extended_string<span class="org-rainbow-delimiters-depth-1">(</span>mdate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"2012-06-21"</span>
</pre>
</div>


<p>
Parse Date with ISO format YYYYMMDD:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> p = <span class="org-constant">gr</span>::from_undelimited_string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"20100921"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7014

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" p = "</span> &lt;&lt; p &lt;&lt; <span class="org-string">"\n"</span>;
 p = 2010-Sep-21
</pre>
</div>

<p>
Parse Date with ISO format YYYY-MM-DD: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">g</span>::from_simple_string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"2001-10-11"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; <span class="org-keyword">auto</span> s1 = <span class="org-constant">g</span>::from_simple_string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"2001-10-11"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647010

<span class="org-comment-delimiter">// </span><span class="org-comment">========= Parse Date =============</span>
&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; <span class="org-string">"s1 = "</span> &lt;&lt; s1 &lt;&lt; <span class="org-string">"\n"</span>;
s1 = 2001-Oct-11
</pre>
</div>


<p>
Get year component:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">date</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date, <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::gregorian_calendar, 
 <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date_duration<span class="org-rainbow-delimiters-depth-2">&gt;</span>::year_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x79588b0
&gt;&gt; 

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2001

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>s1.year<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2001
&gt;&gt; 
</pre>
</div>

<p>
Get month component:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.month<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">date</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date, <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::gregorian_calendar, 
<span class="org-function-name">boost</span>::<span class="org-constant">gregorian</span>::date_duration<span class="org-rainbow-delimiters-depth-2">&gt;</span>::month_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x7d69550

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.month<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>s1.month<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; 
</pre>
</div>

<p>
Get day component: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.day<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">date</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date, <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::gregorian_calendar, 
<span class="org-function-name">boost</span>::<span class="org-constant">gregorian</span>::date_duration<span class="org-rainbow-delimiters-depth-2">&gt;</span>::day_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f9bfc0

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.day<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 11

&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; s1.day<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
11
</pre>
</div>

<p>
Get day of Week: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> dw = s1.day_of_week<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">greg_weekday</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d764702e

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> dw
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.day_of_week<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>dw<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
</pre>
</div>

<p>
Get day of Week as Enumeration:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> dw = s1.day_of_week<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">greg_weekday</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d764702e

&gt;&gt; dw.as_enum<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-constant">greg_weekday</span>::weekday_enum<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">weekdays</span>::Thursday<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; dw.as_enum<span class="org-rainbow-delimiters-depth-1">()</span> == <span class="org-constant">dt</span>::<span class="org-constant">weekdays</span>::Thursday
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>  
</pre>
</div>

<p>
Get day of Week as C-string (const char*): 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; dw.as_short_string<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Thu"</span>

&gt;&gt; dw.as_long_string<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Thursday"</span>
</pre>
</div>

<p>
Get day of year (number of elapsed days until the date s1)
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.day_of_year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-constant">date</span>::day_of_year_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x8000e30

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.day_of_year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 284

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>s1.day_of_year<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 284
</pre>
</div>

<p>
Get difference between two dates in days: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> date_a = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2009, 10, 20<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647068

&gt;&gt; <span class="org-keyword">auto</span> date_b = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2011, 1, 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d764706c

&gt;&gt; <span class="org-keyword">auto</span> diff = date_b - date_a
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date_duration</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647070

&gt;&gt; diff.days<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 438
</pre>
</div>

<p>
<b>Date arithmetics:</b>
</p>

<p>
Add days to a date: 
</p>

<ul class="org-ul">
<li>Add 200 days to date 2005-09-25</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> date_a = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2005, 9, 25<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7048

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a = "</span> &lt;&lt; date_a &lt;&lt; <span class="org-string">"\n"</span>;
date_a = 2005-Sep-25

<span class="org-comment-delimiter">// </span><span class="org-comment">Create a new date object = date_a + 200 days </span>
&gt;&gt; <span class="org-keyword">auto</span> date_b = date_a + <span class="org-constant">g</span>::days<span class="org-rainbow-delimiters-depth-1">(</span>200<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7060

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_b = "</span> &lt;&lt; date_b &lt;&lt; <span class="org-string">"\n"</span>;
date_b = 2006-Apr-13

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a + 200 days = "</span> &lt;&lt; date_a + <span class="org-constant">g</span>::days<span class="org-rainbow-delimiters-depth-1">(</span>200<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
date_a + 200 days = 2006-Apr-13

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a + 1200 days = "</span> &lt;&lt; date_a + <span class="org-constant">g</span>::days<span class="org-rainbow-delimiters-depth-1">(</span>1200<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
date_a + 1200 days = 2009-Jan-07
</pre>
</div>

<p>
Add months to a date: 
</p>
<ul class="org-ul">
<li>Add 5 months to date 2005-09-25</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> date_a = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2005, 9, 25<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7048

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a + 5 months  = "</span> &lt;&lt; date_a + <span class="org-constant">g</span>::months<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
date_a + 5 months  = 2006-Feb-25
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org005c8d4" class="outline-3">
<h3 id="org005c8d4"><span class="section-number-3">1.11</span> Library Map</h3>
<div class="outline-text-3" id="text-1-11">
</div>
<div id="outline-container-orgd55ec9e" class="outline-4">
<h4 id="orgd55ec9e"><span class="section-number-4">1.11.1</span> Math</h4>
<div class="outline-text-4" id="text-1-11-1">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/math/doc/html/index.html">Math Toolkit 2.8.0 - 1.69.0</a>
<ul class="org-ul">
<li>Brief: The math toolkit provides the following facilities:
<ul class="org-ul">
<li>Floating Point Utilities</li>
<li>Specific Width Floating Point Types</li>
<li><b>Statistical Distributions</b> (Gaussian, Poisson, Bernouli&#x2026;)</li>
<li>Mathematical Special Function</li>
<li>Root Finding and Function</li>
<li>Minimisations, Polynomials and Rational Functions</li>
<li>Interpolation</li>
<li>Numerical Integration and Differentiation</li>
<li>Quaternions and Octonions.</li>
</ul></li>
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/math/doc/html/special.html">Chapter 6. Special Functions - 1.69.0</a></li>
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/math/doc/html/dist.html">Chapter 5. Statistical Distributions and Functions - 1.69.0</a></li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/numeric/ublas/">uBLAS</a> (Linear algebra facilities, linear systems, vector matrices
and so on.)
<ul class="org-ul">
<li>Brief: "uBLAS provides matrix and vector classes as well as basic
linear algebra routines. Several dense, packed and sparse storage
schemes are supported."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/numeric/odeint/doc/html/boost_numeric_odeint/getting_started/overview.html">Boost Odeint</a>
<ul class="org-ul">
<li>Library for ordinary differential equations - initial value
problems.</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/date_time.html">Date Time</a>
<ul class="org-ul">
<li>Brief: "A set of date-time libraries based on generic programming concepts."</li>
<li>Descr: "The motivation for this library comes from working with
and helping build several date-time libraries on several
projects. Date-time libraries provide fundamental infrastructure
for most development projects. However, most of them have
limitations in their ability to calculate, format, convert, or
perform some other functionality. For example, most libraries do
not correctly handle leap seconds, provide concepts such as
infinity, or provide the ability to use high resolution or
network time sources. These libraries also tend to be rigid in
their representation of dates and times. Thus customized policies
for a project or subproject are not possible."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/chrono.html">Chapter 7. Boost.Chrono 2.0.8 - 1.69.0</a> (Time interval computation,
already in C++11, but it is a good documentation for the STL
library.)</li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/accumulators.html">Accumulators</a>
<ul class="org-ul">
<li>Summary: Incremental statistics.</li>
<li>Descr: "Boost.Accumulators is both a library for incremental statistical
computation as well as an extensible framework for incremental
calculation in general. The library deals primarily with the
concept of an accumulator, which is a primitive computational
entity that accepts data one sample at a time and maintains some
internal state. These accumulators may offload some of their
computations on other accumulators, on which they
depend. Accumulators are grouped within an accumulator
set. Boost.Accumulators resolves the inter-dependencies between
accumulators in a set and ensures that accumulators are processed
in the proper order."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/multiprecision/doc/html/boost_multiprecision/intro.html">Boost Multiprecisions</a>
<ul class="org-ul">
<li>Brief: "The Multiprecision Library provides integer, rational,
floating-point, and complex types in C++ that have more range and
precision than C++'s ordinary built-in types. The big number
types in Multiprecision can be used with a wide selection of
basic mathematical operations, elementary transcendental
functions as well as the functions in Boost.Math. The
Multiprecision types can also interoperate with the built-in
types in C++ using clearly defined conversion rules. This allows
Boost.Multiprecision to be used for all kinds of mathematical
calculations involving integer, rational and floating-point types
requiring extended range and precision."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/units/">Units</a>
<ul class="org-ul">
<li>Brief: "Zero-overhead dimensional analysis and unit/quantity
manipulation and conversion."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/multi_array/doc/user.html">The Boost Multidimensional Array Library (Boost.MultiArray) - 1.69.0</a>
<ul class="org-ul">
<li>Brief: Multidimensional arrays, aka tensors.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgb9a09de" class="outline-4">
<h4 id="orgb9a09de"><span class="section-number-4">1.11.2</span> Parallel Computing</h4>
<div class="outline-text-4" id="text-1-11-2">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/mpi.html">Chapter 26. Boost.MPI - 1.69.0</a>
<ul class="org-ul">
<li>Brief: "Boost.MPI is a library for message passing in high-performance
parallel applications. A Boost.MPI program is one or more
processes that can communicate either via sending and receiving
individual messages (point-to-point communication) or by
coordinating as a group (collective communication). Unlike
communication in threaded environments or using a shared-memory
library, Boost.MPI processes can be spread across many different
machines, possibly with different operating systems and
underlying architectures."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/compute/doc/html/index.html">Chapter 1. Boost.Compute - 1.69.0</a>
<ul class="org-ul">
<li>Brief: "The Boost Compute library provides a C++ interface to
multi-core CPU and GPGPU computing platforms based on OpenCL."</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org8fd1c23" class="outline-4">
<h4 id="org8fd1c23"><span class="section-number-4">1.11.3</span> String Utilities</h4>
<div class="outline-text-4" id="text-1-11-3">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/boost_lexical_cast.html">Chapter 21. Boost.Lexical_Cast 1.0 - 1.69.0</a></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/format/">The Boost Format library - 1.69.0</a>
<ul class="org-ul">
<li>The format library provides a class for formatting arguments
according to a format-string, as does printf, but with two major
differences : format sends the arguments to an internal stream,
and so is entirely type-safe and naturally supports all
user-defined types. The ellipsis (&#x2026;) can not be used correctly
in the strongly typed context of format, and thus the function
call with arbitrary arguments is replaced by successive calls to
an argument feeding operator%</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/string_algo.html">String algo</a>
<ul class="org-ul">
<li>Brief: "The String Algorithm Library provides a generic
implementation of string-related algorithms which are missing in
STL. It is an extension to the algorithms library of STL and it
includes trimming, case conversion, predicates and find/replace
functions. All of them come in different variants so it is easier
to choose the best fit for a particular need."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/spirit/">Boost Spirit</a>
<ul class="org-ul">
<li>Brief: Framework for building parsers.</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/tokenizer/">Tokenizer</a>
<ul class="org-ul">
<li>Brief: "Break of a string or other character sequence into a
series of tokens."</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orge84f231" class="outline-4">
<h4 id="orge84f231"><span class="section-number-4">1.11.4</span> Template Metaprogramming facilities</h4>
<div class="outline-text-4" id="text-1-11-4">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/utility/operators.htm">Boost Operators</a></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/range/">Range</a> [BEST]
<ul class="org-ul">
<li>Descr: "A new infrastructure for generic algorithms that builds
on top of the new iterator concepts."</li>
<li>Note: Maybe the future replacement for C++ classical iterators.</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/hof/doc/html/doc/src/index.html">Boost.HigherOrderFunctions</a> (aka Boost.Hof)
<ul class="org-ul">
<li>Brief: Provides many higher order functions.</li>
<li>Descr: HigherOrderFunctions is a header-only C++11/C++14 library that
provides utilities for functions and function objects, which can
solve many problems with much simpler constructs than whats
traditionally been done with metaprogramming.</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/mp11/doc/html/mp11.html">Boost.Mp11: A C++11 metaprogramming library - 1.69.0</a></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/fusion/doc/html/fusion/preface.html">Boost Fusion</a></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/hana/doc/html/index.html">Boost.Hana</a>
<ul class="org-ul">
<li>Brief: "Hana is a header-only library for C++ metaprogramming
suited for computations on both types and values."</li>
<li>Descr: "The functionality it provides is a superset of what is
provided by the well established Boost.MPL and Boost.Fusion
libraries. By leveraging C++11/14 implementation techniques and
idioms, Hana boasts faster compilation times and runtime
performance on par or better than previous metaprogramming
libraries, while noticeably increasing the level of
expressiveness in the process. Hana is easy to extend in a ad-hoc
manner and it provides out-of-the-box inter-operation with
Boost.Fusion, Boost.MPL and the standard library."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/concept_check/">Concept check</a>
<ul class="org-ul">
<li>Descr: "Tools for generic programming."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/proto/">Proto</a>
<ul class="org-ul">
<li>Brief: "Expression template library and compiler construction
toolkit for domain-specific embedded languages."</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org1fcfb86" class="outline-4">
<h4 id="org1fcfb86"><span class="section-number-4">1.11.5</span> Design Patterns and Object Oriented Design Patterns</h4>
<div class="outline-text-4" id="text-1-11-5">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/boost_typeerasure.html">Chapter 40. Boost.TypeErasure - 1.69.0</a>
<ul class="org-ul">
<li>Brief: "The Boost.TypeErasure library provides runtime
polymorphism in C++ that is more flexible than that provided by
the core language. The Boost.TypeErasure library combines the
superior abstraction capabilities of templates, with the runtime
flexibility of virtual functions."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/ptr_container/doc/ptr_container.html">Boost Pointer Container Library - 1.69.0</a>
<ul class="org-ul">
<li>Brief: "Boost.Pointer Container provides containers for holding
heap-allocated objects in an exception-safe manner and with
minimal overhead. The aim of the library is in particular to make
OO programming easier in C++ by establishing a standard set of
classes, methods and designs for dealing with OO specific
problems."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/release/libs/flyweight/">Boost Flyweight</a>
<ul class="org-ul">
<li>Brief: Descr: "Design pattern to manage large quantities of
highly redundant objects."</li>

<li>Descr: "Flyweights are small-sized handle classes granting
constant access to shared common data, thus allowing for the
management of large amounts of entities within reasonable memory
limits. Boost.Flyweight makes it easy to use this common
programming idiom by providing the class template flyweight&lt;T&gt;,
which acts as a drop-in replacement for const T."</li>

<li>Additional notes:
<ul class="org-ul">
<li>"Learning to use Boost.Flyweight can be accomplished in a matter
of minutes. When special needs arise, however, an extensive
customization interface is provided which allows the user to
control and extend the following aspects:"</li>
<li>Type tagging for separation of domains using the same basic flyweight types.</li>
<li>Specification and parameterization of the so-called flyweight factory.</li>
<li>Control of the factory instantiation procedure.</li>
<li>Specification of the internal synchronization mechanisms.</li>
<li>Flyweight tracking, allowing for the disposal of stored values
when no longer referenced by any flyweight object.</li>
</ul></li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/property_tree.html">Chapter 32. Boost.PropertyTree - 1.69.0</a>
<ul class="org-ul">
<li>"The Property Tree library provides a data structure that stores
an arbitrarily deeply nested tree of values, indexed at each
level by some key. Each node of the tree stores its own value,
plus an ordered list of its subnodes and their keys. The tree
allows easy access to any of its nodes by means of a path, which
is a concatenation of multiple keys."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/functional/factory/doc/html/index.html">Boost.Functional/Factory</a>
<ul class="org-ul">
<li>Brief: "The template boost::factory lets you encapsulate a new
expression as a function object, boost::value_factory
encapsulates a constructor invocation without new."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/property_map/doc/property_map.html">Property Map Library - 1.69.0</a></li>
</ul>
</div>
</div>

<div id="outline-container-org322bd3b" class="outline-4">
<h4 id="org322bd3b"><span class="section-number-4">1.11.6</span> Command Line Options</h4>
<div class="outline-text-4" id="text-1-11-6">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/program_options.html">Chapter 31. Boost.Program_options - 1.69.0</a></li>
</ul>
</div>
</div>

<div id="outline-container-org9b573c0" class="outline-4">
<h4 id="org9b573c0"><span class="section-number-4">1.11.7</span> Debugging, Logging and Assertions</h4>
<div class="outline-text-4" id="text-1-11-7">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/log/doc/html/index.html">Chapter 1. Boost.Log v2 - 1.69.0</a>
<ul class="org-ul">
<li>Descr: "The application stores all essential information about its
execution to a log, and when something goes wrong this
information can be used to analyze the program behavior and make
the necessary corrections. There are other very useful
applications of logging, such as gathering statistical
information and highlighting events (i.e. indicating that some
situation has occurred or that the application is experiencing
some problems). These tasks have proved to be vital for many
real-world industrial applications. This library aims to make
logging significantly easier for the application developer. It
provides a wide range of out-of-the-box tools along with public
interfaces for extending the library. The main goals of the
library are:"
<ul class="org-ul">
<li>Simplicity. A small example code snippet should be enough to
get the feel of the library and be ready to use its basic
features.</li>
<li>Extensibility. A user should be able to extend functionality of
the library for collecting and storing information into logs.</li>
<li>Performance. The library should have as little performance
impact on the user's application as possible.</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org95cf416" class="outline-4">
<h4 id="org95cf416"><span class="section-number-4">1.11.8</span> Network - Sockets - TCP/IP</h4>
<div class="outline-text-4" id="text-1-11-8">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/asio/">Boost Asio</a>
<ul class="org-ul">
<li>Descr: "Portable networking and other low-level I/O, including sockets,
timers, hostname resolution, socket iostreams, serial ports, file
descriptors and Windows HANDLEs."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/crc.html">Boost CRC</a> - CRC (Cyclick Redundancy Checking)
<ul class="org-ul">
<li>Descr: " CRCs (cyclic redundancy codes) is one common technique
to confirming data integrity after transmission. The Boost.CRC
library provides access to two styles of CRC computation, one as
a function template, the other as a function template and two
computation object class templates, where the two class templates
differ in speed."</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/statechart/">Statechart</a>
<ul class="org-ul">
<li>Brief: "Boost.Statechart - Arbitrarily complex finite state
machines can be implemented in easily readable and maintainable
C++ code."</li>
<li>Note: Many network protocols, embedded systems applications and
business processes are well described by state machines such as
 <a href="https://en.wikipedia.org/wiki/Mealy_machine">Mealy state machine</a> or <a href="https://en.wikipedia.org/wiki/Moore_machine">Moore State machine</a>.</li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/uuid/">UUID</a> - A universally unique identifier.</li>
</ul>
</div>
</div>

<div id="outline-container-org92f43d1" class="outline-4">
<h4 id="org92f43d1"><span class="section-number-4">1.11.9</span> Shared Libraries and Plugins - DLL, DSO, SO</h4>
<div class="outline-text-4" id="text-1-11-9">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/boost_dll.html">Boost DLL</a>
<ul class="org-ul">
<li>Brief: "This library was designed to simplify plugin development using C++ in a portable cross-platform manner."</li>
<li>Descr: "Adding a specific features to an existing software
applications at runtime could be useful in many cases. Such
extensions, or plugins, are usually implemented using Dynamic
Library Modules (DLL,SO/DSO) loaded at runtime."</li>
<li>Library provides a portable across platforms way to:
<ul class="org-ul">
<li>load libraries</li>
<li>import any native functions and variables</li>
<li>make alias names for C++ mangled functions and symbols</li>
<li>query libraries for sections and exported symbols</li>
<li>self loading and self querying</li>
<li>getting program and module location by exported symbol</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org135754e" class="outline-4">
<h4 id="org135754e"><span class="section-number-4">1.11.10</span> Subprocess and inter process communication - IPC</h4>
<div class="outline-text-4" id="text-1-11-10">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess.html">Boost.Interprocess</a>
<ul class="org-ul">
<li>Brief: "Boost.Interprocess simplifies the use of common
interprocess communication and synchronization mechanisms and
offers a wide range of them:"
<ul class="org-ul">
<li>Shared memory.</li>
<li>Memory-mapped files.</li>
<li>Semaphores, mutexes, condition variables and upgradable mutex
types to place them in shared memory and memory mapped files.</li>
<li>Named versions of those synchronization objects, similar to UNIX/Windows sem_open/CreateSemaphore API.</li>
<li>File locking.</li>
<li>Relative pointers.</li>
<li>Message queues.</li>
</ul></li>
<li>Additional:
<ul class="org-ul">
<li>Boost.Interprocess also offers higher-level interprocess
mechanisms to allocate dynamically portions of a shared memory
or a memory mapped file (in general, to allocate portions of a
fixed size memory segment). Using these mechanisms,
Boost.Interprocess offers useful tools to construct C++
objects, including STL-like containers, in shared memory and
memory mapped files:</li>
</ul></li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/process.html#boost_process.introduction">Boost.Process</a>
<ul class="org-ul">
<li>Brief: "Boost.Process is a library to manage system processes. It
can be used to:"
<ul class="org-ul">
<li>create child processes</li>
<li>setup streams for child processes</li>
<li>communicate with child processes through streams (synchronously
or asynchronously)</li>
<li>wait for processes to exit (synchronously or asynchronously)</li>
<li>terminate processes</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org7a018f2" class="outline-4">
<h4 id="org7a018f2"><span class="section-number-4">1.11.11</span> Low level and byte manipulation</h4>
<div class="outline-text-4" id="text-1-11-11">
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/endian/doc/index.html">Endian Library - 1.69.0</a></li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-orgf061fd8" class="outline-2">
<h2 id="orgf061fd8"><span class="section-number-2">2</span> Complementary Libraries</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgbf7d196" class="outline-3">
<h3 id="orgbf7d196"><span class="section-number-3">2.1</span> Range v3 (C++20)</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Ranges v3 is a header-only generic library that will be included in
the <a href="https://en.cppreference.com/w/cpp/ranges">C++20 ranges</a> and provides stl-like algorithms that can operate on
ranges, also known as pairs of iterators. The benefit of the range v3
library over STL algorithms and iterator pairs is that the greater
composability and that the calling code does not need to specify the
iterator pair explicitly.
</p>

<p>
Resources: 
</p>

<ul class="org-ul">
<li>Documentation:
<ul class="org-ul">
<li><a href="https://ericniebler.github.io/range-v3/">https://ericniebler.github.io/range-v3/</a></li>
</ul></li>

<li>Github Repsitory:
<ul class="org-ul">
<li><a href="https://github.com/ericniebler/range-v3">https://github.com/ericniebler/range-v3</a></li>
</ul></li>

<li>C++ Standard Proposal:
<ul class="org-ul">
<li><a href="https://ericniebler.github.io/std/wg21/D4128.html">https://ericniebler.github.io/std/wg21/D4128.html</a></li>

<li><a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4128.html">Ranges for the Standard Library, Revision 1</a></li>
</ul></li>

<li>C++20 - &lt;ranges&gt; header
<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/ranges">https://en.cppreference.com/w/cpp/ranges</a></li>
</ul></li>

<li>Videos:
<ul class="org-ul">
<li><a href="https://www.youtube.com/watch?v=mFUXNMfaciE">CppCon 2015: Eric Niebler "Ranges for the Standard Library"</a></li>
<li><a href="https://www.youtube.com/watch?v=4p21wBOplPQ">Introduction to C++ Ranges - Fluent C++</a></li>
<li><a href="https://www.youtube.com/watch?v=OI0YFgEscGQ">C++ Russia 2018: Arno Schödl, From Iterators To Ranges</a></li>
</ul></li>
</ul>

<p>
Headers: 
</p>
<ul class="org-ul">
<li>Include all features:
<ul class="org-ul">
<li>&lt;range/v3/all.hpp&gt;  (Note: It increase the compile-time)</li>
</ul></li>

<li>Algorithms
<ul class="org-ul">
<li>&lt;range/v3/action/join.hpp&gt;</li>
<li>&lt;range/v3/algorithm/copy.hpp&gt;</li>
<li>&lt;range/v3/algorithm/for_each.hpp&gt;</li>
<li>&lt;range/v3/algorithm/mismatch.hpp&gt;</li>
</ul></li>

<li>All
<ul class="org-ul">
<li>&lt;range/v3/view/transform.hpp&gt;</li>
<li>&lt;range/v3/core.hpp&gt;</li>
<li>&lt;range/v3/view/all.hpp&gt;</li>
<li>&lt;range/v3/view/concat.hpp&gt;</li>
<li>&lt;range/v3/view/group_by.hpp&gt;</li>
<li>&lt;range/v3/view/iota.hpp&gt;</li>
<li>&lt;range/v3/view/join.hpp&gt;</li>
<li>&lt;range/v3/view/repeat_n.hpp&gt;</li>
<li>&lt;range/v3/view/single.hpp&gt;</li>
<li>&lt;range/v3/view/take.hpp&gt;</li>
<li>&lt;range/v3/view/transform.hpp&gt;</li>
</ul></li>
</ul>

<p>
Built-in Range Views: 
</p>
<ul class="org-ul">
<li>Views are lazily evaluated algorithms that are computed on demand
without any wasteful allocation.</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">adjacent_remove_if</td>
<td class="org-left">drop_while</td>
<td class="org-left">map</td>
<td class="org-left">split</td>
</tr>

<tr>
<td class="org-left">all</td>
<td class="org-left">empty</td>
<td class="org-left">move</td>
<td class="org-left">stride</td>
</tr>

<tr>
<td class="org-left">any_range</td>
<td class="org-left">filter</td>
<td class="org-left">parital_sum</td>
<td class="org-left">tail</td>
</tr>

<tr>
<td class="org-left">bounded</td>
<td class="org-left">for_each</td>
<td class="org-left">remove_if</td>
<td class="org-left">take</td>
</tr>

<tr>
<td class="org-left">c_str</td>
<td class="org-left">generate</td>
<td class="org-left">repeat</td>
<td class="org-left">take_exactly</td>
</tr>

<tr>
<td class="org-left">chunck</td>
<td class="org-left">generate_n</td>
<td class="org-left">repetat_n</td>
<td class="org-left">take_while</td>
</tr>

<tr>
<td class="org-left">concat</td>
<td class="org-left">group_by</td>
<td class="org-left">replace</td>
<td class="org-left">tokenize</td>
</tr>

<tr>
<td class="org-left">const_</td>
<td class="org-left">indirect</td>
<td class="org-left">replace_if</td>
<td class="org-left">transform</td>
</tr>

<tr>
<td class="org-left">counted</td>
<td class="org-left">interspece</td>
<td class="org-left">reverse</td>
<td class="org-left">unbounded</td>
</tr>

<tr>
<td class="org-left">delimit</td>
<td class="org-left">iota</td>
<td class="org-left">single</td>
<td class="org-left">unique</td>
</tr>

<tr>
<td class="org-left">drop</td>
<td class="org-left">join</td>
<td class="org-left">slice</td>
<td class="org-left">zip_with</td>
</tr>
</tbody>
</table>

<p>
Built-in Range Actions: 
</p>
<ul class="org-ul">
<li>Actions are eager sequence algorithms that operates on containers
and returns containers.</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">drop</td>
<td class="org-left">push_front</td>
<td class="org-left">stable_sort</td>
</tr>

<tr>
<td class="org-left">drop_while</td>
<td class="org-left">remove_if</td>
<td class="org-left">stride</td>
</tr>

<tr>
<td class="org-left">erase</td>
<td class="org-left">shuffle</td>
<td class="org-left">take</td>
</tr>

<tr>
<td class="org-left">insert</td>
<td class="org-left">slice</td>
<td class="org-left">take_while</td>
</tr>

<tr>
<td class="org-left">join</td>
<td class="org-left">sort</td>
<td class="org-left">transform</td>
</tr>

<tr>
<td class="org-left">push_back</td>
<td class="org-left">split</td>
<td class="org-left">unique</td>
</tr>
</tbody>
</table>

<p>
Comparison Range Views X Range Actions: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Range Views</th>
<th scope="col" class="org-left">Range Actions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Lazy sequence algorithms</td>
<td class="org-left">Eager sequence algorithms</td>
</tr>

<tr>
<td class="org-left">Lightweightm, non owning</td>
<td class="org-left">Operates on containers and returns containers.</td>
</tr>

<tr>
<td class="org-left">Doesn't perform allocation</td>
<td class="org-left">Performs allocation</td>
</tr>

<tr>
<td class="org-left">Composable</td>
<td class="org-left">Composable</td>
</tr>

<tr>
<td class="org-left">Non-mutating</td>
<td class="org-left">Potentially mutating</td>
</tr>
</tbody>
</table>


<p>
<b>Example:</b>
</p>

<ul class="org-ul">
<li>Complete source: 
<ul class="org-ul">
<li><a href="https://gist.github.com/caiorss/6d1ca8c20e71ea72866fe799408c6add#file-main1-cpp">Experiments with C++ ranges v3 Library  - Gisthub</a></li>
<li>File: <a href="https://gist.github.com/caiorss/6d1ca8c20e71ea72866fe799408c6add#file-main1-cpp">main1.cpp</a></li>
</ul></li>
</ul>

<p>
<b>Main Function - Range Algorithms Experiments</b>
</p>

<ul class="org-ul">
<li>Experiment 1A:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"   +------------------------------------+\n"</span>
              &lt;&lt; <span class="org-string">"   | Range Algorithms Experiments       |\n"</span>
              &lt;&lt; <span class="org-string">"   +------------------------------------+\n"</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">printLambda</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-1">}</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">std::cout &lt;&lt; view::iota(2, 10) &lt;&lt; std::endl;</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------//</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1 A - for_each ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
    <span class="org-rainbow-delimiters-depth-1">{</span>

        <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span>8, 9, 20, 25<span class="org-rainbow-delimiters-depth-2">}</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Print numbers"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>xs, printLambda<span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"c++"</span>, <span class="org-string">"c++17"</span>, <span class="org-string">"C++20"</span>, <span class="org-string">"asm"</span>, <span class="org-string">"ADA"</span><span class="org-rainbow-delimiters-depth-2">}</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Print words"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>xs, printLambda<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">  +------------------------------------+
  | Range Algorithms Experiments       |
  +------------------------------------+

=== EXPERIMENT 1 A - for_each ===
=&gt; Print numbers
x = 8
x = 9
x = 20
x = 25
=&gt; Print words
x = 8
x = 9
x = 20
x = 25
</pre>
</div>

<ul class="org-ul">
<li>Experiment 1B</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1 B - for_each ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">astr</span> = <span class="org-string">"bolts"</span>;
    <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>astr, printLambda<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1 B - for_each ===
x = b
x = o
x = l
x = t
x = s
</pre>
</div>

<ul class="org-ul">
<li>Experiment 2</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 2 - sort ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs2</span> = <span class="org-rainbow-delimiters-depth-2">{</span>10.45, -30.0, 45.0, 8.2, 100.0, 10.6<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Reverse vector"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE xs2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">ranges</span>::sort<span class="org-rainbow-delimiters-depth-2">(</span>xs2<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER xs2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 2 - sort ===
Reverse vector
BEFORE xs2 = [6]( 10.45 -30 45 8.2 100 10.6  )
AFTER xs2 = [6]( -30 8.2 10.45 10.6 45 100  )
</pre>
</div>


<ul class="org-ul">
<li>Experiment 3</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 3 - fill ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs2</span><span class="org-rainbow-delimiters-depth-2">(</span>10, 0<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE  A xs2 = "</span> &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>xs2 <span class="org-rainbow-delimiters-depth-2">)</span>&lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFOREB B xs2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::fill<span class="org-rainbow-delimiters-depth-2">(</span>xs2, 10<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER 1 =&gt; x2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::fill<span class="org-rainbow-delimiters-depth-2">(</span>xs2, 5<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER 2 =&gt; x2 = "</span> &lt;&lt; xs2 &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 3 - fill ===
BEFORE  A xs2 = [0,0,0,0,0,0,0,0,0,0]
BEFOREB B xs2 = [10]( 0 0 0 0 0 0 0 0 0 0  )
AFTER 1 =&gt; x2 = [10]( 10 10 10 10 10 10 10 10 10 10  )
AFTER 2 =&gt; x2 = [10]( 5 5 5 5 5 5 5 5 5 5  )
</pre>
</div>

<ul class="org-ul">
<li>Experiment 4:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 4 - reverse ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"c++"</span>, <span class="org-string">"c++17"</span>, <span class="org-string">"C++20"</span>, <span class="org-string">"asm"</span>, <span class="org-string">"ADA"</span><span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE =&gt; words = "</span> &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::reverse<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER =&gt; words = "</span> &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>words<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 4 - reverse ===
BEFORE =&gt; words = [c++,c++17,C++20,asm,ADA]
AFTER =&gt; words = [ADA,asm,C++20,c++17,c++]
</pre>
</div>


<ul class="org-ul">
<li>Experiment 5:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 5 - remove_if ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xvec</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 5, 10, 1, 4, 1, 2, 8, 20, 100, 10, 1<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE =&gt; xvec = "</span> &lt;&lt; xvec &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Erase remove idiom</span>
    xvec.erase<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">ranges</span>::remove_if<span class="org-rainbow-delimiters-depth-3">(</span>xvec, <span class="org-rainbow-delimiters-depth-4">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-4">){</span> <span class="org-keyword">return</span> x == 1; <span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>, xvec.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER  =&gt; xvec = "</span> &lt;&lt; xvec &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 5 - remove_if ===
BEFORE =&gt; xvec = [13]( 1 2 5 10 1 4 1 2 8 20 100 10 1  )
AFTER  =&gt; xvec = [9]( 2 5 10 4 2 8 20 100 10  )
</pre>
</div>

<ul class="org-ul">
<li>Experiment 6:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 6 - find ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xvec</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 5, 10, 1, 4, 1, 2<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = <span class="org-constant">ranges</span>::find<span class="org-rainbow-delimiters-depth-2">(</span>xvec, 10<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>it != xvec.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [OK] Found value == 10 =&gt; *it = "</span> &lt;&lt; *it &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Position = "</span>
                   &lt;&lt; <span class="org-constant">ranges</span>::distance<span class="org-rainbow-delimiters-depth-3">(</span>xvec.begin<span class="org-rainbow-delimiters-depth-4">()</span>, it<span class="org-rainbow-delimiters-depth-3">)</span>
                   &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">else</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [FAIL] Not found  value "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 6 - find ===
[OK] Found value == 10 =&gt; *it = 10
Position = 3
</pre>
</div>

<ul class="org-ul">
<li>Experiment 7:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 7 - accumulator ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xvec</span> = <span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 5, 10, 1, 4, 1, 2<span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-type">int</span> <span class="org-variable-name">result</span> = <span class="org-constant">ranges</span>::accumulate<span class="org-rainbow-delimiters-depth-2">(</span>xvec, 0<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; ranges::accumulate(xvec, 0) = "</span>
              &lt;&lt; result &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 7 - accumulator ===
=&gt; ranges::accumulate(xvec, 0) = 26
</pre>
</div>

<p>
<b>Range View Experiments</b> 
</p>

<ul class="org-ul">
<li>Experiment 1A</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"  +------------------------------------+\n"</span>
          &lt;&lt; <span class="org-string">"   | Range View Experiments             |\n"</span>
          &lt;&lt; <span class="org-string">"   +------------------------------------+\n"</span>;

<span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1A - view::all"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">'x'</span>, <span class="org-string">'y'</span>, <span class="org-string">'m'</span>, <span class="org-string">'k'</span>, <span class="org-string">'m'</span><span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [1] =&gt; std::view(xs) = "</span>
              &lt;&lt; <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-2">(</span>xs<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n [2] =&gt; xs = "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span>&amp;&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::all<span class="org-rainbow-delimiters-depth-3">(</span>xs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1A - view::all
[1] =&gt; std::view(xs) = [x,y,m,k,m]

[2] =&gt; xs = x y m k m
</pre>
</div>

<ul class="org-ul">
<li>Experiment 1B</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1B - view::reverse ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">'x'</span>, <span class="org-string">'y'</span>, <span class="org-string">'m'</span>, <span class="org-string">'k'</span>, <span class="org-string">'m'</span><span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::reverse<span class="org-rainbow-delimiters-depth-3">(</span>xs<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER xs = "</span> &lt;&lt; xs &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1B - view::reverse ===
m k m y x
AFTER xs = [5]( x y m k m  )
</pre>
</div>

<ul class="org-ul">
<li>Experiment 1C:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 1C - view::transform ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">xs</span> = <span class="org-rainbow-delimiters-depth-2">{</span>100, 5, 20, 9, 10, 6<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">a_lambda</span> = <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> 5 * x -10; <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: xs | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-3">(</span>a_lambda<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-comment-delimiter">//</span><span class="org-comment">std::cout &lt;&lt; " AFTER xs = " &lt;&lt; xs &lt;&lt; std::endl;</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 1C - view::transform ===
490 15 90 35 40 20
</pre>
</div>

<ul class="org-ul">
<li>Experiment 2A:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 2A - Range adaptors pipeline ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">a_lambda</span> = <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> 5 * x -10; <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Iota view = "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-3">(</span>1<span class="org-rainbow-delimiters-depth-3">)</span> | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-3">(</span>8<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">=== EXPERIMENT 2A - Range adaptors pipeline ===
=&gt; Iota view =  1 2 3 4 5 6 7 8
</pre>
</div>


<ul class="org-ul">
<li>Expeirment 2B</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 2B - Range adaptors pipeline ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Iota view [B] = \n"</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">aview</span> =
              <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-2">(</span>1<span class="org-rainbow-delimiters-depth-2">)</span>
            | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>
            | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> 5 * x + 6; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] aview = "</span> &lt;&lt; aview &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] aview | reverse = "</span>
              &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>aview | <span class="org-constant">view</span>::reverse<span class="org-rainbow-delimiters-depth-2">)</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n Iteration 1 =&gt; "</span>;
    <span class="org-constant">ranges</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>aview, <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-constant">std</span>::cout &lt;&lt; a &lt;&lt; <span class="org-string">" "</span>; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n Iteration 2 =&gt; "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: aview | <span class="org-constant">view</span>::reverse<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 2B - Range adaptors pipeline ===
=&gt; Iota view [B] = 
[INFO] aview = [11,16,21,26,31]
[INFO] aview | reverse = [31,26,21,16,11]

Iteration 1 =&gt; 11 16 21 26 31 
Iteration 2 =&gt; 31 26 21 16 11 
</pre>
</div>


<ul class="org-ul">
<li>Experiment 3A</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 3A - enumerate ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">words</span> = <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"c++"</span>, <span class="org-string">"c++17"</span>, <span class="org-string">"C++20"</span>, <span class="org-string">"asm"</span> <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ==== Loop 1 ==== "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: <span class="org-constant">view</span>::enumerate<span class="org-rainbow-delimiters-depth-3">(</span>words<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; n = "</span> &lt;&lt; x.first
                  &lt;&lt; <span class="org-string">" ; w = "</span> &lt;&lt; x.second &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" ==== Loop 2 ==== "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: words | <span class="org-constant">view</span>::enumerate<span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; n = "</span> &lt;&lt; x.first
                  &lt;&lt; <span class="org-string">" ; w = "</span> &lt;&lt; x.second &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 3A - enumerate ===
==== Loop 1 ==== 
=&gt; n = 0 ; w = c++
=&gt; n = 1 ; w = c++17
=&gt; n = 2 ; w = C++20
=&gt; n = 3 ; w = asm
==== Loop 2 ==== 
=&gt; n = 0 ; w = c++
=&gt; n = 1 ; w = c++17
=&gt; n = 2 ; w = C++20
=&gt; n = 3 ; w = asm
</pre>
</div>

<ul class="org-ul">
<li>Experiment 4A:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 4 - ranges::accumulate withe iterator ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">aview</span> = <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-2">(</span>2<span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span><span class="org-keyword">return</span> 3.0 * x - 5; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" aview = "</span> &lt;&lt; aview &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" accumulate(aview) = "</span> &lt;&lt; <span class="org-constant">ranges</span>::accumulate<span class="org-rainbow-delimiters-depth-2">(</span>aview, 0.0<span class="org-rainbow-delimiters-depth-2">)</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">=== EXPERIMENT 4 - <span class="org-constant">ranges</span>::accumulate withe iterator ===
aview = <span class="org-rainbow-delimiters-depth-1">[</span>1,4,7,10,13,16,19,22,25,28,31,34,37,40,43<span class="org-rainbow-delimiters-depth-1">]</span>
accumulate<span class="org-rainbow-delimiters-depth-1">(</span>aview<span class="org-rainbow-delimiters-depth-1">)</span> = 330
</pre>
</div>

<ul class="org-ul">
<li>Experiment 5</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::puts<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"\n === EXPERIMENT 5 - Copy Range to destination ==="</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">output</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">aview</span> = <span class="org-constant">view</span>::iota<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::transform<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-keyword">return</span> 6 * n - 10;<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>
               | <span class="org-constant">view</span>::take<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" BEFORE =&gt; output = "</span> &lt;&lt; output &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">ranges</span>::copy<span class="org-rainbow-delimiters-depth-2">(</span>aview, <span class="org-constant">ranges</span>::back_inserter<span class="org-rainbow-delimiters-depth-3">(</span>output<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" AFTER =&gt; output = "</span> &lt;&lt; output &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=== EXPERIMENT 5 - Copy Range to destination ===
BEFORE =&gt; output = [0](  )
AFTER =&gt; output = [10]( 20 26 32 38 44 50 56 62 68 74  )
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2019-05-01 Wed 11:39</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
