<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-06-14 Sun 02:23 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ Notes - Boost Libraries and complementarty libraries</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp/c++ c++ design patterns gneric programming object oriented metaprogramming"
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ Notes - Boost Libraries and complementarty libraries</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org228c362">1. Boost Libraries</a>
<ul>
<li><a href="#org7c1256e">1.1. Overview</a></li>
<li><a href="#org925b28f">1.2. Boost Libraries already in C++ ISO standard</a></li>
<li><a href="#org5292782">1.3. Boost projects with CMake / system-wide boost installation</a></li>
<li><a href="#org49efcb6">1.4. Boost projects with CMake / local boost installation</a>
<ul>
<li><a href="#org7164970">1.4.1. Overview</a></li>
<li><a href="#orgd3a9bc1">1.4.2. Downloading and installing</a></li>
<li><a href="#org4cf2605">1.4.3. Manual compilation</a></li>
<li><a href="#org290b324">1.4.4. Compilation with CMake</a></li>
</ul>
</li>
<li><a href="#orgfeb52be">1.5. Boost project with CMake and Conan</a></li>
<li><a href="#orgf4a4ed5">1.6. Boost Format</a></li>
<li><a href="#org673691b">1.7. Boost Lexical_cast</a></li>
<li><a href="#org5c8032d">1.8. Boost Tokenizer</a></li>
<li><a href="#org6a00bd0">1.9. Boost string algo</a></li>
<li><a href="#org7ba3cc3">1.10. Boost Program Options</a></li>
<li><a href="#orgc242c0b">1.11. Boost Lambda</a></li>
<li><a href="#org196166b">1.12. Boost Operators</a>
<ul>
<li><a href="#org6360bb3">1.12.1. Overview</a></li>
<li><a href="#org92812b2">1.12.2. Example</a></li>
</ul>
</li>
<li><a href="#org7f6aa81">1.13. Boost Range</a></li>
<li><a href="#org70af33d">1.14. Boost Pointer Container</a></li>
<li><a href="#org8dda266">1.15. Boost CPU Timer</a></li>
<li><a href="#org094111b">1.16. Boost Interprocess</a>
<ul>
<li><a href="#org5192285">1.16.1. Overview</a></li>
<li><a href="#orgcaaaedd">1.16.2. Example: Shared memory facilities</a></li>
<li><a href="#org11b1e79">1.16.3. Example: Shared memory logging with mutex synchronization</a></li>
</ul>
</li>
<li><a href="#orgfe99fe1">1.17. Memory Mapped Files</a>
<ul>
<li><a href="#orgd51a73a">1.17.1. Overview</a></li>
<li><a href="#org85b2640">1.17.2. Example - allocating objects in a memory mapped file</a></li>
<li><a href="#org487952c">1.17.3. Example - reading complex binary files</a></li>
</ul>
</li>
<li><a href="#org82a32fc">1.18. Boost DateTime</a>
<ul>
<li><a href="#orga661a5c">1.18.1. Overview</a></li>
<li><a href="#orgfc8a929">1.18.2. Example - Date Manipulation</a></li>
</ul>
</li>
<li><a href="#orgebd047d">1.19. Boost Math constants</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org228c362" class="outline-2">
<h2 id="org228c362"><span class="section-number-2">1</span> Boost Libraries</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org7c1256e" class="outline-3">
<h3 id="org7c1256e"><span class="section-number-3">1.1</span> Overview</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Boost Libraries are set of peer-reviewed and mostly header-only
libraries used by many projects and applications. They are regarded as
an extension of the C++ standard library and even many features from
the C++ standard come from Boost. Boost provides many facilities for
numerical computing; parsers; template metaprogramming;
network sockets TCP/IP and UDP; inter process communication; shared
memory and so on.  
</p>

<p>
Web Site: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/">https://www.boost.org/</a></li>
</ul>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_70_0/">https://www.boost.org/doc/libs/1_70_0/</a></li>
</ul>

<p>
Boost Library Map: (Moved to)
</p>
<ul class="org-ul">
<li><a href="Libraries.html">Libraries</a></li>
</ul>

<p>
Selected Pages: 
</p>

<ul class="org-ul">
<li><b>Lessons Learned from Specifying Exception-Safety for the C++ Standard Library</b>
<ul class="org-ul">
<li>"This paper represents the knowledge accumulated in response to a
real-world need: that the C++ Standard Template Library exhibit
useful and well-defined interactions with exceptions, the
error-handling mechanism built-in to the core C++ language. It
explores the meaning of exception-safety, reveals surprising
myths about exceptions and genericity, describes valuable tools
for reasoning about program correctness, and outlines an
automated testing procedure for verifying exception-safety."</li>
<li><a href="https://www.boost.org/community/exception_safety.html">https://www.boost.org/community/exception_safety.html</a></li>
</ul></li>

<li><b>Generic Programming Techniques</b>
<ul class="org-ul">
<li>"This is an incomplete survey of some of the generic programming
techniques used in the boost libraries." "</li>
<li><a href="https://www.boost.org/community/generic_programming.html">https://www.boost.org/community/generic_programming.html</a></li>
</ul></li>

<li><b>Counted Body Techniques</b>
<ul class="org-ul">
<li>"Reference counting techniques? Nothing new, you might
think. Every good C++ text that takes you to an intermediate or
advanced level will introduce the concept. It has been explored
with such thoroughness in the past that you might be forgiven for
thinking that everything that can be said has been said. Well,
let's start from first principles and see if we can unearth
something new&#x2026;."</li>
<li><a href="https://www.boost.org/community/counted_body.html">https://www.boost.org/community/counted_body.html</a></li>
</ul></li>

<li><b>Boost Implementation Variations</b>
<ul class="org-ul">
<li>"The interface specifications for boost.org library components
(as well as for quality software in general) are conceptually
separate from implementations of those interfaces. This may not
be obvious, particularly when a component is implemented entirely
within a header, but this separation of interface and
implementation is always assumed. From the perspective of those
concerned with software design, portability, and standardization,
the interface is what is important, while the implementation is
just a detail."</li>
<li><a href="https://www.boost.org/community/implementation_variations.html">https://www.boost.org/community/implementation_variations.html</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org925b28f" class="outline-3">
<h3 id="org925b28f"><span class="section-number-3">1.2</span> Boost Libraries already in C++ ISO standard</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Some Boost libraries are redundant as they are already in the C++ ISO
standard. However, it is worth using them if a compiler to new
C++ standards is not available. 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Boost libraries aready in C++ ISO Standard</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Boost Library</th>
<th scope="col" class="org-left">C++ Standard</th>
<th scope="col" class="org-left">Description</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">equivalent</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Added since C++11</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Boost.Chrono</td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/chrono">std::chrono</a></td>
<td class="org-left">Time interval</td>
</tr>

<tr>
<td class="org-left">Boost.Array</td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/container/array">std::array</a></td>
<td class="org-left">Fixed-size non-dynamically allocated array.</td>
</tr>

<tr>
<td class="org-left">Boost.Foreach</td>
<td class="org-left">C++11 ranged for</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_65_1/doc/html/function.html">Boost.Function</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/function">std::function</a></td>
<td class="org-left">Function type erasure and/or callbacks</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_70_0/libs/bind/doc/html/bind.html">Boost::bind</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/bind">std::bind</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Boost.Heap</td>
<td class="org-left">std::priority_queue</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Boost.Intrusive</td>
<td class="org-left">STL move constructor  and move assignment operator</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_62_0/doc/html/ratio.html">Boost.Ratio</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/numeric/ratio/ratio">std::ratio</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_63_0/doc/html/move.html">Boost.Move</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/move">std::move</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Boost.SaticAssert</td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/language/static_assert">static_assert</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/core/doc/html/core/ref.html">Boost.Ref</a></td>
<td class="org-left">Reference warapers in &lt;functional&gt; header</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/boost_random.html">Boost.Random</a></td>
<td class="org-left">Header &lt;<a href="http://www.cplusplus.com/reference/random/">&lt;random&gt;</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/regex/doc/html/index.html">Boost.Regex</a></td>
<td class="org-left">Library: <a href="https://en.cppreference.com/w/cpp/regex">&lt;regex&gt;</a>  (std::regex)</td>
<td class="org-left">Regular expressions library</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/thread.html">Boost.Thread</a></td>
<td class="org-left">Library: <a href="https://en.cppreference.com/w/cpp/thread">&lt;thread&gt;</a> (std::thread)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_70_0/libs/algorithm/doc/html/index.html">Boost Algorithm Lib</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/algorithm">algorithm library</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Added since C++17</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/optional/doc/html/index.html">Boost.Optional</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/optional">std::optional</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/any.html">Boost.Any</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/any">std::any</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/variant.html">Boost.Variant</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/variant">std::variant</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/filesystem/doc/index.htm">Boost.Filesystem</a></td>
<td class="org-left">Library: <a href="https://en.cppreference.com/w/cpp/filesystem">filesystem</a></td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Boost Containers already in STL and C++ standards: 
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> Boost containers and functions aready incorpored into STL and C++ ISO Standard.</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Boost container or type</th>
<th scope="col" class="org-left">STL equivalent type</th>
<th scope="col" class="org-left">STL Header</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Since C++11</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">boost lambda</td>
<td class="org-left">C++11 lambdas</td>
<td class="org-left">-</td>
<td class="org-left">Lambda "function" constructor.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/function.html">boost::function</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/function">std::function</a></td>
<td class="org-left">&lt;functional&gt;</td>
<td class="org-left">Container for function or method-call type erasure.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/bind/doc/html/bind.html">boost::bind</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/bind">std::bind</a></td>
<td class="org-left">&lt;functional&gt;</td>
<td class="org-left">Function wrappers.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_70_0/libs/core/doc/html/core/ref.html">boost::ref</a>, boost::cref</td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/functional/ref">std::ref and std::cref</a></td>
<td class="org-left">&lt;functional&gt;&gt;</td>
<td class="org-left">Reference wrappers in header &lt;functional&gt;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_70_0/doc/html/boost/movelib/unique_ptr.html">boost::unique_ptr</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/memory/unique_ptr">std::unique_ptr</a></td>
<td class="org-left">&lt;memory&gt;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/smart_ptr/doc/html/smart_ptr.html#shared_ptr">boost::shared_ptr</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/memory/shared_ptr">std::shared_ptr</a></td>
<td class="org-left">&lt;memory&gt;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/array.html">boost::array</a></td>
<td class="org-left">std::array</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Non-heap allocated fixed-size array, similar to C-array.</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><b>Since C++17</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/any.html">boost::any</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/any">std::any</a></td>
<td class="org-left">&lt;any&gt;</td>
<td class="org-left">Type erasure container for storing any copiable type.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/libs/optional/doc/html/index.html">boost::optional</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/optional">std::optional</a></td>
<td class="org-left">&lt;optional&gt;</td>
<td class="org-left">Container which may or may not have any value.</td>
</tr>

<tr>
<td class="org-left"><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/variant.html">boost::variant</a></td>
<td class="org-left"><a href="https://en.cppreference.com/w/cpp/utility/variant">std::variant</a></td>
<td class="org-left">&lt;variant&gt;</td>
<td class="org-left">Discriminated union, a better C-Union</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
Note: 
</p>
<ul class="org-ul">
<li>Reference wrappers in &lt;functional&gt; header:
<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/utility/functional/reference_wrapper">std::reference_wrapper</a></li>
<li><a href="https://en.cppreference.com/w/cpp/utility/functional/ref">std::ref, std::cref</a></li>
</ul></li>

<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/bind/doc/html/bind.html">boost::bind</a> and std::bind =&gt; Function for building lambda
functions out of functions with partial arguments, member function
pointers and pointer to member variables.</li>
</ul>

<p>
See:
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/7241993/is-it-smart-to-replace-boostthread-and-boostmutex-with-c11-equivalents">c++ -
Is it smart to replace boost::thread and boost::mutex with c++11
equivalents? - Stack Overflow</a></li>
</ul>
</div>
</div>
<div id="outline-container-org5292782" class="outline-3">
<h3 id="org5292782"><span class="section-number-3">1.3</span> Boost projects with CMake / system-wide boost installation</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Some boost libraries are not header-only and requires linking against
a pre-compiled static or shared library. The compilation procedure can
be simplified with the CMake module <a href="https://cmake.org/cmake/help/latest/module/FindBoost.html">FindBoost.</a>  
</p>

<ul class="org-ul">
<li>Note: This procedure assumes a <span class="underline">system-wide installation</span> of Boost
libraries a Unix-like operating system at directories <span class="underline">/usr/include</span>
and <span class="underline">/lib</span>. It may not work if the boost libraries are installed on
those directories.</li>

<li>Note: Boost can be installed in a system-wide way by manual
compilation or by using the current Linux distribution package
manager. Although the system-wide setup is easier to use, it has
some drawbacks, it is not possible to control the version of the
library installed, if the setup method was the package manager and
also multiple versions of the library cannot coexist as new
version will override the existing library headers [Dependency Hell].</li>
</ul>

<p>
Some non header-only Boost libraries are:
</p>
<ul class="org-ul">
<li>date_time</li>
<li>iostream</li>
<li>filesystem</li>
<li>program_options</li>
<li>system (for Boost ASIO)</li>
</ul>

<p>
<b>Sample project:</b>
</p>

<p>
File: CMakeLists.txt 
</p>
<ul class="org-ul">
<li>Note: It is assumed that Boost is already installed in the system.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(cmake-boost)
<span class="org-comment">#======================================#</span>

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-function-name">set</span>(Boost_USE_STATIC_LIBS ON)

<span class="org-function-name">find_package</span>(Boost REQUIRED date_time serialization )

<span class="org-function-name">add_executable</span>(boost-app main.cpp)
<span class="org-function-name">target_link_libraries</span>(boost-app Boost::date_time Boost::serialization)
</pre>
</div>

<p>
File: main.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/date_time/gregorian/gregorian.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/archive/text_oarchive.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/archive/text_iarchive.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">gr</span> = <span class="org-constant">boost</span>::gregorian;
<span class="org-keyword">namespace</span> <span class="org-constant">dt</span> = <span class="org-constant">boost</span>::date_time;

<span class="org-keyword">class</span> <span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_name</span>;
    <span class="org-type">double</span>      <span class="org-variable-name">m_latitude</span>;
    <span class="org-type">double</span>      <span class="org-variable-name">m_longitude</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by boost to access private data of this class</span>
    <span class="org-keyword">friend</span> <span class="org-keyword">class</span> <span class="org-constant">boost</span>::<span class="org-constant">serialization</span>::<span class="org-type">access</span>;

<span class="org-function-name">public</span>:

    <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">double</span> <span class="org-variable-name">latitude</span>, <span class="org-type">double</span> <span class="org-variable-name">longitude</span><span class="org-rainbow-delimiters-depth-2">)</span>:
        m_name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>
      , m_latitude<span class="org-rainbow-delimiters-depth-2">(</span>latitude<span class="org-rainbow-delimiters-depth-2">)</span>
      , m_longitude<span class="org-rainbow-delimiters-depth-2">(</span>longitude<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">()</span>: Waypoint<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"&lt;EMPTY&gt;"</span>, 0.0, 0.0<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">Waypoint</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">return</span> os &lt;&lt; <span class="org-string">" Waypoint{ location = "</span>
                  &lt;&lt; rhs.m_name &lt;&lt; <span class="org-string">" ; lat = "</span>
                  &lt;&lt; rhs.m_latitude &lt;&lt; <span class="org-string">" ; long = "</span>
                  &lt;&lt; rhs.m_longitude &lt;&lt; <span class="org-string">" } "</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-function-name">private</span>:

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by boost serialize</span>
    <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Archive</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
    <span class="org-type">void</span> <span class="org-function-name">serialize</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Archive</span>&amp; <span class="org-variable-name">ar</span>, <span class="org-keyword">const</span> <span class="org-type">unsigned</span> <span class="org-type">int</span> <span class="org-variable-name">version</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">ar</span> &amp; <span class="org-variable-name">m_name</span>;
        <span class="org-type">ar</span> &amp; <span class="org-variable-name">m_latitude</span>;
        <span class="org-type">ar</span> &amp; <span class="org-variable-name">m_longitude</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=========== Boost Date Time ===============\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">d1</span> = <span class="org-constant">gr</span>::date<span class="org-rainbow-delimiters-depth-2">(</span>2009, 10, 20<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" date1 = "</span> &lt;&lt; d1 &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">auto</span> <span class="org-variable-name">mdate</span> = <span class="org-constant">gr</span>::date<span class="org-rainbow-delimiters-depth-2">(</span>2012, 06, 21<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">text</span> = <span class="org-string">" Date mdate is equal to: "</span> + <span class="org-constant">gr</span>::to_iso_string<span class="org-rainbow-delimiters-depth-2">(</span>mdate<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Text =&gt; "</span> &lt;&lt; text;

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=========== Boost Serialization ===============\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: this stream fs could be replaced by a real file stream.</span>
    <span class="org-comment-delimiter">//  </span><span class="org-comment">std::ofstream fs("archive.dat");</span>
    <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">fs</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Mock-file</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Serialization</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">Waypoint</span> <span class="org-variable-name">wp1</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Frankfurt"</span>, 50.1109, 8.6821<span class="org-rainbow-delimiters-depth-3">}</span>;
        <span class="org-type">Waypoint</span> <span class="org-variable-name">wp2</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"Bern"</span>,      40.9480, 7.4474<span class="org-rainbow-delimiters-depth-3">}</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">The stream buffer is only written to the destination when</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">this object goes out of scope and the destructor is called.</span>
        <span class="org-constant">boost</span>::<span class="org-constant">archive</span>::<span class="org-type">text_oarchive</span> <span class="org-variable-name">archive</span><span class="org-rainbow-delimiters-depth-3">(</span>fs<span class="org-rainbow-delimiters-depth-3">)</span>;
        archive &lt;&lt; wp1 &lt;&lt; wp2;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Serialized data in 'disk' = "</span> &lt;&lt; fs.str<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;


    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=========== Boost Deserialization ===============\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Note: Here fs could be replaced by a real input file stream</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">std::ifstream</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">Waypoint</span> <span class="org-variable-name">wpA</span>, <span class="org-variable-name">wpB</span>;
        <span class="org-constant">boost</span>::<span class="org-constant">archive</span>::<span class="org-type">text_iarchive</span> <span class="org-variable-name">archive</span><span class="org-rainbow-delimiters-depth-3">(</span>fs<span class="org-rainbow-delimiters-depth-3">)</span>;
        archive &gt;&gt; wpA &gt;&gt; wpB;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"wpA = "</span> &lt;&lt; wpA &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"wpB = "</span> &lt;&lt; wpB &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Program output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">=========== Boost Date Time ===============

 date1 = 2009-Oct-20
 Text =&gt;  Date mdate is equal to: 20120621
=========== Boost Serialization ===============

Serialized data<span class="org-keyword"> in</span> <span class="org-string">'disk'</span> = 22 serialization::archive 16 0 0 9 Frankfurt 5.01109000000000009e+01 8.68210000000000015e+00 4 Bern 4.09480000000000004e+01 7.44740000000000002e+00

=========== Boost Deserialization ===============

wpA =  Waypoint{ location = Frankfurt ; lat = 50.1109 ; long = 8.6821 } 
wpB =  Waypoint{ location = Bern ; lat = 40.948 ; long = 7.4474 } 
</pre>
</div>
</div>
</div>

<div id="outline-container-org49efcb6" class="outline-3">
<h3 id="org49efcb6"><span class="section-number-3">1.4</span> Boost projects with CMake / local boost installation</h3>
<div class="outline-text-3" id="text-1-4">
</div>
<div id="outline-container-org7164970" class="outline-4">
<h4 id="org7164970"><span class="section-number-4">1.4.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
This section shows how to install boost manually to a custom directory
on a Linux system without overriding any system installation of boost
at /usr/include, /lib or /lib64. 
</p>

<p>
Rationale: 
</p>

<ul class="org-ul">
<li>Although the package managers of Linux distributions are
convenient for installing development libraries, they have the
following drawbacks: they do not allow installing a specific
version of a library; installing a new version of the library,
overrides the old one and multiple versions cannot coexist.</li>
</ul>

<p>
Documentation:
</p>

<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_73_0/more/getting_started/unix-variants.html#get-boost">Boost Getting Started on Unix Variants - 1.73.0</a></li>

<li><a href="https://www.boost.org/doc/libs/1_73_0/libs/log/doc/html/log/installation/config.html">Configuring and building the library - 1.73.0</a></li>

<li><a href="https://stackoverflow.com/questions/9751271/how-to-build-boost-static-libs">c++ - How to build boost static libs? - Stack Overflow</a></li>
</ul>

<p>
Source code downloading: 
</p>

<ul class="org-ul">
<li>Github Repository:
<ul class="org-ul">
<li><a href="https://github.com/boostorg/boost">https://github.com/boostorg/boost</a></li>
</ul></li>

<li>Only - Current release:
<ul class="org-ul">
<li><a href="https://www.boost.org/users/download">https://www.boost.org/users/download</a></li>
</ul></li>

<li>Source code for old releases:
<ul class="org-ul">
<li><a href="https://sourceforge.net/projects/boost/files/">https://sourceforge.net/projects/boost/files/</a></li>
</ul></li>

<li>Pre-compiled Windows Binaries:
<ul class="org-ul">
<li><a href="https://sourceforge.net/projects/boost/files/boost-binaries/">https://sourceforge.net/projects/boost/files/boost-binaries/</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgd3a9bc1" class="outline-4">
<h4 id="orgd3a9bc1"><span class="section-number-4">1.4.2</span> Downloading and installing</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
Download boost sources with GIT shallow clone:
</p>

<ul class="org-ul">
<li>Clone just a single commit of boost repository
(<a href="https://github.com/boostorg/boost">boostorg/boost</a>) which tag is 'boost-1.70.0' into directory
./boost-src</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ git clone --recurse-submodule -b boost-1.70.0  https://github.com/boostorg/boost --depth=1 boost-src 
$ cd boost-src 
</pre>
</div>

<p>
Create the directory <span class="underline">libs</span>  ($HOME/libs)for installing the Boost libraries 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ mkdir -p ~/libs
</pre>
</div>

<ul class="org-ul">
<li>Build the <b>b2</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./bootstrap.sh --prefix=$<span class="org-variable-name">HOME</span>/libs/boost/1.70.0 
Building Boost.Build engine with toolset gcc... 
... ... ...   ... ... ...   ... ... ...   ... ... ...   ... ... ... 
... ... ...   ... ... ...   ... ... ...   ... ... ...   ... ... ... 
</pre>
</div>

<ul class="org-ul">
<li>Install and compile (Drink a coffee ☕ and wait the compilation &#x2026; &#x2026;)
<ul class="org-ul">
<li>It installs the library to the directory $HOME/libs</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./b2 install --prefix=$<span class="org-variable-name">HOME</span>/libs --link=static                                        &#9474;boost/
Performing configuration checks                                                         &#9474;
                                                                                        &#9474;mxpkf8@localhost 16:05 ~/libs
    - default address-model    : 64-bit (cached)                                        &#9474;$ rm -rf boost 
    - default architecture     : x86 (cached)                                           &#9474;
    - symlinks supported       : yes (cached)                                           &#9474;mxpkf8@localhost 16:06 ~/libs
    - C++11 mutex              : yes (cached)                                           &#9474;$ ls
    - lockfree boost::atomic_flag : no  (cached)            
  ... ... ...   ... ... ...   ... ... ...   ... ... ... 
  ... ... ...   ... ... ...   ... ... ...   ... ... ... 
</pre>
</div>

<ul class="org-ul">
<li>Check installation</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ tree -L 3 ~/libs
&#9500;&#9472;&#9472; include
&#9474;&#160;&#160; &#9492;&#9472;&#9472; boost
&#9474;&#160;&#160;     &#9500;&#9472;&#9472; aligned_storage.hpp
&#9474;&#160;&#160;     &#9500;&#9472;&#9472; call_traits.hpp
&#9474;&#160;&#160;     &#9500;&#9472;&#9472; compressed_pair.hpp
... ... ...    ... ... ...    ... ... ...    ... ... ... 
... ... ...    ... ... ...    ... ... ...    ... ... ... 
&#9474;&#160;&#160;     &#9500;&#9472;&#9472; variant
&#9474;&#160;&#160;     &#9500;&#9472;&#9472; variant.hpp
&#9474;&#160;&#160;     &#9492;&#9472;&#9472; vmd
&#9492;&#9472;&#9472; lib
    &#9500;&#9472;&#9472; cmake
    &#9474;&#160;&#160; &#9500;&#9472;&#9472; boost_fiber-1.70.0
    &#9474;&#160;&#160; &#9500;&#9472;&#9472; boost_fiber_numa-1.70.0
... ... ...    ... ... ...    ... ... ...    ... ... ... 
... ... ...    ... ... ...    ... ... ...    ... ... ... 
    &#9500;&#9472;&#9472; libboost_filesystem.so.1.70 -&gt; libboost_filesystem.so.1.70.0
    &#9492;&#9472;&#9472; libboost_filesystem.so.1.70.0

17 directories, 19 files
</pre>
</div>
</div>
</div>
<div id="outline-container-org4cf2605" class="outline-4">
<h4 id="org4cf2605"><span class="section-number-4">1.4.3</span> Manual compilation</h4>
<div class="outline-text-4" id="text-1-4-3">
<p>
<b>Sample file</b> 
</p>

<p>
File: test_boost.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/date_time/gregorian/gregorian.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">gr</span> = <span class="org-constant">boost</span>::gregorian;
<span class="org-keyword">namespace</span> <span class="org-constant">dt</span> = <span class="org-constant">boost</span>::date_time;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"=========== Boost Date Time ===============\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">auto</span> <span class="org-variable-name">d1</span> = <span class="org-constant">gr</span>::date<span class="org-rainbow-delimiters-depth-2">(</span>2009, 10, 20<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" date1 = "</span> &lt;&lt; d1 &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-keyword">auto</span> <span class="org-variable-name">mdate</span> = <span class="org-constant">gr</span>::date<span class="org-rainbow-delimiters-depth-2">(</span>2012, 06, 21<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">text</span> = <span class="org-string">" Date mdate is equal to: "</span> + <span class="org-constant">gr</span>::to_iso_string<span class="org-rainbow-delimiters-depth-2">(</span>mdate<span class="org-rainbow-delimiters-depth-2">)</span> + <span class="org-string">"\n"</span>;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Text =&gt; "</span> &lt;&lt; text;
  <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Manual compilation with dynamic linking</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ test-boost.cpp -o <span class="org-keyword">test-boost1.elf</span> -g -lboost_date_time -I$<span class="org-variable-name">HOME</span>/libs/include -L$<span class="org-variable-name">HOME</span>/libs/lib
</pre>
</div>

<p>
Attempt to run: 
</p>
<ul class="org-ul">
<li>Failure happens because the linker cannot find the boost_date
shared library in any the default directories in the search order:
directories in binary artifact RPATH; $LD_LIBRARY_PATH variable;
directories in /etc/ld.conf; /lib or /usr/lib.</li>
<li>On Windows, the search order is different, the first directory to
be searched is the current directory.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"> $ ./test-boost1.elf 
 ./test-boost1.elf: error while loading shared libraries
: libboost_date_time.so.1.70.0: cannot open shared object file: No such file or directory
</pre>
</div>

<p>
Check dependencies: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ldd test-boost1.elf 
        linux-vdso.so.1 (0x00007fffe5d76000)
        libboost_date_time.so.1.70.0 =&gt; not found
        libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007f48b78bc000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f48b7776000)
        libgcc_s.so.1 =&gt; /lib64/libgcc_s.so.1 (0x00007f48b775b000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f48b7591000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f48b7acf000)
</pre>
</div>

<p>
Solution 1: 
</p>
<ul class="org-ul">
<li>Put the shared library in LD_LIBRARY_PATH environment variable.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ env <span class="org-variable-name">LD_LIBRARY_PATH</span>=$<span class="org-variable-name">HOME</span>/libs/lib ./test-boost1.elf
=========== Boost Date Time ===============

 date1 = 2009-Oct-20
 Text =&gt;  Date mdate is equal to: 20120621
</pre>
</div>

<p>
Solution 2: 
</p>

<ul class="org-ul">
<li>Bundle the library with the application in the same directory and
run the application setting LD_LIBRARY_PATH</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cp ~/libs/lib/libboost_date_time.so.1.70.0 .

$ env <span class="org-variable-name">LD_LIBRARY_PATH</span>=$<span class="org-variable-name">PWD</span> ldd ./test-boost1.elf
        linux-vdso.so.1 (0x00007ffff9f1b000)
        libboost_date_time.so.1.70.0 =&gt; /home/mxpkf8/libboost_date_time.so.1.70.0 (0x00007fad75ba5000)
        libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007fad75994000)
  ... .... .... ....   ... .... .... ....   ... .... .... ....   ... .... .... .... 
  ... .... .... ....   ... .... .... ....   ... .... .... ....   ... .... .... .... 

$ env <span class="org-variable-name">LD_LIBRARY_PATH</span>=$<span class="org-variable-name">PWD</span> ./test-boost1.elf
=========== Boost Date Time ===============

 date1 = 2009-Oct-20
 Text =&gt;  Date mdate is equal to: 20120621
</pre>
</div>

<p>
Solution 3, compile with RPATH containing the executable's directory (./):
</p>

<ul class="org-ul">
<li>This procedure allows running the application without setting
LD_LIBRARY_PATH environment variable.</li>

<li>By setting the rpath to "$ORIGIN", the application becomes
relocatable, it can be moved with the shared libraries to other
directories without any linking errors. The linker searches the
shared libraries at the executable's directory just like in
Windows.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Copy shared library to current directory </span>
$ cp ~/libs/lib/libboost_date_time.so.1.70.0 .

<span class="org-comment-delimiter"># </span><span class="org-comment">Compile with dynamic linking, setting the RPATH to the executable's directory </span>
$ g++ test-boost.cpp -o <span class="org-keyword">test-boost3.elf</span> -g -Wl,-rpath=<span class="org-string">'$ORIGIN'</span>  -lboost_date_time -I$<span class="org-variable-name">HOME</span>/libs/include -L$<span class="org-variable-name">HOME</span>/libs/lib 

<span class="org-comment-delimiter"># </span><span class="org-comment">--- Check Dependencies ------------------#</span>
$ ldd test-boost3.elf 
        linux-vdso.so.1 (0x00007ffe49d83000)
        libboost_date_time.so.1.70.0 =&gt; ./libboost_date_time.so.1.70.0 (0x00007f8d96229000)
        libstdc++.so.6 =&gt; /lib64/libstdc++.so.6 (0x00007f8d96018000
   ... ....    ... ....    ... ....    ... ....    ... ....    ... .... 
   ... ....    ... ....    ... ....    ... ....    ... ....    ... .... 

 <span class="org-comment-delimiter"># </span><span class="org-comment">----- Run the application -------------#</span>
 $ ./test-boost3.elf 
 =========== Boost Date Time ===============

  date1 = 2009-Oct-20
  Text =&gt;  Date mdate is equal to: 20120621

 <span class="org-comment-delimiter"># </span><span class="org-comment">-------- Move the app to a new directory -------#</span>
 $ mkdir -p app 
 $ mv test-boost3.elf libboost_date_time.so.1.70.0 app

 <span class="org-comment-delimiter"># </span><span class="org-comment">------ Test the application again --------------#</span>
 $ app/test-boost3.elf 
 =========== Boost Date Time ===============

  date1 = 2009-Oct-20
  Text =&gt;  Date mdate is equal to: 20120621
</pre>
</div>

<p>
Display all libraries used by the application: 
</p>

<div class="org-src-container">
<pre class="src src-sh"> env <span class="org-variable-name">LD_DEBUG</span>=libs app/test-boost3.elf                                                                                                                              
    431158:     find <span class="org-variable-name">library</span>=libboost_date_time.so.1.70.0 [0]; searching                                                                                             
    431158:      search <span class="org-variable-name">path</span>=/home/mxpkf8/app/tls/haswell/x86_64:/home/mxpkf8/app/tls/haswell:/home/mxpkf8/app/tls/x86_64:/home/mxpkf8/app/tls:/home/mxpkf8/app/haswe
<span class="org-function-name">ll/x86_64</span>:/home/mxpkf8/app/haswell:/home/mxpkf8/app/x86_64:/home/mxpkf8/app             (RPATH from file app/test-boost3.elf)
    431158:       trying <span class="org-variable-name">file</span>=/home/mxpkf8/app/tls/haswell/x86_64/libboost_date_time.so.1.70.0

 ... ... ....  ... ... ....  ... ... ....  ... ... .... 
  ... ... ....  ... ... ....  ... ... ....  ... ... .... 

    431158:     find <span class="org-variable-name">library</span>=libstdc++.so.6 [0]; searching                                                                                                           
    431158:      search <span class="org-variable-name">path</span>=/home/mxpkf8/app           (RPATH from file app/test-boost3.elf)
    431158:       trying <span class="org-variable-name">file</span>=/home/mxpkf8/app/libstdc++.so.6
    431158:      search <span class="org-variable-name">cache</span>=/etc/ld.so.cache
    431158:       trying <span class="org-variable-name">file</span>=/lib64/libstdc++.so.6
    431158:
    431158:     find <span class="org-variable-name">library</span>=libm.so.6 [0]; searching
    431158:      search <span class="org-variable-name">path</span>=/home/mxpkf8/app           (RPATH from file app/test-boost3.elf)
    431158:       trying <span class="org-variable-name">file</span>=/home/mxpkf8/app/libm.so.6
    431158:      search <span class="org-variable-name">cache</span>=/etc/ld.so.cache
    431158:       trying <span class="org-variable-name">file</span>=/lib64/libm.so.6
 ... ... ....  ... ... ....  ... ... ....  ... ... .... 

</pre>
</div>

<p>
<b>Manual compilation with static linking</b> 
</p>

<ul class="org-ul">
<li>Static linking appends the library's object code to the executable
binary which makes the distribution and deployment easier.</li>

<li>Note: some open source licenses, such as LGPL, GPL2 and GPL3, only
allow static linking with the application only if it is also
open source licensed under the same license with source code
disclosure.</li>

<li>Compile manually with static linking against boost libraries
[Approach 1]
<ul class="org-ul">
<li>-I./&lt;PATH-TO-HEADERS&gt; (Files: *.h, *.hxx, *.hpp)</li>
<li>-L./&lt;PATH-TO-LIBRARIES&gt; (Files: *.so, *.)</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ g++ test-boost.cpp -o <span class="org-keyword">test-boost2.elf</span> -g <span class="org-sh-escaped-newline">\</span>
    $<span class="org-variable-name">HOME</span>/libs/lib/libboost_date_time.a <span class="org-sh-escaped-newline">\</span>
    -I$<span class="org-variable-name">HOME</span>/libs/include <span class="org-sh-escaped-newline">\</span>
    -L$<span class="org-variable-name">HOME</span>/libs/lib 
</pre>
</div>

<ul class="org-ul">
<li>Run executable</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ ./test-boost2.elf 
=========== Boost Date Time ===============

 date1 = 2009-Oct-20
 Text =&gt;  Date mdate is equal to: 20120621
</pre>
</div>
</div>
</div>
<div id="outline-container-org290b324" class="outline-4">
<h4 id="org290b324"><span class="section-number-4">1.4.4</span> Compilation with CMake</h4>
<div class="outline-text-4" id="text-1-4-4">
<p>
<b>Building with CMake / Approach 1</b> 
</p>

<p>
File: CMakeLists.txt [VERSION 1]
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(boost-manually)

<span class="org-comment-delimiter">#</span><span class="org-comment">========================================#</span>
<span class="org-builtin">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-builtin">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment-delimiter">#</span><span class="org-comment">=========== Find-Package =============#</span>
<span class="org-builtin">set</span>(Boost_USE_STATIC_LIBS ON)
<span class="org-builtin">set</span>(Boost_NO_SYSTEM_PATHS TRUE)

<span class="org-function-name">find_package</span>(Boost REQUIRED date_time serialization )

<span class="org-comment-delimiter">#</span><span class="org-comment">=========== Targets ======================#</span>
<span class="org-function-name">add_executable</span>(test-boost-app test-boost.cpp)
<span class="org-function-name">target_link_libraries</span>(test-boost-app Boost::date_time)
</pre>
</div>

<p>
Build from command line: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Configure </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------------</span>
$ cmake -H. -B_build -DCMAKE_BUILD_TYPE=Debug <span class="org-sh-escaped-newline">\</span>
            -DBoost_NO_BOOST_CMAKE=TRUE <span class="org-sh-escaped-newline">\</span>
            -DBoost_NO_SYSTEM_PATHS=TRUE <span class="org-sh-escaped-newline">\</span>
            -DBOOST_ROOT:<span class="org-variable-name">PATHNAME</span>=$<span class="org-variable-name">HOME</span>/libs <span class="org-sh-escaped-newline">\</span>
            -DBoost_LIBRARY_DIR:<span class="org-variable-name">FILEPATH</span>=$<span class="org-variable-name">HOME</span>/libs/lib

<span class="org-comment-delimiter"># </span><span class="org-comment">Compile </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------------</span>
$ cmake --build _build --target 

<span class="org-comment-delimiter"># </span><span class="org-comment">Run </span>
<span class="org-comment-delimiter">#</span><span class="org-comment">--------------------------------------------</span>
$ _build/test-boost-app 
=========== Boost Date Time ===============

 date1 = 2009-Oct-20
 Text =&gt;  Date mdate is equal to: 20120621

</pre>
</div>

<p>
<b>Building with CMake / Approach 2</b> 
</p>

<ul class="org-ul">
<li>The CMake-related variables are set in the CMakeLists.txt file.</li>
</ul>

<p>
File: CMakeLists.txt [VERSION 2]
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(boost-manually)
<span class="org-comment-delimiter">#</span><span class="org-comment">========================================#</span>

<span class="org-builtin">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-builtin">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment-delimiter">#</span><span class="org-comment">=========== Find-Package =============#</span>

<span class="org-builtin">set</span>(Boost_USE_STATIC_LIBS      ON)
<span class="org-builtin">set</span>(Boost_NO_SYSTEM_PATHS      TRUE)
<span class="org-builtin">set</span>(BOOST_ROOT        $<span class="org-variable-name">ENV</span>{HOME}/libs)
<span class="org-builtin">set</span>(BOOST_LIBRARY_DIR $<span class="org-variable-name">ENV</span>{HOME}/libs)

<span class="org-function-name">message</span>([TRACE] <span class="org-string">" BOOST_LIBRARY_DIR = ${BOOST_LIBRARY_DIR}"</span>)

<span class="org-function-name">find_package</span>(Boost REQUIRED date_time serialization )

<span class="org-comment-delimiter">#</span><span class="org-comment">=========== Targets ======================#</span>

<span class="org-function-name">add_executable</span>(test-boost-app test-boost.cpp)
<span class="org-function-name">target_link_libraries</span>(test-boost-app Boost::date_time)
</pre>
</div>

<p>
Build: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter">#</span><span class="org-comment">--------- Configure -----------#</span>
$ cmake -H. -B_build 
[TRACE] BOOST_LIBRARY_DIR = /home/mxpkf8/libs
-- Configuring done
-- Generating done
-- Build files have been written to: /home/mxpkf8/_build

<span class="org-comment-delimiter">#</span><span class="org-comment">--------- Build / Compile -----#</span>
$ cmake --build _build --target

<span class="org-comment-delimiter">#</span><span class="org-comment">--------- Run -----------------#</span>
$ _build/test-boost-app 
=========== Boost Date Time ===============

 date1 = 2009-Oct-20
 Text =&gt;  Date mdate is equal to: 20120621
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgfeb52be" class="outline-3">
<h3 id="orgfeb52be"><span class="section-number-3">1.5</span> Boost project with CMake and Conan</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Conan package manager allows a project use mutiple versions of Boost
libraries without prior manual installation that is time consuming as
the library has to be set up for a specific version and
compiler. Conan also provides modular Boost packages that allows
installing individual boost libraries whithout installing everything. 
</p>

<p>
<b>Boost Libraries (whole-package) - Conan References</b>
</p>

<ul class="org-ul">
<li>Boost version 1.64.0 / <a href="https://bintray.com/conan-community/conan/boost%3Aconan/1.64.0%3Astable">boost/1.64.0@conan/stable</a></li>

<li>Boost version 1.68.0 / <a href="https://bintray.com/conan-community/conan/boost%3Aconan/1.68.0%3Astable">boost/1.68.0@conan/stable</a></li>

<li>Boost version 1.69.0 / <a href="https://bintray.com/conan-community/conan/boost%3Aconan/1.69.0%3Astable">boost/1.69.0@conan/stable</a></li>

<li>Boost version 1.7.0  / <a href="https://bintray.com/conan-community/conan/boost%3Aconan/1.70.0%3Astable">boost/1.70.0@conan/stable</a></li>
</ul>


<p>
<b>Modular packages for Boost Libraries</b> 
</p>

<ul class="org-ul">
<li><a href="https://bintray.com/bincrafters/public-conan/boost_asio%3Abincrafters">boost_asio:bincrafters</a>
<ul class="org-ul">
<li>Portable networking and other low-level I/O, including sockets,
timers, hostname resolution, socket iostreams, serial ports, file
descriptors and Windows HANDLEs, from Chris Kohlhoff</li>
<li>Sample conan references:
<ul class="org-ul">
<li>boost_asio/1.69.0@bincrafters/stable</li>
<li>boost_asio/1.68.0@bincrafters/stable</li>
<li>boost_asio/1.67.0@bincrafters/stable</li>
</ul></li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_fiber%3Abincrafters">boost_fiber:bincrafters</a>
<ul class="org-ul">
<li>(C++11) Userland threads library, from Oliver Kowalke</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_ratio%3Abincrafters">boost_ratio::bincrafters</a>
<ul class="org-ul">
<li>Sample conan reference:  boost_ratio/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_spirit%3Abincrafters">boost_spirit:bincrafters</a>
<ul class="org-ul">
<li>Parser framework represents parsers directly as EBNF grammars in
inlined C++, from Joel de Guzman, Hartmut Kaiser and Dan Nuffer</li>
<li>Sample conan reference: boost_spirit/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_serialization%3Abincrafters">boost_serialization::bincrafters</a></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_tokenizer%3Abincrafters">boost_tokenizer:bincrafters</a>
<ul class="org-ul">
<li>Break of a string or other character sequence into a series of
tokens, from John Bandela.</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_type_index%3Abincrafters">boost_type_index:bincrafters</a>
<ul class="org-ul">
<li>Runtime and Compile time copyable type info, from Antony Polukhin</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_system%3Abincrafters">boost_system:bincrafters</a> 
<ul class="org-ul">
<li>Operating system support, including the diagnostics support that
will be part of the C++0x standard library, from Beman Dawes</li>
<li>Sample conan reference:  boost_system/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_statechart%3Abincrafters">boost_statechart:bincrafters</a>
<ul class="org-ul">
<li>Arbitrarily complex finite state machines can be implemented in
easily readable and maintainable C++ code, from Andreas Huber
Dönni.</li>
<li>Sample conan reference:  boost_statechart/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_stacktrace%3Abincrafters">boost_stacktrace:bincrafters</a>
<ul class="org-ul">
<li>Sample conan reference:  boost_stacktrace/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_range%3Abincrafters">boost_range::bincrafters</a></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_scope_exit%3Abincrafters">boost_scope_exit:bincrafters</a>
<ul class="org-ul">
<li>Execute arbitrary code at scope exit, from Alexander Nasonov</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_signals2%3Abincrafters">boost_signals2:bincrafters</a>
<ul class="org-ul">
<li>Managed signals &amp; slots callback implementation (thread-safe
version 2), from Frank Mori Hess.</li>
<li>Sample Reference: boost_signals2/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_smart_ptr%3Abincrafters">boost_smart_ptr:bincrafters</a>
<ul class="org-ul">
<li>Smart pointer class templates, from Greg Colvin, Beman Dawes,
Peter Dimov, Darin Adler and Glen Fernandes</li>
<li>Sample Reference:  boost_smart_ptr/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_sort%3Abincrafters">boost_sort:bincrafters</a>
<ul class="org-ul">
<li>High-performance templated sort functions, from Steven Ross</li>
<li>Sample Reference:  boost_sort/1.69.0@bincrafters/stable</li>
</ul></li>

<li><a href="https://bintray.com/bincrafters/public-conan/boost_tti%3Abincrafters">boost_tti:bincrafters</a> 
<ul class="org-ul">
<li>Type Traits Introspection library, from Edward Diener</li>
</ul></li>
</ul>


<p>
<b>CMakeLists.txt</b> example: 
</p>

<ul class="org-ul">
<li>Note: It uses Boost version 1.7.0 (Conan reference:
boost/1.70.0@conan/stable) and the sub-packages
Boost::serialization and Boost::date_time.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 2.8)
<span class="org-function-name">project</span>(conan-boost)

<span class="org-comment">#========================================#</span>

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)

<span class="org-comment"># set(CMAKE_VERBOSE_MAKEFILE ON CACHE BOOL "ON")</span>
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment">#=========== Conan Bootstrap =================#</span>

<span class="org-function-name">message</span>( [INFO] <span class="org-string">" CMAKE_BUILD_TYPE = ${</span><span class="org-variable-name">CMAKE_BUILD_TYPE</span><span class="org-string">}"</span>)

<span class="org-comment"># Download automatically, you can also just copy the conan.cmake file</span>
<span class="org-keyword">if</span>(NOT EXISTS <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
   <span class="org-function-name">message</span>(STATUS <span class="org-string">"Downloading conan.cmake from https://github.com/conan-io/cmake-conan"</span>)
   <span class="org-function-name">file</span>(DOWNLOAD <span class="org-string">"https://github.com/conan-io/cmake-conan/raw/v0.13/conan.cmake"</span>
                 <span class="org-string">"${</span><span class="org-variable-name">CMAKE_BINARY_DIR</span><span class="org-string">}/conan.cmake"</span>)
<span class="org-keyword">endif</span>()

<span class="org-function-name">include</span>(${<span class="org-variable-name">CMAKE_BINARY_DIR</span>}/conan.cmake)
<span class="org-function-name">set</span>(CONAN_PROFILE default)

<span class="org-function-name">conan_cmake_run</span>( REQUIRES
                 boost/1.70.0@conan/stable
                 BASIC_SETUP
                 BUILD missing )

<span class="org-comment">#=========== Find Package ================#</span>

<span class="org-function-name">set</span>(Boost_USE_STATIC_LIBS ON)

<span class="org-function-name">find_package</span>(Boost REQUIRED date_time serialization )

<span class="org-comment">#=========== Targets ======================#</span>

<span class="org-function-name">add_executable</span>(conan-boost-app main.cpp)
<span class="org-function-name">target_link_libraries</span>(conan-boost-app Boost::date_time Boost::serialization)
</pre>
</div>


<p>
See: 
</p>

<ul class="org-ul">
<li>Announcement: Boost Package Deprecations
<ul class="org-ul">
<li><a href="https://bincrafters.github.io/2018/02/19/Boost-package-deprecations/">https://bincrafters.github.io/2018/02/19/Boost-package-deprecations/</a></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgf4a4ed5" class="outline-3">
<h3 id="orgf4a4ed5"><span class="section-number-3">1.6</span> Boost Format</h3>
<div class="outline-text-3" id="text-1-6">
<p>
The boost library format provides a type-safe printf-like notation
which is concise as the old C-printf functions (printf, sprintf,
fprintf) and less intrusive and verbose than the C++ (&lt;&lt;) insertion
operator. 
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/libs/format/doc/format.html">Boost format</a></li>
<li>Header: &lt;boost/format.hpp&gt;</li>
<li>Functions:
<ul class="org-ul">
<li>boost::str</li>
<li>boost::format</li>
</ul></li>
</ul>

<p>
Using the library: 
</p>
<ul class="org-ul">
<li>As the library is a header-only library as almost all boost
libraries. All what is needed to use it is just include the
following header.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/format.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Example 1: Test in CERN's ROOT REPL.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/format.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-type">double</span> <span class="org-variable-name">x</span> = 10.0;

&gt;&gt; <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-type">basic_format</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7ffcfe86fbd8

&gt;&gt; <span class="org-keyword">auto</span> fmt = <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; fmt
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-type">basic_format</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f8c7b52b020
&gt;&gt;  

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; fmt &lt;&lt; <span class="org-string">"\n"</span>;
 x = 10 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.16228 ; log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.32193

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
 x = 10 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.16228 ; log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.32193
&gt;&gt; 
</pre>
</div>

<p>
Example 2: Multiline code. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Pasting the following code block in the REPL between curly</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">brackets, including them.</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
 <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" x = %1% ; sqrt(x) = %2% ; log2(x) = %3%"</span><span class="org-rainbow-delimiters-depth-2">)</span> 
              % x % <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> % <span class="org-constant">std</span>::log2<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span> 
<span class="org-comment-delimiter">// </span><span class="org-comment">Output:</span>
x = 10 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.16228 ; log2<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 3.32193
</pre>
</div>

<p>
Example 3.A: Turn format object into std::string.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> z = M_PI_2;
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.5707963

&gt;&gt; <span class="org-keyword">auto</span> fm = <span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"operation = %1% - z = %2% %1%(%2%) = %3%"</span><span class="org-rainbow-delimiters-depth-1">)</span> % <span class="org-string">"sin"</span> % z % <span class="org-constant">std</span>::sin<span class="org-rainbow-delimiters-depth-1">(</span>z<span class="org-rainbow-delimiters-depth-1">)</span> ;
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"fm = "</span> &lt;&lt; fm &lt;&lt; <span class="org-string">"\n"</span>;
fm = operation = sin - z = 1.5708 sin<span class="org-rainbow-delimiters-depth-1">(</span>1.5708<span class="org-rainbow-delimiters-depth-1">)</span> = 1

&gt;&gt; <span class="org-constant">std</span>::string result = fm.str<span class="org-rainbow-delimiters-depth-1">()</span>;
&gt;&gt; result
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"operation = sin - z = 1.5708 sin(1.5708) = 1"</span>
</pre>
</div>

<p>
Example 3.B: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string result2 = <span class="org-constant">boost</span>::str<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::format<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"operation = %1% - z = %2% %1%(%2%) = %3%"</span><span class="org-rainbow-delimiters-depth-2">)</span> % <span class="org-string">"sin"</span> % z % <span class="org-constant">std</span>::sin<span class="org-rainbow-delimiters-depth-2">(</span>z<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; result2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"operation = sin - z = 1.5708 sin(1.5708) = 1"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org673691b" class="outline-3">
<h3 id="org673691b"><span class="section-number-3">1.7</span> Boost Lexical_cast</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Boost lexical cast is header-only library for converting from
built-int types to string and from string to built-in types. 
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/boost_lexical_cast.html#boost_lexical_cast.motivation">Boost Lexical Cast</a></li>
<li>Header: &lt;boost/format.hpp&gt;</li>
<li>Functions:
<ul class="org-ul">
<li>boost::lexical_cast</li>
</ul></li>
</ul>

<p>
Example: 
</p>

<ul class="org-ul">
<li><b>Headers and namespace:</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/lexical_cast.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Namespace alias </span>
<span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;
</pre>
</div>

<p>
<b>Basic conversions:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"456"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 456

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">".4615e3"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 461.50000

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"inf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> inf

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"34e5"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 3400000.0L
&gt;&gt; 

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"inf error"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: 
<span class="org-function-name">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">clone_impl</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">error_info_injector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::bad_lexical_cast<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-1">&gt;</span> 
 caught: bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">" asdsas "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: 
<span class="org-function-name">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">clone_impl</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">error_info_injector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::bad_lexical_cast<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-1">&gt;</span> 
<span class="org-function-name">caught</span>: bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target
  &gt;&gt; 

&gt;&gt; <span class="org-constant">b</span>::lexical_cast<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">" 100 "</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: 
 <span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">clone_impl</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">exception_detail</span>::<span class="org-type">error_info_injector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::bad_lexical_cast<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-rainbow-delimiters-depth-1">&gt;</span> 
 caught: bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target
&gt;&gt; 
</pre>
</div>

<p>
<b>Catch exceptions:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-type">void</span> <span class="org-function-name">PrintSquareRoot</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">number_str</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-type">double</span> <span class="org-variable-name">x</span> = <span class="org-constant">boost</span>::lexical_cast<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>number_str<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"x = "</span> &lt;&lt; x
                  &lt;&lt; <span class="org-string">" ; sqrt(x) = "</span> &lt;&lt; <span class="org-constant">std</span>::sqrt<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>
                  &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">boost</span>::<span class="org-type">bad_lexical_cast</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span>
     <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"34.34"</span><span class="org-rainbow-delimiters-depth-1">)</span>
x = 34.34 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = 5.86003

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"-125.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
x = -125 ; sqrt<span class="org-rainbow-delimiters-depth-1">(</span>x<span class="org-rainbow-delimiters-depth-1">)</span> = -nan

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"-12dsad 5.0"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" "</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; PrintSquareRoot<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">" 100 "</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>ERROR<span class="org-rainbow-delimiters-depth-1">]</span> bad lexical cast: source type value could <span class="org-keyword">not</span> be interpreted as target
&gt;&gt; 
</pre>
</div>

<p>
<b>Function try_lexical_convert</b> 
</p>

<p>
Convert from string to built-in type without exceptions. 
</p>

<p>
Pseudo-signature: 
</p>
<ul class="org-ul">
<li>Returns true if succeed to convert source type to target type and
then sets the result variable. Otherwise, the function returns
false.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">boost</span>::<span class="org-constant">conversion</span> 
<span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Target</span>, <span class="org-keyword">typename</span> <span class="org-type">Source</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
  <span class="org-type">bool</span> <span class="org-function-name">try_lexical_convert</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Source</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">arg</span>, <span class="org-type">Targe</span>&amp; <span class="org-variable-name">result</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Testing: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> z = 0.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000

&gt;&gt; <span class="org-constant">boost</span>::<span class="org-constant">conversion</span>::try_lexical_convert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200.34"</span>, z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 200.34000

&gt;&gt; <span class="org-constant">boost</span>::<span class="org-constant">conversion</span>::try_lexical_convert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"200 error .34"</span>, z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 200.00000

&gt;&gt; <span class="org-constant">boost</span>::<span class="org-constant">conversion</span>::try_lexical_convert<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"not-a-number"</span>, z<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 0.0000000
</pre>
</div>
</div>
</div>
<div id="outline-container-org5c8032d" class="outline-3">
<h3 id="org5c8032d"><span class="section-number-3">1.8</span> Boost Tokenizer</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Boost.tokenizer header-only library allows iterating over words or
tokens of a string. 
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_66_0/libs/tokenizer/introduc.htm">https://www.boost.org/doc/libs/1_66_0/libs/tokenizer/introduc.htm</a></li>
</ul>

<p>
Example: 
</p>

<ul class="org-ul">
<li>File: tokenizer.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/tokenizer.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n======= EXPERIMENT 1 ===============\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line1</span> = <span class="org-string">" 10.243, 9, \"game theory\", 200, \"zero sum game\", risk, return, payoff"</span>;
        <span class="org-constant">b</span>::<span class="org-type">tokenizer</span><span class="org-rainbow-delimiters-depth-3">&lt;&gt;</span> <span class="org-variable-name">tok</span><span class="org-rainbow-delimiters-depth-3">{</span>line1<span class="org-rainbow-delimiters-depth-3">}</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">tk</span>: tok<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; tk &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n======= EXPERIMENT 2 ===============\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span> = <span class="org-string">" \"risk reward\" , 200 , \"volatility payoff\" , 98.341 ,timing "</span>;
        <span class="org-constant">b</span>::<span class="org-type">tokenizer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">b</span>::<span class="org-type">escaped_list_separator</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">tok</span><span class="org-rainbow-delimiters-depth-3">{</span>line<span class="org-rainbow-delimiters-depth-3">}</span>;

        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">tk</span>: tok<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; tk &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-rainbow-delimiters-depth-3">}</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n======= EXPERIMENT 3 - Old Iterator for-loop API =============\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span> = <span class="org-string">"934, \"boost tokenizer\", C++,   \"C++17 C++20\", rust, \"ada core\" "</span>;

        <span class="org-keyword">using</span> <span class="org-type">tokenizer_t</span> = <span class="org-constant">b</span>::<span class="org-type">tokenizer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">b</span>::<span class="org-type">escaped_list_separator</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>;

        <span class="org-type">tokenizer_t</span> <span class="org-variable-name">tok</span><span class="org-rainbow-delimiters-depth-3">{</span>line<span class="org-rainbow-delimiters-depth-3">}</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">tokenizer_t</span>::<span class="org-type">const_iterator</span> <span class="org-variable-name">it</span> = tok.begin<span class="org-rainbow-delimiters-depth-4">()</span>; it != tok.end<span class="org-rainbow-delimiters-depth-4">()</span>; it++<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; *it &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-rainbow-delimiters-depth-3">}</span>

    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n======= EXPERIMENT 4 ===============\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span> = <span class="org-string">" 100.34, -9.341, 8.62 ,89.235 , 79.513 , 896.2"</span>;

        <span class="org-keyword">using</span> <span class="org-type">tokenizer_t</span> = <span class="org-constant">b</span>::<span class="org-type">tokenizer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">b</span>::<span class="org-type">escaped_list_separator</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>;
        <span class="org-type">tokenizer_t</span> <span class="org-variable-name">tok</span> <span class="org-rainbow-delimiters-depth-3">(</span>line<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">data</span>;

        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">w</span>: tok<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            data.push_back<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">std</span>::stod<span class="org-rainbow-delimiters-depth-5">(</span>w<span class="org-rainbow-delimiters-depth-5">)</span><span class="org-rainbow-delimiters-depth-4">)</span>;
        <span class="org-rainbow-delimiters-depth-3">}</span>

        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: data<span class="org-rainbow-delimiters-depth-3">)</span>
        <span class="org-rainbow-delimiters-depth-3">{</span>
            <span class="org-constant">std</span>::cout &lt;&lt; x * 100 &lt;&lt; <span class="org-string">" "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Compiling: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ tokenizer.cpp -o <span class="org-keyword">tokenizer.bin</span> --std=c++1z -g -O0 -Wall &amp;&amp; ./tokenizer.bin 
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">======= EXPERIMENT 1 ===============

10
243
9
game
theory
200
zero
sum
game
risk
return
payoff

======= EXPERIMENT 2 ===============

 risk reward 
 200 
 volatility payoff 
 98.341 
timing 

======= EXPERIMENT 3 - Old Iterator for-loop API =============

934
 boost tokenizer
 C++
   C++17 C++20
 rust
 ada core 

======= EXPERIMENT 4 ===============

10034 
-934.1 
862 
8923.5 
7951.3 
89620 
</pre>
</div>
</div>
</div>

<div id="outline-container-org6a00bd0" class="outline-3">
<h3 id="org6a00bd0"><span class="section-number-3">1.9</span> Boost string algo</h3>
<div class="outline-text-3" id="text-1-9">
<p>
Provides lots of useful string utility functions that are missing in
the standard library. 
</p>

<ul class="org-ul">
<li>Documentation:
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/string_algo/usage.html">Boost String Main Documentation</a></li>
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/string_algo/quickref.html">Quick Referece card.</a></li>
</ul></li>
<li>Header: &lt;boost/algorithm/string.hpp&gt;</li>
<li>Functions:
<ul class="org-ul">
<li>boost::to_upper</li>
<li>boost::to_lower</li>
<li>boost::trim</li>
<li>boost::iends_with</li>
<li>boost::istarts_with</li>
<li>boost::replace</li>
<li>boost::replace_first</li>
</ul></li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Boost header and namespace alias: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/algorithm/string.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">b =&gt; Namespace alias to boost namespace. </span>
<span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;
</pre>
</div>

<p>
Convert string to upper/lower case.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string s = <span class="org-string">" C++ is an old new programmign LANGUAGE"</span>;
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">To upper case </span>
&gt;&gt; <span class="org-constant">b</span>::to_upper<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" C++ IS AN OLD NEW PROGRAMMIGN LANGUAGE"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">To lower case:</span>
&gt;&gt; <span class="org-constant">b</span>::to_lower<span class="org-rainbow-delimiters-depth-1">(</span>s<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; s
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">" c++ is an old new programmign language"</span>
</pre>
</div>

<p>
Trim string on both sides: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string ss = <span class="org-string">"   A string with  spaces   "</span>;
&gt;&gt; <span class="org-constant">b</span>::trim<span class="org-rainbow-delimiters-depth-1">(</span>ss<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; ss
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"A string with  spaces"</span>
</pre>
</div>

<p>
Check whether starts with some prefix: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Checks whether first string argument starts with 'industry</span>
&gt;&gt; <span class="org-constant">b</span>::istarts_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"revenues outlook.pdf"</span>, <span class="org-string">"industry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

&gt;&gt; <span class="org-constant">b</span>::istarts_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"industry revenues outlook.pdf"</span>, <span class="org-string">"industry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>

&gt;&gt; <span class="org-constant">b</span>::istarts_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"   industry revenues outlook.pdf"</span>, <span class="org-string">"industry"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
</pre>
</div>

<p>
Check whether string ends with some suffix:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Checks whether first strigns ends with suffix '.pdf'</span>
&gt;&gt;  <span class="org-constant">b</span>::iends_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"revenues-outlook.xls"</span>, <span class="org-string">".pdf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

&gt;&gt;  <span class="org-constant">b</span>::iends_with<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"revenues-outlook.pdf"</span>, <span class="org-string">".pdf"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
</pre>
</div>

<p>
Replace all strings: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::string words = <span class="org-string">"ASM c++ low c++ ASM  python bytes ASM c++"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Replace 'c++' by 'CEE-PLUS-PLUS'</span>
&gt;&gt; <span class="org-constant">b</span>::replace_all<span class="org-rainbow-delimiters-depth-1">(</span>words, <span class="org-string">"c++"</span>, <span class="org-string">"CEE-PLUS-PLUS"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; words
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"ASM CEE-PLUS-PLUS low CEE-PLUS-PLUS ASM  python bytes ASM CEE-PLUS-PLUS"</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">b</span>::replace_all<span class="org-rainbow-delimiters-depth-1">(</span>words, <span class="org-string">"CEE-PLUS-PLUS"</span>, <span class="org-string">"cpp"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; words
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"ASM cpp low cpp ASM  python bytes ASM cpp"</span>
</pre>
</div>


<p>
Split string: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string dataset = <span class="org-string">" -100.23 ; 577.15 ; 99.34 ; 1003.5"</span>;
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> split_vector<span class="org-rainbow-delimiters-depth-1">{}</span>;

&gt;&gt; split_vector
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Split string dataset at delimiter ";"</span>
&gt;&gt; <span class="org-constant">b</span>::split<span class="org-rainbow-delimiters-depth-1">(</span>split_vector, dataset, <span class="org-constant">b</span>::is_any_of<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">";"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Result </span>
&gt;&gt; split_vector
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-string">" -100.23 "</span>, <span class="org-string">" 577.15 "</span>, <span class="org-string">" 99.34 "</span>, <span class="org-string">" 1003.5"</span> <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org7ba3cc3" class="outline-3">
<h3 id="org7ba3cc3"><span class="section-number-3">1.10</span> Boost Program Options</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Boost program options is a boost library for parsing and handling
command line options.
</p>
<ul class="org-ul">
<li>Note: This library is non-header only and requires linking.</li>
</ul>

<p>
Documentation:
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_70_0/doc/html/program_options.html">https://www.boost.org/doc/libs/1_70_0/doc/html/program_options.html</a></li>
</ul>

<p>
See: 
</p>
<ul class="org-ul">
<li><a href="https://iscinumpy.gitlab.io/post/comparing-cli11-and-boostpo/">Comparing CLI11 and Boost Program Options</a></li>
</ul>

<p>
<b>Example</b>:
</p>

<p>
File: <b>boost_program_options.cpp</b> 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstdint</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/program_options.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">po</span> = <span class="org-constant">boost</span>::program_options;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Positional argument values</span>
    <span class="org-constant">std</span>::<span class="org-type">string</span>              <span class="org-variable-name">server_name</span>;
    <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">server_paths</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Optional argument values</span>
    <span class="org-constant">std</span>::<span class="org-type">uint16_t</span>            <span class="org-variable-name">server_port</span> = 8080;
    <span class="org-constant">std</span>::<span class="org-type">string</span>              <span class="org-variable-name">server_host</span> = <span class="org-string">"0.0.0.0"</span>;
    <span class="org-type">bool</span>                     <span class="org-variable-name">server_show_file</span> = <span class="org-constant">false</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">===== Positional Arguments =====================//</span>

    <span class="org-constant">po</span>::<span class="org-type">variables_map</span> <span class="org-variable-name">vmap</span>;
    <span class="org-constant">po</span>::<span class="org-type">options_description</span> <span class="org-variable-name">desc</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-string">"Small IOT Web Server"</span> <span class="org-rainbow-delimiters-depth-2">}</span>;

    <span class="org-constant">po</span>::<span class="org-type">positional_options_description</span> <span class="org-variable-name">pos</span>;
    pos.add<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"name"</span>, 1<span class="org-rainbow-delimiters-depth-2">)</span>;
    pos.add<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"path"</span>, -1<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">==== Optional Arguments =========================//</span>

    desc.add_options<span class="org-rainbow-delimiters-depth-2">()</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"help,h"</span>, <span class="org-string">"Show this help message"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"port,p"</span>,       <span class="org-constant">po</span>::value<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">uint16_t</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>&amp;server_port<span class="org-rainbow-delimiters-depth-3">)</span>, <span class="org-string">"Set web server port [default 8080]"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"host"</span>,         <span class="org-constant">po</span>::value<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>&amp;server_host<span class="org-rainbow-delimiters-depth-3">)</span>,   <span class="org-string">"Allowed host [default 0.0.0.0]"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"show"</span>,         <span class="org-constant">po</span>::bool_switch<span class="org-rainbow-delimiters-depth-3">(</span>&amp;server_show_file<span class="org-rainbow-delimiters-depth-3">)</span>,     <span class="org-string">"Show directory files [default false]"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"version,v"</span>,                                            <span class="org-string">"Show version and exit"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">---- Positional Arguments ----//</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"name"</span>, <span class="org-constant">po</span>::value<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span>,                       <span class="org-string">"Web Server Name"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"path"</span>, <span class="org-constant">po</span>::value<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span>,          <span class="org-string">"Paths that will be served"</span><span class="org-rainbow-delimiters-depth-2">)</span>
        ;

    <span class="org-comment-delimiter">//</span><span class="org-comment">==== Parse Command Line Arguments ===============//</span>

    <span class="org-keyword">try</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-keyword">auto</span> <span class="org-variable-name">parsed</span> = <span class="org-constant">po</span>::command_line_parser<span class="org-rainbow-delimiters-depth-3">(</span>argc, argv<span class="org-rainbow-delimiters-depth-3">)</span>
                          .options<span class="org-rainbow-delimiters-depth-3">(</span>desc<span class="org-rainbow-delimiters-depth-3">)</span>
                          .positional<span class="org-rainbow-delimiters-depth-3">(</span>pos<span class="org-rainbow-delimiters-depth-3">)</span>
                         <span class="org-comment-delimiter">// </span><span class="org-comment">.allow_unregistered()</span>
                          .run<span class="org-rainbow-delimiters-depth-3">()</span>;
      <span class="org-constant">po</span>::store<span class="org-rainbow-delimiters-depth-3">(</span>parsed, vmap<span class="org-rainbow-delimiters-depth-3">)</span>;
      <span class="org-constant">po</span>::notify<span class="org-rainbow-delimiters-depth-3">(</span>vmap<span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">catch</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">boost</span>::<span class="org-constant">program_options</span>::<span class="org-type">error</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [ERROR] "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">=== Handle help command line options =============//</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Print help to user if he passes no option -h or --help */</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>vmap.empty<span class="org-rainbow-delimiters-depth-3">()</span> || vmap.count<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"help"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"USAGE: "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-3">[</span>0<span class="org-rainbow-delimiters-depth-3">]</span> &lt;&lt; <span class="org-string">" &lt;OPTIONS&gt; &lt;NAME&gt; [&lt;PATH&gt; ...]"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        desc.print<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">/* </span><span class="org-comment">Show program version when user passes --version or -v */</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>vmap.count<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"version"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Small Http Server version 1.5 PREMIUM "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_SUCCESS;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">//</span><span class="org-comment">=== Handle main command line options =============//</span>


    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>vmap.count<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: missing positional argument [name] - server name"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>vmap.count<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"path"</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: missing positional arguments [path] - server path"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>


    server_name = vmap<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"name"</span><span class="org-rainbow-delimiters-depth-2">]</span>.as<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
    server_paths = vmap<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"path"</span><span class="org-rainbow-delimiters-depth-2">]</span>.as<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;


    <span class="org-constant">std</span>::cout &lt;&lt;<span class="org-string">" &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Server running listening =&gt; "</span>
              &lt;&lt; <span class="org-string">"host "</span> &lt;&lt; server_host
              &lt;&lt; <span class="org-string">" at port "</span> &lt;&lt; server_port
              &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"       Server name: "</span> &lt;&lt; server_name &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Show files option: "</span> &lt;&lt; server_show_file &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Server paths: "</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">p</span>: server_paths<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; p ;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::endl;


    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.9)
<span class="org-function-name">project</span>(cppexperiments)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-comment"># Copy target file to current directory whenerver it is rebuilt</span>
<span class="org-keyword">function</span>(copy_after_build TARGET_NAME )
    <span class="org-comment"># Note: CMAKE_CURRENT_LIST_DIR is the directory where is this</span>
    <span class="org-comment"># CMakeLists.txt file.</span>
    <span class="org-function-name">set</span>(DESTDIR ${<span class="org-variable-name">CMAKE_CURRENT_LIST_DIR</span>}/bin/)
    <span class="org-function-name">file</span>(MAKE_DIRECTORY ${<span class="org-variable-name">DESTDIR</span>})

    <span class="org-comment"># Copy binary file to &lt;CMakeLists.txt didctory&gt;./bin</span>
    <span class="org-comment"># after target is compiled.</span>
    <span class="org-function-name">add_custom_command</span>(TARGET ${<span class="org-variable-name">TARGET_NAME</span>} POST_BUILD
      COMMAND ${<span class="org-variable-name">CMAKE_COMMAND</span>} -E copy
                               $&lt;TARGET_FILE:${<span class="org-variable-name">TARGET_NAME</span>}&gt; ${<span class="org-variable-name">DESTDIR</span>}
                               )
<span class="org-keyword">endfunction</span>()


<span class="org-comment"># ============= Conan Boosttrap =============================#</span>

<span class="org-function-name">set</span>(Boost_USE_STATIC_LIBS ON)
<span class="org-function-name">find_package</span>(Boost REQUIRED program_options)

 <span class="org-comment">#======= Targets Settings ===============+#</span>
<span class="org-function-name">add_executable</span>(boost_program_options boost_program_options.cpp)
<span class="org-function-name">target_link_libraries</span>(boost_program_options Boost::program_options)

<span class="org-comment"># Optional =&gt; Copy the binary (executable) to directory </span>
<span class="org-comment"># ${THIS DIRECTORY}/bin for easy access from command line </span>
<span class="org-function-name">copy_after_build</span>(boost_program_options)
</pre>
</div>

<p>
Build from command line: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ boost_program_options.cpp -o <span class="org-keyword">boost_program_options</span> -std=c++1z -Wall -lboost_program_options -O0 -g 

$ file boost_program_options

<span class="org-function-name">boost_program_options</span>: ELF 64-bit LSB executable, x86-64, version 1 (GNU/Linux), 
dynamically linked, interpreter /lib64/l, for GNU/Linux 3.2.0, 
<span class="org-variable-name">BuildID</span>[sha1]=3137721ab242577ffad4ec7b70eb48c86c041c69, with debug_info, not stripped
</pre>
</div>

<p>
Build with Cmake from command line: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ cmake -Bbuild -H. -GNinja -DCMAKE_BUILD_TYPE=Debug

$ cmake --build build --target
[2/2] Linking CXX executable boost_program_options

$ cd bin 

$ ls 
boost_program_options*
</pre>
</div>

<p>
Show program help: 
</p>

<div class="org-src-container">
<pre class="src src-sh"> $ ./boost_program_options 
<span class="org-function-name">Error</span>: missing positional argument [name] - server name

 $ ./boost_program_options --help
 USAGE: ./boost_program_options &lt;OPTIONS&gt; &lt;NAME&gt; [&lt;PATH&gt; ...]
 Small IOT Web Server:
   -h [ --help ]         Show this help message
   -p [ --port ] arg     Set web server port [default 8080]
   --host arg            Allowed host [default 0.0.0.0]
   --show                Show directory files [default false]
   -v [ --version ]      Show version and exit
   --name arg            Web Server Name
   --path arg            Paths that will be served
</pre>
</div>

<p>
Run with default settings: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./boost_program_options tinyHTTP /var/www/data /var/www /home/user/storage
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 0.0.0.0 at port 8080
       Server name: tinyHTTP
 Show files option: false
 Server paths:  /var/www/data /var/www /home/user/storage
</pre>
</div>

<p>
Run setting port to 9090 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./boost_program_options tinyHTTP /var/www/data /var/www --port 9090
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 0.0.0.0 at port 9090
       Server name: tinyHTTP
 Show files option: false
 Server paths:  /var/www/data /var/www
</pre>
</div>

<p>
Run setting port to 9080 and host to 127.0.0.1 (localhost)
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./boost_program_options tinyHTTP /var/www/data /var/www --port 9080 --host 127.0.0.1
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 127.0.0.1 at port 9080
       Server name: tinyHTTP
 Show files option: false
 Server paths:  /var/www/data /var/www


$ ./boost_program_options tinyHTTP /var/www --port=9080 --host=127.0.0.1
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 127.0.0.1 at port 9080
       Server name: tinyHTTP
 Show files option: false
 Server paths:  /var/www

$ ./boost_program_options tinyHTTP /var/www --port=9080 --host=127.0.0.1 --show
 &#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;&#183;
 Server running listening =&gt; host 127.0.0.1 at port 9080
       Server name: tinyHTTP
 Show files option: true
 Server paths:  /var/www
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc242c0b" class="outline-3">
<h3 id="orgc242c0b"><span class="section-number-3">1.11</span> Boost Lambda</h3>
<div class="outline-text-3" id="text-1-11">
<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/lambda.html#introduction">Boost.Lambda</a></li>
</ul>

<p>
Notes: 
</p>

<p>
boost::bind from Boost.Lambda is already in C++ standard since C++11
and the placeholders, _1, _2 are in the namespace
std::placeholders. 
</p>

<p>
STL lambda placeholders does not support arithmetic expressions like
boost lambda placeholders. For instance, the following code generates
a lambda expression shown after it.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Boost lambda placeholder</label><pre class="src src-cpp">3.0 * <span class="org-constant">boost</span>::<span class="org-constant">lambda</span>::_1 + 10.0
</pre>
</div>

<p>
Equivalent lambda expression (lambda object):
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Equivalent C++11 lambda function.</label><pre class="src src-cpp"><span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3.0 * x + 10.0<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Examples:</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/lambda/lambda.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/lambda/loops.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Namespace alias: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bl</span> = <span class="org-constant">boost</span>::lambda;
</pre>
</div>

<p>
Creating a function of one argument:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> funOf1Arg = 10.0 * <span class="org-constant">bl</span>::_1 - 20.0;

&gt;&gt; funOf1Arg<span class="org-rainbow-delimiters-depth-1">(</span>20<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 180.00000

&gt;&gt; funOf1Arg<span class="org-rainbow-delimiters-depth-1">(</span>6.7<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 47.000000
&gt; 
</pre>
</div>

<p>
Creating a function of two arguments: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> funOf2ArgsA = 10.0 * <span class="org-constant">bl</span>::_1 + 6 * <span class="org-constant">bl</span>::_2 - 20;

&gt;&gt; funOf2ArgsA<span class="org-rainbow-delimiters-depth-1">(</span>3, 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 34.000000

&gt;&gt; funOf2ArgsA<span class="org-rainbow-delimiters-depth-1">(</span>5, 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 36.000000


&gt;&gt; <span class="org-keyword">auto</span> funOf2 = <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" x = "</span> &lt;&lt; <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">" ; y = "</span> &lt;&lt; <span class="org-constant">bl</span>::_2 &lt;&lt; <span class="org-string">"\n"</span>;

&gt;&gt; funOf2<span class="org-rainbow-delimiters-depth-1">(</span>100, <span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 x = 100 ; y = hello

&gt;&gt; funOf2<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">'z'</span>, <span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
z ; y = hello
</pre>
</div>

<p>
Lambda placeholder and STL "algorithms":
</p>

<ul class="org-ul">
<li>Algorithm std::for_each</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">xs</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>100, 200, 50, -70, 80, 45<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
100
200
50
-70
80
45
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Increase at 25%</span>
&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">std</span>::cout &lt;&lt; 1.25 * <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
125
250
62.5
-87.5
100
56.25
&gt;&gt; 

&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 100, 200, 50, -70, 80, 45 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">std</span>::cout &lt;&lt; 1.25 * <span class="org-constant">bl</span>::_1 + 10.0 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
135
260
72.5
-77.5
110
66.25
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Algorithm std::transform</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> out<span class="org-rainbow-delimiters-depth-1">(</span>xs.size<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000, 0.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-constant">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, out.begin<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">bl</span>::_1 * 3.0 + 100<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 400.00000, 700.00000, 250.00000, -110.00000, 340.00000, 235.00000 <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Divide every element of xs by 100.0 and insert it at vector out. </span>
&gt;&gt; <span class="org-constant">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, out.begin<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">bl</span>::_1 / 100.0<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 1.0000000, 2.0000000, 0.50000000, -0.70000000, 0.80000000, 0.45000000 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Lambda expressions for control structures</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> yds<span class="org-rainbow-delimiters-depth-1">{</span>200, 40, 5, 9, 20, 40, 90, 35<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>yds.begin<span class="org-rainbow-delimiters-depth-2">()</span>, yds.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-constant">bl</span>::if_then<span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-constant">bl</span>::_1 &gt; 25, <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">bl</span>::_1 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
200
40
40
90
35

<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-2">(</span>yds.begin<span class="org-rainbow-delimiters-depth-3">()</span>, yds.end<span class="org-rainbow-delimiters-depth-3">()</span>, 
              <span class="org-constant">bl</span>::if_then<span class="org-rainbow-delimiters-depth-3">(</span> <span class="org-constant">bl</span>::_1 &gt; 25, <span class="org-constant">std</span>::cout &lt;&lt; 4.5 * <span class="org-constant">bl</span>::_1 - 20.0 &lt;&lt; <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span>
             <span class="org-rainbow-delimiters-depth-2">)</span>;

<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Output: </span>
880
160
160
385
137.5
</pre>
</div>
</div>
</div>

<div id="outline-container-org196166b" class="outline-3">
<h3 id="org196166b"><span class="section-number-3">1.12</span> Boost Operators</h3>
<div class="outline-text-3" id="text-1-12">
</div>
<div id="outline-container-org6360bb3" class="outline-4">
<h4 id="org6360bb3"><span class="section-number-4">1.12.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-12-1">
<p>
There are about 50 operators in C++ that can be overloaded which makes
implementing them repetitive and cumbersome. Boost operators is a
header-only library simplifies operator overloading by implementing
redundant operators in terms of each other. For instance, from the
operator less-than or (&lt;), boost operators can automatically generate
the operators (&lt;=), (&gt;) and (&gt;=). The library uses the CRT (Curious
Recurring Template Design Pattern) for generating the operators at
compile-time.
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/utility/operators.htm">Boost.Operators</a></li>
</ul>

<p>
Headers: 
</p>
<ul class="org-ul">
<li>&lt;boost/operators.hpp&gt;</li>
</ul>
</div>
</div>
<div id="outline-container-org92812b2" class="outline-4">
<h4 id="org92812b2"><span class="section-number-4">1.12.2</span> Example</h4>
<div class="outline-text-4" id="text-1-12-2">
<ul class="org-ul">
<li>File: <a href="src/boost/boost-operators.cpp">file:src/boost/boost-operators.cpp</a></li>
<li>Gist: <a href="https://gist.github.com/caiorss/3682847393fd42b4001c9c71a74e2c37">boost-operators.cpp</a></li>
<li>Online Compiler: <a href="https://rextester.com/UZGM54875">https://rextester.com/UZGM54875</a></li>
</ul>

<p>
Compilation: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Compile </span>
$ clang++ boost-operator.cpp -o <span class="org-keyword">boost-operator.bin</span> -std=c++1z -g -O0 -Wall
<span class="org-comment-delimiter"># </span><span class="org-comment">Run </span>
$ ./boost-operator.bin
</pre>
</div>

<p>
<b>Parts</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/operators.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Class Vec3D: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Class Vec3D - three dimensional vector of 3 coordinates X, Y, Z</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Vec3D</span>: <span class="org-keyword">public</span> <span class="org-constant">boost</span>::<span class="org-type">less_than_comparable</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Vec3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
           , <span class="org-keyword">public</span> <span class="org-constant">boost</span>::<span class="org-type">addable</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Vec3D</span>, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
    <span class="org-type">double</span> <span class="org-variable-name">m_x</span>, <span class="org-variable-name">m_y</span>, <span class="org-variable-name">m_z</span>;
<span class="org-function-name">public</span>:
    <span class="org-function-name">Vec3D</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span>, <span class="org-type">double</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-type">double</span> <span class="org-function-name">norm</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Stream insertion operator =&gt; Make class printable </span>
    <span class="org-keyword">friend</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">vec</span><span class="org-rainbow-delimiters-depth-2">)</span>;    

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by: boost::less_than_comparable&lt;Vec3D&gt;</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">From this operator, boost implements the operators (&lt;=), (&gt;), (&gt;=)</span>
    <span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Required by: boost::addable&lt;Vec3D, double&gt;</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Boost implements: operator+(Vec3D, double) and operator+(double, Vec3D)</span>
    <span class="org-keyword">friend</span> <span class="org-type">Vec3D</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Vec3D</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">)</span>;   
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
The templated class <b>boost::less_than_comparable&lt;T&gt;</b> requires that the
client code implements the operator function less-than (&lt;) or: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>Operator less-than (&lt;) required by boost::less_than_comparable</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Implementation: </span>
<span class="org-type">bool</span>
<span class="org-keyword">operator</span><span class="org-function-name">&lt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-keyword">return</span> lhs.norm<span class="org-rainbow-delimiters-depth-2">()</span> &lt; rhs.norm<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
From the operator less-than (&lt;), the templated class implements the
following operator functions: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>Operators generated by boost::less_than_comparable</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&lt;=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&gt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">friend</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name">&gt;=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
The templated class <b>boost::addable&lt;Vec3D, double&gt;</b> requires the client
code supplying the operator (+=):
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>Operator function required by boost::addable&lt;Vec3D, double&gt;</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">Vec3D</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;   

<span class="org-comment-delimiter">// </span><span class="org-comment">Implementation or definition:</span>
<span class="org-type">Vec3D</span>&amp;
<span class="org-keyword">operator</span><span class="org-function-name">+=</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span>  <span class="org-variable-name">d</span> = rhs;
    lhs = <span class="org-rainbow-delimiters-depth-2">{</span>lhs.m_x + d, lhs.m_y + d, lhs.m_z + d<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">return</span> lhs;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
From the operator (+=), the class boost::addable generates the
operators: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>Operator functions generated by boost::addable&lt;Vec3D, double&gt;</label><pre class="src src-cpp"><span class="org-keyword">friend</span> <span class="org-type">Vec3D</span> <span class="org-keyword">operator</span><span class="org-function-name">+</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span>, <span class="org-type">double</span> <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;   
<span class="org-keyword">friend</span> <span class="org-type">Vec3D</span> <span class="org-keyword">operator</span><span class="org-function-name">+</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">rhs</span>, <span class="org-type">Vec3D</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">lhs</span><span class="org-rainbow-delimiters-depth-1">)</span>;   
</pre>
</div>

<p>
Function: disp used for displaying variables
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">variable_t</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">disp</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">variableName</span>, <span class="org-type">variable_t</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">value</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt;&gt; "</span> &lt;&lt; variableName &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; value &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Function Main</b>
</p>

<p>
Variables:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Vec3D</span> <span class="org-variable-name">v1</span> = <span class="org-rainbow-delimiters-depth-1">{</span>3, 5, 6<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-type">Vec3D</span> <span class="org-variable-name">v2</span> = <span class="org-rainbow-delimiters-depth-1">{</span>12, 5, 9<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1"</span>, v1<span class="org-rainbow-delimiters-depth-1">)</span>; disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v2"</span>, v2<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1.norm()"</span>, v1.norm<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v2.norm()"</span>, v2.norm<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Program Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">=&gt;&gt; v1 = Vec3D{  x = 3 ; y = 5 ; z = 6 } 
=&gt;&gt; v2 = Vec3D{  x = 12 ; y = 5 ; z = 9 } 
=&gt;&gt; v1.norm() = 8.3666
=&gt;&gt; v2.norm() = 15.8114
</pre>
</div>

<p>
Experiment 1: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n EXPERIMENT 1 boost::less_than_comparable&lt;Vec3D&gt;"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------------"</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &lt;  v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &lt; v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &lt;  v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&lt;<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;   

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &lt;= v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &lt;= v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &lt;= v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&lt;=<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &gt;  v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &gt; v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &gt;  v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&gt;<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[a] v1 &gt;=  v2 = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>v1 &gt;= v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"[b] v1 &gt;=  v2 = "</span> &lt;&lt; <span class="org-keyword">operator</span>&gt;=<span class="org-rainbow-delimiters-depth-1">(</span>v1, v2<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
</pre>
</div>

<p>
Program Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> EXPERIMENT 1 boost::less_than_comparable&lt;Vec3D&gt;
--------------------------------------------------
[a] v1 &lt;  v2 = true
[b] v1 &lt;  v2 = true

[a] v1 &lt;= v2 = true
[b] v1 &lt;= v2 = true

[a] v1 &gt;  v2 = false
[b] v1 &gt;  v2 = false

[a] v1 &gt;=  v2 = false
[b] v1 &gt;=  v2 = false
</pre>
</div>

<p>
Experiment 2: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n EXPERIMENT 2 boost::less_than_comparable&lt;Vec3D&gt;"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------------"</span> &lt;&lt; <span class="org-string">"\n"</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1 + 5.0"</span>, v1 + 5.0<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"operator+(v1, 5.0)"</span>, <span class="org-keyword">operator</span>+<span class="org-rainbow-delimiters-depth-2">(</span>v1, 5.0<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"5.0 + v1"</span>, 5.0 + v1<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"operator+(5.0, v1"</span>, <span class="org-keyword">operator</span>+<span class="org-rainbow-delimiters-depth-2">(</span>5.0, v1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"v1"</span>, v1<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> EXPERIMENT 2 boost::less_than_comparable&lt;Vec3D&gt;
--------------------------------------------------
 =&gt;&gt; v1 + 5.0 = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; operator+(v1, 5.0) = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; 5.0 + v1 = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; operator+(5.0, v1 = Vec3D{  x = 8 ; y = 10 ; z = 11 } 
 =&gt;&gt; v1 = Vec3D{  x = 3 ; y = 5 ; z = 6 } 
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7f6aa81" class="outline-3">
<h3 id="org7f6aa81"><span class="section-number-3">1.13</span> Boost Range</h3>
<div class="outline-text-3" id="text-1-13">
<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/range/doc/html/index.html">Boost.Range</a></li>
</ul>

<p>
New Version of Range Library - v3
</p>
<ul class="org-ul">
<li><a href="https://ericniebler.github.io/range-v3/index.html">https://ericniebler.github.io/range-v3/index.html</a></li>
</ul>

<p>
Headers and functionality: 
</p>
<ul class="org-ul">
<li>&lt;boost/range.hpp&gt;</li>
<li>&lt;boost/range/adapators.hpp&gt;</li>
<li>&lt;boost/range/algorithm.hpp&gt;</li>
<li>&lt;boost/range/algorithm_ext/for_each.hpp&gt;</li>
<li>&lt;boost/range/algorithm/copy.hpp&gt;</li>
<li>&lt;boost/range/adaptor/reversed.hpp&gt;</li>
<li>&lt;boost/range/adaptor/transformed.hpp&gt;</li>
</ul>

<p>
Namespaces: 
</p>
<ul class="org-ul">
<li>boost</li>
<li>boost::adaptors</li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/adaptors.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Include all algorithms </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/copy.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/adaptor/reversed.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/adaptor/transformed.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-keyword">namespace</span> <span class="org-constant">b</span> = boost;
<span class="org-keyword">namespace</span> <span class="org-constant">ba</span> = <span class="org-constant">boost</span>::adaptors;
</pre>
</div>



<ul class="org-ul">
<li>Boost for_each rage:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/for_each.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">auto</span> <span class="org-variable-name">xs</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>100, 80, 60, 70, 98, 45, 173<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Boost Range - for_each </span>
&gt;&gt; <span class="org-constant">boost</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
100
80
60
70
98
45
173

<span class="org-comment-delimiter">// </span><span class="org-comment">STL for_each: </span>
&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-constant">std</span>::cout &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
100
80
60
70
98
45
173
</pre>
</div>


<ul class="org-ul">
<li>Boost sort:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">algorithm</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/sort.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; <span class="org-keyword">auto</span> ys = xs;
&gt;&gt; ys
<span class="org-rainbow-delimiters-depth-1">{</span> 100, 80, 60, 70, 98, 45, 173 <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">----- Bost range ------------ // </span>
&gt;&gt; <span class="org-constant">boost</span>::sort<span class="org-rainbow-delimiters-depth-1">(</span>ys<span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; ys
<span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">--- STL Range ------------- // </span>

&gt;&gt; <span class="org-keyword">auto</span> zs = xs;
&gt;&gt; zs
 <span class="org-rainbow-delimiters-depth-1">{</span> 100, 80, 60, 70, 98, 45, 173 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-constant">std</span>::sort<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; xs
 <span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Boost copy</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/range/algorithm/copy.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> out;

&gt;&gt; <span class="org-constant">boost</span>::copy<span class="org-rainbow-delimiters-depth-1">(</span>xs, <span class="org-constant">std</span>::back_inserter<span class="org-rainbow-delimiters-depth-2">(</span>out<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; out
<span class="org-rainbow-delimiters-depth-1">{</span> 45, 60, 70, 80, 98, 100, 173 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Boost transform</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> weights = <span class="org-rainbow-delimiters-depth-1">{</span>10.2, 5.60, 8.25<span class="org-rainbow-delimiters-depth-1">}</span>;
&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ts<span class="org-rainbow-delimiters-depth-1">(</span>weights.size<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-constant">boost</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>weights, ts.begin<span class="org-rainbow-delimiters-depth-2">()</span>, <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x / 100.0; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; ts
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> 0.10200000, 0.056000000, 0.082500000 <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org70af33d" class="outline-3">
<h3 id="org70af33d"><span class="section-number-3">1.14</span> Boost Pointer Container</h3>
<div class="outline-text-3" id="text-1-14">
<p>
The C++ Standard Template Library - STL does not work well with
polymorphic types as polymorphic objects cannot be stored in container
directly due to object slicing, only the base part is copied and the
derived is discarded; storing polymorphic objects with smart pointers
pointers is memory and exception safe. However, it is still cumbersome
and does not plays well with STL algorithms such as std::sort or
std::for_each with functors or lambda wrappers due to STL algorithms
be designed to work with values, not pointers.
</p>

<p>
The boost pointer container library provides STL-like containers for
holding heap-allocated objects or polymorphic objects. The containers
provide interoperability with STL algorithms; non-pointer notation for
accessing object members; single memory-ownership.  
</p>

<p>
Note: If there is shared ownership semantics, in other words, multiple
objects need to point to a polymorphic object during their entire
lifetime, then this library is not suitable to this use case. In this
situation, the best solution is to use a container of shared pointers
such as std::vector&lt;std::shared&lt;T&gt;&gt;. 
</p>

<p>
See: <a href="https://web.archive.org/web/20050413215843/http://www.oonumerics.org:80/tmpw00/kuehl.html">STL and OO Don't Easily Mix</a>
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/libs/ptr_container/doc/ptr_container.html">Pointer Container</a></li>
<li>Headers:
<ul class="org-ul">
<li>&lt;boost/ptr_container/ptr_vector.hpp&gt;</li>
<li>&lt;boost/ptr_container/ptr_deque.hpp&gt;</li>
<li>&lt;boost/ptr_container/nullable.hpp&gt;</li>
<li><a href="https://www.boost.org/doc/libs/1_69_0/libs/ptr_container/doc/headers.html">Full list</a></li>
</ul></li>
<li>Containers:
<ul class="org-ul">
<li>ptr_vector</li>
<li>ptr_deque</li>
<li>ptr_list</li>
<li>ptr_map</li>
<li>ptr_set</li>
</ul></li>
<li>Functions:
<ul class="org-ul">
<li>boost::str</li>
<li>boost::format</li>
</ul></li>
</ul>

<p>
<b>Example:</b>
</p>

<p>
Source: 
</p>
<ul class="org-ul">
<li>File: <a href="src/boost/boost-pointer-container.cpp">file:src/boost/boost-pointer-container.cpp</a></li>
<li>Online Compiler: <a href="https://rextester.com/LIJMMS16329">https://rextester.com/LIJMMS16329</a></li>
</ul>

<p>
Compiling and running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ boost-pointer-container.cpp -o <span class="org-keyword">boost-pointer-container.bin</span> -std=c++1z -g -O0 -Wall 
$ ./boost-pointer-container.bin
</pre>
</div>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/ptr_container/ptr_vector.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Sample class hierarchy: 
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>Base class of sample hierarchy.</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
    <span class="org-keyword">static</span> <span class="org-keyword">auto</span> <span class="org-function-name">nextID</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">static</span> <span class="org-type">int</span> <span class="org-variable-name">i</span> = 0;
       <span class="org-keyword">return</span> ++i;
    <span class="org-rainbow-delimiters-depth-2">}</span>       

    <span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Destructor of base class must always be virtual</span>
    <span class="org-keyword">virtual</span> ~<span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
    <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">int</span> = 0;
    <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> = 0;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>Class DerivedA - Derived class of Base</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">DerivedA</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>    
<span class="org-function-name">public</span>:
    <span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">m_id</span>;

    <span class="org-function-name">DerivedA</span><span class="org-rainbow-delimiters-depth-2">()</span>: m_id<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Base</span>::nextID<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span>  -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> <span class="org-string">"DerivedA"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> m_id;
    <span class="org-rainbow-delimiters-depth-2">}</span>   
    ~<span class="org-function-name">DerivedA</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Class DerivedA deleted. =&gt; Object ID = "</span>
                  &lt;&lt; m_id &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>Class DerivedB - Derived class of Base</label><pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">DerivedB</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">const</span> <span class="org-type">int</span> <span class="org-variable-name">m_id</span>;
<span class="org-function-name">public</span>:     
    <span class="org-function-name">DerivedB</span><span class="org-rainbow-delimiters-depth-2">()</span>: m_id<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Base</span>::nextID<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getType</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> <span class="org-string">"DerivedB"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-keyword">return</span> m_id;
    <span class="org-rainbow-delimiters-depth-2">}</span>       
    ~<span class="org-function-name">DerivedB</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Class DerivedB deleted. =&gt; ObjectID = "</span>
                  &lt;&lt; m_id  &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Function showType: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">showType</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Object ID = "</span> &lt;&lt; obj.getID<span class="org-rainbow-delimiters-depth-2">()</span>
                  &lt;&lt;  <span class="org-string">" Class type = "</span> &lt;&lt; obj.getType<span class="org-rainbow-delimiters-depth-2">()</span>
                  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Main Function</b>
</p>

<p>
Experiment 0: STL Container olding non-polymorphic objects
(non-dynamically allocated, type is known at compile-time).
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-1">&gt;</span> xsa;
xsa.push_back<span class="org-rainbow-delimiters-depth-1">(</span>DerivedA<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xsa.push_back<span class="org-rainbow-delimiters-depth-1">(</span>DerivedA<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xsa.emplace_back<span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Run std::for_each"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xsa.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xsa.end<span class="org-rainbow-delimiters-depth-2">()</span>, showType<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Experiment 1: STL container holding polymorphic objects:
</p>

<ul class="org-ul">
<li>Note: STL algorithms require lambda wrappers.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n === EXPERIMENT 1 =============================="</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">shared_ptr</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Base<span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> xs;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedB<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedA<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span>DerivedB<span class="org-rainbow-delimiters-depth-2">&gt;()</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; xs[0]  type "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
          &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; xs[2]  type "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getType<span class="org-rainbow-delimiters-depth-1">()</span>
          &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; xs<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>,
              <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">pBase</span><span class="org-rainbow-delimiters-depth-2">){</span>
                      showType<span class="org-rainbow-delimiters-depth-3">(</span>*pBase<span class="org-rainbow-delimiters-depth-3">)</span>;
              <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> identifiers1;
<span class="org-function-name">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>,
               <span class="org-constant">std</span>::back_inserter<span class="org-rainbow-delimiters-depth-2">(</span>identifiers1<span class="org-rainbow-delimiters-depth-2">)</span>,
               <span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-keyword">auto</span> <span class="org-variable-name">pBase</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> pBase-&gt;getID<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Experiment 2: Boost ptr_vector 
</p>

<ul class="org-ul">
<li>Notes:
<ul class="org-ul">
<li>Accessing elements ps[0] uses conventional notation without (-&gt;)
arrow operator.</li>
<li>STL algorithms does not need lambda or functor wrappers.</li>
<li>Memory solely owned by ptr_vector (single-ownership)</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">boost</span>::<span class="org-type">ptr_vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>Base<span class="org-rainbow-delimiters-depth-1">&gt;</span> ps;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedA</span><span class="org-rainbow-delimiters-depth-1">)</span>;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedB</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedA</span><span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>;
ps.push_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">new</span> <span class="org-type">DerivedB</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; ps[0]  type "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; ps[1]  type "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" &lt;&lt;INFO&gt;&gt; ps[2]  type "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getType<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; ps<span class="org-rainbow-delimiters-depth-1">[</span>2<span class="org-rainbow-delimiters-depth-1">]</span>.getID<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> identifiers2;
<span class="org-function-name">std</span>::transform<span class="org-rainbow-delimiters-depth-1">(</span>xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>, xs.end<span class="org-rainbow-delimiters-depth-2">()</span>,
               <span class="org-constant">std</span>::back_inserter<span class="org-rainbow-delimiters-depth-2">(</span>identifiers2<span class="org-rainbow-delimiters-depth-2">)</span>,
               <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Base</span>::getID, <span class="org-constant">std</span>::<span class="org-constant">placeholders</span>::_1<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n ==&gt; Show objects before deleting last item "</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>ps.begin<span class="org-rainbow-delimiters-depth-2">()</span>, ps.end<span class="org-rainbow-delimiters-depth-2">()</span>, showType<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n ==&gt; Show objects after deleting last item "</span> &lt;&lt; <span class="org-string">"\n"</span>;
ps.pop_back<span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>ps.begin<span class="org-rainbow-delimiters-depth-2">()</span>, ps.end<span class="org-rainbow-delimiters-depth-2">()</span>, showType<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" ============= END ================="</span> &lt;&lt; <span class="org-string">"\n"</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org8dda266" class="outline-3">
<h3 id="org8dda266"><span class="section-number-3">1.15</span> Boost CPU Timer</h3>
<div class="outline-text-3" id="text-1-15">
<p>
Boost CPU timer is library used for measuring the CPU time spend on
some computation, the time is reported to the user after the timer
object is destroyed at the current scope.
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_70_0/libs/timer/doc/cpu_timers.html">cpu_timers</a></li>
</ul>

<p>
<b>Code Example</b> 
</p>

<p>
The boost cpu timer library is used to measure the time for computing
<a href="https://en.wikipedia.org/wiki/Fibonacci_number">fibonacci</a> numbers using recursive and non-recursive functions.
</p>

<p>
File: CMakeLists.txt 
</p>

<div class="org-src-container">
<pre class="src src-cmake"><span class="org-function-name">cmake_minimum_required</span>(VERSION 3.14 FATAL_ERROR)
<span class="org-function-name">project</span>(boost-cpu-time-test)

<span class="org-function-name">set</span>(CMAKE_CXX_STANDARD 17)
<span class="org-function-name">set</span>(CMAKE_VERBOSE_MAKEFILE ON)

<span class="org-function-name">find_package</span>(Boost REQUIRED timer)
<span class="org-function-name">add_executable</span>(cputime cputime.cpp)
<span class="org-function-name">target_link_libraries</span>(cputime Boost::timer)
</pre>
</div>

<p>
File: cputime.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">random</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/timer/timer.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Macro for displaying variables</span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">DISP_EXPR</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">expr</span><span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n [INFO] "</span> &lt;&lt; #expr &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-1">(</span>expr<span class="org-rainbow-delimiters-depth-1">)</span>  &lt;&lt; <span class="org-string">"\n"</span>

<span class="org-keyword">using</span> <span class="org-type">ulong</span> = <span class="org-type">unsigned</span> <span class="org-type">long</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>;
<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_non_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">ulong</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =========== Iterations: 30 ======== "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">starts measuring time here when object 't' is constructed.</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_non_recursive<span class="org-rainbow-delimiters-depth-4">(</span>30<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">report timer when object (t) is destroyed (RAII)</span>
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_recursive<span class="org-rainbow-delimiters-depth-4">(</span>30<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =========== Iterations: 40 ========= "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_non_recursive<span class="org-rainbow-delimiters-depth-4">(</span>40<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_recursive<span class="org-rainbow-delimiters-depth-4">(</span>40<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" =========== Iterations: 50 ========= "</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_non_recursive<span class="org-rainbow-delimiters-depth-4">(</span>50<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">boost</span>::<span class="org-constant">timer</span>::<span class="org-type">auto_cpu_timer</span> <span class="org-variable-name">t</span>;
        DISP_EXPR<span class="org-rainbow-delimiters-depth-3">(</span> fibonacci_recursive<span class="org-rainbow-delimiters-depth-4">(</span>50<span class="org-rainbow-delimiters-depth-4">)</span> <span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">----------------------------------------------------------//</span>

<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>n &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> 1; <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> fibonacci_recursive<span class="org-rainbow-delimiters-depth-2">(</span>n - 1<span class="org-rainbow-delimiters-depth-2">)</span> + fibonacci_recursive<span class="org-rainbow-delimiters-depth-2">(</span>n - 2<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">auto</span> <span class="org-function-name">fibonacci_non_recursive</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">ulong</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ulong</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">ulong</span> <span class="org-variable-name">a</span> = 0, <span class="org-variable-name">b</span> = 1, <span class="org-variable-name">next</span> = 0;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">i</span> = 0UL; i &lt; n; ++i<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        next = a + b;
        a = b;
        b = next;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> next;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Command line compilation: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Debug build =&gt; Debug symbols ON and optimizations disabled </span>
$ g++ cputime.cpp -o <span class="org-keyword">cputime.bin</span> -std=c++1z -g -O0 -Wall -Wextra -lboost_timer

<span class="org-comment-delimiter"># </span><span class="org-comment">Release build =&gt; Debug symbols OFF and optimizations enabled </span>
$ g++ cputime.cpp -o <span class="org-keyword">cputime.bin</span> -std=c++1z -O3 -funroll-loops -flto -Wall -Wextra -lboost_timer
</pre>
</div>

<p>
Output for debug build: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./cputime.bin 
 =========== Iterations: 30 ======== 

 [INFO] fibonacci_non_recursive(30) = 1346269
 0.000104s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(30) = 1346269
 0.045962s wall, 0.050000s user + 0.000000s system = 0.050000s CPU (108.8%)
 =========== Iterations: 40 ========= 

 [INFO] fibonacci_non_recursive(40) = 165580141
 0.000031s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(40) = 165580141
 0.833593s wall, 0.830000s user + 0.000000s system = 0.830000s CPU (99.6%)
 =========== Iterations: 50 ========= 

 [INFO] fibonacci_non_recursive(50) = 20365011074
 0.000003s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(50) = 20365011074
 102.039261s wall, 101.750000s user + 0.000000s system = 101.750000s CPU (99.7%)

</pre>
</div>

<p>
Output for release build: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./cputime.bin 
 =========== Iterations: 30 ======== 

 [INFO] fibonacci_non_recursive(30) = 1346269
 0.000161s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(30) = 1346269
 0.020816s wall, 0.020000s user + 0.000000s system = 0.020000s CPU (96.1%)
 =========== Iterations: 40 ========= 

 [INFO] fibonacci_non_recursive(40) = 165580141
 0.000031s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(40) = 165580141
 0.399674s wall, 0.400000s user + 0.000000s system = 0.400000s CPU (100.1%)
 =========== Iterations: 50 ========= 

 [INFO] fibonacci_non_recursive(50) = 20365011074
 0.000005s wall, 0.000000s user + 0.000000s system = 0.000000s CPU (n/a%)

 [INFO] fibonacci_recursive(50) = 20365011074
 46.683056s wall, 46.410000s user + 0.040000s system = 46.450000s CPU (99.5%) 
</pre>
</div>
</div>
</div>

<div id="outline-container-org094111b" class="outline-3">
<h3 id="org094111b"><span class="section-number-3">1.16</span> Boost Interprocess</h3>
<div class="outline-text-3" id="text-1-16">
</div>
<div id="outline-container-org5192285" class="outline-4">
<h4 id="org5192285"><span class="section-number-4">1.16.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-16-1">
<p>
<a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess.html">Boost.Interprocess</a> is a library that provides wrappers or a common
interface for many operating-system-specific inter process
communication (IPC) primitive functions. The library provides wrappers
to the following IPC facilities:
</p>

<ul class="org-ul">
<li>File locking</li>
<li>Mutex</li>
<li>Semaphore</li>
<li>Shared Memory</li>
<li>Memory Mapped File</li>
<li>Message Queue</li>
</ul>
</div>
</div>
<div id="outline-container-orgcaaaedd" class="outline-4">
<h4 id="orgcaaaedd"><span class="section-number-4">1.16.2</span> Example: Shared memory facilities</h4>
<div class="outline-text-4" id="text-1-16-2">
<p>
Shared memory is the fastest IPC inter-process communication mechanism
available in most operating systems for exchanging data between
processes in the same machine. The share memory IPC allows data to be
shared by multiple processes without any copying overhead which makes
it faster than sockets, message passing and so on. However, using
operating systems shared memory APIs directly is not easy or
portable. Boost inter-process library provides many facilities that
encapsulates operating systems APIs with a higher level interface that
makes the code portable across many operating systems.
</p>

<ul class="org-ul">
<li>Documentation: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess.html">Boost.InterProcess</a></li>
</ul>

<p>
This code provide many client/server examples about using the
Boost.Interprocess shared memory API and also about how to allocate
STL containers in a shared memory segment. 
</p>

<p>
<b>Source Code</b> 
</p>
<ul class="org-ul">
<li><a href="src/boost/boost-shared-memory1.cpp">file:src/boost/boost-shared-memory1.cpp</a></li>
</ul>

<p>
<b>Headers</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/shared_memory_object.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/sync/named_mutex.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/managed_shared_memory.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/segment_manager.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
Namespace alias: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;
</pre>
</div>

<p>
Templates: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Generic Shared Memory Allocator */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">ShmemAllocator</span> = <span class="org-constant">bi</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-constant">bi</span>::<span class="org-constant">managed_shared_memory</span>::segment_manager<span class="org-rainbow-delimiters-depth-1">&gt;</span> ;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Generic STL vector allocated in shared memory */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">ShmemVector</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-type">ShmemAllocator</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ;
</pre>
</div>

<p>
Class SharedMemoryCleaner uses the RAII (Resource Acquisition Is
Initialization) for deleting shared memory segments when out of
scope. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">RAII Object for removing shared memory segment. */</span>
<span class="org-keyword">struct</span> <span class="org-type">SharedMemoryCleaner</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
   <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_name</span>;
   <span class="org-function-name">SharedMemoryCleaner</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-rainbow-delimiters-depth-2">}</span>

   ~<span class="org-function-name">SharedMemoryCleaner</span><span class="org-rainbow-delimiters-depth-2">(){</span>
        <span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] Remove shared memory segment { name = "</span> &lt;&lt; m_name &lt;&lt; <span class="org-string">" }"</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">bi</span>::<span class="org-constant">shared_memory_object</span>::remove<span class="org-rainbow-delimiters-depth-3">(</span>m_name.c_str<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
   <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Function Declarations: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">serverA</span><span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-type">int</span> <span class="org-function-name">clientA</span><span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-type">int</span> <span class="org-function-name">serverB</span><span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-type">int</span> <span class="org-function-name">clientB</span><span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-type">int</span> <span class="org-function-name">serverC</span><span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-type">int</span> <span class="org-function-name">clientC</span><span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<p>
Main Function: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-type">char</span>** <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-keyword">using</span> <span class="org-type">DispatchTable</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string, <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>;
     <span class="org-type">DispatchTable</span> <span class="org-variable-name">table</span> = <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"serverA"</span>, &amp;serverA<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"clientA"</span>, &amp;clientA<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"serverB"</span>, &amp;serverB<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"clientB"</span>, &amp;clientB<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"serverC"</span>, &amp;serverC<span class="org-rainbow-delimiters-depth-3">}</span>,
         <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"clientC"</span>, &amp;clientC<span class="org-rainbow-delimiters-depth-3">}</span>
     <span class="org-rainbow-delimiters-depth-2">}</span>;

     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: invalid arguments."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-keyword">return</span> EXIT_SUCCESS;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = table.find<span class="org-rainbow-delimiters-depth-2">(</span>argv<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>it == table.end<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Error: invalid command."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-keyword">return</span> EXIT_FAILURE;       
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Execute function </span>
     <span class="org-keyword">return</span> it-&gt;second<span class="org-rainbow-delimiters-depth-2">()</span>;           
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Function: ServerA.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Print string (char array) to shared memory </span>
<span class="org-type">int</span> <span class="org-function-name">serverA</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Create shared memory wrapper object </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>
                 <span class="org-comment-delimiter">// </span><span class="org-comment">Creates shared memory segment if it does not exist </span>
                 <span class="org-constant">bi</span>::open_or_create,
                 <span class="org-string">"shared_memory_segment"</span>,
                 <span class="org-constant">bi</span>::read_write
               <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">RAII object that removes the segment when out of scope </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">shm_remove</span> = SharedMemoryCleaner<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_memory_segment"</span><span class="org-rainbow-delimiters-depth-2">)</span>; 
    <span class="org-comment-delimiter">// </span><span class="org-comment">Set size of the shared memory segment in Kb (kbytes = 1024 bytes)</span>
    shm.truncate<span class="org-rainbow-delimiters-depth-2">(</span>1024<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">1kb (kbytes)</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Map the shared memory segment to current process</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_write<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to shared memory </span>
    <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Print to shared memory</span>
    <span class="org-type">char</span>* <span class="org-variable-name">pChar</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::sprintf<span class="org-rainbow-delimiters-depth-2">(</span>pChar, <span class="org-string">" ==&gt; String written to shared memory segment"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Keep the server Alive as the shared memory segment is not </span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">persistent on Windows. </span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to EXIT "</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Function: clientA.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Print string (char array) to shared memory </span>
<span class="org-type">int</span> <span class="org-function-name">clientA</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>   
    <span class="org-comment-delimiter">// </span><span class="org-comment">Create shared memory wrapper object </span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>
       <span class="org-comment-delimiter">// </span><span class="org-comment">Creates shared memory segment if it does not exist </span>
       <span class="org-constant">bi</span>::open_only,
       <span class="org-string">"shared_memory_segment"</span>,
       <span class="org-constant">bi</span>::read_only
       <span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_only<span class="org-rainbow-delimiters-depth-2">}</span>;
    <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;

    <span class="org-comment-delimiter">// </span><span class="org-comment">Interpret shared memory as a pointer to char* </span>
    <span class="org-type">char</span>* <span class="org-variable-name">pMessage</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" Content of shared memory = "</span> &lt;&lt; pMessage &lt;&lt; <span class="org-string">"\n"</span>;    
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Function: serverB.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Allocate double[] array in shared memory */</span>
<span class="org-type">int</span> <span class="org-function-name">serverB</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>   
     <span class="org-constant">bi</span>::open_or_create,
     <span class="org-string">"shared_memory_segment"</span>,
     <span class="org-constant">bi</span>::read_write
     <span class="org-rainbow-delimiters-depth-2">}</span>;
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm_remove</span> = SharedMemoryCleaner<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_memory_segment"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     shm.truncate<span class="org-rainbow-delimiters-depth-2">(</span>1024<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">1kb (kbytes)</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_write<span class="org-rainbow-delimiters-depth-2">}</span>;
     <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Allocate array of 5 doubles in the shared memory </span>
     <span class="org-type">double</span>* <span class="org-variable-name">arr</span> = <span class="org-keyword">new</span> <span class="org-rainbow-delimiters-depth-2">(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">[</span>5<span class="org-rainbow-delimiters-depth-2">]</span>;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> = 100.34;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> = 200.5;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = -5.6;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span> = 9.10;
     arr<span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> = 10.5;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Keep the server Alive as the shared memory segment is not </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">persistent on Windows. </span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to EXIT "</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Function clientB:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Retrieve double[] array from shared memory */</span>
<span class="org-type">int</span> <span class="org-function-name">clientB</span><span class="org-rainbow-delimiters-depth-1">(){</span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-2">{</span>
          <span class="org-constant">bi</span>::open_only, 
         <span class="org-string">"shared_memory_segment"</span>,
          <span class="org-constant">bi</span>::read_only 
     <span class="org-rainbow-delimiters-depth-2">}</span>;
     <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">{</span>shm, <span class="org-constant">bi</span>::read_only<span class="org-rainbow-delimiters-depth-2">}</span>;

     <span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-type">double</span>* <span class="org-variable-name">arr</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>pMem<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[0] = "</span> &lt;&lt; arr<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[1] = "</span> &lt;&lt; arr<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[2] = "</span> &lt;&lt; *<span class="org-rainbow-delimiters-depth-2">(</span>arr + 2<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[3] = "</span> &lt;&lt; *<span class="org-rainbow-delimiters-depth-2">(</span>arr + 3<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"arr[4] = "</span> &lt;&lt; arr<span class="org-rainbow-delimiters-depth-2">[</span>4<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Function: ServerC. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Allocate STL container in shared memory  </span>
<span class="org-type">int</span> <span class="org-function-name">serverC</span><span class="org-rainbow-delimiters-depth-1">(){</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Remove shared memory segment if it already exists </span>
     <span class="org-constant">bi</span>::<span class="org-constant">shared_memory_object</span>::remove<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_seg"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-keyword">auto</span> <span class="org-variable-name">segment</span> = <span class="org-constant">bi</span>::managed_shared_memory<span class="org-rainbow-delimiters-depth-2">(</span>
             <span class="org-constant">bi</span>::open_or_create,
             <span class="org-string">"shared_seg"</span>, <span class="org-comment-delimiter">// </span><span class="org-comment">segment name </span>
             4096              <span class="org-comment-delimiter">// </span><span class="org-comment">4 kbytes </span>
             <span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-keyword">auto</span> <span class="org-variable-name">shm_remove</span> = SharedMemoryCleaner<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"shared_seg"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Segment manager pointer </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Type: managed_shared_memory::segment_manage* </span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">segmgr</span> = segment.get_segment_manager<span class="org-rainbow-delimiters-depth-2">()</span>;
     segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"text"</span><span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-string">"'Hello world shared memory'"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"speed"</span><span class="org-rainbow-delimiters-depth-2">)(</span>10.50<span class="org-rainbow-delimiters-depth-2">)</span>;
     segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"nodes"</span><span class="org-rainbow-delimiters-depth-2">)(</span>100<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">=== Allocate STL Vector in Shared Memory === // </span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Build shared memory allocator </span>
     <span class="org-keyword">auto</span> <span class="org-variable-name">aloc</span> = ShmemAllocator<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>segmgr<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Instantiate vector in shared memory </span>
     <span class="org-type">ShmemVector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>* <span class="org-variable-name">pVector</span> = segmgr-&gt;construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ShmemVector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"avector"</span><span class="org-rainbow-delimiters-depth-2">)(</span>aloc<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;reserve<span class="org-rainbow-delimiters-depth-2">(</span>50<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>4.5<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>10.3<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>100.50<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>20.0<span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter RETURN to EXIT "</span> &lt;&lt; <span class="org-string">"\n"</span>;
     <span class="org-constant">std</span>::cin.get<span class="org-rainbow-delimiters-depth-2">()</span>;
     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>


<p>
Function: ClientC.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-function-name">clientC</span><span class="org-rainbow-delimiters-depth-1">(){</span>
      <span class="org-keyword">auto</span> <span class="org-variable-name">segment</span> = <span class="org-constant">bi</span>::managed_shared_memory<span class="org-rainbow-delimiters-depth-2">(</span>
              <span class="org-constant">bi</span>::open_or_create,
              <span class="org-string">"shared_seg"</span>, <span class="org-comment-delimiter">// </span><span class="org-comment">segment name </span>
              4096          <span class="org-comment-delimiter">// </span><span class="org-comment">4 kbytes </span>
            <span class="org-rainbow-delimiters-depth-2">)</span>;  

      <span class="org-keyword">auto</span> <span class="org-variable-name">segmgr</span> = segment.get_segment_manager<span class="org-rainbow-delimiters-depth-2">()</span>;
      <span class="org-constant">std</span>::<span class="org-type">pair</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>*, <span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">p1</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"speed"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Speed = "</span> &lt;&lt; *p1.first &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-keyword">auto</span> <span class="org-variable-name">pairNodes</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"nodes"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Nodes = "</span> &lt;&lt; *pairNodes.first &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-keyword">auto</span> <span class="org-variable-name">pairText</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"text"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Text = "</span> &lt;&lt; *pairText.first &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-comment-delimiter">// </span><span class="org-comment">C++17 - Structured Binding</span>
      <span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">[</span>pVector, _<span class="org-rainbow-delimiters-depth-2">]</span> = segmgr-&gt;find<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ShmemVector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"avector"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; pVector-&gt;size() = "</span> &lt;&lt; pVector-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; pVector[0] = "</span> &lt;&lt; pVector-&gt;<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-2">[](</span>0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; pVector[1] = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>*pVector<span class="org-rainbow-delimiters-depth-2">)[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-constant">std</span>::endl;
      <span class="org-type">size_t</span> <span class="org-variable-name">idx</span> = 0;
      <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: *pVector<span class="org-rainbow-delimiters-depth-2">)</span>
          <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"pVector["</span> &lt;&lt; idx++ &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt;  x &lt;&lt; <span class="org-string">"\n"</span>;

      <span class="org-type">double</span> <span class="org-variable-name">speed</span>;
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Enter new speed: "</span>;
      <span class="org-constant">std</span>::cin &gt;&gt; speed;
      *p1.first = speed;

      pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>speed<span class="org-rainbow-delimiters-depth-2">)</span>;

      <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
<b>Compile on Linux, OSX or any other Unix-like OS</b>
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">GCC  </span>
$ g++ boost-shared-memory1.cpp -o <span class="org-keyword">boost-shared-memory1.bin</span> -std=c++1z -Wall -lpthread -lrt

<span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ boost-shared-memory1.cpp -o <span class="org-keyword">boost-shared-memory1.bin</span> -std=c++1z -Wall -lpthread -lrt
</pre>
</div>

<p>
<b>Compile on Windows</b> 
</p>

<p>
Compile with Visual C++ or MSVC (VC++)
</p>

<div class="org-src-container">
<pre class="src src-bat">$ cl.exe boost-shared-memory1.cpp /<span class="org-type">Fe</span>:boost-shared-memory1.exe /<span class="org-type">EHsc</span> /<span class="org-type">std</span>:c++17 ...
  /<span class="org-type">GA</span> /<span class="org-type">MDd</span> /<span class="org-type">nologo</span> /<span class="org-type">I</span> C:\boost\boost_1_69_0 /<span class="org-type">link</span> /<span class="org-type">LIBPATH</span>:C:\boost\lib
</pre>
</div>

<p>
Compile with Mingw (GCC)
</p>

<div class="org-src-container">
<pre class="src src-bat">$ g++ boost-shared-memory1.cpp -<span class="org-type">o</span> <span class="org-keyword">boost-shared-memory1.exe</span> -<span class="org-type">std</span>=c++1z -<span class="org-type">I</span> C:\boost\boost_1_69_0
</pre>
</div>

<p>
<b>Running functions serverA and clientA</b>
</p>

<p>
The process that runs serverA in terminal 1 allocates a string in the
shared memory and the process running in the terminal 2 displays the
string from fetched from shared memory. 
</p>

<p>
Terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe serverA
Enter RETURN to EXIT
</pre>
</div>

<p>
Terminal 2: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe clientA
 Content of shared memory =  ==&gt; String written to shared memory segment
</pre>
</div>

<p>
<b>Running functions serverB and clientB</b> 
</p>

<p>
Terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt;
<span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe serverB
Enter RETURN to EXIT
</pre>
</div>

<p>
Terminal 2: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt;boost-shared-memory1.exe clientB
arr[0] = 100.34
arr[1] = 200.5
arr[2] = -5.6
arr[3] = 9.1
arr[4] = 10.5
</pre>
</div>

<p>
<b>Running functions serverC and clientC</b> 
</p>

<p>
The process running in terminal 1 (serverC) allocates several variables in the
shared memory and an std::vector&lt;double&gt; container and the process
running in the terminal 2 (clientC) reads the shared memory and
updates the variable speed and the vector container. The changes in
the std::vector container are persistent on each execution of the
process in terminal 2 while the process running the command serverC is
running. 
</p>

<p>
Terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe serverC
Enter RETURN to EXIT
</pre>
</div>

<p>
Terminal 2: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe clientC
Speed = 100.665
Nodes = 100
Text = <span class="org-string">'Hello world shared memory'</span>
 =&gt; pVector-&gt;size() = 5
 =&gt; pVector[0] = 4.5
 =&gt; pVector[1] = 10.3
pVector[0] = 4.5
pVector[1] = 10.3
pVector[2] = 100.5
pVector[3] = 20
pVector[4] = 100.665
Enter new speed: 40.51

<span class="org-function-name">F</span>:\boost&gt; boost-shared-memory1.exe clientC
Speed = 40.51
Nodes = 100
Text = <span class="org-string">'Hello world shared memory'</span>
 =&gt; pVector-&gt;size() = 6
 =&gt; pVector[0] = 4.5
 =&gt; pVector[1] = 10.3
pVector[0] = 4.5
pVector[1] = 10.3
pVector[2] = 100.5
pVector[3] = 20
pVector[4] = 100.665
pVector[5] = 40.51
Enter new speed: ^C

</pre>
</div>
</div>
</div>

<div id="outline-container-org11b1e79" class="outline-4">
<h4 id="org11b1e79"><span class="section-number-4">1.16.3</span> Example: Shared memory logging with mutex synchronization</h4>
<div class="outline-text-4" id="text-1-16-3">
<p>
This sample program emulates a client that sends logging message to a
shared memory segment and a server that receives the logging messages
from the shared memory and prints them to the standard output
stdout. A named mutex object is used for coordinating both processes. 
</p>

<p>
<b>File:</b>
</p>
<ul class="org-ul">
<li><a href="src/boost/boost-shared-memory-logger.cpp">file:src/boost/boost-shared-memory-logger.cpp</a></li>
</ul>

<p>
<b>Headers:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">sstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cstring</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">strok </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">ctime</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">chrono</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/shared_memory_object.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/sync/named_mutex.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/sync/scoped_lock.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
<b>Namespace Alias</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;
</pre>
</div>

<p>
<b>Function Main</b> 
</p>

<p>
Create shared memory segment: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create shared memory wrapper object </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">shm</span> = <span class="org-constant">bi</span>::shared_memory_object<span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">bi</span>::open_or_create,  
        <span class="org-string">"logger_shm"</span>,
        <span class="org-constant">bi</span>::read_write
<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Set size of the shared memory segment in Kb (kbytes = 1024 bytes)</span>
shm.truncate<span class="org-rainbow-delimiters-depth-1">(</span>4096<span class="org-rainbow-delimiters-depth-1">)</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">4kb (kbytes)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Map the shared memory segment to current process</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-1">{</span>shm, <span class="org-constant">bi</span>::read_write<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to shared memory </span>
<span class="org-type">void</span>* <span class="org-variable-name">pMem</span> = region.get_address<span class="org-rainbow-delimiters-depth-1">()</span>;
</pre>
</div>

<p>
Create a named mutex object for process synchronizing the shared memory
access: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create mutex Object </span>
<span class="org-function-name">bi</span>::named_mutex amutex<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">bi</span>::open_or_create, <span class="org-string">"logger_mutex"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Check command line arguments: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"$ "</span> &lt;&lt; argv<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> &lt;&lt; <span class="org-string">" [-client|-server]"</span> &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-function-name">std</span>::string cmd = argv<span class="org-rainbow-delimiters-depth-1">[</span>1<span class="org-rainbow-delimiters-depth-1">]</span>;
</pre>
</div>

<p>
Server command: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>cmd == <span class="org-string">"-server"</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-type">char</span>* <span class="org-variable-name">pMessage</span> = <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">)</span> pMem;
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
         <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [TRACE] Waiting logging message "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
         <span class="org-comment-delimiter">// </span><span class="org-comment">Acquire mutex lock blocking this thread </span>
         amutex.lock<span class="org-rainbow-delimiters-depth-3">()</span>;
         <span class="org-comment-delimiter">// </span><span class="org-comment">Print logging memssage from shared memory </span>
         <span class="org-constant">std</span>::cout &lt;&lt; pMessage &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Client command: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>cmd == <span class="org-string">"-client"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Interpret shared memory as a pointer an null-terminated</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">array of characters </span>
    <span class="org-type">char</span>* <span class="org-variable-name">pMessage</span> = <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">)</span> pMem;
    <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span>;
    <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Enter line: "</span>;
        <span class="org-constant">std</span>::getline<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::cin, line<span class="org-rainbow-delimiters-depth-3">)</span>;           
        <span class="org-constant">std</span>::<span class="org-type">stringstream</span> <span class="org-variable-name">ss</span>;
        <span class="org-keyword">auto</span> <span class="org-variable-name">now</span> = <span class="org-constant">std</span>::<span class="org-constant">chrono</span>::<span class="org-constant">system_clock</span>::now<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-constant">std</span>::<span class="org-type">time_t</span> <span class="org-variable-name">ttp</span> = <span class="org-constant">std</span>::<span class="org-constant">chrono</span>::<span class="org-constant">system_clock</span>::to_time_t<span class="org-rainbow-delimiters-depth-3">(</span>now<span class="org-rainbow-delimiters-depth-3">)</span>;
        ss &lt;&lt; <span class="org-string">" [INFO] "</span> &lt;&lt; strtok<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::ctime<span class="org-rainbow-delimiters-depth-4">(</span>&amp;ttp<span class="org-rainbow-delimiters-depth-4">)</span>, <span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-string">" - "</span> &lt;&lt; line;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Print to shared memory (pointer by pMessage)</span>
        <span class="org-constant">std</span>::sprintf<span class="org-rainbow-delimiters-depth-3">(</span>pMessage, <span class="org-string">"%s"</span>, ss.str<span class="org-rainbow-delimiters-depth-4">()</span>.c_str<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Release mutex lock </span>
        amutex.unlock<span class="org-rainbow-delimiters-depth-3">()</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span>      
    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<b>Compiling on Linux or any other Unix-like OS:</b>
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ boost-shared-memory-logger.cpp -o <span class="org-keyword">logger.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt  
<span class="org-comment-delimiter"># </span><span class="org-comment">GCC</span>
$ gcc++ boost-shared-memory-logger.cpp -o <span class="org-keyword">logger.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt  
</pre>
</div>

<p>
<b>Compiling on Windows with MingW/GCC</b> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ boost-logger.cpp -o <span class="org-keyword">boost-logger.exe</span> -IC:\boost\boost_1_69_0
</pre>
</div>

<p>
<b>Compiling on Windows with MSVC (VC++)</b>
</p>

<p>
Problem faced when compiling wiht MSVC:
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/9628527/linker-error-lnk1104-with-libboost-filesystem-vc100-mt-s-1-49-lib">c++ - Linker error LNK1104 with 'libboost_filesystem-vc100-mt-s-1_49.lib' - Stack Overflow</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ cl.exe boost-logger.cpp /Fe:boost-logger1.exe /EHsc /GA /MDd /nologo /I C:\boost\boost_1_69_0 /link /LIBPATH:C:\boost\lib
</pre>
</div>

<p>
Run program as server in terminal 1: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./logger.bin -server
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:13:26 2019 - price 10% up
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:13:38 2019 - price change 4.5 down
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:14:07 2019 - new forecast arriving soon
 [TRACE] Waiting logging message 
 [INFO] Sun Mar 17 08:14:11 2019 - new data
 [TRACE] Waiting logging message 
 ... ...  ... ...  ... ...  ... ... 
</pre>
</div>

<p>
Run program as client in terminal 2: 
</p>
<ul class="org-ul">
<li>User type messages in this terminal and they are sent to the shared
memory buffer, then mutex lock is released what makes the server
process print the message from the shared memory to standard output.</li>
</ul>


<div class="org-src-container">
<pre class="src src-sh">$ ./logger.bin -client
 =&gt; Enter line: price 10% up
 =&gt; Enter line: price change 4.5 down
 =&gt; Enter line: new forecast arriving soon
 =&gt; Enter line: new data
 =&gt; Enter line: ^C
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfe99fe1" class="outline-3">
<h3 id="orgfe99fe1"><span class="section-number-3">1.17</span> Memory Mapped Files</h3>
<div class="outline-text-3" id="text-1-17">
</div>
<div id="outline-container-orgd51a73a" class="outline-4">
<h4 id="orgd51a73a"><span class="section-number-4">1.17.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-17-1">
<p>
Most operating systems have system-calls or APIs for mapping files
into a process' address space or virtual memory which allows reading
and writing to a file as it was a memory. Any changes in memory-mapped
file memory segment is immediately written to the disk. 
</p>

<p>
Among other things, memory-mapped files provide the following
benefits:
</p>

<ul class="org-ul">
<li>Faster and more performant file processing, specially for big files
of Gigabyte-size (big-data).</li>

<li>Persistence and serialization:
<ul class="org-ul">
<li>Simplified serialization, any object allocated in a memory-mapped
file segment is automatically written to the mapped file in a
disk. And deserialization only requires reading the object from
the memory or just casting a pointer without any special
deserialization code.</li>
</ul></li>
</ul>

<p>
Operating System APIs: 
</p>

<ul class="org-ul">
<li>Unix-like OSes or POSIX (Linux, MacOSX, Android, BSD, QNX &#x2026;)
<ul class="org-ul">
<li>Uses the system-call or API: <a href="https://en.wikipedia.org/wiki/Mmap">mmap</a> for memory-mapped files.</li>
</ul></li>

<li>Windows NT, Windows CE:
<ul class="org-ul">
<li>Uses the Win32 APIs: <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/winbase/nf-winbase-createfilemappinga">CreateFileMapping</a>, <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/memoryapi/nf-memoryapi-mapviewoffile">MapViewOFile</a>, <a href="https://docs.microsoft.com/en-gb/windows/desktop/api/memoryapi/nf-memoryapi-unmapviewoffile">UnmapViewOfFile</a></li>
</ul></li>
</ul>

<p>
The boost interprocess library provides a generalized interface to
those operating system specific memory-mapping file APIs. The library
also provides a C++ friendly notation, memory-allocators, memory
managers and so on that simplifies the usage on many different
operating systems.
</p>

<p>
See also: 
</p>
<ul class="org-ul">
<li>Boost.Interprocess: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess/sharedmemorybetweenprocesses.html#interprocess.sharedmemorybetweenprocesses.mapped_file">Memory Mapped Files</a></li>
<li>Boost.Interprocess: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_mapped_files">Managed Mapped Files</a></li>
<li><a href="http://john.freml.in/mmap-pattern">John Fremlin's blog: The mmap pattern</a></li>
<li><a href="https://stackoverflow.com/questions/7159271/live-c-objects-that-live-in-memory-mapped-files">"live C++ objects that live in memory mapped files"? - Stack Overflow</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/standard/io/memory-mapped-files">Memory-Mapped Files | Microsoft Docs</a></li>
<li><a href="https://software.intel.com/en-us/articles/introduction-to-programming-with-persistent-memory-from-intel">Introduction to Programming with Persistent Memory from Intel | Intel® Software</a></li>
<li><a href="http://blogs.microsoft.co.il/sasha/2016/01/21/myth-busting-memory-mapped-files-and-shared-memory-on-windows/">Myth-Busting: Memory-Mapped Files and Shared Memory on Windows | All Your Base Are Belong To Us</a></li>
<li><a href="https://en.wikipedia.org/wiki/Memory-mapped_file">Memory-mapped file - Wikipedia</a></li>
<li><a href="https://pymotw.com/2/mmap/">mmap – Memory-map files - Python Module of the Week</a></li>
</ul>
</div>
</div>
<div id="outline-container-org85b2640" class="outline-4">
<h4 id="org85b2640"><span class="section-number-4">1.17.2</span> Example - allocating objects in a memory mapped file</h4>
<div class="outline-text-4" id="text-1-17-2">
<p>
<b>File</b>:
</p>
<ul class="org-ul">
<li><a href="src/boost/boost-memory-mapped-file.cpp">file:src/boost/boost-memory-mapped-file.cpp</a></li>
</ul>

<p>
Headers: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">fstream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/managed_mapped_file.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/file_mapping.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
</pre>
</div>

<p>
<b>Namespace alias:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess; 
</pre>
</div>

<p>
<b>Template aliases:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Generic Memory-mapped file allocator */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">MMFAllocator</span> = <span class="org-constant">bi</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-constant">bi</span>::<span class="org-constant">managed_mapped_file</span>::segment_manager<span class="org-rainbow-delimiters-depth-1">&gt;</span> ;

<span class="org-comment-delimiter">/** </span><span class="org-comment">Generic STL vector allocated in memory-mapped file */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">using</span> <span class="org-type">MMFVector</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>, <span class="org-type">MMFAllocator</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ;
</pre>
</div>

<p>
<b>Function Main</b>
</p>

<p>
Intial definitions: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">constexpr</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">fileName</span> = <span class="org-string">"memory-dump.dat"</span>;
<span class="org-keyword">constexpr</span> <span class="org-type">size_t</span>      <span class="org-variable-name">fileSize</span> = 4096; <span class="org-comment-delimiter">// </span><span class="org-comment">4 kbytes</span>
<span class="org-type">bool</span> <span class="org-variable-name">flagFileExists</span>            = fileExists<span class="org-rainbow-delimiters-depth-1">(</span>fileName<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Manged file mapping object =&gt; Creates the file if it does not exists </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">mf</span> = <span class="org-constant">bi</span>::managed_mapped_file<span class="org-rainbow-delimiters-depth-1">{</span><span class="org-constant">bi</span>::open_or_create, fileName, fileSize<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Check if file exits, if does not exist yet, then initial data is
written to the file by allocating data in the mapped memory. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-negation-char">!</span>flagFileExists<span class="org-rainbow-delimiters-depth-1">){</span>
     <span class="org-comment-delimiter">// </span><span class="org-comment">Executed when the file did not exist </span>
     <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Setting file data"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
     mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"NumberOfNodes"</span><span class="org-rainbow-delimiters-depth-2">)(</span>100<span class="org-rainbow-delimiters-depth-2">)</span>;   
     mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"Speed"</span><span class="org-rainbow-delimiters-depth-2">)(</span>200.0<span class="org-rainbow-delimiters-depth-2">)</span>;
     mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"Text"</span><span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-string">"'Allocated text in memory mapped file'"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

     <span class="org-comment-delimiter">// </span><span class="org-comment">Allocate std::vector&lt;double&gt;</span>
     <span class="org-type">MMFAllocator</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">aloc1</span><span class="org-rainbow-delimiters-depth-2">(</span>mf.get_segment_manager<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
     <span class="org-type">MMFVector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>* <span class="org-variable-name">pVector</span> = mf.construct<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">MMFVector</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span><span class="org-string">"AVector"</span><span class="org-rainbow-delimiters-depth-2">)(</span>aloc1<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;reserve<span class="org-rainbow-delimiters-depth-2">(</span>20<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>40.5<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>98.10<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>-50.45<span class="org-rainbow-delimiters-depth-2">)</span>;
     pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span>;        

     <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
If the file already exists, then it is mapped into the current
process' virtual memory and the data extracted just by reading the
memory, any modification to this mapped segment is written to the file
memory-dump.dat. 
</p>

<p>
Get variable: NumberOfNodes and increment it.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">======= Executed when file already exists =========// </span>

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Retrieving objects from memory mapped file"</span> &lt;&lt; <span class="org-constant">std</span>::endl;

<span class="org-comment-delimiter">// </span><span class="org-comment">Retrieve variable NumberOfNodes with very explicitly and verbose notation </span>
<span class="org-function-name">std</span>::<span class="org-type">pair</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*, <span class="org-type">size_t</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> pairResult1 =  mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"NumberOfNodes"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>pairResult1.first == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [ERROR] I cannot find the object 'NumberOfNodes'"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-keyword">return</span> EXIT_FAILURE;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Number of nodes = "</span> &lt;&lt; *pairResult1.first  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">(</span>*pairResult1.first<span class="org-rainbow-delimiters-depth-1">)</span>++;
</pre>
</div>

<p>
Get variable 'Text' and display it. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Retrieve variable text</span>
<span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">[</span>pText, _size1 <span class="org-rainbow-delimiters-depth-1">]</span> = mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"Text"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>pText != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Text = "</span> &lt;&lt; *pText &lt;&lt; <span class="org-string">"\n"</span>;
</pre>
</div>

<p>
Get variable 'Speed' and update it with value read from user input. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Retrieve variable speed</span>
<span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">[</span>pSpeed, _size2 <span class="org-rainbow-delimiters-depth-1">]</span> = mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"Speed"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>pSpeed != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Speed = "</span> &lt;&lt; *pSpeed &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" =&gt; Set new speed := "</span>;
<span class="org-function-name">std</span>::cin &gt;&gt; *pSpeed;
</pre>
</div>

<p>
Get vector named 'AVector', display, and update it. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Rerieve vector</span>
<span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-1">[</span>pVector, _size3<span class="org-rainbow-delimiters-depth-1">]</span> = mf.find<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">MMFVector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-string">"AVector"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
assert<span class="org-rainbow-delimiters-depth-1">(</span>pVector != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"\n pVector-&gt;size() = "</span> &lt;&lt; pVector-&gt;size<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-type">size_t</span> <span class="org-variable-name">idx</span> = 0;
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-keyword">const</span>&amp; <span class="org-variable-name">x</span>: *pVector<span class="org-rainbow-delimiters-depth-1">)</span>
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" pVector["</span> &lt;&lt; idx++ &lt;&lt; <span class="org-string">"] = "</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::endl ;  

pVector-&gt;push_back<span class="org-rainbow-delimiters-depth-1">(</span>*pSpeed<span class="org-rainbow-delimiters-depth-1">)</span>;    
<span class="org-keyword">return</span> 0;
</pre>
</div>

<p>
<b>Compile on Linux or any other Unix-like OS</b>
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-comment-delimiter"># </span><span class="org-comment">Clang </span>
$ clang++ boost-memory-mapped-file.cpp -o <span class="org-keyword">boost-memory-mapped-file.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt 
<span class="org-comment-delimiter"># </span><span class="org-comment">GCC</span>
$ g++ boost-memory-mapped-file.cpp -o <span class="org-keyword">boost-memory-mapped-file.bin</span> -std=c++1z -g -O0 -Wall -lpthread -lrt 
</pre>
</div>

<p>
<b>Compile on Windows</b>
</p>

<p>
Compile with MSVC (VC++)
</p>

<div class="org-src-container">
<pre class="src src-bat">$ cl.exe boost-memory-mapped-file.cpp /<span class="org-type">Fe</span>:boost-memory-mapped-file.exe /<span class="org-type">EHsc</span> /<span class="org-type">std</span>:c++17 ...
   /<span class="org-type">GA</span> /<span class="org-type">MDd</span> /<span class="org-type">nologo</span> /<span class="org-type">I</span> C:\boost\boost_1_69_0 /<span class="org-type">link</span> /<span class="org-type">LIBPATH</span>:C:\boost\lib
</pre>
</div>

<p>
Compile with Mingw
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ boost-memory-mapped-file.cpp -o <span class="org-keyword">boost-memory-mapped-file.exe</span> -std=c++1z -I C:\boost\boost_1_69_0
</pre>
</div>

<p>
<b>Running</b> 
</p>

<p>
Running for the first time, before the file 'memory-dump.dat'
exists. Note: (compiled with Mingw).
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-memory-mapped-file.exe

 [INFO] Setting file data
</pre>
</div>

<p>
Running for the second time: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-memory-mapped-file.exe

 [INFO] Retrieving objects from memory mapped file
Number of nodes = 100
Text = <span class="org-string">'Allocated text in memory mapped file'</span>
Speed = 200
 =&gt; Set new speed := 4.51

 pVector-&gt;size() = 4
 pVector[0] = 40.5
 pVector[1] = 98.1
 pVector[2] = -50.45
 pVector[3] = 10
</pre>
</div>

<p>
Running for the third time: 
</p>

<div class="org-src-container">
<pre class="src src-sh"><span class="org-function-name">F</span>:\boost&gt; boost-memory-mapped-file.exe
 [INFO] Retrieving objects from memory mapped file
Number of nodes = 101
Text = <span class="org-string">'Allocated text in memory mapped file'</span>
Speed = 4.51
 =&gt; Set new speed := 125.75

 pVector-&gt;size() = 5
 pVector[0] = 40.5
 pVector[1] = 98.1
 pVector[2] = -50.45
 pVector[3] = 10
 pVector[4] = 4.51
</pre>
</div>
</div>
</div>
<div id="outline-container-org487952c" class="outline-4">
<h4 id="org487952c"><span class="section-number-4">1.17.3</span> Example - reading complex binary files</h4>
<div class="outline-text-4" id="text-1-17-3">
<p>
Many complex binary files such as ELF (Unix object-code binary format), PE32
(Windows NT object-code binary format), JPEG images are defined by
C-structs which makes cumbersome and error-prone reading those types
of files with read/write functions. File memory mapping makes easier
to parse those complex binary files as it is not necessary to read
byte-by-byte, instead all it is needed is to cast file mapped address
to the binary format structs.
</p>

<p>
For instance, the ELF (Executable Linkable Format) header is defined
by the following C-struct. (Reference: <a href="http://man7.org/linux/man-pages/man5/elf.5.html">Linux Manpage</a>)
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">typedef</span> <span class="org-keyword">struct</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">unsigned</span> <span class="org-type">char</span> <span class="org-variable-name">e_ident</span><span class="org-rainbow-delimiters-depth-2">[</span>EI_NIDENT<span class="org-rainbow-delimiters-depth-2">]</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_type</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_machine</span>;
    <span class="org-type">uint32_t</span>      <span class="org-variable-name">e_version</span>;
    <span class="org-type">ElfN_Addr</span>     <span class="org-variable-name">e_entry</span>;
    <span class="org-type">ElfN_Off</span>      <span class="org-variable-name">e_phoff</span>;
    <span class="org-type">ElfN_Off</span>      <span class="org-variable-name">e_shoff</span>;
    <span class="org-type">uint32_t</span>      <span class="org-variable-name">e_flags</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_ehsize</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_phentsize</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_phnum</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_shentsize</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_shnum</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_shstrndx</span>;
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-type">ElfN_Ehdr</span>;
</pre>
</div>

<p>
<b>Example:</b> 
</p>

<p>
File: read-elf.cpp
</p>
<ul class="org-ul">
<li>=&gt; Read ELF header of an Unix executable.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/file_mapping.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/managed_mapped_file.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/interprocess/mapped_region.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">bi</span> = <span class="org-constant">boost</span>::interprocess;

<span class="org-preprocessor">#define</span> <span class="org-variable-name">EI_NIDENT</span> 16

<span class="org-keyword">using</span> <span class="org-type">uintN_t</span> = uint64_t;
<span class="org-keyword">using</span> <span class="org-type">ElfN_Addr</span> = uintN_t;
<span class="org-keyword">using</span> <span class="org-type">ElfN_Off</span>  = uintN_t;

<span class="org-comment-delimiter">// </span><span class="org-comment">ELF Header extracted from:</span>
<span class="org-comment-delimiter">//  </span><span class="org-comment">=&gt;&gt; http://man7.org/linux/man-pages/man5/elf.5.html</span>
<span class="org-keyword">typedef</span> <span class="org-keyword">struct</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">unsigned</span> <span class="org-type">char</span> <span class="org-variable-name">e_ident</span><span class="org-rainbow-delimiters-depth-2">[</span>EI_NIDENT<span class="org-rainbow-delimiters-depth-2">]</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_type</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_machine</span>;
    <span class="org-type">uint32_t</span>      <span class="org-variable-name">e_version</span>;
    <span class="org-type">ElfN_Addr</span>     <span class="org-variable-name">e_entry</span>;
    <span class="org-type">ElfN_Off</span>      <span class="org-variable-name">e_phoff</span>;
    <span class="org-type">ElfN_Off</span>      <span class="org-variable-name">e_shoff</span>;
    <span class="org-type">uint32_t</span>      <span class="org-variable-name">e_flags</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_ehsize</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_phentsize</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_phnum</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_shentsize</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_shnum</span>;
    <span class="org-type">uint16_t</span>      <span class="org-variable-name">e_shstrndx</span>;
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-type">ElfN_Ehdr</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Instruction set ISA type database</span>
<span class="org-keyword">static</span> 
<span class="org-function-name">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">uint8_t</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-variable-name">isa_type_database</span> =
            <span class="org-rainbow-delimiters-depth-1">{</span>
                <span class="org-rainbow-delimiters-depth-2">{</span>0x00, <span class="org-string">"No specified"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0x02, <span class="org-string">"Sparc"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0x03, <span class="org-string">"x86"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0x08, <span class="org-string">"MIPS"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0x14, <span class="org-string">"Power PC"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0x16, <span class="org-string">"S390"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0x28, <span class="org-string">"ARM"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0x2A, <span class="org-string">"SuperH"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0x3E, <span class="org-string">"x86-64"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0xB7, <span class="org-string">"AArch64"</span><span class="org-rainbow-delimiters-depth-2">}</span>
                ,<span class="org-rainbow-delimiters-depth-2">{</span>0xF3, <span class="org-string">"RISC-V"</span><span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">static</span> <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp;
<span class="org-keyword">operator</span><span class="org-function-name">&lt;&lt;</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::uint8_t<span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp; <span class="org-variable-name">byte_array</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">ch</span>: byte_array<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::isprint<span class="org-rainbow-delimiters-depth-4">(</span>ch<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>
            os &lt;&lt; ch &lt;&lt; <span class="org-string">""</span>;
        <span class="org-keyword">else</span>
            os &lt;&lt; <span class="org-string">"\\0x"</span> &lt;&lt; <span class="org-constant">std</span>::hex &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>2<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-constant">std</span>::setfill<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">'0'</span><span class="org-rainbow-delimiters-depth-3">)</span>
               &lt;&lt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;(</span>ch<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; <span class="org-string">" "</span>
               &lt;&lt; <span class="org-constant">std</span>::dec;
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">return</span> os;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">argc</span>, <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">argv</span><span class="org-rainbow-delimiters-depth-2">[]</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::puts<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ===========&gt;&gt;&gt; Parsing ELF Header &lt;&lt;=================="</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>argc &lt; 2<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
        <span class="org-constant">std</span>::perror<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Error: missing ELF file name as first argument."</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-keyword">auto</span> <span class="org-variable-name">fileName</span> = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span>argv<span class="org-rainbow-delimiters-depth-3">[</span>1<span class="org-rainbow-delimiters-depth-3">]</span><span class="org-rainbow-delimiters-depth-2">)</span>;   
        <span class="org-comment-delimiter">// </span><span class="org-comment">Create file mapping (mf)</span>
    <span class="org-keyword">auto</span> <span class="org-variable-name">mf</span> = <span class="org-constant">bi</span>::file_mapping<span class="org-rainbow-delimiters-depth-2">(</span>fileName.c_str<span class="org-rainbow-delimiters-depth-3">()</span>, <span class="org-constant">bi</span>::read_only<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Map whole file to process virtual memory </span>
        <span class="org-keyword">auto</span> <span class="org-variable-name">region</span> = <span class="org-constant">bi</span>::mapped_region<span class="org-rainbow-delimiters-depth-2">(</span>mf, <span class="org-constant">bi</span>::read_only<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-type">void</span>* <span class="org-variable-name">addr</span> = region.get_address<span class="org-rainbow-delimiters-depth-2">()</span>;
    <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>addr == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">){</span>
        <span class="org-constant">std</span>::perror<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" Failed to map file."</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-keyword">return</span> EXIT_FAILURE;
    <span class="org-rainbow-delimiters-depth-2">}</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Read ELF header file</span>
    <span class="org-type">ElfN_Ehdr</span>* <span class="org-variable-name">elf_header</span> = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ElfN_Ehdr</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>addr<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">machine_id</span> = elf_header-&gt;e_machine;

    <span class="org-keyword">auto</span> <span class="org-variable-name">magic_bytes</span> = <span class="org-constant">std</span>::vector<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::uint8_t<span class="org-rainbow-delimiters-depth-2">&gt;(</span> elf_header-&gt;e_ident
                                                 ,elf_header-&gt;e_ident + 4<span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-comment-delimiter">//</span><span class="org-comment">std::printf("\n       Magic number = %s ", elf_header-&gt;e_ident);</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"             Magic Bytes = "</span> &lt;&lt; magic_bytes &lt;&lt; <span class="org-string">"\n"</span>;
    <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n            Version     = %d"</span>, elf_header-&gt;e_version<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n               Type     = %d"</span>, elf_header-&gt;e_type<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n            Machine     = %d / %s"</span>, machine_id , isa_type_database.at<span class="org-rainbow-delimiters-depth-3">(</span>machine_id<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n  Number of sections    = %d"</span>, elf_header-&gt;e_shnum<span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-constant">std</span>::printf<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n        Entry Point     = 0x%zX"</span>, elf_header-&gt;e_entry<span class="org-rainbow-delimiters-depth-2">)</span>;      

    <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Building: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ read-elf.cpp -o <span class="org-keyword">read-elf.bin</span> -std=c++1z -g -Wall -Wextra 
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ./read-elf.bin /usr/bin/echo
 ===========&gt;&gt;&gt; Parsing ELF Header &lt;&lt;==================
             Magic Bytes = \0x7f ELF

            Version     = 1
               Type     = 3
            Machine     = 62 / x86-64
  Number of sections    = 30
        Entry Point     = 0x1C90
</pre>
</div>

<p>
Confirm result: 
</p>
<ul class="org-ul">
<li>=&gt; 7F =&gt; 0x7F</li>
<li>=&gt; 45 =&gt; 0x45 or char 'E'</li>
<li>=&gt; 4c =&gt; 0x4c or char 'L'</li>
<li>=&gt; 46 =&gt; 0x46 or char 'F'</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ readelf -h /usr/bin/echo 
ELF Header:
  Magic:   7f 45 4c 46 02 01 01 00 00 00 00 00 00 00 00 00 
  Class:                             ELF64
  Data:                              2<span class="org-string">'s complement, little endian</span>
<span class="org-string">  Version:                           1 (current)</span>
<span class="org-string">  OS/ABI:                            UNIX - System V</span>
<span class="org-string">  ABI Version:                       0</span>
<span class="org-string">  Type:                              DYN (Shared object file)</span>
<span class="org-string">  Machine:                           Advanced Micro Devices X86-64</span>
<span class="org-string">  Version:                           0x1</span>
<span class="org-string">  Entry point address:               0x1c90</span>
<span class="org-string">  Start of program headers:          64 (bytes into file)</span>
<span class="org-string">  Start of section headers:          40072 (bytes into file)</span>
<span class="org-string">  Flags:                             0x0</span>
<span class="org-string">  Size of this header:               64 (bytes)</span>
<span class="org-string">  Size of program headers:           56 (bytes)</span>
<span class="org-string">  Number of program headers:         11</span>
<span class="org-string">  Size of section headers:           64 (bytes)</span>
<span class="org-string">  Number of section headers:         30</span>
<span class="org-string">  Section header string table index: 29</span>

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org82a32fc" class="outline-3">
<h3 id="org82a32fc"><span class="section-number-3">1.18</span> Boost DateTime</h3>
<div class="outline-text-3" id="text-1-18">
</div>
<div id="outline-container-orga661a5c" class="outline-4">
<h4 id="orga661a5c"><span class="section-number-4">1.18.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-18-1">
<p>
Documentation:
</p>
<ul class="org-ul">
<li>Boost: <a href="https://www.boost.org/doc/libs/1_69_0/doc/html/date_time.html">Date Time</a></li>
<li><a href="http://www.crystalclearsoftware.com/libraries/date_time/release_1_33/date_time/doxy.html">Doxygen</a></li>
<li><a href="http://www.crystalclearsoftware.com/libraries/date_time/date_time.pdf">PDF Documentation</a></li>
</ul>

<p>
Documentation Code Examples: 
</p>
<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_69_0/doc/html/date_time/examples.html#date_time.examples.days_alive">Date Time Examples</a></li>
</ul>

<p>
Headers: 
</p>
<ul class="org-ul">
<li>&lt;boost/date_time/date.hpp&gt;</li>
<li>&lt;boost/date_time/date_formatting.hpp&gt;</li>
<li>&lt;boost/date_time/date_duration.hpp&gt;</li>
<li>&lt;boost/date_time/time.hpp&gt;</li>
<li>&lt;boost/date_time/gregorian/gregorian.hpp&gt;</li>
</ul>

<p>
Library Dependency:
</p>
<ul class="org-ul">
<li>Requires linkign the library <b>-lboost_date_time</b> with GCC or Clang.</li>
</ul>

<p>
Motivation: 
</p>

<blockquote>
<p>
The motivation for this library comes from working with and helping
build several date-time libraries on several projects. Date-time
libraries provide fundamental infrastructure for most development
projects. However, most of them have limitations in their ability to
calculate, format, convert, or perform some other functionality. For
example, most libraries do not correctly handle leap seconds,
provide concepts such as infinity, or provide the ability to use
high resolution or network time sources. These libraries also tend
to be rigid in their representation of dates and times. Thus
customized policies for a project or subproject are not possible.
</p>
</blockquote>

<p>
Domain Concepts: 
</p>
<ul class="org-ul">
<li>Time Point</li>
<li>Time Duration</li>
<li>Time Interval</li>
</ul>

<p>
Calendar Systems: 
</p>
<ul class="org-ul">
<li>Gregorian System</li>
<li>UTC - UTC (Coordinated Universal Time)</li>
</ul>
</div>
</div>
<div id="outline-container-orgfc8a929" class="outline-4">
<h4 id="orgfc8a929"><span class="section-number-4">1.18.2</span> Example - Date Manipulation</h4>
<div class="outline-text-4" id="text-1-18-2">
<p>
Search where is Boost Date time on Linux/Fedora: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ ls /lib/ | grep -i date
kconf_update_bin/
libboost_date_time.a
libboost_date_time.so@
libboost_date_time.so.1.67.0*
</pre>
</div>

<p>
<b>Simple tests in CERN ROOT REPL:</b>
</p>

<p>
Load library in REPL:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/date_time/gregorian/gregorian.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Load shared library </span>
gSystem-&gt;Load<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/lib/libboost_date_time.so"</span><span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-keyword">namespace</span> <span class="org-constant">g</span> = <span class="org-constant">boost</span>::gregorian;
<span class="org-keyword">namespace</span> <span class="org-constant">dt</span> = <span class="org-constant">boost</span>::date_time;
</pre>
</div>

<p>
Construct a date from year-month-day, for instance 
(year = 2009, month = 10, day = 20):
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> d1 = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2009, 10, 20<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647050

&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; <span class="org-string">"d1 = "</span> &lt;&lt; d1 &lt;&lt; <span class="org-string">"\n"</span>;
d1 = 2009-Oct-20
</pre>
</div>


<p>
Get current Date: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> today = <span class="org-constant">g</span>::<span class="org-constant">day_clock</span>::local_day<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647030

&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; <span class="org-string">"today = "</span> &lt;&lt; today &lt;&lt; <span class="org-string">"\n"</span>;
today = 2019-Apr-02
&gt;&gt; 
</pre>
</div>

<p>
Convert date to string: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> mdate = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2012, 06, 21<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba70a8

&gt;&gt; <span class="org-constant">g</span>::to_simple_string<span class="org-rainbow-delimiters-depth-1">(</span>mdate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"2012-Jun-21"</span>

&gt;&gt; <span class="org-constant">g</span>::to_iso_string<span class="org-rainbow-delimiters-depth-1">(</span>mdate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"20120621"</span>

&gt;&gt; <span class="org-constant">g</span>::to_iso_extended_string<span class="org-rainbow-delimiters-depth-1">(</span>mdate<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"2012-06-21"</span>
</pre>
</div>


<p>
Parse Date with ISO format YYYYMMDD:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> p = <span class="org-constant">gr</span>::from_undelimited_string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"20100921"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7014

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" p = "</span> &lt;&lt; p &lt;&lt; <span class="org-string">"\n"</span>;
 p = 2010-Sep-21
</pre>
</div>

<p>
Parse Date with ISO format YYYY-MM-DD: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">g</span>::from_simple_string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"2001-10-11"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; <span class="org-keyword">auto</span> s1 = <span class="org-constant">g</span>::from_simple_string<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"2001-10-11"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647010

<span class="org-comment-delimiter">// </span><span class="org-comment">========= Parse Date =============</span>
&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; <span class="org-string">"s1 = "</span> &lt;&lt; s1 &lt;&lt; <span class="org-string">"\n"</span>;
s1 = 2001-Oct-11
</pre>
</div>


<p>
Get year component:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">date</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date, <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::gregorian_calendar, 
 <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date_duration<span class="org-rainbow-delimiters-depth-2">&gt;</span>::year_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x79588b0
&gt;&gt; 

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2001

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>s1.year<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2001
&gt;&gt; 
</pre>
</div>

<p>
Get month component:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.month<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">date</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date, <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::gregorian_calendar, 
<span class="org-function-name">boost</span>::<span class="org-constant">gregorian</span>::date_duration<span class="org-rainbow-delimiters-depth-2">&gt;</span>::month_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x7d69550

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.month<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>s1.month<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; 
</pre>
</div>

<p>
Get day component: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.day<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">date</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::date, <span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::gregorian_calendar, 
<span class="org-function-name">boost</span>::<span class="org-constant">gregorian</span>::date_duration<span class="org-rainbow-delimiters-depth-2">&gt;</span>::day_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f9bfc0

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.day<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 11

&gt;&gt; <span class="org-constant">stg</span>::cout &lt;&lt; s1.day<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
11
</pre>
</div>

<p>
Get day of Week: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> dw = s1.day_of_week<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">greg_weekday</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d764702e

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> dw
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.day_of_week<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>dw<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
</pre>
</div>

<p>
Get day of Week as Enumeration:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> dw = s1.day_of_week<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">greg_weekday</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d764702e

&gt;&gt; dw.as_enum<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-constant">greg_weekday</span>::weekday_enum<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">date_time</span>::<span class="org-constant">weekdays</span>::Thursday<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4

&gt;&gt; dw.as_enum<span class="org-rainbow-delimiters-depth-1">()</span> == <span class="org-constant">dt</span>::<span class="org-constant">weekdays</span>::Thursday
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>  
</pre>
</div>

<p>
Get day of Week as C-string (const char*): 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; dw.as_short_string<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Thu"</span>

&gt;&gt; dw.as_long_string<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span> *<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Thursday"</span>
</pre>
</div>

<p>
Get day of year (number of elapsed days until the date s1)
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; s1.day_of_year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-constant">date</span>::day_of_year_type<span class="org-rainbow-delimiters-depth-1">)</span> @0x8000e30

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> s1.day_of_year<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 284

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>s1.day_of_year<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 284
</pre>
</div>

<p>
Get difference between two dates in days: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> date_a = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2009, 10, 20<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647068

&gt;&gt; <span class="org-keyword">auto</span> date_b = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2011, 1, 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d764706c

&gt;&gt; <span class="org-keyword">auto</span> diff = date_b - date_a
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date_duration</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fd6d7647070

&gt;&gt; diff.days<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 438
</pre>
</div>

<p>
<b>Date arithmetics:</b>
</p>

<p>
Add days to a date: 
</p>

<ul class="org-ul">
<li>Add 200 days to date 2005-09-25</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> date_a = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2005, 9, 25<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7048

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a = "</span> &lt;&lt; date_a &lt;&lt; <span class="org-string">"\n"</span>;
date_a = 2005-Sep-25

<span class="org-comment-delimiter">// </span><span class="org-comment">Create a new date object = date_a + 200 days </span>
&gt;&gt; <span class="org-keyword">auto</span> date_b = date_a + <span class="org-constant">g</span>::days<span class="org-rainbow-delimiters-depth-1">(</span>200<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7060

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_b = "</span> &lt;&lt; date_b &lt;&lt; <span class="org-string">"\n"</span>;
date_b = 2006-Apr-13

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a + 200 days = "</span> &lt;&lt; date_a + <span class="org-constant">g</span>::days<span class="org-rainbow-delimiters-depth-1">(</span>200<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
date_a + 200 days = 2006-Apr-13

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a + 1200 days = "</span> &lt;&lt; date_a + <span class="org-constant">g</span>::days<span class="org-rainbow-delimiters-depth-1">(</span>1200<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
date_a + 1200 days = 2009-Jan-07
</pre>
</div>

<p>
Add months to a date: 
</p>
<ul class="org-ul">
<li>Add 5 months to date 2005-09-25</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> date_a = <span class="org-constant">g</span>::date<span class="org-rainbow-delimiters-depth-1">(</span>2005, 9, 25<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">boost</span>::<span class="org-constant">gregorian</span>::<span class="org-type">date</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f83a2ba7048

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"date_a + 5 months  = "</span> &lt;&lt; date_a + <span class="org-constant">g</span>::months<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
date_a + 5 months  = 2006-Feb-25
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgebd047d" class="outline-3">
<h3 id="orgebd047d"><span class="section-number-3">1.19</span> Boost Math constants</h3>
<div class="outline-text-3" id="text-1-19">
<p>
The math constants library provide many recurrent, useful and accurate
math constants for several floating point types and also templated
math constants for generic programming.
</p>

<p>
Documentation: 
</p>

<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_71_0/libs/math/doc/html/constants.html">Chapter 4. Mathematical Constants - 1.71.0</a></li>

<li><a href="https://www.boost.org/doc/libs/1_71_0/libs/math/doc/html/math_toolkit/constants.html">The Mathematical Constants - 1.71.0</a></li>
</ul>

<p>
Example: 
</p>
<ul class="org-ul">
<li>File: boost-math-constants.cpp</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">boost/math/constants/constants.hpp</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">FLT</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">FLT</span>
<span class="org-function-name">formula</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">FLT</span> <span class="org-variable-name">x</span>, <span class="org-type">FLT</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">namespace</span> <span class="org-constant">bc</span> = <span class="org-constant">boost</span>::<span class="org-constant">math</span>::constants;
    <span class="org-keyword">return</span> x * x * <span class="org-constant">bc</span>::pi<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">FLT</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> + 4.0 * y * <span class="org-constant">bc</span>::euler_sqr<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">FLT</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::fixed;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n ====== Float Constants - IEEE754 32 bits ======"</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">namespace</span> <span class="org-constant">fc</span> = <span class="org-constant">boost</span>::<span class="org-constant">math</span>::float_constants;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"               PI = "</span> &lt;&lt; <span class="org-constant">fc</span>::pi &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" e (euler number) = "</span> &lt;&lt; <span class="org-constant">fc</span>::euler &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"           root_e = "</span> &lt;&lt; <span class="org-constant">fc</span>::root_e &lt;&lt; <span class="org-constant">std</span>::endl;


    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n ====== Double Constants  - IEEE754 64 bits ===="</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">namespace</span> <span class="org-constant">dc</span> = <span class="org-constant">boost</span>::<span class="org-constant">math</span>::double_constants;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"               PI = "</span> &lt;&lt; <span class="org-constant">dc</span>::pi &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" e (euler number) = "</span> &lt;&lt; <span class="org-constant">dc</span>::euler &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"           root_e = "</span> &lt;&lt; <span class="org-constant">dc</span>::root_e &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n ====== Templated Constants ==================="</span>
              &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">namespace</span> <span class="org-constant">bc</span> = <span class="org-constant">boost</span>::<span class="org-constant">math</span>::constants;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"      formula(4, 5) = "</span> &lt;&lt; formula<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>4, 5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" formula(8f, 5.45f) = "</span> &lt;&lt; formula<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>8.0f, 5.45f<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"        pi&lt;float&gt;() = "</span> &lt;&lt; <span class="org-constant">bc</span>::pi<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::cout &lt;&lt;<span class="org-string">"       euler&lt;float&gt;() = "</span> &lt;&lt; <span class="org-constant">bc</span>::euler<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; <span class="org-constant">std</span>::endl;

    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Program output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">====== Float Constants - IEEE754 32 bits ======
              PI = 3.14159
<span class="org-function-name">e</span> (euler number) = 0.57722
          root_e = 1.64872

====== Double Constants  - IEEE754 64 bits ====
              PI = 3.14159
<span class="org-function-name">e</span> (euler number) = 0.57722
          root_e = 1.64872

====== Templated Constants ===================
     formula(4, 5) = 56.92904
<span class="org-function-name">formula</span>(8f, 5.45f) = 208.32521
       pi&lt;float&gt;() = 3.14159
      euler&lt;float&gt;() = 0.57722
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2020-06-14 Sun 02:23</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
