<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2018-10-16 Tue 21:32 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CPP / C++ Review</title>
<meta name="generator" content="Org mode" />
<meta name="description" content="cpp c++ code examples, demonstrations, design pattern and integration."
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
<link href="theme/org-nav-theme.css" rel="stylesheet">
<script src="theme/org-nav-theme.js"></script>
<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">CPP / C++ Review</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org2831e5a">1. Understanding C++</a>
<ul>
<li><a href="#org5ec5b3a">1.1. C++ Benefits and Costs</a></li>
<li><a href="#orgc2ab8d5">1.2. C++ Language features</a></li>
<li><a href="#orge15a6d0">1.3. Big Picture - Tchnology Landscape</a></li>
<li><a href="#org0c683da">1.4. C++ New Features and Standards</a></li>
<li><a href="#org3a8bdce">1.5. C++ Comparison with Java and C#</a></li>
<li><a href="#org7c28a6a">1.6. Comparison C X C++(CPP)</a></li>
<li><a href="#orgf5b1dce">1.7. Value Semantics X Reference Semantics</a></li>
<li><a href="#org0df0459">1.8. Object Lifecycle</a></li>
<li><a href="#orgbce7345">1.9. C++11 - Uniform Initialization</a></li>
<li><a href="#org56cf9a2">1.10. Iterator based loops and for-range based loops</a>
<ul>
<li><a href="#orge308bfc">1.10.1. Iterator based loop</a></li>
<li><a href="#orgd49ea50">1.10.2. For-ranged based loops</a></li>
</ul>
</li>
<li><a href="#org7dd39f9">1.11. C++11 - Scoped Enum</a></li>
<li><a href="#orgff40da0">1.12. Functor Function-Object and higher order functions</a></li>
<li><a href="#org4462c6b">1.13. Lambda Functions</a>
<ul>
<li><a href="#org73ad9a9">1.13.1. Overview</a></li>
<li><a href="#org743d18d">1.13.2. Basic Example</a></li>
<li><a href="#org3be071d">1.13.3. std::bind</a></li>
</ul>
</li>
<li><a href="#org3ca52d4">1.14. OOP Polymorphism</a>
<ul>
<li><a href="#org69d3087">1.14.1. Overview</a></li>
<li><a href="#org28369e7">1.14.2. Dynamic Polymorphism example</a></li>
<li><a href="#orgca552ca">1.14.3. STL containers and polymorphism</a></li>
</ul>
</li>
<li><a href="#orgf41d1c9">1.15. Type Casting / Type Conversion</a>
<ul>
<li><a href="#org9dd0fde">1.15.1. Overview</a></li>
<li><a href="#org542e20e">1.15.2. Example: Old C-Style Casting:</a></li>
<li><a href="#orgd5581b4">1.15.3. Example: Static Casting</a></li>
<li><a href="#org403b3dc">1.15.4. Example: Reinterpret Cast</a></li>
<li><a href="#org68a6a7b">1.15.5. Example: Const cast</a></li>
<li><a href="#org201d907">1.15.6. References and further reading</a></li>
</ul>
</li>
<li><a href="#orgcf83a75">1.16. Namespaces</a>
<ul>
<li><a href="#org39398ac">1.16.1. Summary</a></li>
<li><a href="#org318bafd">1.16.2. Examples</a></li>
</ul>
</li>
<li><a href="#org632d998">1.17. Pointer to Member Function</a></li>
<li><a href="#orgf158a15">1.18. Template Metaprogramming or Generic Programming</a>
<ul>
<li><a href="#org1367f1d">1.18.1. Overview</a></li>
<li><a href="#org5f8da86">1.18.2. Template type-safe duck-typing or structural typing</a></li>
<li><a href="#orgc7f1584">1.18.3. Class Templates</a></li>
<li><a href="#org482ff0a">1.18.4. Templates and C++ iterators</a></li>
<li><a href="#org4ba928d">1.18.5. Basic Template Specialization</a></li>
<li><a href="#orged509c8">1.18.6. Templates with default arguments</a></li>
<li><a href="#orgf706234">1.18.7. Implementing Higher Order Functions with templates</a></li>
<li><a href="#orgd6198f1">1.18.8. Metafunctions or type traits</a></li>
<li><a href="#org13b91bb">1.18.9. Predefined type traits in &lt;type_traits&gt;</a></li>
<li><a href="#orgbc9532f">1.18.10. Variadic Templates</a></li>
<li><a href="#org313c8de">1.18.11. References and Bookmarks</a></li>
</ul>
</li>
<li><a href="#orgdc65937">1.19. Books</a></li>
</ul>
</li>
</ul>
</div>
</div>
<ul class="org-ul">
<li><a href='index.html'>Index</a></li>
</ul>

<div id="outline-container-org2831e5a" class="outline-2">
<h2 id="org2831e5a"><span class="section-number-2">1</span> Understanding C++</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org5ec5b3a" class="outline-3">
<h3 id="org5ec5b3a"><span class="section-number-3">1.1</span> C++ Benefits and Costs</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Some C++ compelling features which sets it apart from most
programming languages are: 
</p>

<ul class="org-ul">
<li>Compilation to native code.</li>
<li>High Performance and zero-cost abstractions.</li>
<li>Hardware portability and compiler availability for many processor
and hardware architechtures. C++ has the widest range of processor
support, so it can run on mainstream x86, desktop processors;
mobile phone ARM-based CPUs; GPUs; embedded processors and
microcontrollers.</li>
<li>Direct access to the operating system C-API and system calls.</li>
<li>Interoperability with C libraries.</li>
<li>Direct Access to Memory which is important on embedded systems for
accessing memory-mapped IO devices.</li>
</ul>

<p>
Disadvantages: 
</p>

<ul class="org-ul">
<li>Language complexity</li>

<li>Lack of a comprehensive standard library.</li>

<li>Compiler's cryptic error messages.</li>

<li>Lack of agreed package manager.</li>

<li>ABI - Application Binary Interface Issues - due the
non-standardized ABI, it is almost impossible to link object-code
(aka compiled code) compiled with different compilers. This is why,
unlike Java and C#,  there is almost no pre-compiled libraries for
C++ what makes the binary reuse hard.</li>
</ul>
</div>
</div>

<div id="outline-container-orgc2ab8d5" class="outline-3">
<h3 id="orgc2ab8d5"><span class="section-number-3">1.2</span> C++ Language features</h3>
<div class="outline-text-3" id="text-1-2">
<p>
C++ Supported Paradigms: 
</p>

<ul class="org-ul">
<li><span class="underline">Imperative / Procedural</span> as C and Pascal</li>

<li><span class="underline">Object Oriented</span></li>

<li><span class="underline">Functional Programmign</span> since C++11 with the introduction type
deduction (auto keyword) and lambda functions.</li>

<li><span class="underline">Generic Programming</span> - Template metaprogramming, a combination of
statically typed duck-typing and lisp-like metaprogramming that
allows efficient code generation at compile-time.</li>
</ul>

<p>
Other Features: 
</p>

<ul class="org-ul">
<li>Automatic memory management.</li>
<li>No garbage collector.</li>
<li>Low level access to system and operating system services or API in
a similar way to C.</li>
</ul>

<p>
Domains where C++ is used: 
</p>

<ul class="org-ul">
<li>System Programming - It means, operating systems, device drivers,
hardware interfacing, USB drivers &#x2026;</li>
<li>Embedded Systems</li>
<li>3D game engines and AAA (triple-A) games.</li>
<li>High Performance Computing (HPC)</li>
<li>High perfomance numerical simulation.</li>
<li>High Perfomance reusable libraries and software components</li>
<li>Physics</li>
<li>High Energy Physics - See CERN</li>
</ul>
</div>
</div>

<div id="outline-container-orge15a6d0" class="outline-3">
<h3 id="orge15a6d0"><span class="section-number-3">1.3</span> Big Picture - Tchnology Landscape</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>Operating System
<ul class="org-ul">
<li>Desktop:
<ul class="org-ul">
<li>Windows</li>
<li>Linux (U-nix like)</li>
<li>BSD Family (U-nix like)</li>
<li>Mac OSX (U-nix like)</li>
</ul></li>
<li>Mobile Devices: 
<ul class="org-ul">
<li>Android (Linux Kernel + Bionic =&gt; BSD-derived C-library replacing GNU C-Library GLIBC)</li>
<li>iOS (U-nix lilke)</li>
</ul></li>
<li>Real Time OSes for embedded systems
<ul class="org-ul">
<li>VXWorks</li>
<li>QNX</li>
</ul></li>
</ul></li>

<li>Executable Formats
<ul class="org-ul">
<li>Windows / .exe, *.dll files         (PE32)</li>
<li>Linux   / No extension, *.so files  (ELF)</li>
<li>MacOSX  / *.dylib                   (MachO)</li>
</ul></li>

<li>Processor Architecture
<ul class="org-ul">
<li>Most used for personal computers (based on x86)
<ul class="org-ul">
<li>Intel x86     - 32 bits.</li>
<li>AMD/Inteal 64 - 64 bits.</li>
</ul></li>

<li>Most used for embedded systems and mobile devices.
<ul class="org-ul">
<li><b>ARM core</b> (32 bits) - Widely used in Smartphones, PDAs, Tablets,
Printers and so on. Note: ARM is not an specific processor, it
is a CPU architechture designed by the ARM company and licensed
to IC (Integrated Circuit Manufacturers) which embbeds the CPU
on their devices. So, the ARM-based CPUs, embedded processors
and microncontrollers are produced by many manufacturers.</li>
<li><b>Power PC</b> (Former Motorola)</li>
</ul></li>
</ul></li>

<li>Graphical Stack - Outline of the most common graphical systems.
<ul class="org-ul">
<li>X11 - XServer / Unix (Linux, BSD, FreeBSD)</li>
<li>Windows API / Microsoft Windows OS</li>
<li>MacOSX  - Cocoa</li>
</ul></li>
</ul>

<p>
<b>Tooling</b>
</p>

<ul class="org-ul">
<li>Compilers
<ul class="org-ul">
<li>Windows C/C++ compiler</li>
<li>GCC - Gnu C/C++ Compiler (Stard Compiler of many Linux distributions)</li>
<li>LLVM/Clang</li>
<li>Proprietary compilers: Many manufacturers provide compilers for
their processors, microcontrollers and embedded systems that
generally have a different architecture than most people are used
to.</li>
</ul></li>

<li>Building Tools
<ul class="org-ul">
<li>GNU Make</li>
<li>Cmake</li>
</ul></li>

<li>Main C/C++ GUI - Graphical User Interfaces Libraries
<ul class="org-ul">
<li><b>QT toolkit</b> / C++ - Cross Platform. QT is the most supported cross
platform toolkit, but it is hard to be called from languages
other than C++ as it is written in C++ and this language doesn't
have a standard ABI (Application Binary Interface).</li>
<li><b>GTK</b> / C with C++ inteface - Cross platform, most common in Linux OS.</li>
<li><b>Windows API</b>. / Only available on Windows.</li>
<li><b>Cocoa</b> / MacOSX - Not cross platform. It is only available on MacOSX.</li>
<li>XServer/Xlib API - Most low level graphical user interface
library on Linux, BSD and others.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org0c683da" class="outline-3">
<h3 id="org0c683da"><span class="section-number-3">1.4</span> C++ New Features and Standards</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li><b>C++11</b>
<ul class="org-ul">
<li>C++11 Working Draft  <a href="http://wg21.link/n3242">http://wg21.link/n3242</a></li>
<li>See:
<ul class="org-ul">
<li><a href="https://isocpp.org/wiki/faq/cpp11-language#auto">C++11 Language Extensions — General Features, C++ FAQ</a></li>
<li><a href="http://www.windowscpp.com/CPP11FAQ.htm">http://www.windowscpp.com/CPP11FAQ.htm</a></li>
</ul></li>
<li>Features which supports Functional Programming 
<ul class="org-ul">
<li>auto keyworkd for type deduction (aka type inference)
<ul class="org-ul">
<li>Which relieves the developer from writing all types and
simplifies the code.</li>
</ul></li>
<li>Lambda functions and std::function
<ul class="org-ul">
<li>Introduces the functional programming paradigm in C++ allowing
users to write higher-order functions and reusable algorithms.</li>
</ul></li>
<li>Tuples
<ul class="org-ul">
<li>allows returning multiple values</li>
</ul></li>
<li>Move Semantics:
<ul class="org-ul">
<li>Transfer resource ownership from temporary objects. This
feature removes the runtime overhead of temporary objects and
also allows to return containers such as vectors, string and
etc from functions without runtime overhed or deep copy.</li>
</ul></li>
</ul></li>
<li>Library Support 
<ul class="org-ul">
<li>Smart Pointers =&gt; <code>unique_ptr</code> and <code>shared_ptr</code>
<ul class="org-ul">
<li>Provides memory and resource management making the programs
less prone to memory or resource leaks. Those pointers
implments the RAII (Resource Acquisition is Initialization)
idiom which takes advantage of C++ deterministic destructor for
releasing resources no longer needed.</li>
</ul></li>
<li>Regex</li>
<li>Cross-platform concurrency features.
<ul class="org-ul">
<li>Example: threads, monitors and locks which works on all
supported platforms and operating systems.</li>
</ul></li>
</ul></li>
<li>Misc
<ul class="org-ul">
<li>nullpr - type-safe null pointer</li>
<li>Ranged-based loop</li>
</ul></li>
<li>Compile-time metaprogramming features 
<ul class="org-ul">
<li>Variadic Templates</li>
<li>Contexpr
<ul class="org-ul">
<li>Allows compile-time computations such as computing
random numbers, encrypting string at runtime or generating
look-up tables.</li>
</ul></li>
<li>Static assert</li>
<li>String literals</li>
<li>User-defined literals</li>
</ul></li>
</ul></li>
<li><b>C++14</b>
<ul class="org-ul">
<li>C++14 Working Draft - <a href="http://wg21.link/n4296">http://wg21.link/n4296</a></li>
<li>See: <a href="https://isocpp.org/wiki/faq/cpp14-language">C++14 Language Extensions, C++ FAQ</a></li>
<li><span class="underline">Binary Literals</span>: int x = 0b1001001 -&gt; This feature is useful for
embedded systems and dealing with bitmasks and hardware
registers.</li>
<li><span class="underline">Digit Separators</span> - allows to write the number pi = 3.1415927 as pi = 3.141'592'7</li>
<li><span class="underline">Generalized return type deduction</span>.</li>
<li>decltype(auto)</li>
<li>Genric Lambda - Now it is possible to use the keyword auto for
deducing or infering the type of lambda arguments.</li>
<li>Variable Templates</li>
<li><span class="underline">Extended Constexpr</span> - contexpr functions can have loops, mutating
variables and don't need to be recursive as it was before,
consequently constexpr is able to peform more complex
compile-time computations.</li>
<li>[ [ deprecated ] ] attribute -&gt; enables annotating an entity as
deprecated and prints a compilation warn if a deprecated entity
is used.</li>
</ul></li>
<li><b>C++17</b>
<ul class="org-ul">
<li>C++17 Working Draft - <a href="http://wg21.link/n4659">http://wg21.link/n4659</a></li>
<li>See:
<ul class="org-ul">
<li><a href="http://www.cppstd17.com/">http://www.cppstd17.com/</a></li>
<li><a href="https://isocpp.org/wiki/faq/cpp17-language">https://isocpp.org/wiki/faq/cpp17-language</a></li>
<li><a href="https://www.infoworld.com/article/3044727/application-development/qa-bjarne-stroustrup-previews-c-17.html">Q&amp;A: Bjarne Stroustrup previews C++ 17 | InfoWorld</a></li>
</ul></li>
<li>std::any</li>
<li>std::variant</li>
<li>std::optional</li>
<li>key, value decomposition</li>
<li>Parallel algorithms</li>
<li>structured bindings</li>
<li>nested namespaces</li>
<li>File system libraries</li>
<li>&#x2026; and much more &#x2026;!!</li>
</ul></li>
<li><b>C++20</b> - Coming soon.</li>
</ul>

<p>
Compiler Support: 
</p>

<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/compiler_support">C++ compiler support - cppreference.com</a></li>
<li><a href="https://www.gnu.org/software/gcc/projects/cxx-status.html">C++ Standards Support in GCC - GNU Project - Free Software Foundation (FSF)</a></li>
<li><a href="https://software.intel.com/en-us/articles/c17-features-supported-by-intel-c-compiler">C++17 Features Supported by Intel® C++ Compiler | Intel® Software</a></li>
<li><a href="https://docs.microsoft.com/en-us/cpp/visual-cpp-language-conformance?view=vs-2017">Visual C++ Language Conformance | Microsoft Docs</a></li>
</ul>
</div>
</div>
<div id="outline-container-org3a8bdce" class="outline-3">
<h3 id="org3a8bdce"><span class="section-number-3">1.5</span> C++ Comparison with Java and C#</h3>
<div class="outline-text-3" id="text-1-5">
<p>
General overview: Unlike most object oriented languages such as Java
and C#, C++ doesn't have a class hierarchy, single inheritance,
garbage collection and a comprehensive standard library. However in
some situations, C++ benefits such as direct access to the operating
system, memory, system calls and low level; interoperability with C
libraries; and above all, high performance computing may offset the
language complexity costs.
</p>

<p>
This table shows a comparison between C++ and mainstreams object
oriented programming languages like Java and C#.
</p>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Feature</th>
<th scope="col" class="org-left">C++</th>
<th scope="col" class="org-left">Java</th>
<th scope="col" class="org-left">C# - .NET</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Native Code</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">JIT - Just-In-Time Compilation</td>
<td class="org-left">No  - No needed, since C++ is native.</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Virtual Machine</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Garbage Collection</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Memory Management</td>
<td class="org-left">semi-automatic</td>
<td class="org-left">auto</td>
<td class="org-left">auto</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Object Oriented Features</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">OOP - Object Oriented</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Class Hierarchy</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Reflection</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Single Inheritance</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Multiple Inheritance</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Properties</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Inner classes, aka nested classes</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Anonymous classes</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Operator Overloading</td>
<td class="org-left">Yes</td>
<td class="org-left">Not</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Marshalling</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Conditional Compilation - preprocessor</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Lambda functions</td>
<td class="org-left">Yes  - since C++11</td>
<td class="org-left">Yes - since Java 8</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Generics</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">*Template metaprogramming</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Dependency, package manager</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left"><b>Standard Library Features</b></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Broad Cross Platform Support</td>
<td class="org-left">No - Provided by boost library.</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">GUI toolkit in standard library</td>
<td class="org-left">No</td>
<td class="org-left">Yes - Swing, JavaFX</td>
<td class="org-left">Yes - WinForms, WPF</td>
</tr>

<tr>
<td class="org-left">Collection Library</td>
<td class="org-left">Yes - STL.</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Sockets</td>
<td class="org-left">No - Provided Boost library.</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Threads</td>
<td class="org-left">Yes. Since, C++11</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">File System</td>
<td class="org-left">C++ 11 -&gt; No, C++17 -&gt; Yes.</td>
<td class="org-left">Yes</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>

<p>
Notes: 
</p>

<ul class="org-ul">
<li><span class="underline">C++ DO have package managers</span> such as <a href="https://conan.io/">Conan</a>, <a href="http://www.buckaroo.pm/">Buckaroo</a> and <a href="https://docs.microsoft.com/en-us/cpp/vcpkg?view=vs-2017">Vcpkg</a>. But
they are not standard and not widely adopted. In addition, C++
package managers generally don't provide pre-compiled packages as
Java and C# / .NET. Actually, due to non standard ABI - Application
Binary Interface issues, they only provide source packages that are
compiled locally. As far it is known, the C++ package managers also
don't provide a way to install C-shared libraries dependencies
locally such as GNU-scientific library, Opengl, OpenCV, Gtk,
Blas-Lapack shared libraries and so on.</li>

<li><span class="underline">Virtual Machine</span> =&gt; The <a href="https://en.wikipedia.org/wiki/C%2B%2B/CLI">C++/CLI</a> implementation, also known as
Managed C++ runs in the .NET virtual machine and it is compiled to
the .NET platform. But this implementation is only supported on
Windows.</li>
</ul>

<p>
<b>Main Differences between C++ and other languages</b>
</p>

<ul class="org-ul">
<li>Value Semantics =&gt; Classes are trated as primitive types by default.</li>
<li>Objects can be allocated on the stack and on the heap.</li>
<li>Deterministic Destructor - the destructor method is always called
when the object goes out of escope.</li>
<li>Minimal standard library</li>
<li>Template Metaprogramming - which allows type-safe code generation
with zero rutime overhead.</li>
<li>Pointers =&gt; Most languages doesn't provide access to pointers and
calling C-libraries directly.</li>
</ul>

<p>
<b>C++ Terminology</b> 
</p>

<p>
C++ has a different terminology from mainstream programming languages
which is shown in the following table.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">C++</th>
<th scope="col" class="org-left">Other OOP Languages</th>
<th scope="col" class="org-left">Comment</th>
</tr>

<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">i.e: Java, Python, &#x2026;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Class</td>
<td class="org-left">Class</td>
<td class="org-left">C++ class' fields and methods are private by default.</td>
</tr>

<tr>
<td class="org-left">Struct</td>
<td class="org-left">Class</td>
<td class="org-left">A C++ is the same as a Class, but fields and methods are public by default.</td>
</tr>

<tr>
<td class="org-left">Class or Struct</td>
<td class="org-left">Abstract Class</td>
<td class="org-left">A C++ abstract class have at least one <span class="underline">virtual function</span>.</td>
</tr>

<tr>
<td class="org-left">Class or Struct</td>
<td class="org-left">Interface</td>
<td class="org-left">A C++ interface is a class signature with only pure virtual functions (abstract methods.)</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Member Function</td>
<td class="org-left">Instance methods</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Static Member Function</td>
<td class="org-left">Static method</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">Virtual Functions</td>
<td class="org-left">-</td>
<td class="org-left">Only methods annoted with virtual  can overriden by subclasses</td>
</tr>

<tr>
<td class="org-left">Non Virtual Functions</td>
<td class="org-left">-</td>
<td class="org-left">Methods without <span class="underline">virtual</span> annotation cannot be overriden by subclasses.</td>
</tr>

<tr>
<td class="org-left">Pure Virtual Function</td>
<td class="org-left">Abstract method (method without implementation)</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">STL Containers</td>
<td class="org-left">Collection library - Lists, Maps, Tuples &#x2026;</td>
<td class="org-left">C++ name its collections as containters</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
<b>Java X C++ Collections Comparison</b>
</p>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Java</th>
<th scope="col" class="org-left">C++</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">java.util.ArrayList</td>
<td class="org-left">std::vector</td>
</tr>

<tr>
<td class="org-left">java.util.LinkedList</td>
<td class="org-left">std::list</td>
</tr>

<tr>
<td class="org-left">java.util.Stack</td>
<td class="org-left">std::stack</td>
</tr>

<tr>
<td class="org-left">java.util.Queue</td>
<td class="org-left">std::queue</td>
</tr>

<tr>
<td class="org-left">java.util.Deque</td>
<td class="org-left">std::deque</td>
</tr>

<tr>
<td class="org-left">java.util.TreeSet</td>
<td class="org-left">std::set</td>
</tr>

<tr>
<td class="org-left">java.util.HashSet</td>
<td class="org-left">std::unordered_set</td>
</tr>

<tr>
<td class="org-left">java.util.TreeMap</td>
<td class="org-left">std::map</td>
</tr>

<tr>
<td class="org-left">java.util.HashMap</td>
<td class="org-left">std::unordered_map</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<p>
See: 
</p>
<ul class="org-ul">
<li><a href='C++ - CPP Programming/CppFor Java Programmers - Hans Dulimatra.pdf'>CppFor Java Programmers - Hans Dulimatra.pdf</a></li>
<li><a href="https://en.wikiversity.org/wiki/Java_Collections_Overview">Java Collections Overview - Wikiversity</a></li>
</ul>
</div>
</div>

<div id="outline-container-org7c28a6a" class="outline-3">
<h3 id="org7c28a6a"><span class="section-number-3">1.6</span> Comparison C X C++(CPP)</h3>
<div class="outline-text-3" id="text-1-6">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Feature</th>
<th scope="col" class="org-left">C++ / CPP - C Plus Plus</th>
<th scope="col" class="org-left">C</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Creator</td>
<td class="org-left">Bjarne Stroustrup</td>
<td class="org-left">Dennis Ritchie</td>
</tr>

<tr>
<td class="org-left">Paradigms</td>
<td class="org-left">Imperative, Object Orientated, Gneric / Meta programming and Functional</td>
<td class="org-left">Procedural / Imperative</td>
</tr>

<tr>
<td class="org-left">Some use cases</td>
<td class="org-left">High Performance Computing, Embedded Systems, Games, &#x2026;</td>
<td class="org-left">System programming and embedded systems &#x2026;</td>
</tr>

<tr>
<td class="org-left">Standard ABI</td>
<td class="org-left">No</td>
<td class="org-left">Yes</td>
</tr>

<tr>
<td class="org-left">Collection Library (Containers)</td>
<td class="org-left">Yes - STL (standard) and others.</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Garbage Collector</td>
<td class="org-left">No</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Memory Management</td>
<td class="org-left">Manual and Semi automatic (provided by smart pointers.)</td>
<td class="org-left">Manual</td>
</tr>

<tr>
<td class="org-left">Error Handling Mechanism</td>
<td class="org-left">Function return values, global flags and exceptions.</td>
<td class="org-left">Function return values and  global flags such as errno</td>
</tr>

<tr>
<td class="org-left">Exceptions</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">Namespaces</td>
<td class="org-left">Yes</td>
<td class="org-left">No</td>
</tr>

<tr>
<td class="org-left">File Extensions</td>
<td class="org-left">.cpp (c++ source code) and .hpp (c++ header file).</td>
<td class="org-left">.c (C-source code) and .h (header file)</td>
</tr>

<tr>
<td class="org-left">Metaprogramming facilities</td>
<td class="org-left">Macros + Templates + Inline Functions + Contexptr</td>
<td class="org-left">Macros</td>
</tr>

<tr>
<td class="org-left">String Manipulation</td>
<td class="org-left">std::string</td>
<td class="org-left">C doesn't have string types, just array of characters.</td>
</tr>

<tr>
<td class="org-left">Direct Access to Memory</td>
<td class="org-left">yes - using <code>reinterpret_cast</code> or C-style casting.</td>
<td class="org-left">yes - using C-style casting.</td>
</tr>

<tr>
<td class="org-left">Run barebones without OS</td>
<td class="org-left">yes</td>
<td class="org-left">yes - C has more compillers for embedded devices than C++.</td>
</tr>

<tr>
<td class="org-left">Threads in standard library</td>
<td class="org-left">Yes - since C++11</td>
<td class="org-left">No - It is platform dependent.</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>Direct Access to Memory:
<ul class="org-ul">
<li>Note: It means direct access to a memory location given by its
address. This feature is used for accessing <a href="https://en.wikipedia.org/wiki/Memory-mapped_I/O">memory mapped IO</a> in
embedded systems and low level system programming.</li>
</ul></li>
</ul>

<p>
<b>File Extensions</b>
</p>

<ul class="org-ul">
<li>Source Files
<ul class="org-ul">
<li>*.cpp - C++ source files.</li>
<li>*.hpp - C++ header files.</li>
<li>*.o   - Object Code</li>
</ul></li>

<li>Windows
<ul class="org-ul">
<li>*.exe - PE32 - Windows Executable</li>
<li>*.dll - Windows Shared Library</li>
</ul></li>

<li>Unix (Linux, BSD &#x2026;)
<ul class="org-ul">
<li>(No extension or *.bin) - ELF - Unix Executable</li>
<li>*.so - Unix Shared Library</li>
</ul></li>
</ul>

<p>
<b>Primitive Data Types</b>
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Type</th>
<th scope="col" class="org-left">stdint.h type</th>
<th scope="col" class="org-right">Size (Bytes)</th>
<th scope="col" class="org-right">Size (Bits)</th>
<th scope="col" class="org-left">Range</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">bool</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">1</td>
<td class="org-right">8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Boolean 0 (false) or 1 (true)</td>
</tr>

<tr>
<td class="org-left">char</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">1</td>
<td class="org-right">8</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Ascii character</td>
</tr>

<tr>
<td class="org-left">unsigned char</td>
<td class="org-left">uint8_t</td>
<td class="org-right">1</td>
<td class="org-right">8</td>
<td class="org-left">0 to 255</td>
<td class="org-left">1 byte integer</td>
</tr>

<tr>
<td class="org-left">signed char</td>
<td class="org-left">int8_t</td>
<td class="org-right">1</td>
<td class="org-right">8</td>
<td class="org-left">-128 to 127</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">short</td>
<td class="org-left">int16_t</td>
<td class="org-right">2</td>
<td class="org-right">16</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">16 bits signed integer</td>
</tr>

<tr>
<td class="org-left">unsigned short</td>
<td class="org-left">uint16_t</td>
<td class="org-right">2</td>
<td class="org-right">16</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">int</td>
<td class="org-left">int32_t</td>
<td class="org-right">4</td>
<td class="org-right">32</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">32 bits signed integer</td>
</tr>

<tr>
<td class="org-left">unsigned int</td>
<td class="org-left">uint32_t</td>
<td class="org-right">4</td>
<td class="org-right">32</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">32 bits unsigned integer</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">float</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">4</td>
<td class="org-right">32</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">32 bits IEEE 754 single-precision float point number</td>
</tr>

<tr>
<td class="org-left">double</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">8</td>
<td class="org-right">64</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">64 bits IEEE 754 double-precision float point Number</td>
</tr>

<tr>
<td class="org-left">long double</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">10</td>
<td class="org-right">80</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Extended precision non-IEEE float point number</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>


<ul class="org-ul">
<li>Note: The type char can be understood as an 8-bits integer.</li>
</ul>
</div>
</div>
<div id="outline-container-orgf5b1dce" class="outline-3">
<h3 id="orgf5b1dce"><span class="section-number-3">1.7</span> Value Semantics X Reference Semantics</h3>
<div class="outline-text-3" id="text-1-7">
<p>
According to the - <a href="https://isocpp.org/wiki/faq/value-vs-ref-semantics">ISO C++</a>, value and reference semantics are defined
as: 
</p>

<blockquote>
<p>
With reference semantics, assignment is a pointer-copy (i.e., a
reference). Value (or “copy”) semantics mean assignment copies the
value, not just the pointer. C++ gives you the choice: use the
assignment operator to copy the value (copy/value semantics), or use
a pointer-copy to copy a pointer (reference semantics). C++ allows
you to override the assignment operator to do anything your heart
desires, however the default (and most common) choice is to copy the
value.
</p>
</blockquote>

<p>
<b>Definitions:</b>
</p>

<p>
<span class="underline">Reference Semantics</span>: Behavior where composite types are passed by
reference when assigned; passed as function or method parameters or
returned from functions. This is the default behavior of most object
oriented programming languages, except C++.
</p>

<p>
In Java, C#, Scala, Python and etc. Objects have reference semantics
by default. This example in Scala programming language shows how
<span class="underline">reference semantics</span> works in most languages.
</p>

<div class="org-src-container">
<pre class="src src-scala"><span class="org-keyword">class</span> <span class="org-type">Foo</span><span class="org-rainbow-delimiters-depth-1">(</span>name<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-scala-font-lockXprivate">private</span> <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">_name</span> <span class="org-keyword">=</span> name
  <span class="org-keyword">def</span> <span class="org-function-name">setName</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">=</span>
    _name <span class="org-keyword">=</span> name
  <span class="org-keyword">def</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    name
  <span class="org-scala-font-lockXoverride">override</span> <span class="org-keyword">def</span> <span class="org-function-name">toString</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">=</span>
    s<span class="org-string">"Foo { name = </span><span class="org-variable-name">$name</span><span class="org-string"> }"</span>
<span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">x</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Primitive types have value semantics: assignment of variables of</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">primitive types, creates a copy, so both variables can be modified</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">without changing each other.</span>
scala&gt; <span class="org-keyword">var</span> <span class="org-scala-font-lockXvar">y</span> <span class="org-keyword">=</span> x
<span class="org-function-name">y</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">By modifying x, the value of y remains the same.</span>
scala&gt; x <span class="org-keyword">=</span> <span class="org-constant">25</span>
<span class="org-function-name">x</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">25</span>

scala&gt; y
<span class="org-function-name">res5</span><span class="org-keyword">:</span> <span class="org-type">Int</span> <span class="org-keyword">=</span> <span class="org-constant">10</span>

scala&gt; 

<span class="org-comment-delimiter">//</span><span class="org-comment">===&gt; Composite and complexity types have reference semantics by default </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">in languages other than C++.</span>

scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">foo</span> <span class="org-keyword">=</span> <span class="org-keyword">new</span> <span class="org-type">Foo</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"bar"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">foo</span><span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> bar <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Assignment doesn't create a copy like assignment </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">of primitive type, actually the assignment creates </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">a reference to the object foo. As result, modifying </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">one of the objects, modifies the other.</span>
scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">bar</span> <span class="org-keyword">=</span> foo
<span class="org-function-name">bar</span><span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> bar <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Modifying bar modifes foo. </span>
scala&gt; bar.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"something"</span><span class="org-rainbow-delimiters-depth-1">)</span>

scala&gt; bar
<span class="org-function-name">res3</span><span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> something <span class="org-rainbow-delimiters-depth-1">}</span>

scala&gt; foo
<span class="org-function-name">res4</span><span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> something <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Passing as function parameter doesn't create a copy like in C++, </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">it passes the object by reference, so if the parameter is modified inside</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">the function, the original object will be modified too. </span>
 <span class="org-keyword">def</span> <span class="org-function-name">setFooPrint</span><span class="org-rainbow-delimiters-depth-1">(</span>param<span class="org-keyword">:</span> <span class="org-type">Foo</span><span class="org-rainbow-delimiters-depth-1">){</span>
   param.setName<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy name"</span><span class="org-rainbow-delimiters-depth-2">)</span>
   println<span class="org-rainbow-delimiters-depth-2">(</span>foo<span class="org-rainbow-delimiters-depth-2">)</span>
 <span class="org-rainbow-delimiters-depth-1">}</span>

 scala&gt; setFooPrint<span class="org-rainbow-delimiters-depth-1">(</span>foo<span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> dummy name <span class="org-rainbow-delimiters-depth-1">}</span>

 scala&gt; foo
 res8<span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> dummy name <span class="org-rainbow-delimiters-depth-1">}</span>

 <span class="org-comment-delimiter">// </span><span class="org-comment">Returning an object from a function doesn't create a copy as would happen </span>
 <span class="org-comment-delimiter">// </span><span class="org-comment">with primitive types.</span>
 <span class="org-keyword">def</span> <span class="org-function-name">modifyReturn</span><span class="org-rainbow-delimiters-depth-1">(</span>param<span class="org-keyword">:</span> <span class="org-type">Foo</span>, newName<span class="org-keyword">:</span> <span class="org-type">String</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-keyword">=</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   param.setName<span class="org-rainbow-delimiters-depth-2">(</span>newName<span class="org-rainbow-delimiters-depth-2">)</span>
   param
 <span class="org-rainbow-delimiters-depth-1">}</span>
 scala&gt; <span class="org-keyword">val</span> <span class="org-variable-name">foob</span> <span class="org-keyword">=</span> modifyReturn<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"Scala + C++ + JNI == HPC"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 foob<span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> <span class="org-constant">Scala</span> + <span class="org-constant">C</span>++ + <span class="org-constant">JNI</span> == <span class="org-constant">HPC</span> <span class="org-rainbow-delimiters-depth-1">}</span>

 scala&gt; foo
 res9<span class="org-keyword">:</span> <span class="org-type">Foo</span> <span class="org-keyword">=</span> <span class="org-constant">Foo</span> <span class="org-rainbow-delimiters-depth-1">{</span> name <span class="org-keyword">=</span> <span class="org-constant">Scala</span> + <span class="org-constant">C</span>++ + <span class="org-constant">JNI</span> == <span class="org-constant">HPC</span> <span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
<span class="underline">Value Semantics</span>: Behavior where composite types such as instances of
classes are treated as primitive type such as booleans, integers or
float point numbers. In the value semantics, a copy is created when
variables are assigned; passed as parameters to functions or methods
and returned from functions. So modifying one of the variables doesn't
change the other. 
</p>

<p>
Unlike other languages, C++ uses value semantics by default, it means
that in operations such as assignment; returning objects from
functions and passing objects as parameters create a full copy of the
object, instead of creating a reference to the object as would happen
in most object oriented programming languages such as Java, C#,
Python, Ruby and etc. C++ also supports reference semantics, however
it is not the default behavior and unlike in the majority of
programming languages, requires explicit annotation to pass objects by
reference or create a reference to the object.
</p>

<p>
<b>Value Semantics in C++</b>
</p>

<p>
Example: demonstration of value semantics in C++ tested in the CERN's
C++ ROOT REPL:
</p>

<ul class="org-ul">
<li>Note: this code can be copied and pasted in the CERN's ROOT REPL.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">class</span> <span class="org-type">Foo</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_name</span>;
<span class="org-function-name">public</span>:
  <span class="org-comment-delimiter">// </span><span class="org-comment">Constructor </span>
  <span class="org-function-name">Foo</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>:<span class="org-function-name">_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Copy constructor</span>
  <span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Note: If it is not defined, the compiler, defines </span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">a default copy constructor. It was created to demonstrate</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">when the copy constructor is invoked.</span>
  <span class="org-function-name">Foo</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Foo</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
    _name = rhs._name;    
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Copy constructor invoked."</span> &lt;&lt; <span class="org-constant">std</span>::endl;    
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Copy assignment-operator</span>
  <span class="org-comment-delimiter">//</span><span class="org-comment">--------------------------</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Note: It is similar to the copy constructor and</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">default assignment copy-assignment-operator is created</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">by the compiler if the user doesn't define it.</span>
  <span class="org-type">Foo</span> <span class="org-keyword">operator</span><span class="org-function-name">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Foo</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>    
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Copy-assignment operator invoked."</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-keyword">return</span> Foo<span class="org-rainbow-delimiters-depth-3">(</span>rhs._name<span class="org-rainbow-delimiters-depth-3">)</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-type">void</span> <span class="org-function-name">setName</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">){</span>
    _name = name;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> _name;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-type">void</span> <span class="org-function-name">show</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Foo { name = "</span> &lt;&lt; _name &lt;&lt; <span class="org-string">" } "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-type">void</span> <span class="org-function-name">show2</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Foo { name = "</span> &lt;&lt; _name &lt;&lt; <span class="org-string">" } "</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>

<p>
Assignment creates a copy, unlike in most OOP languages like Java, C#,
Python and so on. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Foo foo<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"foo"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 

<span class="org-comment-delimiter">// </span><span class="org-comment">Assingment creates a copy, unlike in most OO languages</span>
&gt;&gt; Foo bar = foo; 
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.

<span class="org-comment-delimiter">// </span><span class="org-comment">Modifying one of the objects, doens't change the other. </span>
&gt;&gt; bar.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; bar.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"I am object bar"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; bar.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = I am object bar <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">foo and bar objects aren't the same as they have </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">different memory locations. </span>
&gt;&gt; &amp;foo == &amp;bar
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt;
</pre>
</div>

<p>
Primitive and composite types are passed by value in C++, unlike in
most OOP languages. So, it means that a copy of the object is created.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">setFooPrint</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span> <span class="org-variable-name">param</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-1">){</span>
  param.setName<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>;
  param.show<span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" name = "</span> &lt;&lt; param.getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Modifying the function paramenter, doesn't modify the passed object.</span>
&gt;&gt; setFooPrint<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"dummy name"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = dummy name <span class="org-rainbow-delimiters-depth-1">}</span> 
 name = dummy name

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 
</pre>
</div>

<p>
Returning an object from function, creates a copy of the object
instead of returning a reference to it like in Java, Scala, Python and
most languages.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Foo</span> <span class="org-function-name">modifyReturn</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span> <span class="org-variable-name">param</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">newName</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  param.setName<span class="org-rainbow-delimiters-depth-2">(</span>newName<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">return</span> param;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-keyword">auto</span> ret = modifyReturn<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"New name"</span><span class="org-rainbow-delimiters-depth-1">)</span>
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
 <span class="org-rainbow-delimiters-depth-1">[</span>INFO<span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f54f0288050

&gt;&gt; &amp;ret == &amp;foo
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

&gt;&gt; ret.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = New name <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

</pre>
</div>

<p>
Value semantics and STL 
</p>

<ul class="org-ul">
<li>Objects can be stored in STL containers by value, reference or by
pointers.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">Double ended queue collection </span>

&gt;&gt; <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-1">&gt;</span> xs;

<span class="org-comment-delimiter">// </span><span class="org-comment">Temporary objects are created on the stack, </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">copied to the deque data structure and then </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">put on the collection. </span>
<span class="org-comment-delimiter">// </span>
&gt;&gt; xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span>Foo<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
&gt;&gt; xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span>Foo<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
&gt;&gt; xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span>Foo<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"value"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
&gt;&gt; xs.push_back<span class="org-rainbow-delimiters-depth-1">(</span>Foo<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"semantics"</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
&gt;&gt; 

&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> @0x1393820, @0x1393840, @0x1393860, @0x1393880 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; xs.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; 

&gt;&gt; xs.at<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; xs.at<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>.show2<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 
&gt;&gt; xs.at<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = value <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Error: invoke const reference method which is not annotated with 'const'</span>
&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-function-name">ROOT_prompt_56</span>:1:26: error: member function <span class="org-warning">'</span>show<span class="org-warning">'</span> <span class="org-keyword">not</span> viable: 
<span class="org-warning">'</span><span class="org-keyword">this</span><span class="org-warning">'</span> argument has type <span class="org-warning">'</span><span class="org-keyword">const</span> Foo<span class="org-warning">'</span>, but <span class="org-type">function</span> <span class="org-function-name">is</span> <span class="org-keyword">not</span> marked <span class="org-keyword">const</span>
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Works as show2() is annotated with 'const'</span>
&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show2<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = world <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = value <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = semantics <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Watesful for-loop: performs uncessary copies which could slow down and inccur </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">on a significant performance overhead in case of a large object.</span>
&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = world <span class="org-rainbow-delimiters-depth-1">}</span> 
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = value <span class="org-rainbow-delimiters-depth-1">}</span> 
 <span class="org-rainbow-delimiters-depth-1">[</span><span class="org-constant">INFO</span><span class="org-rainbow-delimiters-depth-1">]</span> Copy constructor invoked.
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = semantics <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">By using emplace_back - a copy is not created.</span>
&gt;&gt; <span class="org-keyword">auto</span> xs2 = deque<span class="org-rainbow-delimiters-depth-1">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-1">&gt;()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Foo, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>
&gt;&gt; 
&gt;&gt; xs2.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs2.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs2.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"value"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs2.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"semantics"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs2
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>Foo, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span>Foo<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> @0x411ff30, @0x411ff50, @0x411ff70, @0x411ff90 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs2<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> x.show2<span class="org-rainbow-delimiters-depth-2">()</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = hello <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = world <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = value <span class="org-rainbow-delimiters-depth-1">}</span> 
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = semantics <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 
</pre>
</div>

<p>
<b>Reference Semantics in C++</b>
</p>

<p>
Unlike in most programming languages where reference semantics for
complex types such as object is the default behavior, in C++ reference
semantics requires explicit annotation with reference operator (&amp;) or
passing objects by pointer. 
</p>

<p>
The default behavior of passing by value cause significant memory and
performance overhead. In order to avoid unnecessary copies, it is
preferable to pass objects by reference with operator (&amp;) or by const
reference when the object is not supposed to be modified by the
function the objects are passed to.
</p>

<ul class="org-ul">
<li>Create a reference in assignment operation instead of a copy.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; Foo&amp; ref1 = foo;

&gt;&gt; ref1.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"I am foo reference"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = I am foo reference <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">The reference has the same memory location of foo.</span>
&gt;&gt; &amp;foo == &amp;ref1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Passing a parameter by reference instead of passing it by
value. Note: that the copy constructor is not invoked when passing
by reference.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">setFooPrintRef</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span>&amp; <span class="org-variable-name">param</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-1">){</span>
  param.setName<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>;
  param.show<span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" name = "</span> &lt;&lt; param.getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; setFooPrintRef<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"dummy name"</span><span class="org-rainbow-delimiters-depth-1">)</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = dummy name <span class="org-rainbow-delimiters-depth-1">}</span> 
 name = dummy name

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = dummy name <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Returning objects from functions as references.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">Foo</span>&amp; <span class="org-function-name">modifyReturnRef</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span>&amp; <span class="org-variable-name">param</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">newName</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  param.setName<span class="org-rainbow-delimiters-depth-2">(</span>newName<span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-keyword">return</span> param;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; foo.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"unnamed"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; fooRefx.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"I am foo reference"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = I am foo reference <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; &amp;foo == &amp;fooRefx
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">auto</span>&amp; fooRefAuto = modifyReturnRef<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"C++ type inference auto!"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Foo</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f54f0288010

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++ type inference <span class="org-keyword">auto</span><span class="org-negation-char">!</span> <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; fooRefAuto.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++ type inference <span class="org-keyword">auto</span><span class="org-negation-char">!</span> <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; fooRefAuto.setName<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"C++17"</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++17 <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

&gt;&gt; &amp;foo == &amp;fooRefAuto
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Const references cannot be modified as any attempt to change it
will result in a compile-time error.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; Foo foo<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"foo"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = foo <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; foo.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"foo"</span>

&gt;&gt; <span class="org-keyword">const</span> Foo&amp; fooRefConst = modifyReturnRef<span class="org-rainbow-delimiters-depth-1">(</span>foo, <span class="org-string">"C++ constant ref."</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">Foo</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fbf2003c010

&gt;&gt; foo.show<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++ constant ref. <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; foo.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"C++ constant ref."</span>
&gt;&gt; 

&gt;&gt; fooRefConst.show2<span class="org-rainbow-delimiters-depth-1">()</span>
Foo <span class="org-rainbow-delimiters-depth-1">{</span> name = C++ constant ref. <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Any attempt to call a method not annotated with const will result </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">in a compile-time error. </span>
&gt;&gt; fooRefConst.show<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ROOT_prompt_52</span>:1:1: error: member function <span class="org-warning">'</span>show<span class="org-warning">'</span> <span class="org-keyword">not</span> viable: <span class="org-warning">'</span><span class="org-keyword">this</span><span class="org-warning">'</span> 
argument has type <span class="org-warning">'</span><span class="org-keyword">const</span> Foo<span class="org-warning">'</span>, but <span class="org-type">function</span> <span class="org-function-name">is</span> <span class="org-keyword">not</span> marked <span class="org-keyword">const</span>
fooRefConst.show<span class="org-rainbow-delimiters-depth-1">()</span>
^~~~~~~~~~~
<span class="org-function-name">ROOT_prompt_30</span>:1:6: note: <span class="org-warning">'</span>show<span class="org-warning">'</span> declared here
<span class="org-type">void</span> show<span class="org-rainbow-delimiters-depth-1">(){</span> 
</pre>
</div>

<p>
<b>Summary</b> 
</p>

<ul class="org-ul">
<li>Value Semantics X Reference Semantics
<ul class="org-ul">
<li><span class="underline">Value Semantics</span> -&gt; Objects are assigned, passed to functions and
return from functions as primitive types without being modified
as what is modified is a copy of the object. This is default
behavior of C++.

<ul class="org-ul">
<li>Object A = B; =&gt; (C++ Only) Creates object A as a copy of the object B.</li>

<li>Object A = B.copy() (C#, Java, Python &#x2026;) Creates object A as
copy of object B. As value-semantics is not the default
behavior in thoses languages, it is necessary to invoke some
deep copy method explicity.</li>
</ul></li>

<li><span class="underline">Reference Semantics</span> -&gt; Objects are passed by reference or
pointer; assigned by pointer and so on. Objects passed to
functions using reference semantics can modified. This is the
default behavior of Java, Python, C# and other programming
languages.

<ul class="org-ul">
<li>Object A = B; (C#, Java, Python &#x2026;) =&gt; The object A is
reference to object B. Any modification to A or B will modify
both as the refer to the same memory location.</li>

<li>Object&amp; A = B; (C++ only) =&gt; Creating a reference in C++
requires an explicit annotation with operator (&amp;) as it is
non-default behavior.</li>
</ul></li>
</ul></li>

<li>Most programming languages, except C++, uses value-semantics for
primitive types and reference semantics for complex or composite
types such as objects due to performance reasons.</li>

<li>C++ Uses <span class="underline">values-semantics</span> by default for all types, unlike most
programming languages, when any primitive type or composite type such
as class when assigned, passed to functions or returned from 
functions, copy is created and the original object is not
changed.</li>

<li><span class="underline">C++ supports both value and reference semantics</span> which is not
default for objects linke in Java, Python and other languages. The
reference semantics requires explicit annotation.</li>

<li>In order to avoid unncessary copies what would bring memory
peformance overhead, it is preferable to use reference semantics,
in other words, pass large objects by reference or const reference
to functions or methods.</li>

<li>Move semantics optmizes return-by value avoiding copy. The copy
overhead can avoided when returning an object from functions by
defining a <span class="underline">move constructor</span> (see C++11's move semantics) which
transfer resource ownership from the object defined locally within
the function body to the returned object.</li>
</ul>

<p>
<b>Further Reading:</b>
</p>

<ul class="org-ul">
<li>ISO C++ - Reference and Value Semantics -
<a href="https://isocpp.org/wiki/faq/value-vs-ref-semantics">https://isocpp.org/wiki/faq/value-vs-ref-semantics</a>
<ul class="org-ul">
<li>Note: Provides a good and clear definition about what really is
value and reference semantics.</li>
</ul></li>

<li>Andrezj's C++ blog - Value Semantics -
<a href="https://akrzemi1.wordpress.com/2012/02/03/value-semantics/">https://akrzemi1.wordpress.com/2012/02/03/value-semantics/</a></li>

<li>Value Semantics - Code of the danmed -
<a href="http://codeofthedamned.com/index.php/value-semantics">http://codeofthedamned.com/index.php/value-semantics</a></li>

<li>What do ‘value semantics’ and ‘pointer semantics’ mean? -
<a href="https://stackoverflow.com/questions/166033/what-do-value-semantics-and-pointer-semantics-mean">https://stackoverflow.com/questions/166033/what-do-value-semantics-and-pointer-semantics-mean</a></li>

<li>MSDN - Value Types (Modern C++) -
<a href="https://msdn.microsoft.com/en-us/library/hh438479.aspx">https://msdn.microsoft.com/en-us/library/hh438479.aspx</a>
<ul class="org-ul">
<li>Note:</li>
</ul></li>

<li>My Precious Compile Time Bool (long introduction to Move
Semantics) - <a href="https://medium.com/@gaussnoise/my-precious-compile-time-bool-long-introduction-to-move-semantics-c9ee73c370c7">https://medium.com/@gaussnoise/my-precious-compile-time-bool-long-introduction-to-move-semantics-c9ee73c370c7</a></li>

<li></li>
</ul>
</div>
</div>

<div id="outline-container-org0df0459" class="outline-3">
<h3 id="org0df0459"><a id="ID-69b48bc0-1b18-4997-b954-3da566a3508a"></a><span class="section-number-3">1.8</span> Object Lifecycle</h3>
<div class="outline-text-3" id="text-1-8">
<p>
This code shows how object lifecycle works in C++ by instrumenting
constructors and destructors member functions.
</p>

<ul class="org-ul">
<li>File: <a href="src/object-lifecycle.cpp">file:src/object-lifecycle.cpp</a></li>
<li>Online Compiler: <a href="https://rextester.com/QUQ52793">https://rextester.com/QUQ52793</a></li>
</ul>

<p>
C++ can allocated objects in three different areas or memories: 
</p>

<ul class="org-ul">
<li><b>stack</b> - Objects allocated by default on the stack when instantiated
inside functions, member functions or local scope. Objects
instantiated on the stack are automatically deleted or released
when they go out of scope and then the destructor is called.

<ul class="org-ul">
<li>Summary and further notes:
<ul class="org-ul">
<li>Objects allocated on the stack are automatically released when
they go out of scope.</li>
<li>There is a size limit for objects allocated on the stack which
depends on the operating system, therefore very large objects
allocated on the stack can cause segmentation fault. If it is
the case, it is better to allocate the object on the heap or
dynamic memory.</li>
</ul></li>
</ul></li>

<li><b>static memory</b> - Objects, declared outside functions or member
functions are instantiated on the static memory and they are only
deleted when the program finishes.</li>

<li><b>heap memory</b> - Objects are allocated on the heap memory (aka
dynamic memory) when they are instantiated with operator
<b>new</b>. Unlike stack or static allocated objects, heap allocated
objects are not automatically destroyed, so they must be released
manually with the <b>delete</b> operator. However, deleting heap-objects
manually is error prone since it is easy to forget to call delete
operator. A better approach to deal with heap object is to use C++
smart pointers that wraps raw pointers and automatically deletes
heap objects when they go out of scope.</li>
</ul>

<p>
Code Highlights: 
</p>

<ul class="org-ul">
<li>Object allocated in static memory - lives during the entire program
execution and are only destroyed when the program execution ends.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">DummyClass</span> <span class="org-variable-name">dummyGlobal</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"dummy-global"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span> 
  ... ... 
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Object allocated in stack: (dummy1, dummy2, object d in testObject())</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"> <span class="org-comment-delimiter">// </span><span class="org-comment">... </span>
<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">Allocated on stack </span>
    <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy1</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy1-stack"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

    <span class="org-rainbow-delimiters-depth-2">{</span>
      <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER LOCAL SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
      TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Create local scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
      <span class="org-comment-delimiter">// </span><span class="org-comment">Allocated on stack </span>
      <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy2</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dummy2-stack-local-scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
          ... ... .. 
      <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"EXIT LOCAL SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
    <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">dummy2 deleted here </span>

<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-comment-delimiter">// </span><span class="org-comment">dummy1 is deleted here </span>
</pre>
</div>

<ul class="org-ul">
<li>Objects allocated on the heap (dummyInHeap) must be released
manually or automatically with smart pointers (not used in this
code).
<ul class="org-ul">
<li>Note: For every object allocated on the heap,  it is necessary a
delete operator if smart pointers are not used.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-function-name">makeDummyHeap</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-type">DummyClass</span>* <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">... ... </span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Heap-allocated object </span>
  <span class="org-type">DummyClass</span>* <span class="org-variable-name">ptr</span> = <span class="org-keyword">new</span> <span class="org-type">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy-heap"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
  <span class="org-comment-delimiter">// </span><span class="org-comment">...</span>
  <span class="org-keyword">return</span> ptr; 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">... ... ... .</span>
  <span class="org-type">DummyClass</span>* <span class="org-variable-name">dummyInHeap</span> =  makeDummyHeap<span class="org-rainbow-delimiters-depth-2">()</span>;

  <span class="org-comment-delimiter">// </span><span class="org-comment">....   </span>
  dummyInHeap-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;
  <span class="org-comment-delimiter">// </span><span class="org-comment">....</span>

  <span class="org-keyword">delete</span> dummyInHeap;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<ul class="org-ul">
<li>Deterministic destructor

<ul class="org-ul">
<li>In C++, destructors are <b>deterministic</b>. They are always called
automatically when an object allocated on the static memory
(global object) or stack goes out of scope or an exception
happens. Due to this feature, it is safe to release resources like
allocated memory, database handlers, file handlers, socket
handlers or perform other cleanup tasks on the destructor. It is
the foundation of the RAAI technique/idiom - "Resource Acquisition
is Initialization".</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER LOCAL EXCEPTION SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">dummyException</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy2-stack-local-scope"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        dummyException.speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">" ERROR Throw a failure for testing deterministic destructor"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- EXIT LOCAL EXCEPTION SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">runtime_error</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER EXCEPTION HANDLER"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;     
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Failure = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- EXIT EXCEPTION HANDLER"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> ---- ENTER LOCAL EXCEPTION SCOPE 

object-lifecycle.cpp:21: - fun = DummyClass ; name = dummy2-stack-local-scope - I was created.
I am a dummy object called = dummy2-stack-local-scope
object-lifecycle.cpp:54: - fun = ~DummyClass ; name = dummy2-stack-local-scope - I was destroyed

 ---- ENTER EXCEPTION HANDLER

Failure =  ERROR Throw a failure for testing deterministic destructor

 ---- EXIT EXCEPTION HANDLER

</pre>
</div>


<p>
Complete Code: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">File:  object-lifecycle.cpp </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Brief: Demonstrate Object Lifecycle </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#define</span> <span class="org-variable-name">DEBUG_TRACE</span>

<span class="org-preprocessor">#ifdef</span> DEBUG_TRACE
<span class="org-preprocessor">  #pragma</span> message <span class="org-string">"Logging Enabled"</span>
<span class="org-preprocessor">  #define</span> <span class="org-function-name">TRACE</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">msg</span><span class="org-rainbow-delimiters-depth-1">)</span> \
    <span class="org-constant">std</span>::cerr &lt;&lt; __FILE__ &lt;&lt; <span class="org-string">":"</span> &lt;&lt; __LINE__ &lt;&lt; <span class="org-string">": - fun = "</span> &lt;&lt; __FUNCTION__ &lt;&lt; <span class="org-string">" ; "</span> &lt;&lt; msg &lt;&lt; <span class="org-string">"\n"</span>
<span class="org-preprocessor">#else</span>
<span class="org-preprocessor">  #pragma</span> message <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Logging disabled"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">  #define</span> <span class="org-function-name">TRACE</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">msg</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-preprocessor">#endif</span> 

<span class="org-keyword">class</span> <span class="org-type">DummyClass</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-comment-delimiter">// </span><span class="org-comment">Constructor </span>
        <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">_object_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"name = "</span><span class="org-rainbow-delimiters-depth-4">)</span> + name + <span class="org-string">" - I was created."</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Copy constructor </span>
        <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">DummyClass</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Enter copy constructor"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name = "</span> + _object_name + <span class="org-string">" - I was copied. "</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">this</span>-&gt;_object_name = rhs._object_name + <span class="org-string">"-COPIED"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Move constructor </span>
        <span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span> <span class="org-type">DummyClass</span>&amp;&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Enter move constructor"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name = "</span> + _object_name + <span class="org-string">" - I was moved"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">this</span>-&gt;_object_name = rhs._object_name + <span class="org-string">"-MOVED"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Copy assignment operator</span>
        <span class="org-type">DummyClass</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">DummyClass</span>&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Enter copy assignment operator"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name = "</span> + _object_name + <span class="org-string">" - I was copied. "</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">this</span>-&gt;_object_name = rhs._object_name + <span class="org-string">"-COPIED"</span>;
                <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">DummyClass&amp; operator= (DummyClass&amp;&amp; rhs) = delete;</span>

    <span class="org-comment-delimiter">// </span><span class="org-comment">Move assignment operator </span>
        <span class="org-type">DummyClass</span>&amp; <span class="org-keyword">operator</span><span class="org-function-name">=</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">DummyClass</span>&amp;&amp; <span class="org-variable-name">rhs</span><span class="org-rainbow-delimiters-depth-2">){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Enter move assignment operator"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"name = "</span> + _object_name + <span class="org-string">" - I was moved. "</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-keyword">this</span>-&gt;_object_name = rhs._object_name + <span class="org-string">"-MOVED"</span>;
                <span class="org-keyword">return</span> *<span class="org-keyword">this</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Destructor </span>
        ~<span class="org-function-name">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-string">"name = "</span><span class="org-rainbow-delimiters-depth-4">)</span> + _object_name  + <span class="org-string">" - I was destroyed"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">void</span> <span class="org-function-name">speakWithUser</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"I am a dummy object called = "</span> &lt;&lt; _object_name &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-function-name">private</span>:
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_object_name</span>;   
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Object allocated on the static memory </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">is deleted when the programs finishes. </span>
<span class="org-type">DummyClass</span> <span class="org-variable-name">dummyGlobal</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"dummy-global"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">testObject</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-type">DummyClass</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ==&gt; ENTER FUNCTION  testObject()"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
    TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Enter function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">auto</span> <span class="org-variable-name">d</span>  = DummyClass<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"local-dummy-in-function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        d.speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ==&gt; EXIT FUNCTION  testObject()"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
    TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Exit function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Object d is deleted here when it goes out scope</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">and then a copy of it is returned from here.</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Therefore, the copy constructor is invoked.</span>
        <span class="org-keyword">return</span> d;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">auto</span> <span class="org-function-name">makeDummyHeap</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-type">DummyClass</span>* <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ==&gt; ENTER FUNCTION  makeDummyHeap()"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;  
        <span class="org-comment-delimiter">// </span><span class="org-comment">Object allocated in dynamic memory, so it survives this scope</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">and is not deleted when returned from function. </span>
        <span class="org-type">DummyClass</span>* <span class="org-variable-name">ptr</span> = <span class="org-keyword">new</span> <span class="org-type">DummyClass</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy-heap"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        ptr-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ==&gt; EXIT FUNCTION  makeDummyHeap()"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        <span class="org-keyword">return</span> ptr; 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"ENTER FUNCTION MAIN"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Main function started."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Object allocated on the stack -&gt; auto storage class, it is</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">destroyed when it goes out of scope </span>
        <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy1</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"dummy1-stack"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        dummy1.speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;

        <span class="org-type">DummyClass</span>* <span class="org-variable-name">dummyInHeap</span> =  makeDummyHeap<span class="org-rainbow-delimiters-depth-2">()</span>;
        dummyInHeap-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;

        <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER LOCAL SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"Create local scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy2</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dummy2-stack-local-scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                dummy2.speakWithUser<span class="org-rainbow-delimiters-depth-3">()</span>;
                dummyGlobal.speakWithUser<span class="org-rainbow-delimiters-depth-3">()</span>;
                dummyInHeap-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-3">()</span>;
                TRACE<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"End local scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-comment-delimiter">// </span><span class="org-comment">Object dummy2 deleted here</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"EXIT LOCAL SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-keyword">try</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER LOCAL EXCEPTION SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
                <span class="org-type">DummyClass</span> <span class="org-variable-name">dummyException</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"dummy2-stack-local-scope"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                dummyException.speakWithUser<span class="org-rainbow-delimiters-depth-3">()</span>;
                <span class="org-keyword">throw</span> <span class="org-constant">std</span>::runtime_error<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">" ERROR Throw a failure for testing deterministic destructor"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- EXIT LOCAL EXCEPTION SCOPE "</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-keyword">catch</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">runtime_error</span>&amp; <span class="org-variable-name">ex</span><span class="org-rainbow-delimiters-depth-2">){</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- ENTER EXCEPTION HANDLER"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;     
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"Failure = "</span> &lt;&lt; ex.what<span class="org-rainbow-delimiters-depth-3">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">" ---- EXIT EXCEPTION HANDLER"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>


        TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Copy object returned from function"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-type">DummyClass</span> <span class="org-variable-name">dummy2</span> = testObject<span class="org-rainbow-delimiters-depth-2">()</span>;
        dummy2.speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;

        dummyInHeap-&gt;speakWithUser<span class="org-rainbow-delimiters-depth-2">()</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Objects allocated on the heap must be released manually or a</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">memory leak will happen. However, it is easy to forget to</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">delete a heap-allocated object, so the this approach is error</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">prone and better solution is to use C++11 smart pointers.</span>
        <span class="org-keyword">delete</span> dummyInHeap;

        <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">"\n"</span> &lt;&lt; <span class="org-string">"EXIT FUNCTION MAIN"</span> &lt;&lt; <span class="org-string">"\n\n"</span>;
        TRACE<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"Main function finished."</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">return</span> 0;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Object dummy1 and dummyGlobal deleted here </span>
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Complete Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ object-lifecycle.cpp -o <span class="org-keyword">object-lifecycle.bin</span> -g -std=c++1z -Wall -Wextra &amp;&amp; ./object-lifecycle.bin

<span class="org-function-name">object-lifecycle.cpp</span>:9:19: note: <span class="org-comment-delimiter">#</span><span class="org-comment">pragma message: Logging Enabled</span>
   <span class="org-comment-delimiter">#</span><span class="org-comment">pragma message "Logging Enabled"</span>
                   ^~~~~~~~~~~~~~~~~
<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy-global - I was created.

ENTER FUNCTION MAIN

<span class="org-function-name">object-lifecycle.cpp</span>:93: - fun = main ; Main <span class="org-keyword">function</span> <span class="org-function-name">started.</span>
<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy1-stack - I was created.
I am a dummy object called = dummy1-stack

 ==&gt; ENTER FUNCTION  makeDummyHeap()

<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy-heap - I was created.
I am a dummy object called = dummy-heap

 ==&gt; EXIT FUNCTION  makeDummyHeap()

I am a dummy object called = dummy-heap

 ---- ENTER LOCAL SCOPE 

<span class="org-function-name">object-lifecycle.cpp</span>:104: - fun = main ; Create local scope
<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy2-stack-local-scope - I was created.
I am a dummy object called = dummy2-stack-local-scope
I am a dummy object called = dummy-global
I am a dummy object called = dummy-heap
<span class="org-function-name">object-lifecycle.cpp</span>:109: - fun = main ; End local scope

EXIT LOCAL SCOPE 

<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy2-stack-local-scope - I was destroyed

 ---- ENTER LOCAL EXCEPTION SCOPE 

<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = dummy2-stack-local-scope - I was created.
I am a dummy object called = dummy2-stack-local-scope
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy2-stack-local-scope - I was destroyed

 ---- ENTER EXCEPTION HANDLER

Failure =  ERROR Throw a failure for testing deterministic destructor

 ---- EXIT EXCEPTION HANDLER

<span class="org-function-name">object-lifecycle.cpp</span>:127: - fun = main ; Copy object returned from <span class="org-keyword">function</span>

 ==&gt; ENTER FUNCTION  testObject()

<span class="org-function-name">object-lifecycle.cpp</span>:70: - fun = testObject ; Enter <span class="org-keyword">function</span>
<span class="org-function-name">object-lifecycle.cpp</span>:21: - fun = DummyClass ; name = local-dummy-in-function - I was created.
I am a dummy object called = local-dummy-in-function

 ==&gt; EXIT FUNCTION  testObject()

<span class="org-function-name">object-lifecycle.cpp</span>:74: - fun = testObject ; Exit <span class="org-keyword">function</span>
I am a dummy object called = local-dummy-in-function
I am a dummy object called = dummy-heap
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy-heap - I was destroyed

EXIT FUNCTION MAIN

<span class="org-function-name">object-lifecycle.cpp</span>:140: - fun = main ; Main <span class="org-keyword">function</span> <span class="org-function-name">finished.</span>
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = local-dummy-in-function - I was destroyed
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy1-stack - I was destroyed
<span class="org-function-name">object-lifecycle.cpp</span>:54: - fun = ~DummyClass ; name = dummy-global - I was destroyed
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbce7345" class="outline-3">
<h3 id="orgbce7345"><span class="section-number-3">1.9</span> C++11 - Uniform Initialization</h3>
<div class="outline-text-3" id="text-1-9">
<p>
The C++11 uniform initialization feature allows classes, STL
containers (collections) and primitives values to be initialized in a
uniform way similar to vectors and C-arrays. 
</p>

<ul class="org-ul">
<li>Uniform initialization of primitive types:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span>    <span class="org-variable-name">x</span> <span class="org-rainbow-delimiters-depth-1">{}</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">x = 0</span>
<span class="org-type">double</span> <span class="org-variable-name">fd</span> <span class="org-rainbow-delimiters-depth-1">{}</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">fd = 0.0</span>
<span class="org-type">float</span>  <span class="org-variable-name">ff</span> <span class="org-rainbow-delimiters-depth-1">{}</span>;  <span class="org-comment-delimiter">// </span><span class="org-comment">ff = 0.0f</span>
<span class="org-type">bool</span>   <span class="org-variable-name">flag</span><span class="org-rainbow-delimiters-depth-1">{}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">flag = false = 0 </span>
</pre>
</div>

<ul class="org-ul">
<li>Uniform initialization of C-arrays</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-variable-name">xs</span><span class="org-rainbow-delimiters-depth-1">[]</span> <span class="org-rainbow-delimiters-depth-1">{</span>10, 20, 30<span class="org-rainbow-delimiters-depth-1">}</span>;  <span class="org-comment-delimiter">//  </span><span class="org-comment">int xs[] =  {10, 20, 30};</span>
<span class="org-type">double</span> <span class="org-variable-name">ys</span><span class="org-rainbow-delimiters-depth-1">[</span>3<span class="org-rainbow-delimiters-depth-1">]</span> <span class="org-rainbow-delimiters-depth-1">{</span>1.0<span class="org-rainbow-delimiters-depth-1">}</span>;     <span class="org-comment-delimiter">//  </span><span class="org-comment">double ys[] = {1.0};</span>
</pre>
</div>

<ul class="org-ul">
<li>Uniform initialization of pointers</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span>* <span class="org-variable-name">fdptr</span><span class="org-rainbow-delimiters-depth-1">{}</span> ; <span class="org-comment-delimiter">// </span><span class="org-comment">fdptr = nullptr </span>
</pre>
</div>

<ul class="org-ul">
<li>Uniform initialization of STL containers:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string s <span class="org-rainbow-delimiters-depth-1">{}</span>;                <span class="org-comment-delimiter">// </span><span class="org-comment">s = ""</span>
<span class="org-function-name">std</span>::string s <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"Hello world"</span><span class="org-rainbow-delimiters-depth-1">}</span>;   <span class="org-comment-delimiter">// </span><span class="org-comment">s = "Hello World"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Vectors </span>
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> xs <span class="org-rainbow-delimiters-depth-1">{}</span>;                      
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> ys <span class="org-rainbow-delimiters-depth-1">{</span>2.0, 3.0, 4.0, 5.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">string</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> zs <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"apple"</span>, <span class="org-string">"orange"</span>, <span class="org-string">"grape"</span>, <span class="org-string">"banana"</span><span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Lists</span>
<span class="org-function-name">std</span>::<span class="org-type">list</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>   xs <span class="org-rainbow-delimiters-depth-1">{}</span>;
<span class="org-function-name">std</span>::<span class="org-type">list</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>   ys<span class="org-rainbow-delimiters-depth-1">{</span>2.0, 3.0, 4.0, 5.0<span class="org-rainbow-delimiters-depth-1">}</span>;   
<span class="org-comment-delimiter">// </span><span class="org-comment">Sets </span>
<span class="org-function-name">std</span>::<span class="org-type">set</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>    xs<span class="org-rainbow-delimiters-depth-1">{}</span>;
<span class="org-function-name">std</span>::<span class="org-type">set</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>    ys <span class="org-rainbow-delimiters-depth-1">{</span>3.0, 4.0, 3.0, 10.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Unordered set </span>
<span class="org-function-name">std</span>::<span class="org-type">unordered_set</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>    xs<span class="org-rainbow-delimiters-depth-1">{}</span>;
<span class="org-function-name">std</span>::<span class="org-type">unordered_set</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">string</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> zs <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"apple"</span>, <span class="org-string">"orange"</span>, <span class="org-string">"grape"</span>, <span class="org-string">"banana"</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Maps, aka hash map, aka dictionary, aka hash table </span>
<span class="org-function-name">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string,<span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> prices <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"orange"</span>, 10.0<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"grapes"</span>, 25.12<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"apple"</span>, 4.12<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Initialization of C-structus POD - Plain Old Data</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">struct</span> <span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-type">double</span> <span class="org-variable-name">x</span>;
    <span class="org-type">double</span> <span class="org-variable-name">y</span>;
    <span class="org-type">double</span> <span class="org-variable-name">z</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Before C++11</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">---------------------------</span>
<span class="org-type">Point3D</span> <span class="org-variable-name">pa</span>;
pa.x = 10.0;
pa.y = 20.0;
pa.z = 35.0;

<span class="org-comment-delimiter">// </span><span class="org-comment">After C++11</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">---------------------------</span>
<span class="org-type">Point3D</span> <span class="org-variable-name">pb</span> <span class="org-rainbow-delimiters-depth-1">{</span>10.0, 20.0, 35.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-type">Point3D</span> <span class="org-variable-name">pc</span> = <span class="org-rainbow-delimiters-depth-1">{</span>10.0, 20.0, 35.0<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">C++ Vector - way 1</span>
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-rainbow-delimiters-depth-2">{</span> 20.0, 15.0, 5.0<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span> 10.0, 25.0, 12.4<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-rainbow-delimiters-depth-2">{</span>-14.0, 0.32, 51.43<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">C++ Vector - way 2 </span>
<span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
      Point3D<span class="org-rainbow-delimiters-depth-2">{</span> 20.0, 15.0, 5.0<span class="org-rainbow-delimiters-depth-2">}</span>
     ,Point3D<span class="org-rainbow-delimiters-depth-2">{</span> 10.0, 25.0, 12.4<span class="org-rainbow-delimiters-depth-2">}</span>
     ,Point3D<span class="org-rainbow-delimiters-depth-2">{</span>-14.0, 0.32, 51.43<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">C++ Map Containers </span>
<span class="org-function-name">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> locations = <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"City 1"</span>,    <span class="org-rainbow-delimiters-depth-3">{</span> 20.0, 15.0, 5.0<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
    ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Somewhere"</span>, <span class="org-rainbow-delimiters-depth-3">{</span> 10.0, 25.0, 12.4<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
    ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Nowhere"</span>,   <span class="org-rainbow-delimiters-depth-3">{</span>-14.0, 0.32, 51.43<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>     
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">or in more pleasant notation </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">C++ Map Containers </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">locations2</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">Point3D</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"City 1"</span>,    <span class="org-rainbow-delimiters-depth-3">{</span> 20.0, 15.0, 5.0<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
    ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Somewhere"</span>, <span class="org-rainbow-delimiters-depth-3">{</span> 10.0, 25.0, 12.4<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>
    ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Nowhere"</span>,   <span class="org-rainbow-delimiters-depth-3">{</span>-14.0, 0.32, 51.43<span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">}</span>     
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">--- Functions -------//</span>

<span class="org-type">Point3D</span> <span class="org-function-name">makeOriginPoint</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">return Point3D{0.0, 0.0, 0.0};</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">{</span>0.0, 0.0, 0.0<span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Classes: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>: 
    <span class="org-function-name">A</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span>, <span class="org-type">double</span> <span class="org-variable-name">z</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>:
        m_x<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>,
        m_y<span class="org-rainbow-delimiters-depth-2">(</span>y<span class="org-rainbow-delimiters-depth-2">)</span>,
        m_z<span class="org-rainbow-delimiters-depth-2">(</span>z<span class="org-rainbow-delimiters-depth-2">)</span>,
        m_name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>      
    <span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getX</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> m_x;<span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getY</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-keyword">return</span> m_y;<span class="org-rainbow-delimiters-depth-2">}</span>
    <span class="org-keyword">auto</span> <span class="org-function-name">getZ</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-keyword">return</span> m_z;<span class="org-rainbow-delimiters-depth-2">}</span> 
<span class="org-function-name">private</span>:
    <span class="org-type">double</span> <span class="org-variable-name">m_x</span>;
    <span class="org-type">double</span> <span class="org-variable-name">m_y</span>;
    <span class="org-type">double</span> <span class="org-variable-name">m_z</span>; 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">void</span> <span class="org-function-name">display</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">A</span>&amp; <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"A ("</span> &lt;&lt; a.getX<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">" "</span> &lt;&lt; a.getY<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; a.getZ<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">")"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
    <span class="org-type">A</span> <span class="org-variable-name">instance1</span> <span class="org-rainbow-delimiters-depth-2">{</span>10.0, 20.0, 15.0, <span class="org-string">"unknown binary blob"</span><span class="org-rainbow-delimiters-depth-2">}</span>;  
    display<span class="org-rainbow-delimiters-depth-2">(</span>instance1<span class="org-rainbow-delimiters-depth-2">)</span>;
    display<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">{</span>10.0, 20.0, 15.0, <span class="org-string">"unknown binary blob"</span><span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
    <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
References: 
</p>

<ul class="org-ul">
<li><a href="http://scottmeyers.blogspot.com/2015/09/thoughts-on-vagaries-of-c-initialization.html">The View from Aristeia: Thoughts on the Vagaries of C++ Initialization</a></li>
<li><a href="https://www.codeguru.com/cpp/cpp/article.php/c19081/C-2011-Uniform-Initialization.htm">C++ 2011: Uniform Initialization</a></li>
<li><a href="https://mbevin.wordpress.com/2012/11/16/uniform-initialization/">Lesson #3: Uniform Initialization | Mike's C++11 Blog</a></li>
<li><a href="https://softwareengineering.stackexchange.com/questions/133688/is-c11-uniform-initialization-a-replacement-for-the-old-style-syntax">c++ - Is C++11 Uniform Initialization a replacement for the old style syntax? - Software Engineering Stack Exchange</a></li>
<li></li>

<li></li>
</ul>
</div>
</div>

<div id="outline-container-org56cf9a2" class="outline-3">
<h3 id="org56cf9a2"><span class="section-number-3">1.10</span> Iterator based loops and for-range based loops</h3>
<div class="outline-text-3" id="text-1-10">
</div>
<div id="outline-container-orge308bfc" class="outline-4">
<h4 id="orge308bfc"><span class="section-number-4">1.10.1</span> Iterator based loop</h4>
<div class="outline-text-4" id="text-1-10-1">
<p>
Loop over a vector: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> xs <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"Hello"</span>, <span class="org-string">"world"</span>, <span class="org-string">"C++"</span>, <span class="org-string">"HPC"</span>, <span class="org-string">"awesome"</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-constant">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span>::<span class="org-type">iterator</span> <span class="org-variable-name">it</span> = xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != xs.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; *it &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; it-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   word = 'Hello' size = 5</span>
<span class="org-comment">   word = 'world' size = 5</span>
<span class="org-comment">   word = 'C++' size = 3</span>
<span class="org-comment">   word = 'HPC' size = 3</span>
<span class="org-comment">   word = 'awesome' size = 7</span>
<span class="org-comment">   &gt;&gt; </span>
<span class="org-comment"> */</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">=== OR =====//</span>

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = xs.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != xs.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; *it &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; it-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">        word = 'Hello' size = 5</span>
<span class="org-comment">        word = 'world' size = 5</span>
<span class="org-comment">        word = 'C++' size = 3</span>
<span class="org-comment">        word = 'HPC' size = 3</span>
<span class="org-comment">        word = 'awesome' size = 7</span>
<span class="org-comment"> */</span>
</pre>
</div>

<p>
Loop over a deque: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">ds</span> = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"Physics"</span>, <span class="org-string">"C++"</span>, <span class="org-string">"STL"</span>, <span class="org-string">"Math"</span>, <span class="org-string">"Algebra"</span>, <span class="org-string">"Electronics"</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-constant">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span>::<span class="org-type">iterator</span> <span class="org-variable-name">it</span> = ds.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != ds.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; *it &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; it-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Or: </span>
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = ds.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != ds.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; *it &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; it-&gt;size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   word = 'Physics' size = 7</span>
<span class="org-comment">   word = 'C++' size = 3</span>
<span class="org-comment">   word = 'STL' size = 3</span>
<span class="org-comment">   word = 'Math' size = 4</span>
<span class="org-comment">   word = 'Algebra' size = 7</span>
<span class="org-comment">   word = 'Electronics' size = 11</span>
<span class="org-comment"> */</span>

</pre>
</div>

<p>
Loop over a list: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Struct is a class with everything public </span>
<span class="org-keyword">struct</span> <span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span>;
        <span class="org-type">double</span>      <span class="org-variable-name">lat</span>;
        <span class="org-type">double</span>      <span class="org-variable-name">lon</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">This constructor is necessary for storing this object</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">in STL collections/containers </span>
        <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
        <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">double</span> <span class="org-variable-name">lat</span>, <span class="org-type">double</span> <span class="org-variable-name">lon</span><span class="org-rainbow-delimiters-depth-2">)</span>:
                name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>, lat<span class="org-rainbow-delimiters-depth-2">(</span>lat<span class="org-rainbow-delimiters-depth-2">)</span>, lon<span class="org-rainbow-delimiters-depth-2">(</span>lon<span class="org-rainbow-delimiters-depth-2">){}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-keyword">auto</span> wp = Waypoint<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Paris"</span>, 48.23, 22.12<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; wp.name
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Paris"</span>
&gt;&gt; wp.lat
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 48.230000
&gt;&gt; wp.lon
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 22.120000
&gt;&gt; 
&gt;&gt; 

<span class="org-keyword">auto</span> waypoints = <span class="org-constant">std</span>::<span class="org-type">list</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">&gt;{}</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Paris"</span>, 48.8566, 2.3522<span class="org-rainbow-delimiters-depth-1">)</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Tokyo"</span>, 35.6895, 139.6917<span class="org-rainbow-delimiters-depth-1">)</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Beijing"</span>, 39.9042, 116.4074<span class="org-rainbow-delimiters-depth-1">)</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Cape Town"</span>, -33.9249, 18.4241<span class="org-rainbow-delimiters-depth-1">)</span>;
waypoints.emplace_back<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Buenos Aires"</span>, -34.6037, -58.3816<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = waypoints.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != waypoints.end<span class="org-rainbow-delimiters-depth-2">()</span>; ++it<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; it-&gt;name
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; it-&gt;lat
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; it-&gt;lon
                          &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">Paris                    48.86           2.35
Tokyo                    35.69         139.69
Beijing                  39.90         116.41
Cape Town               -33.92          18.42
Buenos Aires            -34.60         -58.38
</pre>
</div>

<p>
Loop over a map:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">values</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
      <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"x"</span>,  2.1023<span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"y"</span>,  sqrt<span class="org-rainbow-delimiters-depth-3">(</span>2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"e"</span>,  exp<span class="org-rainbow-delimiters-depth-3">(</span>1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"pi"</span>, 3.1415<span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"3/4"</span>, 3.0 / 4.0<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-constant">map</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::<span class="org-type">iterator</span> <span class="org-variable-name">it</span> = values.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != values.end<span class="org-rainbow-delimiters-depth-2">()</span>; it++<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; it-&gt;first
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; it-&gt;second
                          &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">OR:</span>
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = values.begin<span class="org-rainbow-delimiters-depth-2">()</span>; it != values.end<span class="org-rainbow-delimiters-depth-2">()</span>; it++<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; it-&gt;first
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; it-&gt;second
                          &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   3/4   0.75</span>
<span class="org-comment">   e     2.72</span>
<span class="org-comment">   pi    3.14</span>
<span class="org-comment">   x     2.10</span>
<span class="org-comment">   y     1.41</span>
<span class="org-comment"> */</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd49ea50" class="outline-4">
<h4 id="orgd49ea50"><span class="section-number-4">1.10.2</span> For-ranged based loops</h4>
<div class="outline-text-4" id="text-1-10-2">
<p>
C++11 and new standards allow to iterate over any STL container or
class with methods (member functions) .begin() or .end() using a
simpler syntax than the old iterator loop syntax.
</p>

<p>
<b>Loop over a vector:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> xs <span class="org-rainbow-delimiters-depth-1">{</span><span class="org-string">"Hello"</span>, <span class="org-string">"world"</span>, <span class="org-string">"C++"</span>, <span class="org-string">"HPC"</span>, <span class="org-string">"awesome"</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Use: const auto&amp;  to avoid uncessary copies, use auto&amp; if there is modification of x.</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">The const keyword will generate a compiler error if there is </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">any attempt to modify the value of x. </span>
<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"word = '"</span> &lt;&lt; x &lt;&lt; <span class="org-string">"' size = "</span> &lt;&lt; x.size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   word = 'Hello' size = 5</span>
<span class="org-comment">   word = 'world' size = 5</span>
<span class="org-comment">   word = 'C++' size = 3</span>
<span class="org-comment">   word = 'HPC' size = 3</span>
<span class="org-comment">   word = 'awesome' size = 7</span>
<span class="org-comment"> *---------------*/</span>

</pre>
</div>

<p>
<b>Loop over a list:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Struct is a class with everything public </span>
<span class="org-keyword">struct</span> <span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">name</span>;
        <span class="org-type">double</span>      <span class="org-variable-name">lat</span>;
        <span class="org-type">double</span>      <span class="org-variable-name">lon</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">This constructor is necessary for storing this object</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">in STL collections/containers </span>
        <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
        <span class="org-function-name">Waypoint</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span>, <span class="org-type">double</span> <span class="org-variable-name">lat</span>, <span class="org-type">double</span> <span class="org-variable-name">lon</span><span class="org-rainbow-delimiters-depth-2">)</span>:
                name<span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">)</span>, lat<span class="org-rainbow-delimiters-depth-2">(</span>lat<span class="org-rainbow-delimiters-depth-2">)</span>, lon<span class="org-rainbow-delimiters-depth-2">(</span>lon<span class="org-rainbow-delimiters-depth-2">){}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">auto</span> <span class="org-variable-name">waypoints</span> = <span class="org-constant">std</span>::<span class="org-type">list</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Waypoint</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
       <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Paris"</span>, 48.8566, 2.3522<span class="org-rainbow-delimiters-depth-2">}</span>
      ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Tokyo"</span>, 35.6895, 139.6917<span class="org-rainbow-delimiters-depth-2">}</span>
      ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Beijing"</span>, 39.9042, 116.4074<span class="org-rainbow-delimiters-depth-2">}</span>
      ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Cape Town"</span>, -33.9249, 18.4241<span class="org-rainbow-delimiters-depth-2">}</span>
      ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"Buenos Aires"</span>, -34.6037, -58.3816<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">wp</span>: waypoints<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; wp.name
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; wp.lat
                          &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; wp.lon 
                          &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Ouput: 
</p>

<div class="org-src-container">
<pre class="src src-text">Paris                    48.86           2.35
Tokyo                    35.69         139.69
Beijing                  39.90         116.41
Cape Town               -33.92          18.42
Buenos Aires            -34.60         -58.38
</pre>
</div>

<p>
<b>Loop over a map</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">values</span> = <span class="org-constant">std</span>::<span class="org-type">map</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
      <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"x"</span>,  2.1023<span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"y"</span>,  sqrt<span class="org-rainbow-delimiters-depth-3">(</span>2<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"e"</span>,  exp<span class="org-rainbow-delimiters-depth-3">(</span>1<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"pi"</span>, 3.1415<span class="org-rainbow-delimiters-depth-2">}</span>
     ,<span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"3/4"</span>, 3.0 / 4.0<span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-1">(</span>3<span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">p</span>: values<span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::left  &lt;&lt; p.first
                                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>5<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; p.second
                                  &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Output: </span>
<span class="org-comment">   3/4  0.750</span>
<span class="org-comment">   e    2.718</span>
<span class="org-comment">   pi   3.142</span>
<span class="org-comment">   x    2.102</span>
<span class="org-comment">   y    1.414</span>
<span class="org-comment"> *==============*/</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7dd39f9" class="outline-3">
<h3 id="org7dd39f9"><span class="section-number-3">1.11</span> C++11 - Scoped Enum</h3>
<div class="outline-text-3" id="text-1-11">
<p>
Scoped enumerations are a more type-safe alternative to the old
C-enums as it has several problems realated to namespace conflicts and
implicit conversions that can introduce bugs hard to catch and reason
about. 
</p>

<p>
Syntax: 
</p>

<ul class="org-ul">
<li>Simple scoped enum class</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">Color</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-variable-name">white</span>,
   <span class="org-variable-name">black</span>,
   <span class="org-variable-name">yellow</span>,
   <span class="org-variable-name">red</span>,
   <span class="org-variable-name">blue</span>,
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">Color</span>::white
<span class="org-rainbow-delimiters-depth-1">(</span>Color<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Color</span>::white<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; <span class="org-constant">Color</span>::blue
<span class="org-rainbow-delimiters-depth-1">(</span>Color<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Color</span>::blue<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; <span class="org-constant">Color</span>::yellow
<span class="org-rainbow-delimiters-depth-1">(</span>Color<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Color</span>::yellow<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2
&gt;&gt; <span class="org-constant">Color</span>::red
<span class="org-rainbow-delimiters-depth-1">(</span>Color<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Color</span>::red<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 3
&gt;&gt; 

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">Color</span>::blue<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">Color</span>::white<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">Color</span>::yellow<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 2
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Scoped enum with hexadecimal error codes.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">ErrorCode</span>: <span class="org-constant">std</span>::<span class="org-type">uint32_t</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-variable-name">tankNotFilled</span> = 0xff,
   <span class="org-variable-name">missingSupply</span> = 0x2f,
   <span class="org-variable-name">lowBattery</span>    = 0x2a,
   <span class="org-variable-name">unknown</span>       = 0x24                                         
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Scoped enums with chars</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">ErrorCodeLetter</span>: <span class="org-type">char</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-variable-name">tankNotFilled</span> = <span class="org-string">'x'</span>,
        <span class="org-variable-name">missingSupply</span> = <span class="org-string">'y'</span>,
        <span class="org-variable-name">lowBattery</span>    = <span class="org-string">'a'</span>,
        <span class="org-variable-name">unknown</span>       = <span class="org-string">'k'</span>                                         
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">ErrorCodeLetter</span>::tankNotFilled
<span class="org-rainbow-delimiters-depth-1">(</span>ErrorCodeLetter<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">ErrorCodeLetter</span>::tankNotFilled<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> 120
&gt;&gt; <span class="org-constant">ErrorCodeLetter</span>::missingSupply
<span class="org-rainbow-delimiters-depth-1">(</span>ErrorCodeLetter<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">ErrorCodeLetter</span>::missingSupply<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> 121
&gt;&gt; <span class="org-constant">ErrorCodeLetter</span>::unknown
<span class="org-rainbow-delimiters-depth-1">(</span>ErrorCodeLetter<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">ErrorCodeLetter</span>::unknown<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> 107
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">ErrorCodeLetter</span>::unknown<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'k'</span>
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">ErrorCodeLetter</span>::missingSupply<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'y'</span>
&gt;&gt; 
</pre>
</div>


<p>
<b>More Exhaustive Example:</b>
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">MachineStatus</span>: <span class="org-constant">std</span>::<span class="org-type">uint32_t</span> <span class="org-rainbow-delimiters-depth-1">{</span>
   <span class="org-variable-name">running</span> = 0xf5,
   <span class="org-variable-name">iddle</span>   = 0x2a,
   <span class="org-variable-name">waiting</span> = 0x35,
   <span class="org-variable-name">failure</span> = 0x24                                         
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Example: CERN's root shell. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">MachineStatus</span>::running
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 245
&gt;&gt; <span class="org-constant">MachineStatus</span>::iddle
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; <span class="org-constant">MachineStatus</span>::waiting
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::waiting<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 53
&gt;&gt; <span class="org-constant">MachineStatus</span>::failure
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::failure<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 36
&gt;&gt; 

&gt;&gt; <span class="org-keyword">auto</span> status = <span class="org-constant">MachineStatus</span>::running
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 245

&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Machine status = "</span> &lt;&lt; <span class="org-constant">std</span>::hex &lt;&lt; <span class="org-string">"0x"</span> &lt;&lt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span>status<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-type">Machine</span> <span class="org-variable-name">status</span> = 0xf5
&gt;&gt; 
&gt;&gt; 

&gt;&gt; status = <span class="org-constant">MachineStatus</span>::iddle 
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Machine status = "</span> &lt;&lt; <span class="org-constant">std</span>::hex &lt;&lt; <span class="org-string">"0x"</span> &lt;&lt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span>status<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-type">Machine</span> <span class="org-variable-name">status</span> = 0x2a
&gt;&gt; 

&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>status == <span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Machine is iddle"</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">Machine</span> <span class="org-type">is</span> <span class="org-variable-name">iddle</span>
&gt;&gt; 

&gt;&gt; status = <span class="org-constant">MachineStatus</span>::running
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 245
&gt;&gt; <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-1">(</span>status == <span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Machine is running"</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">Machine</span> <span class="org-type">is</span> <span class="org-variable-name">running</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">MachineStatus</span>::running<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 245
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::uint32_t<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> == 0x2a
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x2a<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">(</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">MachineStatus</span>::iddle<span class="org-rainbow-delimiters-depth-1">)</span> : <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; 
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>MachineStatus<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x2a<span class="org-rainbow-delimiters-depth-1">)</span> == <span class="org-constant">MachineStatus</span>::iddle
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgff40da0" class="outline-3">
<h3 id="orgff40da0"><span class="section-number-3">1.12</span> Functor Function-Object and higher order functions</h3>
<div class="outline-text-3" id="text-1-12">
<p>
Functor is any object which behaves like a function and callable like
a function. Unlike C++ ordinary functions, functors can have internal
state and change its internal data as well.
</p>

<p>
Functors are implementing in C++ by overloading the function
application operator. 
</p>

<p>
The code in the file: <a href="src/cpp-functor.cpp">file:src/cpp-functor.cpp</a> shows an
exhaustive example about how to implement, use functors and implement
client code using dynamic polymorphism (aka subtyping or inheritance),
static polymorphism (aka template metaprogramming) and C++11's
function type <span class="underline">std::function</span>.
</p>

<p>
Example: 
</p>
<ul class="org-ul">
<li>File:            <a href="src/cpp-functor.cpp">file:src/cpp-functor.cpp</a></li>
<li>Online Compiler: <a href="http://rextester.com/VGE78113">http://rextester.com/VGE78113</a></li>

<li>Math functor interface class representing a general math function.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">IMathFunctor</span> <span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-comment-delimiter">// </span><span class="org-comment">Pure virtual function</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt; const -&gt; Means that the function cannot change the object internal state.</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">=&gt; (= 0) -&gt; Means abstract member function or abstract method.</span>
        <span class="org-keyword">virtual</span> <span class="org-type">double</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span> = 0;
        <span class="org-keyword">virtual</span> ~<span class="org-function-name">IMathFunctor</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Linear Function "C++ functor." - function-object</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Linear Function "C++ functor." - function-object </span>
<span class="org-comment"> *   LinFun(x) = A * x + B</span>
<span class="org-comment"> */</span>
<span class="org-keyword">class</span> <span class="org-type">LinFun</span>: <span class="org-keyword">public</span> <span class="org-type">IMathFunctor</span> <span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
        <span class="org-comment-delimiter">// </span><span class="org-comment">Linear coefficient or line slope </span>
        <span class="org-type">double</span> <span class="org-variable-name">_a</span>; 
        <span class="org-type">double</span> <span class="org-variable-name">_b</span>;
<span class="org-function-name">public</span>:
        <span class="org-function-name">LinFun</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-2">)</span>: _a<span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-rainbow-delimiters-depth-2">)</span>, _b<span class="org-rainbow-delimiters-depth-2">(</span>b<span class="org-rainbow-delimiters-depth-2">){}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">getA</span><span class="org-rainbow-delimiters-depth-2">()</span>             -&gt; <span class="org-type">double</span>   <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> _a;<span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">setA</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">)</span>         -&gt; <span class="org-type">void</span>     <span class="org-rainbow-delimiters-depth-2">{</span> _a = a; <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">getB</span><span class="org-rainbow-delimiters-depth-2">()</span>             -&gt; <span class="org-type">double</span>   <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> _b;<span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">setB</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">b</span><span class="org-rainbow-delimiters-depth-2">)</span>         -&gt; <span class="org-type">void</span>     <span class="org-rainbow-delimiters-depth-2">{</span> _b = b; <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Function-call operator =&gt; Makes this object callable</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">double operator()(double x)  -&gt; double   { return _a * x + _b;}  </span>
        <span class="org-type">double</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> _a * x + _b;<span class="org-rainbow-delimiters-depth-2">}</span>    
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Usage: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Function linear object - modelling a linear function 3 * x + 4.0 </span>
<span class="org-type">LinFun</span> <span class="org-variable-name">fun1</span><span class="org-rainbow-delimiters-depth-1">(</span>3.0, 4.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"a = "</span> &lt;&lt; fun1.getA<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; <span class="org-string">" ; b = "</span> &lt;&lt; fun1.getB<span class="org-rainbow-delimiters-depth-1">()</span> &lt;&lt; nl;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"fun1(3.0) = "</span> &lt;&lt; fun1<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; nl;  
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"fun1(4.0) = "</span> &lt;&lt; fun1<span class="org-rainbow-delimiters-depth-1">(</span>4.0<span class="org-rainbow-delimiters-depth-1">)</span> &lt;&lt; nl;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">a = 3 ; b = 4
fun1(3.0) = 13
fun1(4.0) = 16
fun1(5.0) = 19
</pre>
</div>


<p>
Higher order functions (functions that calls or return functions) can
be implemented using dynamic polymorphis or inheritance; static
polymorphism, also known as template metaprogramming and using the
type std::function from C++11.
</p>


<ul class="org-ul">
<li><b>Higher order function using dynamic polymorphism</b>
(inheritance). This function only accepts implementations of
IMathFunctor and cannot worth with an arbitrary function-object,
ordinary functions or C++11 lambda function. Another drawback is
the runtime overhead of virtual function-calls.</li>
</ul>

<p>
Example:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">tabulateDynamic</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">IMathFunctor</span>&amp; <span class="org-variable-name">fun</span>, <span class="org-type">double</span> <span class="org-variable-name">start</span>, <span class="org-type">double</span> <span class="org-variable-name">stop</span>, <span class="org-type">double</span> <span class="org-variable-name">step</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = start; x &lt;= stop ; x += step<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; fun<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Usage:
</p>

<div class="org-src-container">
<pre class="src src-cpp">tabulatDynamic<span class="org-rainbow-delimiters-depth-1">(</span>fun1, 0.0, 5.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Sample Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">-----&gt; Tabulating fun1
    0.000     4.000
    1.000     7.000
    2.000    10.000
    3.000    13.000
    4.000    16.000
    5.000    19.000
</pre>
</div>

<ul class="org-ul">
<li><b>Higher order function using static polymorphism</b> - The advantage
of this function is that it can work with any callable object like
functors (function-objects), ordinary functions and C++11 lambda
functions. Another benefit is the lower runtime overhead than the
implementation using dynamic polymorphism. For this case, the
runtime cost of dynamic polymorphism is not significant, however it
can become noticeable on large scale computation or high
performance computations.</li>

<li>Example:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">Function</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">tabulateStatic</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">Function</span>&amp; <span class="org-variable-name">fun</span>, <span class="org-type">double</span> <span class="org-variable-name">start</span>, <span class="org-type">double</span> <span class="org-variable-name">stop</span>, <span class="org-type">double</span> <span class="org-variable-name">step</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = start; x &lt;= stop ; x += step<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; x &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; fun<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Usage:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" -----&gt; Tabulating fun1"</span> &lt;&lt; nl;
tabulateStatic<span class="org-rainbow-delimiters-depth-1">(</span>fun1, 0.0, 5.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">" -----&gt; Tabulating fun2"</span> &lt;&lt; nl;
tabulateStatic<span class="org-rainbow-delimiters-depth-1">(</span>fun2, 0.0, 5.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>


<ul class="org-ul">
<li><b>Higher order function using the C++11 type std::function</b> - The type
std::function provides type erasure and can work with any functor,
ordinary function and C++11 lambda functions, in addition it also
allows all those types of functions to be stored in STL containers.</li>
</ul>

<p>
Example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">tabulateLambdaList</span><span class="org-rainbow-delimiters-depth-1">(</span>
         <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-4">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">&gt;</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">funlist</span>
        ,<span class="org-type">double</span> <span class="org-variable-name">start</span>
        ,<span class="org-type">double</span> <span class="org-variable-name">stop</span>
        ,<span class="org-type">double</span> <span class="org-variable-name">step</span>
        <span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::fixed &lt;&lt; <span class="org-constant">std</span>::setprecision<span class="org-rainbow-delimiters-depth-2">(</span>3<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = start; x &lt;= stop ; x += step<span class="org-rainbow-delimiters-depth-2">){</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; x;
                <span class="org-comment-delimiter">// </span><span class="org-comment">const auto&amp; is used for avoid uncessary copies </span>
                <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">fun</span>: funlist<span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-3">(</span>10<span class="org-rainbow-delimiters-depth-3">)</span> &lt;&lt; fun<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Usage:
</p>

<div class="org-src-container">
<pre class="src src-cpp">tabulateLambdaList<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">{</span>fun1, fun2, exp, ordinaryFunction<span class="org-rainbow-delimiters-depth-2">}</span>, 0.0, 5.0, 1.0<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<p>
Output:
</p>

<div class="org-src-container">
<pre class="src src-text">  x         fun1     fun2      exp      ordinaryFunction
0.000     4.000     4.000     1.000     0.000
1.000     7.000     9.000     2.718     3.000
2.000    10.000    18.000     7.389     6.000
3.000    13.000    31.000    20.086     9.000
4.000    16.000    48.000    54.598    12.000
5.000    19.000    69.000   148.413    15.000
</pre>
</div>

<p>
Compilation of <a href="src/cpp-functor.cpp">file:src/cpp-functor.cpp</a> 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ cpp-functor.cpp -o <span class="org-keyword">cpp-functor.bin</span> -g -std=c++11 -Wall -Wextra &amp;&amp;
</pre>
</div>

<p>
Complete program output of <a href="src/cpp-functor.cpp">file:src/cpp-functor.cpp</a> 
</p>

<div class="org-src-container">
<pre class="src src-sh">./cpp-functor.bin

a = 3 ; b = 4
<span class="org-function-name">fun1</span>(3.0) = 13
<span class="org-function-name">fun1</span>(4.0) = 16
<span class="org-function-name">fun1</span>(5.0) = 19
=======================
a = 2 ; b = 3 ; c = 4
<span class="org-function-name">fun2</span>(3.0) = 31
<span class="org-function-name">fun2</span>(4.0) = 48
<span class="org-function-name">fun2</span>(5.0) = 69
======= [1] Client Code using dynamic polymorphism  ================
 -----&gt; Tabulating fun1
     0.000     4.000
     1.000     7.000
     2.000    10.000
     3.000    13.000
     4.000    16.000
     5.000    19.000
 -----&gt; Tabulating fun2
     0.000     4.000
     1.000     9.000
     2.000    18.000
     3.000    31.000
     4.000    48.000
     5.000    69.000
======= [2] Client Code using dynamic polymorphism  ================
     0.000     4.000     4.000
     1.000     7.000     9.000
     2.000    10.000    18.000
     3.000    13.000    31.000
     4.000    16.000    48.000
     5.000    19.000    69.000
======= Client Code using static polymorphism (template)  ================
 -----&gt; Tabulating fun1
     0.000     4.000
     1.000     7.000
     2.000    10.000
     3.000    13.000
     4.000    16.000
     5.000    19.000
 -----&gt; Tabulating fun2
     0.000     4.000
     1.000     9.000
     2.000    18.000
     3.000    31.000
     4.000    48.000
     5.000    69.000
 -----&gt; Tabulating lambda <span class="org-keyword">function</span> <span class="org-function-name">f</span>(x) = x * x
     0.000     0.000
     1.000     1.000
     2.000     4.000
     3.000     9.000
     4.000    16.000
     5.000    25.000
 -----&gt; Tabulating ordinary <span class="org-keyword">function</span> <span class="org-function-name">f</span>(x) = 3 * x
     0.000     0.000
     1.000     3.000
     2.000     6.000
     3.000     9.000
     4.000    12.000
     5.000    15.000
 -----&gt; Tabulating ordinary <span class="org-keyword">function</span> <span class="org-function-name">f</span>(x) = exp(x)
     0.000     1.000
     1.000     2.718
     2.000     7.389
     3.000    20.086
     4.000    54.598
     5.000   148.413
======= Client Code using C++11 lambda std::<span class="org-keyword">function</span>  ================
     0.000     4.000     4.000     1.000     0.000
     1.000     7.000     9.000     2.718     3.000
     2.000    10.000    18.000     7.389     6.000
     3.000    13.000    31.000    20.086     9.000
     4.000    16.000    48.000    54.598    12.000
     5.000    19.000    69.000   148.413    15.000
</pre>
</div>
</div>
</div>

<div id="outline-container-org4462c6b" class="outline-3">
<h3 id="org4462c6b"><a id="ID-02be1a97-c100-44ce-ad76-63835818d406"></a><span class="section-number-3">1.13</span> Lambda Functions</h3>
<div class="outline-text-3" id="text-1-13">
</div>
<div id="outline-container-org73ad9a9" class="outline-4">
<h4 id="org73ad9a9"><span class="section-number-4">1.13.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-13-1">
<p>
Lambda expressions, also known as lambda functions or lambda
abstractions, are ubiquitous in functional programming languages such
as Haskell, OCaml, Scala and Scheme. They were by introduced in a
theoretical way by Alonzo Church in the lambda calculus. Lisp was
first programming language to use lambda functions and now this
function programming feature has made its way into mainstream and has
arrived to C# (Cshap), Java 8 and C++11.
</p>

<p>
In C++, Lambda functions are not ordinary functions, actually, they
are special function-objects or "C++ functors". Lambda abstractions
can be passed as arguments to any function; returned from functions;
can have state and also they can be defined locally at the call-site
simplifying all the boilerplate code necessary to pass a function to
callbacks, event handlers and higher order functions.
</p>

<p>
Summary:
</p>

<ul class="org-ul">
<li>Lambda functions were introduced in C++11. Before C++11 lambdas
were available as Boost.Lambda.</li>

<li>Lambda functions can be:
<ul class="org-ul">
<li>returned from functions.</li>
<li>be passed as function parameters.</li>
<li>Can be stored in data structures.</li>
<li>Hold state and capture variables (closure).</li>
<li>Non-capturing lambdas can be converted to function pointers what
is useful with old C-APIs.</li>
</ul></li>

<li>Lambda turns C++11 is a <b>game changer</b> and turns C++ into an
quasi-functional programming language.</li>

<li>Practical Use Cases:
<ul class="org-ul">
<li>Callbacks</li>
<li>Higher order functions</li>
<li>Simplify design patterns</li>
<li>Asynchronous code</li>
<li>Create functions at runtime.</li>
</ul></li>
</ul>

<p>
<b>Main parts</b> 
</p>

<ul class="org-ul">
<li>Capture list between square brackets <code>[ ]</code></li>
<li>Argument list between parenthesis <code>()</code></li>
<li>Function body between curly braces <code>{}</code></li>
</ul>

<p>
Syntax: 
</p>

<div class="org-src-container">
<pre class="src src-text">[capture](parameters) -&gt; return-type {body}
</pre>
</div>

<p>
Some lambda functions: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">fn</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> n * 10; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Test in CERN's ROOT REPL</span>
&gt;&gt; <span class="org-keyword">auto</span> fn = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> n * 10; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>lambda<span class="org-rainbow-delimiters-depth-2">)</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f5e578f2010
&gt;&gt; 

&gt;&gt; <span class="org-keyword">auto</span> fn = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">int</span> <span class="org-variable-name">n</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> n * 10; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">(</span>lambda<span class="org-rainbow-delimiters-depth-2">)</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f5e578f2010
&gt;&gt; 
</pre>
</div>


<p>
<b>Parts of a C++'s lambda expression:</b>  - (<a href="https://msdn.microsoft.com/en-us/library/dd293608.aspx">Microsoft Inc. Lambda C++</a>)
</p>

<ol class="org-ol">
<li>Capture clause - Specifies captured variables (closure).
<ul class="org-ul">
<li><code>[ ]</code> - Empty capture clause means that no variable from escope
is captured.</li>
<li><code>[x, y]</code>- The variables x and y are captured by value and the
the lambda body will get a copy of x and y. They cannot be
modified in the body of the lambda expression.</li>
<li><code>[&amp;x , y]</code> - The variable x is captured by reference and y by
value, therefore x can be modified in the body of the lambda
expression and y cannot.</li>
<li><code>[&amp;]</code> - Capture all variables used in the lambda's body by
reference.</li>
<li><code>[=]</code>- Captures all variables used in the body by value
(copy). The variables cannot be modifed as they are passed by
value.</li>
<li><code>[=, &amp;blob]</code>- The variable blob is captured by reference and all
other variables are captured by value (copy).</li>
<li><code>[this]</code> - Captures the "this" pointer of the enclosing class.</li>
</ul></li>

<li>Parameter list (Optional)- Parameters, aka arguments, of the lambda expression.</li>
<li>Mutable specification (optional)</li>
<li>exception-specification (optional)</li>
<li>trailing return type (optional)</li>
<li>lambda-body - The body can access variables such as:
<ul class="org-ul">
<li>Lambda parameters passed between parenthesis:  <code>(int x)</code></li>
<li>Captured variables from the enclosing scope.</li>
<li>Global variables.</li>
<li>Class data members if the lambda expression is defined inside a
class.</li>
</ul></li>
</ol>

<div class="org-src-container">
<pre class="src src-text">--
            (1)  (2)    (3)       (4)         (5)
               |    |         |            |           |
              ...  ....  .....+....  ...+....     ......
              [ ]  ( )  mutable  throw()  -&gt; int
              {                                                   
                // (6)                                              
                // Lambda body 
                int n = x + y;
                x = y;
                y  = n;
                return n;
              }
</pre>
</div>
</div>
</div>

<div id="outline-container-org743d18d" class="outline-4">
<h4 id="org743d18d"><span class="section-number-4">1.13.2</span> Basic Example</h4>
<div class="outline-text-4" id="text-1-13-2">
<p>
<b>Proof-of-concept code</b> 
</p>

<ul class="org-ul">
<li>File: <a href="src/lambdaFun.cpp">file:src/lambdaFun.cpp</a></li>
<li>Online Compiler: <a href="http://rextester.com/SCQP30593">http://rextester.com/SCQP30593</a></li>
</ul>

<p>
Code Highlights:
</p>

<ul class="org-ul">
<li>Lambda function - lambda1</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Example (1)</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">lambda1</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">){</span>
   <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Lambda1: : I got the value = "</span> &lt;&lt; str &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 1:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------</span>
<span class="org-function-name">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> lambda1A = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Lambda1: : I got the value = "</span> &lt;&lt; str &lt;&lt; endl;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 2:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------</span>
<span class="org-function-name">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> lambda1B = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Lambda1: : I got the value = "</span> &lt;&lt; str &lt;&lt; endl;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 3:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">------------------------------</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Type synonym </span>
<span class="org-keyword">using</span> <span class="org-type">FnAction</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative type synonym: </span>
<span class="org-keyword">using</span> <span class="org-type">FnAction</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp;<span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-type">FnAction</span> <span class="org-variable-name">lambda1C</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">str</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Lambda1: : I got the value = "</span> &lt;&lt; str &lt;&lt; endl;
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; lambda1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = hello world

&gt;&gt; lambda1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hola mundo"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = hola mundo

&gt;&gt; lambda1A<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"testing C++"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = testing C++

&gt;&gt; lambda1B<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"Running lambda1B"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = Running lambda1B

&gt;&gt; lambda1C<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"I am lambda1C function"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">Lambda1</span>: : I got the value = I am lambda1C function
&gt;&gt;  
</pre>
</div>


<ul class="org-ul">
<li>Higher order function which returns a lambda function which takes
two ints as parameters returning an int. This function captures the
parameter m by value, it means that the parameter is copied in the
function body.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">As it is in the code.</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------------- </span>
<span class="org-function-name">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> makeFunction1<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">m</span><span class="org-rainbow-delimiters-depth-1">){</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>m<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> m * <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-keyword">auto</span> fn = makeFunction1<span class="org-rainbow-delimiters-depth-1">(</span>4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7fb73017f010
&gt;&gt; fn<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 32
&gt;&gt; fn<span class="org-rainbow-delimiters-depth-1">(</span>4, 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 28
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 1:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------------</span>
<span class="org-keyword">auto</span> makeFunction1A<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">m</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>m<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> m * <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; fna<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 32
&gt;&gt; fna<span class="org-rainbow-delimiters-depth-1">(</span>4, 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 28
&gt;&gt; <span class="org-keyword">auto</span> fna6 = makeFunction1A<span class="org-rainbow-delimiters-depth-1">(</span>6<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f696d823030
&gt;&gt; fna6<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 48
&gt;&gt; fna6<span class="org-rainbow-delimiters-depth-1">(</span>4, 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 42
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 2:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------------</span>
<span class="org-keyword">auto</span> makeFunction1B<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">m</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>m<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> m * <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Alternative 3:</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-----------------------------------------</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">C++11 Type synonym</span>
<span class="org-keyword">using</span> <span class="org-type">BinaryIntFunctionA</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;
<span class="org-keyword">using</span> <span class="org-type">BinaryIntFunctionB</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Prior to C++11 type synonym</span>
<span class="org-keyword">typedef</span> <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-type">BinaryIntFunction</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">makeFunction1C</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">m</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">BinaryIntFunctionB</span> <span class="org-rainbow-delimiters-depth-1">{</span>
    <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>m<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> m * <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; <span class="org-keyword">auto</span> fnc = makeFunction1C<span class="org-rainbow-delimiters-depth-1">(</span>8<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f696d823050
&gt;&gt; fnc<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 64
&gt;&gt; fnc<span class="org-rainbow-delimiters-depth-1">(</span>6, 7<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 104
&gt;&gt; 8 * <span class="org-rainbow-delimiters-depth-1">(</span>6 + 7<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 104
&gt;&gt; 
</pre>
</div>


<p>
Complete program output (<a href="src/lambdaFun.cpp">file:src/lambdaFun.cpp</a>) : 
</p>

<div class="org-src-container">
<pre class="src src-sh">g++ lamdaFun.cpp -o <span class="org-keyword">bin/lamdaFun.bin</span> &amp;&amp; bin/lamdaFun.bin

-----------------------------------------------------------------------------------------
&gt;&gt; Example(1) - Testing <span class="org-keyword">function</span> <span class="org-function-name">lambda1</span>
<span class="org-function-name">Lambda1</span>: : I got the value = Hello
<span class="org-function-name">Lambda1</span>: : I got the value = World

-----------------------------------------------------------------------------------------
&gt;&gt; Example(2) Testing <span class="org-keyword">function</span> <span class="org-function-name">lambda2</span>
Lambda 2 :: I got the value  = Japan
Lambda 2 :: I got the value  = Korea

-----------------------------------------------------------------------------------------
&gt;&gt; Example(3) Testing <span class="org-keyword">function</span> <span class="org-function-name">lambda3</span>
   - Lambda <span class="org-keyword">function</span> <span class="org-function-name">can</span> be defined and executed at the call-site
Lambda 3 :: I got the value = C++11 is awesome!

-----------------------------------------------------------------------------------------
&gt;&gt; Example(4) Testing <span class="org-keyword">function</span> <span class="org-function-name">sumLambda</span>
   - Lambda functions  can return values as any function.
<span class="org-function-name">sumLambda</span>(10.0, 25.34) = 35.34
<span class="org-function-name">sumLambda</span>(-10.23, 4.56) = -5.67

-----------------------------------------------------------------------------------------
&gt;&gt; Example(5) Testing <span class="org-keyword">function</span> <span class="org-function-name">lamdaCapture</span>
   - Lambda functions  can capture its environment (closures) and have state as <span class="org-string">"function objects"</span>
  x  = 5  c = 3
<span class="org-function-name">lamdaCapture</span>(2, 5)  = 32
  x  = 5  c = 4
  lamdaCapture(1, 2) =  16
  x  = 5  c = 5

-----------------------------------------------------------------------------------------
&gt;&gt; Example(6) Testing <span class="org-keyword">function</span> <span class="org-function-name">sumLambda</span>
   - Lambda functions  can play well with STL algorithms
Print all vector elements - Version 1
  v[0] = 1
  v[1] = 2
  v[2] = 3
  v[3] = 4
  v[4] = 5
  v[5] = 6
  v[6] = 7
  v[7] = 8
Print all vector element Version 2  - local state with <span class="org-string">'static'</span> keyword
  v[0] = 1
  v[1] = 2
  v[2] = 3
  v[3] = 4
  v[4] = 5
  v[5] = 6
  v[6] = 7
  v[7] = 8

-----------------------------------------------------------------------------------------
&gt;&gt; Example(7) 
   Playing with STL transform algorithm.
  Vector transformed =  
v  [0] = 4
v  [1] = 7
v  [2] = 10
v  [3] = 13
v  [4] = 16
v  [5] = 19
v  [6] = 22
v  [7] = 25

-----------------------------------------------------------------------------------------
&gt;&gt; Example(8) 
   Lambda functions can be returned from functions and be generated at run-time.
  mulSumBy2(2, 4) = 12
  mulSumBy2(3, 1) = 8
  mulSumBy5(2, 4) = 30
  mulSumBy5(9, 2) = 55

-----------------------------------------------------------------------------------------
&gt;&gt; Example(9) 
   Lambda functions can be returned from functions and have state.
  Running dummy <span class="org-keyword">function</span>
    (*) m = 2, n = 0, x = 1, y = 3, z = 8
  Running dummy <span class="org-keyword">function</span>
    (*) m = 2, n = 1, x = 2, y = 5, z = 15
  Running dummy <span class="org-keyword">function</span>
    (*) m = 3, n = 0, x = 1, y = 3, z = 12
  Running dummy <span class="org-keyword">function</span>
    (*) m = 3, n = 1, x = 2, y = 5, z = 22

-----------------------------------------------------------------------------------------
&gt;&gt; Example(10) 
   Lambda functions can return lambda functions!!
  addTo5(4) = 9
  addTo5(3) = 8
  addTo10(4) = 14
  addTo10(3) = 13

-----------------------------------------------------------------------------------------
&gt;&gt; Example(11) 
   Lambda functions can be passed as <span class="org-keyword">function</span> <span class="org-function-name">arguments</span>!
<span class="org-function-name">foldVector</span>(dataset2, 0, add) = 28
<span class="org-function-name">foldVector</span>(dataset2, 1, mul) = 5040

-----------------------------------------------------------------------------------------
&gt;&gt; Example(12) - Observer pattern
(observer 1) Temperature changed to 30.5 C
(observer 2) Sensor temperature changed to 30.5 C
(observer 1) Temperature changed to 20.5 C
(observer 2) Sensor temperature changed to 20.5 C

</pre>
</div>

<p>
<b>References</b>
</p>

<ul class="org-ul">
<li><b>Lambda Expressions in C++</b> -
<a href="https://msdn.microsoft.com/en-us/library/dd293608.aspx">https://msdn.microsoft.com/en-us/library/dd293608.aspx</a></li>

<li><b>Lambda expressions (since C++11)</b> -
<a href="http://en.cppreference.com/w/cpp/language/lambda">http://en.cppreference.com/w/cpp/language/lambda</a></li>

<li><b>C++ Core Guidelines: Function Objects and Lambdas</b> -
<a href="http://www.modernescpp.com/index.php/c-core-guidelines-function-objects-and-lambas">http://www.modernescpp.com/index.php/c-core-guidelines-function-objects-and-lambas</a></li>

<li><b>C++11/C++14 lambda functions - 2017</b> -
<a href="http://www.bogotobogo.com/cplusplus/C11/C11_lambda_functions_expressions.php">http://www.bogotobogo.com/cplusplus/C11/C11_lambda_functions_expressions.php</a></li>

<li><b>Lambda Functions in C++11 - the Definitive Guide</b> -
<a href="https://www.cprogramming.com/c++11/c++11-lambda-closures.html">https://www.cprogramming.com/c++11/c++11-lambda-closures.html</a></li>

<li><b>Fun with Lambdas: C++14 Style (part 1)</b> -
<a href="https://www.slideshare.net/SumantTambe/fun-with-lambdas-c14-style">https://www.slideshare.net/SumantTambe/fun-with-lambdas-c14-style</a></li>

<li><b>ICS 45C Fall 2016 - Notes and Examples: Functions and Lambdas</b> -
<a href="http://www.ics.uci.edu/~thornton/ics45c/Notes/FunctionsAndLambdas/">http://www.ics.uci.edu/~thornton/ics45c/Notes/FunctionsAndLambdas/</a></li>

<li><b>Creating Recursive Lambdas &#x2026; and returning them too!</b> -
<a href="http://cpptruths.blogspot.com.br/2013/10/creating-recursive-lambdas-and.html">http://cpptruths.blogspot.com.br/2013/10/creating-recursive-lambdas-and.html</a></li>
</ul>
</div>
</div>

<div id="outline-container-org3be071d" class="outline-4">
<h4 id="org3be071d"><span class="section-number-4">1.13.3</span> std::bind</h4>
<div class="outline-text-4" id="text-1-13-3">
</div>
<ol class="org-ol">
<li><a id="org049fb05"></a>Overview<br />
<div class="outline-text-5" id="text-1-13-3-1">
<p>
The operator std::bind can simplify help simplifying turning ordinary
functions, instance methods (member functions) and static methods
(static member functions) into ordinary functions.
</p>

<p>
Example 1: Turn a function of signature: 
</p>
<ul class="org-ul">
<li>Input Signature:
<ul class="org-ul">
<li>double functionABC(double a, double c, double c)</li>
</ul></li>
<li>Target signature: 
<ul class="org-ul">
<li>function&lt;double (double)&gt;</li>
</ul></li>
</ul>

<p>
For the function functionABC
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span> <span class="org-function-name">functionABC</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
The expression:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Type of fnFunOfA is std::function&lt;double (double)&gt;</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfA</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, _1, 10.0, 20.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">It is the same as </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfA</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span>x, 10.0, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">It also equivalent to </span>
<span class="org-function-name">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> fnFunOfA = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span>x, 10.0, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
So, it follows that: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfB</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, 25.0 , _1, 20.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">It is equivalent to </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfB</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">(</span>functionABC, 25.0 , _1, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
By using more lambda placeholders it is also possible to generate
multi variable functions: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>::<span class="org-constant">placeholders</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Import placeholders, _1, _2, _3 ...  </span>

<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------//</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfAB</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, _1 , _2, 20.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfAB</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span> x , y, 20.0<span class="org-rainbow-delimiters-depth-2">)</span>;<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------//</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfAC</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, _1 , 10.0, _2<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfAC</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span> x , 10.0, y<span class="org-rainbow-delimiters-depth-2">)</span>;<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------//</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfABC</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>functionABC, _1 , 10.0, _2<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">fnFunOfABC</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span>, <span class="org-type">double</span> <span class="org-variable-name">z</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> functionABC<span class="org-rainbow-delimiters-depth-2">(</span> x , y, z<span class="org-rainbow-delimiters-depth-2">)</span>;<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>


<p>
<b>Binding non-static methods (member function)</b>
</p>

<p>
For the following class:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">struct</span> <span class="org-type">FunctionObject</span><span class="org-rainbow-delimiters-depth-1">{</span>
     <span class="org-type">double</span> <span class="org-variable-name">x</span>;
     <span class="org-type">double</span> <span class="org-variable-name">y</span>;
     <span class="org-function-name">FunctionObject</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">)</span>: x<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>, y<span class="org-rainbow-delimiters-depth-2">(</span>y<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>;      
     <span class="org-type">double</span> <span class="org-keyword">operator</span> <span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">){</span>   
        <span class="org-keyword">return</span> a * a;
     <span class="org-rainbow-delimiters-depth-2">}</span>   
     <span class="org-type">double</span> <span class="org-keyword">operator</span> <span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-keyword">return</span> a * x + b * y + c / <span class="org-rainbow-delimiters-depth-3">(</span>x + y<span class="org-rainbow-delimiters-depth-3">)</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-type">double</span> <span class="org-function-name">method1</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-keyword">return</span> <span class="org-keyword">this</span>-&gt;x * a  + <span class="org-keyword">this</span>-&gt;y / a;
     <span class="org-rainbow-delimiters-depth-2">}</span>
     <span class="org-type">double</span> <span class="org-function-name">method2</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">b</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-2">){</span>
         <span class="org-keyword">return</span>  c * <span class="org-rainbow-delimiters-depth-3">(</span>a / x + b / y<span class="org-rainbow-delimiters-depth-3">)</span>;
     <span class="org-rainbow-delimiters-depth-2">}</span>       
 <span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
It is possible to create lambda functions from those class methods
(member functions):
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">FunctionObject</span> <span class="org-variable-name">obj</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">method1LambdaA</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">FunctionObject</span>::method1, fobj, _1<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to: </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">method1LambdaA</span> = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">](</span><span class="org-type">double</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-1">){</span><span class="org-keyword">return</span> obj.method1<span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">method2LambdaAsFnOfAC</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">FunctionObject</span>::method2, &amp;fobj, _1, 10.0, _2<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to: </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">method2LambdaAsFnOfAC</span> = <span class="org-rainbow-delimiters-depth-1">[</span>&amp;<span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">](</span><span class="org-type">double</span> <span class="org-variable-name">a</span>, <span class="org-type">double</span> <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> obj.method2<span class="org-rainbow-delimiters-depth-2">(</span>a, 10.0, c<span class="org-rainbow-delimiters-depth-2">)</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">functionOfObj</span> = <span class="org-constant">std</span>::bind<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">FunctionObject</span>::method1, _1, 10.0<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Equivalent to: </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">functionOfobj</span> = <span class="org-rainbow-delimiters-depth-1">[](</span><span class="org-type">FunctionObject</span> <span class="org-variable-name">a</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> obj.method1<span class="org-rainbow-delimiters-depth-2">(</span>obj, 10.0<span class="org-rainbow-delimiters-depth-2">)</span>;<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>
</div>
</li>

<li><a id="org48a51ed"></a><a id="ID-219c4de9-3e9e-446f-bdd5-1ae6e7d45b5b"></a>std::bind Example<br />
<div class="outline-text-5" id="text-1-13-3-2">
<p>
File: 
</p>
<ul class="org-ul">
<li><a href="src/lambda-bind.cpp">file:src/lambda-bind.cpp</a></li>
</ul>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ g++ lambda-bind.cpp -o <span class="org-keyword">lambda-bind.bin</span> -g -std=c++11 -Wall -Wextra -ldl 
$ ./lambda-bind.bin

======== Test 1 ========
<span class="org-function-name">lambda-bind.cpp</span>:58: ; sum10(2.0) = 12
<span class="org-function-name">lambda-bind.cpp</span>:59: ; sum10(4.5) = 14.5
<span class="org-function-name">lambda-bind.cpp</span>:60: ; sum10(25.0) = 35
======== Test 2 ========
<span class="org-function-name">lambda-bind.cpp</span>:66: ; vectorLenAsFunctionOfX(4.0) = 27.2213
<span class="org-function-name">lambda-bind.cpp</span>:67: ; std::bind(vectorLength, _1, 10.0, 25.0)(4.0) = 27.2213
<span class="org-function-name">lambda-bind.cpp</span>:68: ; vectorLenAsFunctionOfX(10.0) = 28.7228
<span class="org-function-name">lambda-bind.cpp</span>:69: ; std::bind(vectorLength, _1, 10.0, 25.0)(10.0) = 28.7228
Tabulating - vectorLenAsFunctionOfX
     1.000    26.944
     2.000    27.000
     3.000    27.092
     4.000    27.221
     5.000    27.386
======== Test 3 ========
<span class="org-function-name">lambda-bind.cpp</span>:77: ; vectorLenAsFunctionOfY(14.0) = 30.348
<span class="org-function-name">lambda-bind.cpp</span>:78: ; vectorLenAsFunctionOfY(20.0) = 33.541
Tabulating - vectorLenAsFunctionOfY
     1.000    26.944
     2.000    27.000
     3.000    27.092
     4.000    27.221
     5.000    27.386
======== Test 4 ========
<span class="org-function-name">lambda-bind.cpp</span>:92: ; vectorLenAsFunctionOfYZ(3.0, 6.0) = 12.0416
<span class="org-function-name">lambda-bind.cpp</span>:93: ; vectorLenAsFunctionOfYZ(15.0, 26.0) = 31.6386
======== Test 5 ========
<span class="org-function-name">lambda-bind.cpp</span>:97: ; fobj(4.0) = 16
<span class="org-function-name">lambda-bind.cpp</span>:98: ; fobj(5.0) = 25
<span class="org-function-name">lambda-bind.cpp</span>:99: ; fobj(10.0) = 100
<span class="org-function-name">lambda-bind.cpp</span>:101: ; fobj(4.0, 10.0, 5.0) = 104.357
<span class="org-function-name">lambda-bind.cpp</span>:102: ; fobj(6.0, 8.0, 9.0) = 100.643
<span class="org-function-name">Running</span>: tabulate(0.0, 5.0, 1.0, fobj)
     0.000     0.000
     1.000     1.000
     2.000     4.000
     3.000     9.000
     4.000    16.000
     5.000    25.000
Turning class member <span class="org-keyword">function</span> <span class="org-function-name">into</span> lambda <span class="org-keyword">function</span> 
 Note: it is not possible (0.0, 5.0, 1.0, fobj.method1)
<span class="org-function-name">lambda-bind.cpp</span>:111: ; fobj.method1(10.0) = 60.8
<span class="org-function-name">lambda-bind.cpp</span>:112: ; method1LambdaA(10.0) = 60.8
<span class="org-function-name">lambda-bind.cpp</span>:113: ; fobj.method1(20.0) = 120.4
<span class="org-function-name">lambda-bind.cpp</span>:114: ; method1LambdaA(20.0) = 120.4
<span class="org-function-name">lambda-bind.cpp</span>:115: ; fobj.method1(30.0) = 180.267
<span class="org-function-name">lambda-bind.cpp</span>:116: ; method1LambdaA(30.0) = 180.267
Tabulating method1LambdaA
     0.000       inf
     1.000    14.000
     2.000    16.000
     3.000    20.667
     4.000    26.000
     5.000    31.600
Tabulating method1LambdaA using direct lambda
     0.000       inf
     1.000    14.000
     2.000    16.000
     3.000    20.667
     4.000    26.000
     5.000    31.600
======== Test 6 ========
<span class="org-function-name">lambda-bind.cpp</span>:129: ; method2LambdaAsFnOfA(5.0) = 41.6667
<span class="org-function-name">lambda-bind.cpp</span>:130: ; method2LambdaAsFnOfA(6.0) = 45
<span class="org-function-name">lambda-bind.cpp</span>:131: ; method2LambdaAsFnOfA(10.0) = 58.3333
<span class="org-function-name">lambda-bind.cpp</span>:136: ; fobj.method2(3.0, 10.0, 4.0) = 7
<span class="org-function-name">lambda-bind.cpp</span>:137: ; method2LambdaAsFnOfAC(3.0, 4.0) = 7
<span class="org-function-name">lambda-bind.cpp</span>:138: ; fobj.method2(15.0, 10.0, 14.0) = 52.5
<span class="org-function-name">lambda-bind.cpp</span>:139: ; method2LambdaAsFnOfAC(15.0, 14.0) = 52.5


</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org3ca52d4" class="outline-3">
<h3 id="org3ca52d4"><span class="section-number-3">1.14</span> OOP Polymorphism</h3>
<div class="outline-text-3" id="text-1-14">
</div>
<div id="outline-container-org69d3087" class="outline-4">
<h4 id="org69d3087"><span class="section-number-4">1.14.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-14-1">
<p>
Dynamic or subtyping polymorphis is basically, the ability
of the client code to deal with any any instance of derived classes in
the same way it deals with an instance of the base class. 
</p>

<p>
In C++, it is only possible to use OOP subtyping polymorphism with
pointers or references. As a result, it is not possible to store
instances of base class in STL containers by value, or to create
polymorphic functions which return instance of derived classes by
value or take instance derived classes as argument passed by value.
</p>

<p>
To summarize: 
</p>

<ul class="org-ul">
<li>Object Oriented Polymorphism, is aso called:
<ul class="org-ul">
<li>Dynamic polymorphism</li>
<li>Runtime polymorphism</li>
</ul></li>
<li>In C++ it is only possible to use polymorphism with references or
pointers.</li>
<li>A polymorphic function which returns any instance of the derived
class casted as an instance of the base class can only return them
<b>by pointer to objects allocated on the heap</b> (dynamic memory) with
<b>new</b> operator. Functions like this are called factory functions and
in this case, it is better to wrap the pointer in smart pointer,
<code>unique_ptr</code> or <code>shared_ptr</code>.</li>
</ul>
</div>
</div>
<div id="outline-container-org28369e7" class="outline-4">
<h4 id="org28369e7"><span class="section-number-4">1.14.2</span> Dynamic Polymorphism example</h4>
<div class="outline-text-4" id="text-1-14-2">
<p>
File: polymorphism.cpp 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">memory</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>   <span class="org-comment-delimiter">// </span><span class="org-comment">C++11 Smart pointers (unique_ptr and shared_ptr)</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>      <span class="org-comment-delimiter">// </span><span class="org-comment">Hash table, hash map or dictionary</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">assertions tests </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Interface class </span>
<span class="org-keyword">class</span> <span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
  <span class="org-function-name">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">driverName</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"generic"</span>;   
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"unknown"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">url</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Connecting to generic driver url = "</span> &lt;&lt; url &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">isConnected</span><span class="org-rainbow-delimiters-depth-2">()</span>  <span class="org-keyword">const</span> -&gt; <span class="org-type">bool</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-constant">false</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">Default destructor</span>
  <span class="org-keyword">virtual</span> ~<span class="org-function-name">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Disconnecting from generic driver - id = "</span> &lt;&lt; <span class="org-string">"unknown"</span>&lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DriverSQLiteDriver</span>: <span class="org-keyword">public</span> <span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
  <span class="org-type">bool</span> <span class="org-variable-name">m_connected</span> = <span class="org-constant">false</span>;
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_id</span> = <span class="org-string">"unknown"</span>;
<span class="org-function-name">public</span>:
  <span class="org-function-name">DriverSQLiteDriver</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
  <span class="org-function-name">DriverSQLiteDriver</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_id</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>

  <span class="org-comment-delimiter">// </span><span class="org-comment">Const keyword in this case indicates that the member function (method)</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">doesn't change the current object.</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">driverName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span><span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"sqlite"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_id;
  <span class="org-rainbow-delimiters-depth-2">}</span>  
  <span class="org-comment-delimiter">// </span><span class="org-comment">This keyword override -&gt; indicates visually that the method</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">is being overriden and also provides some safety features which</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">helps to improve type-safety and compile-time correctness.</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">For instance, if member function (aka method) being overriden</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">is not annotated as virtual in the base class, this C++11 keyword</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">will generate a compile-time error. It also will generate a compile-time</span>
  <span class="org-comment-delimiter">// </span><span class="org-comment">error if the member function being overriden doesn't exist in the base class.  </span>
  <span class="org-keyword">auto</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">url</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Connecting to "</span> &lt;&lt; url &lt;&lt; <span class="org-constant">std</span>::endl;
    m_connected = <span class="org-constant">true</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">isConnected</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">bool</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_connected;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  ~<span class="org-function-name">DriverSQLiteDriver</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Disconnecting from PosgresDB - m_id = "</span> &lt;&lt; m_id &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-keyword">class</span> <span class="org-type">DriverPostgresSQL</span>: <span class="org-keyword">public</span> <span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
  <span class="org-type">bool</span> <span class="org-variable-name">m_connected</span> = <span class="org-constant">false</span>;
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_id</span> = <span class="org-string">"unknown"</span>;  
<span class="org-function-name">public</span>:
  <span class="org-comment-delimiter">// </span><span class="org-comment">DriverPostgresSQL () = default;</span>
  <span class="org-function-name">DriverPostgresSQL</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_id</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>

  <span class="org-keyword">auto</span> <span class="org-function-name">driverName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span><span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"PostGresSQL"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_id;
  <span class="org-rainbow-delimiters-depth-2">}</span>   
  <span class="org-keyword">auto</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">url</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Connecting to "</span> &lt;&lt; url &lt;&lt; <span class="org-constant">std</span>::endl;
    m_connected = <span class="org-constant">true</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">isConnected</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">bool</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_connected;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  ~<span class="org-function-name">DriverPostgresSQL</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Disconnecting from PostGresSQL - id = "</span> &lt;&lt; m_id &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-keyword">class</span> <span class="org-type">DriverSQLServer</span> : <span class="org-keyword">public</span> <span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
  <span class="org-type">bool</span> <span class="org-variable-name">m_connected</span> = <span class="org-constant">false</span>;
  <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">m_id</span> = <span class="org-string">"unknown"</span>;  
<span class="org-function-name">public</span>:
  <span class="org-function-name">DriverSQLServer</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
  <span class="org-function-name">DriverSQLServer</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_id</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>

  <span class="org-keyword">auto</span> <span class="org-function-name">driverName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span><span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"SQLServer"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_id;
  <span class="org-rainbow-delimiters-depth-2">}</span>    
  <span class="org-keyword">auto</span> <span class="org-function-name">connect</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">url</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Connecting to "</span> &lt;&lt; url &lt;&lt; <span class="org-constant">std</span>::endl;
    m_connected = <span class="org-constant">true</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  <span class="org-keyword">auto</span> <span class="org-function-name">isConnected</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">bool</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> m_connected;
  <span class="org-rainbow-delimiters-depth-2">}</span>
  ~<span class="org-function-name">DriverSQLServer</span><span class="org-rainbow-delimiters-depth-2">(){</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Disconnecting from SQLServer - id = "</span> &lt;&lt; m_id &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>  
<span class="org-rainbow-delimiters-depth-1">}</span>;


<span class="org-comment-delimiter">// </span><span class="org-comment">Non-polymorphi function -&gt; Parameters passed by value cannot be polymorphic</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">void showDriverStatus(const GenericDBDriver driver){ ... }</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Polymorphic function using references </span>
<span class="org-type">void</span> <span class="org-function-name">showDriverStatus1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">GenericDBDriver</span>&amp; <span class="org-variable-name">driver</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Driver = "</span> &lt;&lt; driver.driverName<span class="org-rainbow-delimiters-depth-2">()</span>
            &lt;&lt; <span class="org-string">" id = "</span> &lt;&lt; driver.getID<span class="org-rainbow-delimiters-depth-2">()</span>
            &lt;&lt; <span class="org-string">" ; status = "</span> &lt;&lt; driver.isConnected<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt;  <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Polymorphic function using pointers </span>
<span class="org-type">void</span> <span class="org-function-name">showDriverStatus2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">GenericDBDriver</span>* <span class="org-variable-name">driver</span><span class="org-rainbow-delimiters-depth-1">){</span>
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;
  <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Driver = "</span> &lt;&lt; driver-&gt;driverName<span class="org-rainbow-delimiters-depth-2">()</span>
            &lt;&lt; <span class="org-string">" id = "</span> &lt;&lt; driver-&gt;getID<span class="org-rainbow-delimiters-depth-2">()</span>
            &lt;&lt; <span class="org-string">" ; status = "</span> &lt;&lt; driver-&gt;isConnected<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt;  <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-comment-delimiter">// </span><span class="org-comment">Factory method</span>
<span class="org-keyword">enum</span> <span class="org-keyword">class</span> <span class="org-type">DriverType</span><span class="org-rainbow-delimiters-depth-1">{</span>
 <span class="org-variable-name">generic</span>,
 <span class="org-variable-name">sqlite</span>,
 <span class="org-variable-name">postgres</span>,
 <span class="org-variable-name">sqlserver</span>                        
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">dbDriverFactory</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">DriverType</span>&amp; <span class="org-variable-name">dbtype</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">id</span> = <span class="org-string">"unknown"</span><span class="org-rainbow-delimiters-depth-1">)</span>
  -&gt; <span class="org-constant">std</span>::<span class="org-type">shared_ptr</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>dbtype == <span class="org-constant">DriverType</span>::generic<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;   
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>dbtype == <span class="org-constant">DriverType</span>::sqlite<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DriverSQLiteDriver</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>id<span class="org-rainbow-delimiters-depth-2">)</span>;   
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>dbtype == <span class="org-constant">DriverType</span>::postgres<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DriverPostgresSQL</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>id<span class="org-rainbow-delimiters-depth-2">)</span>;   
  <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>dbtype == <span class="org-constant">DriverType</span>::sqlserver<span class="org-rainbow-delimiters-depth-2">)</span>
    <span class="org-keyword">return</span> <span class="org-constant">std</span>::make_shared<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">DriverSQLServer</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>id<span class="org-rainbow-delimiters-depth-2">)</span>;    
  <span class="org-comment-delimiter">// </span><span class="org-comment">Failure -&gt; DO NOT return old C++98 NULL as it is not typesafe </span>
  <span class="org-keyword">return</span> <span class="org-constant">nullptr</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>


<span class="org-keyword">class</span> <span class="org-type">DriverFactory</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:

<span class="org-function-name">public</span>:

  <span class="org-function-name">DriverFactory</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">delete</span>;
  <span class="org-function-name">DriverFactory</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">DriverFactory</span>&amp; <span class="org-variable-name">lhs</span><span class="org-rainbow-delimiters-depth-2">)</span> = <span class="org-keyword">delete</span>;

  <span class="org-keyword">static</span> <span class="org-keyword">auto</span> <span class="org-function-name">getInstance</span><span class="org-rainbow-delimiters-depth-2">()</span> 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>

  <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 1 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Uniform initialization </span>
    <span class="org-type">GenericDBDriver</span>   <span class="org-variable-name">d0</span>;
    <span class="org-type">DriverSQLServer</span>   <span class="org-variable-name">d1</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-type">DriverPostgresSQL</span> <span class="org-variable-name">d2</span> = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-type">DriverSQLServer</span>   <span class="org-variable-name">d3</span> = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-3">}</span>;

    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d0<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    d1.connect<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"file:///home/user/datbase.sqlite"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d2<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus1<span class="org-rainbow-delimiters-depth-3">(</span>d3<span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"====== End of test 1 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 2 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-comment-delimiter">// </span><span class="org-comment">Uniform initialization </span>
    <span class="org-type">GenericDBDriver</span>   <span class="org-variable-name">d0</span>;
    <span class="org-type">DriverSQLServer</span>   <span class="org-variable-name">d1</span><span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-type">DriverPostgresSQL</span> <span class="org-variable-name">d2</span> = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-type">DriverSQLServer</span>   <span class="org-variable-name">d3</span> = <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-3">}</span>;

    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d0<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    d1.connect<span class="org-rainbow-delimiters-depth-3">(</span><span class="org-string">"file:///home/user/datbase.sqlite"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d2<span class="org-rainbow-delimiters-depth-3">)</span>;
    showDriverStatus2<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d3<span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"====== End of test 2 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>

  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Failure ! -&gt; It only calls the methods of GenericDBDriver</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">It is not possible to polymorphism (subtyping polymorphism) in C++</span>
    <span class="org-comment-delimiter">// </span><span class="org-comment">without pointers or references.</span>
    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 3 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">xs</span>;

    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>GenericDBDriver<span class="org-rainbow-delimiters-depth-4">{}</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>DriverSQLServer <span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>DriverPostgresSQL<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>DriverSQLServer<span class="org-rainbow-delimiters-depth-4">{</span><span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-4">}</span><span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-3">){</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" - driver = "</span> &lt;&lt; x.driverName<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; x.getID<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-rainbow-delimiters-depth-3">}</span>

    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>0<span class="org-rainbow-delimiters-depth-4">)</span>.driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>1<span class="org-rainbow-delimiters-depth-4">)</span>.driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>2<span class="org-rainbow-delimiters-depth-4">)</span>.driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>3<span class="org-rainbow-delimiters-depth-4">)</span>.driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== End of test 3 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>


  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 4 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">GenericDBDriver</span>*<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">xs</span>;

    <span class="org-keyword">auto</span> <span class="org-variable-name">d0</span> = GenericDBDriver<span class="org-rainbow-delimiters-depth-3">{}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">d1</span> = DriverSQLiteDriver <span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">d2</span> = DriverPostgresSQL<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    <span class="org-keyword">auto</span> <span class="org-variable-name">d3</span> = DriverSQLServer<span class="org-rainbow-delimiters-depth-3">{</span><span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-3">}</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d0<span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d1<span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d2<span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>&amp;d3<span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-3">){</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" - driver = "</span> &lt;&lt; x-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; x-&gt;getID<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;;
    <span class="org-rainbow-delimiters-depth-3">}</span>
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>0<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>1<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"sqlite"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>2<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"PostGresSQL"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>3<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"SQLServer"</span><span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"====== End of test 4 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>  

  <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n====== Test 5 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
    <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">shared_ptr</span><span class="org-rainbow-delimiters-depth-4">&lt;</span><span class="org-type">GenericDBDriver</span><span class="org-rainbow-delimiters-depth-4">&gt;</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-variable-name">xs</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>dbDriverFactory<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">DriverType</span>::generic<span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>dbDriverFactory<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">DriverType</span>::sqlite,    <span class="org-string">"d1"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>dbDriverFactory<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">DriverType</span>::postgres,  <span class="org-string">"d2"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    xs.push_back<span class="org-rainbow-delimiters-depth-3">(</span>dbDriverFactory<span class="org-rainbow-delimiters-depth-4">(</span><span class="org-constant">DriverType</span>::sqlserver, <span class="org-string">"d3"</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xs<span class="org-rainbow-delimiters-depth-3">){</span>
      <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" - driver = "</span> &lt;&lt; x-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-string">" ; id = "</span> &lt;&lt; x-&gt;getID<span class="org-rainbow-delimiters-depth-4">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;;
    <span class="org-rainbow-delimiters-depth-3">}</span>
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>0<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"generic"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>1<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"sqlite"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>2<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"PostGresSQL"</span><span class="org-rainbow-delimiters-depth-3">)</span>;
    assert<span class="org-rainbow-delimiters-depth-3">(</span>xs.at<span class="org-rainbow-delimiters-depth-4">(</span>3<span class="org-rainbow-delimiters-depth-4">)</span>-&gt;driverName<span class="org-rainbow-delimiters-depth-4">()</span> == <span class="org-string">"SQLServer"</span><span class="org-rainbow-delimiters-depth-3">)</span>;

    <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"====== End of test 5 ==========="</span> &lt;&lt; <span class="org-constant">std</span>::endl;
  <span class="org-rainbow-delimiters-depth-2">}</span>  
  <span class="org-keyword">return</span> EXIT_SUCCESS;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ polymorphism.cpp -std=c++1z -Wall -Wextra &amp;&amp; ./a.out

====== Test 1 ===========
 [INFO] Driver = generic id = unknown ; status = false
 [INFO] Driver = SQLServer id = d1 ; status = false
Connecting to file:///home/user/datbase.sqlite
 [INFO] Driver = SQLServer id = d1 ; status = true
 [INFO] Driver = PostGresSQL id = d2 ; status = false
 [INFO] Driver = SQLServer id = d3 ; status = false
====== End of test 1 ===========
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown

====== Test 2 ===========
 [INFO] Driver = generic id = unknown ; status = false
 [INFO] Driver = SQLServer id = d1 ; status = false
Connecting to file:///home/user/datbase.sqlite
 [INFO] Driver = SQLServer id = d1 ; status = true
 [INFO] Driver = PostGresSQL id = d2 ; status = false
 [INFO] Driver = SQLServer id = d3 ; status = false
====== End of test 2 ===========
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown

====== Test 3 ===========
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown
 - driver = generic ; id = unknown
 - driver = generic ; id = unknown
 - driver = generic ; id = unknown
 - driver = generic ; id = unknown

====== End of test 3 ===========
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown

====== Test 4 ===========
 - driver = generic ; id = unknown
 - driver = sqlite ; id = d1
 - driver = PostGresSQL ; id = d2
 - driver = SQLServer ; id = d3
====== End of test 4 ===========
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from PosgresDB - m_id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from generic driver - id = unknown

====== Test 5 ===========
 - driver = generic ; id = unknown
 - driver = sqlite ; id = d1
 - driver = PostGresSQL ; id = d2
 - driver = SQLServer ; id = d3
====== End of test 5 ===========
Disconnecting from generic driver - id = unknown
Disconnecting from PosgresDB - m_id = d1
Disconnecting from generic driver - id = unknown
Disconnecting from PostGresSQL - id = d2
Disconnecting from generic driver - id = unknown
Disconnecting from SQLServer - id = d3
Disconnecting from generic driver - id = unknown

</pre>
</div>
</div>
</div>


<div id="outline-container-orgca552ca" class="outline-4">
<h4 id="orgca552ca"><span class="section-number-4">1.14.3</span> STL containers and polymorphism</h4>
<div class="outline-text-4" id="text-1-14-3">
<p>
C++'s STL (Standard Template Library) containers/collections such as
vector, deque, map, stack and so on can only store pointers to
instances of different derived classes from a given base
class. However the STL containers cannot store references to those
instances. The STL std::reference_wrapper solves this problem. 
</p>

<p>
Documentation: 
</p>
<ul class="org-ul">
<li><a href="http://www.cplusplus.com/reference/functional/reference_wrapper/operator_func/">http://www.cplusplus.com/reference/functional/reference_wrapper/operator_func/</a></li>
</ul>

<p>
Demonstration in CERN's ROOT C++ REPL: 
</p>

<ul class="org-ul">
<li>Create test classes.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Base class </span>
<span class="org-keyword">class</span> <span class="org-type">IRoot</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
  <span class="org-keyword">virtual</span> <span class="org-keyword">auto</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"root"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">//</span><span class="org-comment">===== Derived Classes ====== //</span>

<span class="org-keyword">class</span> <span class="org-type">A</span>: <span class="org-keyword">public</span> <span class="org-type">IRoot</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
  <span class="org-keyword">auto</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"Class A"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">B</span>: <span class="org-keyword">public</span> <span class="org-type">IRoot</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
  <span class="org-keyword">auto</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">{</span>
    <span class="org-keyword">return</span> <span class="org-string">"Class B"</span>;
  <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<ul class="org-ul">
<li>Play with sample objects:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create test objects </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">r</span> = IRoot<span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">a</span> = A<span class="org-rainbow-delimiters-depth-1">()</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">b</span> = B<span class="org-rainbow-delimiters-depth-1">()</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Test objects </span>
&gt;&gt; r.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"root"</span>
&gt;&gt; a.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Class A"</span>
&gt;&gt; b.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Class B"</span>
&gt;&gt;
</pre>
</div>

<ul class="org-ul">
<li>Store those objects in a collection by pointer:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> xsp = <span class="org-constant">std</span>::deque<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">IRoot</span>*<span class="org-rainbow-delimiters-depth-1">&gt;()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">IRoot</span> *, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">IRoot</span> *<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>
&gt;&gt; xsp.push_back<span class="org-rainbow-delimiters-depth-1">(</span>&amp;r<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xsp.push_back<span class="org-rainbow-delimiters-depth-1">(</span>&amp;a<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xsp.push_back<span class="org-rainbow-delimiters-depth-1">(</span>&amp;b<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xsp
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">IRoot</span> *, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">IRoot</span> *<span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> @0x2f01990, @0x2f01998, @0x2f019a0 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt;
&gt;&gt;

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span>: xsp<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"name = "</span> &lt;&lt; x-&gt;getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
name = root
name = Class A
name = Class B
&gt;&gt;

</pre>
</div>

<ul class="org-ul">
<li>Try to store those object r, a and b in a container/collection by
reference.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Many of errors: new_allocator.h:63:18: error: 'pointer' declared</span>
<span class="org-comment"> * as a pointer to a reference of type 'IRoot &amp;' typedef _Tp* pointer;</span>
<span class="org-comment"> */</span>
<span class="org-keyword">auto</span> <span class="org-variable-name">xs</span> = <span class="org-constant">std</span>::deque<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">IRoot</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;()</span> 
</pre>
</div>

<ul class="org-ul">
<li>Try to store those object r, a and b in a container/collection by
reference using <span class="underline">std::reference_wrapper</span>.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-keyword">auto</span> xsr = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{}</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-3">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-4">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-4">&gt;</span> <span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{}</span>
&gt;&gt;

xsr.push_back<span class="org-rainbow-delimiters-depth-1">(</span>a<span class="org-rainbow-delimiters-depth-1">)</span>
xsr.push_back<span class="org-rainbow-delimiters-depth-1">(</span>r<span class="org-rainbow-delimiters-depth-1">)</span>
xsr.push_back<span class="org-rainbow-delimiters-depth-1">(</span>b<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; xsr
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-3">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-constant">std</span>::<span class="org-type">reference_wrapper</span><span class="org-rainbow-delimiters-depth-4">&lt;</span>IRoot<span class="org-rainbow-delimiters-depth-4">&gt;</span> <span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">{</span> @0x31013c0, @0x31013c8, @0x31013d0 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt;

&gt;&gt; xsr.at<span class="org-rainbow-delimiters-depth-1">(</span>0<span class="org-rainbow-delimiters-depth-1">)</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Class A"</span>
&gt;&gt; xsr.at<span class="org-rainbow-delimiters-depth-1">(</span>1<span class="org-rainbow-delimiters-depth-1">)</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"root"</span>
&gt;&gt; xsr.at<span class="org-rainbow-delimiters-depth-1">(</span>2<span class="org-rainbow-delimiters-depth-1">)</span>.get<span class="org-rainbow-delimiters-depth-1">()</span>.getName<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Class B"</span>
&gt;&gt; 
&gt;&gt;

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">x</span>: xsr<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"name = "</span> &lt;&lt; x.get<span class="org-rainbow-delimiters-depth-2">()</span>.getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
name = Class A
name = root
name = Class B
&gt;&gt; 

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: xsr<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"name = "</span> &lt;&lt; x.get<span class="org-rainbow-delimiters-depth-2">()</span>.getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl; <span class="org-rainbow-delimiters-depth-1">}</span>
name = Class A
name = root
name = Class B
&gt;&gt; 
</pre>
</div>

<p>
References: 
</p>

<ul class="org-ul">
<li><a href="https://oopscenities.net/2012/08/09/reference_wrapper/">https://oopscenities.net/2012/08/09/reference_wrapper/</a></li>

<li>How to correctly use std::reference_wrappers -
<a href="https://stackoverflow.com/questions/18127469/how-to-correctly-use-stdreference-wrappers">https://stackoverflow.com/questions/18127469/how-to-correctly-use-stdreference-wrappers</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgf41d1c9" class="outline-3">
<h3 id="orgf41d1c9"><span class="section-number-3">1.15</span> Type Casting / Type Conversion</h3>
<div class="outline-text-3" id="text-1-15">
</div>
<div id="outline-container-org9dd0fde" class="outline-4">
<h4 id="org9dd0fde"><span class="section-number-4">1.15.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-15-1">
<p>
In addition to the old C-style castiung, C++ supports new casting
operators which are more type-safe and make the program's intent
explicit, thus enhancing the readability and maintanability. 
</p>

<p>
<b>C-style Casting</b>
</p>

<ul class="org-ul">
<li>(NEW-TYPE) &lt;EXPRESSION&gt;</li>
<li>Note: should be avoided.</li>
<li>Example:
<ul class="org-ul">
<li>char x = (char) 65;</li>
</ul></li>
</ul>

<p>
<b>C++ Sytle-Casting</b>
</p>

<ul class="org-ul">
<li><code>static_cast&lt;TYPE&gt;(EXPR)</code>
<ul class="org-ul">
<li>Use-case: implicity type conversion of related types, conversion
of base class to derived class, void* pointer to othe pointer
(except function pointer.). static_cast is the most used C++
casting operator.</li>
<li>When happens: this casting is performed at compile-time.</li>
<li>Can:
<ul class="org-ul">
<li>Convert between related types such as char to int, int to
double,</li>
<li>Convert from and to void* pointer to other pointers: void* to
double*, double* to void* and so on.</li>
<li>Convert base class to derived class (downcasting).</li>
</ul></li>
<li>Cannot:
<ul class="org-ul">
<li>Convert between unrelated types such as <span class="underline">unsigned long</span> to <span class="underline">double*</span>.</li>
<li>Convert between pointers of unrelated types, for instance int*
to double* or unsigned long to double*.</li>
</ul></li>
</ul></li>

<li><code>reinterpret_cast&lt;TYPE&gt;(EXPR);</code>
<ul class="org-ul">
<li>Use-cases: This is a dangerous low level casting used for
converting unrelated types. WARNING: failed conversion can
result in segmentation fault, core dump and subtle crashing use
with care. 
<ul class="org-ul">
<li>Converting pointers of unrelated types such as double* to int*</li>
<li>Convert void* to function pointer.
<ul class="org-ul">
<li>Loading C-functions from shared libraries (.DLL files on
Windows or .SO on U-nix, Linux, BSD, OSX &#x2026;)</li>
<li>Implement type erasure of function-pointers for reflection
libraries.</li>
</ul></li>
<li>Access hardware registers of Embedded Systems (_memory mapped_
<span class="underline">IO</span>). Many embedded systems such as microcontrollers have
memory mapped-IO which are hardware devices like Analog to
Digital Convertes, digital Input/Output ports bound to
specific memory addresses assigned by the manufacturer. By
writing to those memory locations, it is possible to
configure, control and read data from hardware
devices. <code>reinterpret_cast</code> can be used for converting the
numerical address given in usigned hexadecimal to some pointer
of type int*, char*, double* and so on.</li>
</ul></li>
</ul></li>

<li><code>dynamic_cast&lt;TYPE&gt;(EXPR);</code>
<ul class="org-ul">
<li>Use cases: Casting for polymorphic types, class hierachies for
identifying at runtime instances of derived classes. This is
part of the C++ RTTI - Runtime Type Identification.</li>
<li>When happens: this casting is performed at run-time.</li>
</ul></li>

<li><code>const_cast&lt;TYPE&gt;(EXPR);</code>
<ul class="org-ul">
<li>Use-case: Create non-const reference to const variable, so it
can bypass the const constraint.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org542e20e" class="outline-4">
<h4 id="org542e20e"><span class="section-number-4">1.15.2</span> Example: Old C-Style Casting:</h4>
<div class="outline-text-4" id="text-1-15-2">
<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">int</span> k = 10;
&gt;&gt; <span class="org-type">int</span> z = 7;

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> k
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.0000f

&gt;&gt; <span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">(</span>k<span class="org-rainbow-delimiters-depth-1">)</span> / z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.42857f
&gt;&gt; 

&gt;&gt; <span class="org-type">int</span> m = 65
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 65

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> m
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'A'</span>
&gt;&gt; 

&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>m+1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'B'</span>
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>m+2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'C'</span>
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>m+3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'D'</span>
&gt;&gt; <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>m+5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'F'</span>
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd5581b4" class="outline-4">
<h4 id="orgd5581b4"><span class="section-number-4">1.15.3</span> Example: Static Casting</h4>
<div class="outline-text-4" id="text-1-15-3">
<ul class="org-ul">
<li><b>Implicit conversion:</b></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">int</span> k = 10;
&gt;&gt; <span class="org-type">int</span> z = 7;

&gt;&gt; k / z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 1

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>k<span class="org-rainbow-delimiters-depth-1">)</span> / z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.4285714

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>k<span class="org-rainbow-delimiters-depth-1">)</span> / z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span> 1.42857f
&gt;&gt; 

&gt;&gt; <span class="org-type">int</span> m = 65;
&gt;&gt; <span class="org-type">char</span> ch;
&gt;&gt; ch = m
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'A'</span>
&gt;&gt; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Implicit conversion </span>
&gt;&gt; ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>m<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'A'</span>
&gt;&gt; ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>m + 1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'B'</span>
&gt;&gt; ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>m + 2<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'C'</span>
&gt;&gt; ch = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>m + 3<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'D'</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li><b>Pointer conversion:</b></li>
</ul>

<p>
Conversion between pointer of unrelated types is not possible with
static casting. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">
&gt;&gt; <span class="org-type">double</span> x = 10.2;
&gt;&gt; <span class="org-type">int</span> k = 10;
&gt;&gt; x

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_5</span>:1:1: error: <span class="org-keyword">static_cast</span> from <span class="org-warning">'</span><span class="org-type">double</span> *<span class="org-warning">'</span> to <span class="org-warning">'</span><span class="org-type">int</span> *<span class="org-warning">'</span> is <span class="org-keyword">not</span> allowed
<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;x<span class="org-rainbow-delimiters-depth-1">)</span>
^~~~~~~~~~~~~~~~~~~~~
&gt;&gt; 


</pre>
</div>

<p>
Conversion to and from void pointer to other pointer types (except
function pointer) is possible: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> x = 10.2;
&gt;&gt; <span class="org-type">int</span> k = 10;

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca010
&gt;&gt; 
&gt;&gt; <span class="org-type">void</span>* ptrErased = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;x<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca010
&gt;&gt; 
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca010
&gt;&gt; *<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.200000
&gt;&gt; 

&gt;&gt; ptrErased = &amp;k
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca018
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca018

<span class="org-comment-delimiter">// </span><span class="org-comment">However, it may fail without any notice. </span>
&gt;&gt; *<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 4.9406565e-323
&gt;&gt; 

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca018
&gt;&gt; *<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErased<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; 

</pre>
</div>

<p>
Conversion from number (numeric value of address) to to pointer is not
possible with static casting.
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; &amp;x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3ca010
&gt;&gt; 
&gt;&gt; <span class="org-type">double</span>* ptrX = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f639f3ca010<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_18</span>:1:16: error: cannot cast from type <span class="org-warning">'</span><span class="org-type">long</span><span class="org-warning">'</span> to pointer type <span class="org-warning">'</span><span class="org-type">double</span> *<span class="org-warning">'</span>
<span class="org-type">double</span>* ptrX = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f639f3ca010<span class="org-rainbow-delimiters-depth-1">)</span>
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;&gt; <span class="org-type">double</span>* ptrX = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f639f3ca010UL<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_19</span>:1:16: error: cannot cast from type <span class="org-warning">'</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-warning">'</span> to pointer type <span class="org-warning">'</span><span class="org-type">double</span> *<span class="org-warning">'</span>
<span class="org-type">double</span>* ptrX = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f639f3ca010UL<span class="org-rainbow-delimiters-depth-1">)</span>
               ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li><b>Conversion between polymorphic types</b> / Classes from a given
hierarchy.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">using</span> <span class="org-type">cstring</span> = <span class="org-keyword">const</span> <span class="org-type">char</span>*;

<span class="org-keyword">class</span> <span class="org-type">Base</span> <span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
        <span class="org-keyword">virtual</span> ~<span class="org-function-name">Base</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
        <span class="org-keyword">virtual</span> <span class="org-type">cstring</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"Base"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DerivedA</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
         <span class="org-type">cstring</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"DerivedA"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">void</span> <span class="org-function-name">showA</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Exclusive method of class A."</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DerivedB</span>: <span class="org-keyword">public</span> <span class="org-type">Base</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-type">cstring</span> <span class="org-function-name">getID</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-keyword">override</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"DerivedB"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">double</span> <span class="org-function-name">method</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span>
                <span class="org-keyword">return</span> 3 * x;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">void</span> <span class="org-function-name">showB</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Exclusive method of class B."</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">Base</span>     <span class="org-variable-name">b</span>;
<span class="org-type">DerivedA</span> <span class="org-variable-name">da</span>;
<span class="org-type">DerivedB</span> <span class="org-variable-name">db</span>;

<span class="org-type">Base</span>* <span class="org-variable-name">ptr</span> = <span class="org-constant">nullptr</span>;

&gt;&gt; ptr = &amp;b
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Base</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fd81941b010
&gt;&gt; ptr-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"Base"</span>
&gt;&gt; 

&gt;&gt; ptr = &amp;da;
&gt;&gt; ptr-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>

&gt;&gt; ptr = &amp;db;
&gt;&gt; ptr-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedB"</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Downcast/Convert at compile-time pointer from the base class</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">to derived class</span>
<span class="org-comment-delimiter">//</span><span class="org-comment">-------------------------------------------------</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Try access exclusive method:</span>
&gt;&gt; ptr = &amp;da;
&gt;&gt; ptr-&gt;showA<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-function-name">ROOT_prompt_42</span>:1:6: error: no member named <span class="org-warning">'</span>showA<span class="org-warning">'</span> in <span class="org-warning">'</span>Base<span class="org-warning">'</span>
ptr-&gt;showA<span class="org-rainbow-delimiters-depth-1">()</span>
~~~  ^

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedA</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedA"</span>

&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedA</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;showA<span class="org-rainbow-delimiters-depth-1">()</span>
Exclusive method of <span class="org-keyword">class</span> <span class="org-type">A</span>.
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Note: Can result in undefined behavior!</span>
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;showB<span class="org-rainbow-delimiters-depth-1">()</span>
Exclusive method of <span class="org-keyword">class</span> <span class="org-type">B</span>.

&gt;&gt; 
&gt;&gt; ptr = &amp;db;
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;getID<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span>cstring<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"DerivedB"</span>
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;showB<span class="org-rainbow-delimiters-depth-1">()</span>
Exclusive method of <span class="org-keyword">class</span> <span class="org-type">B</span>.
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">DerivedB</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptr<span class="org-rainbow-delimiters-depth-1">)</span>-&gt;method<span class="org-rainbow-delimiters-depth-1">(</span>3.0<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 9.0000000
&gt;&gt; 
</pre>
</div>


<ul class="org-ul">
<li><b>Conversio from/to void</b> to function pointer is not possible.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> someFunction<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3.0 * x + y; <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; someFunction<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 14.000000

&gt;&gt; <span class="org-type">void</span>* ptrErasure = <span class="org-constant">nullptr</span>;

&gt;&gt; ptrErasure = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-type">someFunction</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_26</span>:1:14: error: <span class="org-keyword">static_cast</span> from <span class="org-warning">'</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-1">(</span>*<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-warning">'</span> to <span class="org-warning">'</span><span class="org-type">void</span> *<span class="org-warning">'</span> is <span class="org-keyword">not</span> allowed
ptrErasure = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>someFunction<span class="org-rainbow-delimiters-depth-1">)</span>
             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

<span class="org-comment-delimiter">// </span><span class="org-comment">However, it is possible with the old C-style casting. </span>
&gt;&gt; ptrErasure = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">)</span> &amp;someFunction
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3730a0

<span class="org-comment-delimiter">// </span><span class="org-comment">Or: </span>
&gt;&gt; ptrErasure = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-function-name">someFunction</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f639f3730a0
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">But, it works with C-style casting.</span>
&gt;&gt; <span class="org-keyword">auto</span> fnPointer2 = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> ptrErasure
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7f639f3730a0
&gt;&gt; 
&gt;&gt; fnPointer2<span class="org-rainbow-delimiters-depth-1">(</span>3, 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 13.000000
&gt;&gt; fnPointer2<span class="org-rainbow-delimiters-depth-1">(</span>5, 4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 19.000000

</pre>
</div>
</div>
</div>

<div id="outline-container-org403b3dc" class="outline-4">
<h4 id="org403b3dc"><span class="section-number-4">1.15.4</span> Example: Reinterpret Cast</h4>
<div class="outline-text-4" id="text-1-15-4">
<ul class="org-ul">
<li>Casting function/pointer from and to void*
<ul class="org-ul">
<li>Note: this is useful for type erasure and reflection and loading
functions/symbols from shared libraries at runtime.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">double</span> <span class="org-function-name">someFunction</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> 3.0 * x + y; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-type">double</span> <span class="org-function-name">mfun1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span> <span class="org-keyword">return</span> x * x + 10 * x - 25; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">void</span>* <span class="org-variable-name">ptrErasure</span> = <span class="org-constant">nullptr</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Testing function some function:</span>
&gt;&gt; ptrErasure = <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;someFunction<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7fe3b065a080

&gt;&gt; <span class="org-keyword">auto</span> fnPtr1 = <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErasure<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7fe3b065a080

&gt;&gt; fnPtr1<span class="org-rainbow-delimiters-depth-1">(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 14.000000
&gt;&gt; fnPtr1<span class="org-rainbow-delimiters-depth-1">(</span>5, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 20.000000
&gt;&gt; 
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErasure<span class="org-rainbow-delimiters-depth-1">)(</span>3, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 14.000000
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>ptrErasure<span class="org-rainbow-delimiters-depth-1">)(</span>4, 5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 17.000000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Testing with mfun</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">--&gt; C-style casting  </span>
&gt;&gt; ptrErasure = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">)</span> mfun1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f94856da090
&gt;&gt; ptrErasure = <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">)</span> &amp;mfun1
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f94856da090
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Failed   </span>
&gt;&gt; ptrErasure = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;mfun1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_7</span>:1:14: error: <span class="org-keyword">static_cast</span> from <span class="org-warning">'</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-1">(</span>*<span class="org-rainbow-delimiters-depth-1">)(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span><span class="org-warning">'</span> to <span class="org-warning">'</span><span class="org-type">void</span> *<span class="org-warning">'</span> is <span class="org-keyword">not</span> allowed
ptrErasure = <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>&amp;mfun1<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; <span class="org-keyword">auto</span> fnPtr2 = <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>mfun1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7f94856da090

&gt;&gt; fnPtr2<span class="org-rainbow-delimiters-depth-1">(</span>4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 31.000000
&gt;&gt; fnPtr2<span class="org-rainbow-delimiters-depth-1">(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 50.000000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">It is really dangerous as it can cast anything to anything!</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">and the compiler cannot help.    </span>
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>4<span class="org-rainbow-delimiters-depth-1">)(</span>5<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">*** Break *** segmentation violation</span>

</pre>
</div>

<ul class="org-ul">
<li>Casting memory locations to pointer.
<ul class="org-ul">
<li>Note: It doesn't have applicability in most cases, but it can be
useful for accessing memory mapped IO.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> x = 10.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
&gt;&gt; <span class="org-type">unsigned</span> <span class="org-type">long</span> n = 300
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 300
&gt;&gt; 

&gt;&gt; &amp;x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fd32e9010
&gt;&gt; &amp;n
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fd32e9018
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">=========== Variable x =================</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Failure! Doesn't compile</span>
&gt;&gt; <span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_4</span>:1:1: error: cannot cast from type <span class="org-warning">'</span><span class="org-type">long</span><span class="org-warning">'</span> to pointer type <span class="org-warning">'</span><span class="org-type">double</span> *<span class="org-warning">'</span>
<span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span>
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;&gt; 
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fd32e9010
&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9010<span class="org-rainbow-delimiters-depth-1">)</span> = 100.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000
&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.00000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">=========== Variable n =================</span>
&gt;&gt; <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9018<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fd32e9018
&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9018<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 300
&gt;&gt; *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9018<span class="org-rainbow-delimiters-depth-1">)</span> = 100
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 100
&gt;&gt; <span class="org-type">int</span>&amp; z = *<span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>*<span class="org-rainbow-delimiters-depth-1">&gt;(</span>0x7f3fd32e9018<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 100
&gt;&gt; z  = 500
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 500
&gt;&gt; n
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 500
&gt;&gt; n = 600
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 600
&gt;&gt; z
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 600
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Load Symbols from a DLL / Shared Object
<ul class="org-ul">
<li>Note: Windows uses the Win32 API-Calls LoadLibrary, LoadLibraryA,
GetProcAddress and so on.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">dlfcn.h</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">GNU Scientific Library - Linear Algebra CBLAS </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">dllPath</span> = <span class="org-string">"/usr/lib64/libgslcblas.so"</span>;

&gt;&gt; <span class="org-type">void</span>* libHandle = dlopen<span class="org-rainbow-delimiters-depth-1">(</span>dllPath, RTLD_LAZY<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x1be2de0
&gt;&gt; 

&gt;&gt; <span class="org-type">void</span>* sym = dlsym<span class="org-rainbow-delimiters-depth-1">(</span>libHandle, <span class="org-string">"cblas_daxpy"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> *<span class="org-rainbow-delimiters-depth-1">)</span> 0x7f3fb97d2010

&gt;&gt; sym == <span class="org-constant">nullptr</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 

&gt;&gt; <span class="org-keyword">auto</span> cblas_daxpy = <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">double</span>, <span class="org-keyword">const</span> <span class="org-type">double</span>*, <span class="org-type">int</span>, <span class="org-type">double</span>*, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>sym<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span>*<span class="org-rainbow-delimiters-depth-2">)(</span><span class="org-type">int</span>, <span class="org-type">double</span>, <span class="org-keyword">const</span> <span class="org-type">double</span> *, <span class="org-type">int</span>, <span class="org-type">double</span> *, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">)</span> Function @0x7f3fb97d2010
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Or </span>
<span class="org-keyword">using</span> cblas_daxpy_type = <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span>, <span class="org-type">double</span>, <span class="org-keyword">const</span> <span class="org-type">double</span>*, <span class="org-type">int</span>, <span class="org-type">double</span>*, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-keyword">auto</span> xs = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span> 3.0, 5.0, 6.0, 10.0, 8.0<span class="org-rainbow-delimiters-depth-1">}</span>;
&gt;&gt; <span class="org-keyword">auto</span> ys = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span> 2.0, 2.0, 2.0,  2.0, 2.0<span class="org-rainbow-delimiters-depth-1">}</span>;
&gt;&gt; 

&gt;&gt; cblas_daxpy<span class="org-rainbow-delimiters-depth-1">(</span>xs.size<span class="org-rainbow-delimiters-depth-2">()</span>, 4.0, &amp;xs<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span>, 1, &amp;ys<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span>, 1<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; xs
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">{</span> 3.0000000, 5.0000000, 6.0000000, 10.000000, 8.0000000 <span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; ys
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">{</span> 14.000000, 22.000000, 26.000000, 42.000000, 34.000000 <span class="org-rainbow-delimiters-depth-1">}</span>
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Close the library handle (Better use SMART POINTERS!!!!)</span>
&gt;&gt; dlclose<span class="org-rainbow-delimiters-depth-1">(</span>libHandle<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org68a6a7b" class="outline-4">
<h4 id="org68a6a7b"><span class="section-number-4">1.15.5</span> Example: Const cast</h4>
<div class="outline-text-4" id="text-1-15-5">
<p>
Const cast is used for removing the const qualifier/modifier from const
reference or const pointer in order to modify the referenced memory
location. 
</p>

<ul class="org-ul">
<li>Note: The const cast cannot be used for removing the const
qualifierfrom const variables. In this case the casting behavior
is undefined.</li>
<li>Documentation: <a href="https://en.cppreference.com/w/cpp/language/const_cast">const_cast conversion - cppreference.com</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">double</span> x = 10.0;
&gt;&gt; <span class="org-keyword">const</span> <span class="org-type">double</span>&amp; xref = x;
&gt;&gt; xref
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 10.000000
&gt;&gt; 
&gt;&gt; xref = 20.0
<span class="org-function-name">ROOT_prompt_3</span>:1:6: error: cannot assign to variable <span class="org-warning">'</span>xref<span class="org-warning">'</span> with <span class="org-keyword">const</span>-qualified type <span class="org-warning">'</span><span class="org-keyword">const</span> <span class="org-type">double</span> &amp;<span class="org-warning">'</span>
xref = 20.0
~~~~ ^
<span class="org-function-name">ROOT_prompt_1</span>:1:15: note: variable <span class="org-warning">'</span>xref<span class="org-warning">'</span> declared <span class="org-keyword">const</span> here
<span class="org-keyword">const</span> <span class="org-type">double</span>&amp; xref = x;
~~~~~~~~~~~~~~^~~~~~~~
&gt;&gt; 
<span class="org-comment-delimiter">// </span><span class="org-comment">Remove the const qualifier of xref </span>
&gt;&gt; <span class="org-keyword">const_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;(</span>xref<span class="org-rainbow-delimiters-depth-1">)</span> = 25.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 25.000000
&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 25.000000
&gt;&gt; xref
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 25.000000
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Creating a non-const reference from a const reference.</span>
&gt;&gt; <span class="org-type">double</span>&amp; usualRef = <span class="org-keyword">const_cast</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;(</span>xref<span class="org-rainbow-delimiters-depth-1">)</span> 
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 25.000000
&gt;&gt; usualRef = 16.0
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 16.000000
&gt;&gt; x
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 16.000000
&gt;&gt; xref
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 16.000000
&gt;&gt; 
</pre>
</div>
</div>
</div>

<div id="outline-container-org201d907" class="outline-4">
<h4 id="org201d907"><span class="section-number-4">1.15.6</span> References and further reading</h4>
<div class="outline-text-4" id="text-1-15-6">
<ul class="org-ul">
<li>Cambridge University - <b>Casting in C++ (intermediate level)</b> -
<a href="http://www-h.eng.cam.ac.uk/help/tpl/languages/C++/casting.html">http://www-h.eng.cam.ac.uk/help/tpl/languages/C++/casting.html</a></li>

<li><b>4.4a — Explicit type conversion (casting)</b> -
<a href="http://www.learncpp.com/cpp-tutorial/4-4a-explicit-type-conversion-casting/">http://www.learncpp.com/cpp-tutorial/4-4a-explicit-type-conversion-casting/</a></li>

<li><a href="https://anteru.net/blog/2007/12/18/200/index.html">https://anteru.net/blog/2007/12/18/200/index.html</a></li>

<li><b>Casting operators in C++ | Set 1 (const_cast)</b> -
<a href="http://www.geeksforgeeks.org/casting-operators-in-c-set-1-const_cast/">http://www.geeksforgeeks.org/casting-operators-in-c-set-1-const_cast/</a></li>

<li><b>Casting – what could possibly go wrong?</b> -
<a href="https://blog.feabhas.com/2013/09/casting-what-could-possibly-go-wrong/">https://blog.feabhas.com/2013/09/casting-what-could-possibly-go-wrong/</a></li>

<li><b>C++ Casting, or: "Oh No, They Broke Malloc!</b> -
<a href="https://embeddedartistry.com/blog/2017/2/28/c-casting-or-oh-no-we-broke-malloc">https://embeddedartistry.com/blog/2017/2/28/c-casting-or-oh-no-we-broke-malloc</a></li>

<li><b>When should static_cast, dynamic_cast, const_cast and
reinterpret_cast be used?</b> - <a href="https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-const-cast-and-reinterpret-cast-be-used">https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-const-cast-and-reinterpret-cast-be-used</a></li>

<li><a href="http://cppblogs.blogspot.com.br/2013/08/c-style-casts.html">http://cppblogs.blogspot.com.br/2013/08/c-style-casts.html</a></li>

<li><b>Type-Conversion operators</b> -
<a href="http://www.bogotobogo.com/cplusplus/typecast.php">http://www.bogotobogo.com/cplusplus/typecast.php</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgcf83a75" class="outline-3">
<h3 id="orgcf83a75"><span class="section-number-3">1.16</span> Namespaces</h3>
<div class="outline-text-3" id="text-1-16">
</div>
<div id="outline-container-org39398ac" class="outline-4">
<h4 id="org39398ac"><span class="section-number-4">1.16.1</span> Summary</h4>
<div class="outline-text-4" id="text-1-16-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">C++ Namespace</th>
<th scope="col" class="org-left">Python Equivalent</th>
<th scope="col" class="org-left">Description</th>
</tr>

<tr>
<th scope="col" class="org-left">Operation</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>using namespace std;</code></td>
<td class="org-left">from std import *</td>
<td class="org-left">Import everything from  a namespace.</td>
</tr>

<tr>
<td class="org-left"><code>using std::cout;</code></td>
<td class="org-left">from std import cout</td>
<td class="org-left">Import an object, function from a namespace.</td>
</tr>

<tr>
<td class="org-left">using std::cout, std::cin, std::endl;</td>
<td class="org-left">from std import cout, cin &#x2026;</td>
<td class="org-left">Import multiple items from a namespace (C++17 only.)</td>
</tr>

<tr>
<td class="org-left"><code>namespace mk = mathkit::ellipticfun;</code></td>
<td class="org-left">import mathkit.ellipticfun as mk</td>
<td class="org-left">Create an alias to a namespace.</td>
</tr>

<tr>
<td class="org-left">mathkit::function::sind(90);</td>
<td class="org-left">import mathkit; mathkit.function.sind(90);</td>
<td class="org-left">Call a function from namespace.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org318bafd" class="outline-4">
<h4 id="org318bafd"><span class="section-number-4">1.16.2</span> Examples</h4>
<div class="outline-text-4" id="text-1-16-2">
<p>
Open namespace:
</p>

<ul class="org-ul">
<li><code>using namespace &lt;namespace&gt;</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Not recommended - It defeats the purpose of namespace which is prevent </span>
<span class="org-comment-delimiter">// </span><span class="org-comment">nameclashes and improve discoverability. </span>
<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Hello world"</span> &lt;&lt; <span class="org-string">"\n"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Import everything from boost linear algebra library.</span>
<span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>;
</pre>
</div>

<p>
Open namespace inside function:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">void</span> <span class="org-function-name">printNumbers</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Import everything from std namespace </span>
        <span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
                cout &lt;&lt; <span class="org-string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">C++11 auto syntax for function declaration</span>
<span class="org-keyword">auto</span> <span class="org-function-name">printNumbers</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
                cout &lt;&lt; <span class="org-string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">C++14 return type deduction with optional type deduction.</span>
<span class="org-keyword">auto</span> <span class="org-function-name">printNumbers</span><span class="org-rainbow-delimiters-depth-1">()</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Import everything from std namespace </span>
        <span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">std</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span> <span class="org-variable-name">i</span> = 0; i &lt; 10; i++<span class="org-rainbow-delimiters-depth-2">)</span>
                cout &lt;&lt; <span class="org-string">"i = "</span> &lt;&lt; i &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Using element from namespace without import namespace. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"hello world"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-keyword">auto</span> <span class="org-variable-name">matrixI3</span> =  <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::identity_matrix<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>3<span class="org-rainbow-delimiters-depth-1">)</span><span class="org-rainbow-delimiters-unmatched">)</span>;
</pre>
</div>

<p>
Import specific elements from namespace 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Option 1 </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------------//</span>
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cout</span>; 
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cerr</span>; 
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">endl</span>; 
<span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">identity_matrix</span>;
<span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">norm_1</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Option 2 =&gt; Multiple imports at same line. </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------------//</span>
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cout</span>; <span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cerr</span>;  <span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">endl</span>; 
<span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">identity_matrix</span>; <span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">norm_1</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Option 3 =&gt; C++17 only </span>
<span class="org-comment-delimiter">//</span><span class="org-comment">----------------------------------------//</span>
<span class="org-keyword">using</span> <span class="org-constant">std</span>::<span class="org-type">cout</span>, <span class="org-constant">std</span>::cerr, <span class="org-constant">std</span>::endl; 
<span class="org-keyword">using</span> <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::<span class="org-type">identity_matrix</span>, <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::<span class="org-constant">ublas</span>::norm_1;

</pre>
</div>

<p>
Namespace synonym/alias:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Create namespace alias ub </span>
<span class="org-keyword">namespace</span> <span class="org-constant">ub</span> = <span class="org-constant">boost</span>::<span class="org-constant">numeric</span>::ublas;

<span class="org-function-name">ub</span>::<span class="org-type">matrix</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> matrix1<span class="org-rainbow-delimiters-depth-1">(</span>3, 3, 2.5<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">auto type inference + uniform initalization </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">matrix1</span> = <span class="org-constant">ub</span>::<span class="org-type">matrix</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>3, 3, 2.5<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>

<p>
Create a namespace: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">ostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">namespace</span> <span class="org-constant">MyFunctions</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Import everything from namespace std </span>
        <span class="org-keyword">using</span> <span class="org-keyword">namespace</span>::<span class="org-constant">std</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Type alias or synonym </span>
        <span class="org-keyword">using</span> <span class="org-type">cstring</span> = <span class="org-keyword">const</span> <span class="org-type">char</span>*;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Or: using MathFunc = std::function&lt;double (double)&gt;;</span>
        <span class="org-keyword">using</span> <span class="org-type">MathFunc</span> = <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">auto</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">)</span> -&gt; <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>;

        <span class="org-type">cstring</span> <span class="org-variable-name">description</span> = <span class="org-string">"Utility functions"</span>;

        <span class="org-type">double</span> <span class="org-function-name">add</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">){</span>
                <span class="org-keyword">return</span> x + y;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-keyword">auto</span> <span class="org-function-name">saySomething</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                cout &lt;&lt; <span class="org-string">"A computer was a skilled mathematician who computed the firing tables"</span> &lt;&lt; endl;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">struct</span> <span class="org-type">Coord</span><span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-comment-delimiter">// </span><span class="org-comment">Latitude in degrees/decimal </span>
                <span class="org-type">double</span> <span class="org-variable-name">lat</span>;
                <span class="org-comment-delimiter">// </span><span class="org-comment">Longitude in degrees/decimal </span>
                <span class="org-type">double</span> <span class="org-variable-name">lon</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>;

        <span class="org-keyword">namespace</span> <span class="org-constant">math</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">auto</span> <span class="org-function-name">showTable</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">MathFunc</span> <span class="org-variable-name">fun</span>, <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span> = <span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-3">)</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-3">{</span>
                        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-4">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span> = 0; x &lt; 10.0; x += 1.0<span class="org-rainbow-delimiters-depth-4">){</span>
                                os &lt;&lt; setw<span class="org-rainbow-delimiters-depth-5">(</span>10<span class="org-rainbow-delimiters-depth-5">)</span> &lt;&lt; x &lt;&lt; setw<span class="org-rainbow-delimiters-depth-5">(</span>10<span class="org-rainbow-delimiters-depth-5">)</span> &lt;&lt; fun<span class="org-rainbow-delimiters-depth-5">(</span>x<span class="org-rainbow-delimiters-depth-5">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
                        <span class="org-rainbow-delimiters-depth-4">}</span>
                <span class="org-rainbow-delimiters-depth-3">}</span>
                <span class="org-keyword">auto</span> <span class="org-function-name">makeMultiplier</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">)</span> -&gt; <span class="org-type">MathFunc</span> <span class="org-rainbow-delimiters-depth-3">{</span>
                        <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-4">[</span>x<span class="org-rainbow-delimiters-depth-4">](</span><span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-4">){</span><span class="org-keyword">return</span> x * x; <span class="org-rainbow-delimiters-depth-4">}</span>;
                <span class="org-rainbow-delimiters-depth-3">}</span>       
        <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">End of namespace MyFunctions --/</span>
</pre>
</div>

<p>
Testing: (CERN's ROOT/Cling REPL.)
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">MyFunctions</span>::add<span class="org-rainbow-delimiters-depth-1">(</span>102.3, -93.4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 8.9000000
&gt;&gt; <span class="org-constant">MyFunctions</span>::add<span class="org-rainbow-delimiters-depth-1">(</span>102.3, -193.4<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> -91.100000
&gt;&gt;
&gt;&gt; <span class="org-constant">MyFunctions</span>::saySomething<span class="org-rainbow-delimiters-depth-1">()</span>
A computer was a skilled mathematician who computed the <span class="org-type">firing</span> <span class="org-variable-name">tables</span>
&gt;&gt;

&gt;&gt; <span class="org-constant">MyFunctions</span>::<span class="org-constant">math</span>::showTable<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x * 3.0 + 4.0;<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-rainbow-delimiters-depth-1">)</span>
         0         4
         1         7
         2        10
         3        13
  ... ... ... ... 

<span class="org-comment-delimiter">// </span><span class="org-comment">import MyFunctions.math as m</span>
&gt;&gt; <span class="org-keyword">namespace</span> <span class="org-constant">m</span> = <span class="org-constant">MyFunctions</span>::math;
&gt;&gt; <span class="org-constant">m</span>::showTable<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x * 3.0 + 4.0;<span class="org-rainbow-delimiters-depth-2">}</span> <span class="org-rainbow-delimiters-depth-1">)</span>
         0         4
         1         7
         2        10
         3        13
  ... ... ... ... 

<span class="org-comment-delimiter">// </span><span class="org-comment">from MyFunctions.math import *</span>
&gt;&gt; <span class="org-keyword">using</span> <span class="org-keyword">namespace</span> <span class="org-constant">MyFunctions</span>::<span class="org-constant">math</span>;

&gt;&gt; showTable<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-rainbow-delimiters-depth-2">[](</span><span class="org-type">double</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> x * x;<span class="org-rainbow-delimiters-depth-2">}</span>, <span class="org-constant">std</span>::cerr <span class="org-rainbow-delimiters-depth-1">)</span>
         0         0
         1         1
         2         4
         3         9
         4        16
    ... ... ... ...  

&gt;&gt; showTable<span class="org-rainbow-delimiters-depth-1">(</span>exp, <span class="org-constant">std</span>::cerr <span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_34</span>:1:1: error: no matching function <span class="org-keyword">for</span> call to <span class="org-warning">'</span>showTable<span class="org-warning">'</span>
showTable<span class="org-rainbow-delimiters-depth-1">(</span>exp, <span class="org-constant">std</span>::cerr <span class="org-rainbow-delimiters-depth-1">)</span>
^~~~~~~~~

&gt;&gt; showTable<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">static_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-3">(</span>*<span class="org-rainbow-delimiters-depth-3">)(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>exp<span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-constant">std</span>::cerr<span class="org-rainbow-delimiters-depth-1">)</span>
         0         1
         1   2.71828
         2   7.38906
         3   20.0855
         4   54.5982
         5   148.413
         6   403.429
         7   1096.63
         8   2980.96
         9   8103.08
</pre>
</div>

<p>
Define a function at some namespace: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">int</span> <span class="org-constant">General</span>::<span class="org-function-name">GetNumberOfDays</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span> <span class="org-variable-name">d1</span>, <span class="org-type">int</span> <span class="org-variable-name">d2</span><span class="org-rainbow-delimiters-depth-1">){</span>
   <span class="org-keyword">return</span> d2 - d1;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org632d998" class="outline-3">
<h3 id="org632d998"><a id="ID-07dc0b5f-0486-4c18-b356-226ec48d4834"></a><span class="section-number-3">1.17</span> Pointer to Member Function</h3>
<div class="outline-text-3" id="text-1-17">
<p>
In addition to ordinary pointers and function pointers, C++ has member
function pointers which can point to a particular class method and be
used for performing indirect method calls. 
</p>

<p>
Despite member function pointer are much less used than other types of
pointers, they are still useful in lots of use cases such as: 
</p>

<ul class="org-ul">
<li>Implementing callbacks =&gt; Example: QT Slots and Signals.</li>
<li>Creating warappers     =&gt; Example: Boost.Python</li>
<li>Reflection</li>
</ul>

<p>
Pointer Member Function variable declaration : 
</p>

<ul class="org-ul">
<li>It declares a pointer-to-member function of the class
<span class="underline">CLASS_NAME</span>. The pointer variable  is named pVariable and has the
type signature:  <span class="underline">(ARG0, ARG1, &#x2026; ARGN) =&gt; RETURN_TYPE</span></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pVariable<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span>;
RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pVariable<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span> = <span class="org-constant">nullptr</span>;
RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pVariable<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span> = &amp;<span class="org-constant">CLASS_NAME</span>::member_functionA;
RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pVariable<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span> = &amp;<span class="org-constant">CLASS_NAME</span>::member_functionB;
</pre>
</div>

<ul class="org-ul">
<li>Example: Pointer to any member function taking zero arguments and
returning a string.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::string <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Dummy</span>::* pMemfn<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">()</span> = <span class="org-constant">nullptr</span>;
</pre>
</div>

<ul class="org-ul">
<li>Invoking a pointer to member function. It is necessary an instance
of the class in order to invoke the member function pointed by the
pointer.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">CLASS_TYPE</span> <span class="org-variable-name">obj</span>;
pVariable = &amp;<span class="org-constant">CLASS_TYPE</span>::member_function1;
<span class="org-rainbow-delimiters-depth-1">(</span>obj.*pVariable<span class="org-rainbow-delimiters-depth-1">)(</span>arg0, arg1, arg2, ... argn<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>


<ul class="org-ul">
<li>Type synonym with Typdef</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">typedef</span> <span class="org-type">RETURN_TYPE</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::* pMemberFunction<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">pMemberFunction</span> <span class="org-variable-name">pvar</span> = &amp;<span class="org-constant">CLASS_NAME</span>::member_functionA;
<span class="org-type">CLASS_NAME</span> <span class="org-variable-name">obj</span>;
<span class="org-rainbow-delimiters-depth-1">(</span>obj.*pvar<span class="org-rainbow-delimiters-depth-1">)(</span>arg0, arg1, .... argn-1<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li>Type synonym with C++11 "using" keyword</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">using</span> <span class="org-type">pMemberFunction</span> = RETURN_TYPE <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">CLASS_NAME</span>::*<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-rainbow-delimiters-depth-1">(</span>ARG0, ARG1, ..., ARGN-1<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">pMemberFunction</span> <span class="org-variable-name">pvar</span> = &amp;<span class="org-constant">CLASS_NAME</span>::member_functionA;
<span class="org-type">CLASS_NAME</span> <span class="org-variable-name">obj</span>;
<span class="org-rainbow-delimiters-depth-1">(</span>obj.*pvar<span class="org-rainbow-delimiters-depth-1">)(</span>arg0, arg1, .... argn-1<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
<b>Further Reading:</b>
</p>

<ul class="org-ul">
<li><a href="https://accu.org/index.php/journals/495">ACCU - An Application of Pointers to Members</a></li>
<li><a href="http://soggywizards.com/tips/code/c++/member-pointers.html">Pointers to C++ Member Functions</a></li>
<li><a href="https://yosefk.com/c++fqa/function.html">C++ FQA Lite: Pointers to member functions</a></li>
<li><a href="https://arne-mertz.de/2017/01/decltype-declval/">Modern C++ Features - decltype and std::declval - Simplify C++!</a></li>
<li><a href="https://isocpp.org/wiki/faq/pointers-to-members">Pointers to Member Functions, C++ FAQ</a></li>
<li><a href="https://wiki.qt.io/New_Signal_Slot_Syntax">New Signal Slot Syntax - Qt Wiki</a></li>
<li><a href="https://www.codeguru.com/cpp/cpp/article.php/c17401/C-Tutorial-PointertoMember-Function.htm">C++ Tutorial: Pointer-to-Member Function</a></li>
<li><a href="https://embeddedartistry.com/blog/2017/1/26/c11-improving-your-callback-game">Improving Your Callback Game — Embedded Artistry</a></li>
</ul>


<p>
<b>Example</b>
</p>

<p>
File: 
</p>
<ul class="org-ul">
<li><a href="src/member-function-pointer.cpp">file:src/member-function-pointer.cpp</a></li>
<li>Online compiler: <a href="http://rextester.com/WYFC32509">http://rextester.com/WYFC32509</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">map</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cassert</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">class</span> <span class="org-type">Dummy</span> <span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">_name</span> = <span class="org-string">"unnamed"</span>;
<span class="org-function-name">public</span>:
        <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
        <span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">_name</span><span class="org-rainbow-delimiters-depth-2">(</span>name<span class="org-rainbow-delimiters-depth-2">){}</span>
        ~<span class="org-function-name">Dummy</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"I am a dummy class named &lt;"</span> + _name + <span class="org-string">"&gt;"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getLocation</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"Unknown location"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-keyword">return</span> <span class="org-string">"I am a function-object called: &lt;"</span> + _name + <span class="org-string">"&gt;"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">compute</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">x</span>, <span class="org-type">double</span> <span class="org-variable-name">y</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">double</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> 4 * x + 5 * y;
        <span class="org-rainbow-delimiters-depth-2">}</span>   
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">DummyB</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
        <span class="org-function-name">DummyB</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
        ~<span class="org-function-name">DummyB</span><span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-keyword">default</span>;
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"My name is DummyB"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-function-name">getLocation</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"Location of dummyB location"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-keyword">return</span> <span class="org-string">"I am the class DummyB"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Create type synonym to any member function of Dummy class</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">which takes no parameter and returns a string.</span>
<span class="org-keyword">typedef</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Dummy</span>::* pDummyMemFnStr<span class="org-rainbow-delimiters-depth-1">)()</span>;

<span class="org-type">void</span> <span class="org-function-name">invokeMemberFun</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Dummy</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-type">pDummyMemFnStr</span> <span class="org-variable-name">pMemfn</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [1] Method invocation returned value: "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>obj.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Create type synonum with the new "using" C++11 syntax</span>
<span class="org-keyword">using</span> <span class="org-type">pDummyMemFnStrCPP11</span> = <span class="org-constant">std</span>::string <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Dummy</span>::*<span class="org-rainbow-delimiters-depth-1">)()</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">invokeMemberFun2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Dummy</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-type">pDummyMemFnStrCPP11</span> <span class="org-variable-name">pMemfn</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [2] Method invocation returned value: "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>obj.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">invokeMemberFun3</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">T</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">T</span>::* <span class="org-function-name">pMemfn</span><span class="org-rainbow-delimiters-depth-2">)()</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [3] Method invocation returned value: "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>obj.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span>, <span class="org-keyword">class</span> <span class="org-type">R</span>, <span class="org-keyword">class</span> ... <span class="org-type">Args</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">invokeMemfn</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">R</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">T</span>::* <span class="org-function-name">pMemfn</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Args</span> ... <span class="org-variable-name">args</span><span class="org-rainbow-delimiters-depth-2">)</span>, <span class="org-type">T</span>&amp; <span class="org-variable-name">obj</span>, <span class="org-type">Args</span> ... <span class="org-variable-name">arglist</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">R</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">(</span>obj.*pMemfn<span class="org-rainbow-delimiters-depth-2">)(</span>arglist ...<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-keyword">const</span> <span class="org-keyword">auto</span> nl = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">const</span> <span class="org-keyword">auto</span> nl2 = <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"\n\n"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-variable-name">line</span> = <span class="org-string">"--------------------------------------------------\n"</span>;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 1 ==============="</span> &lt;&lt; nl2;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to member function to any member functions</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">(aka method) which takes no argument and returns a string</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">of signature: () =&gt; std::string</span>
        <span class="org-comment-delimiter">//</span><span class="org-comment">.....................................................</span>
        <span class="org-constant">std</span>::<span class="org-type">string</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">Dummy</span>::* <span class="org-variable-name">pMemfn</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">()</span> = <span class="org-constant">nullptr</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">std::string (Dummy::* pMemfn) ();</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>pMemfn == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] Pointer not initilialized yet."</span> &lt;&lt; nl;

        <span class="org-type">Dummy</span> <span class="org-variable-name">d</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"DUMMY"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Set the function pointer to member function getName().</span>
        pMemfn = &amp;<span class="org-constant">Dummy</span>::getName;
        <span class="org-comment-delimiter">// </span><span class="org-comment">Invoke pointer to member function (aka pointer to method)</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Name     = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl2;
        assert<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>d.*pMemfn<span class="org-rainbow-delimiters-depth-3">)()</span> == <span class="org-string">"I am a dummy class named &lt;DUMMY&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>pMemfn != <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cerr &lt;&lt; <span class="org-string">" [INFO] Pointer initilialized OK."</span> &lt;&lt; nl;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Set pointer to Dummy::getLocation</span>
        pMemfn = &amp;<span class="org-constant">Dummy</span>::getLocation;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Location = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*pMemfn<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl;
        <span class="org-comment-delimiter">// </span><span class="org-comment">assert((d.*pMemfn)() == "I am a dummy class named &lt;DUMMY&gt;"); </span>


        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 2 - Using typedef ==============="</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        <span class="org-type">pDummyMemFnStr</span> <span class="org-variable-name">pMemfn2</span> = <span class="org-constant">nullptr</span>;
        pMemfn2 = &amp;<span class="org-constant">Dummy</span>::getName;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"d.getName() == "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*pMemfn2<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl;
        assert<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-rainbow-delimiters-depth-3">(</span>d.*pMemfn2<span class="org-rainbow-delimiters-depth-3">)()</span> == <span class="org-string">"I am a dummy class named &lt;DUMMY&gt;"</span><span class="org-rainbow-delimiters-depth-2">)</span>;   

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 3 - Invoking member function with free function ="</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        <span class="org-comment-delimiter">// </span><span class="org-comment">execute d.getName() </span>
        invokeMemberFun<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">execute d.getLocation() </span>
        invokeMemberFun<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-comment-delimiter">// </span><span class="org-comment">execute d() </span>
        invokeMemberFun<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 4 - Invoking member function with free function C++11"</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        invokeMemberFun2<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun2<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun2<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 5 - Pointer to member functions in STL deque collection"</span> &lt;&lt; nl;
        <span class="org-keyword">auto</span> <span class="org-variable-name">plist</span> = <span class="org-constant">std</span>::deque<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">pDummyMemFnStrCPP11</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
        plist.push_back<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        plist.push_back<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;
        plist.push_back<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">p</span>: plist<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" (+) Calll returned = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*p<span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 6 - Pointer to member functions in map collection"</span> &lt;&lt; nl;
        <span class="org-keyword">auto</span> <span class="org-variable-name">dict</span> = <span class="org-constant">std</span>::map<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span>, <span class="org-type">pDummyMemFnStrCPP11</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span>;
        dict<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"getName"</span><span class="org-rainbow-delimiters-depth-2">]</span>     = &amp;<span class="org-constant">Dummy</span>::getName;
        dict<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"getLocation"</span><span class="org-rainbow-delimiters-depth-2">]</span> = &amp;<span class="org-constant">Dummy</span>::getLocation;
        dict<span class="org-rainbow-delimiters-depth-2">[</span><span class="org-string">"callme"</span><span class="org-rainbow-delimiters-depth-2">]</span>      = &amp;<span class="org-constant">Dummy</span>::<span class="org-keyword">operator</span><span class="org-rainbow-delimiters-depth-2">()</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">kv</span>: dict<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>20<span class="org-rainbow-delimiters-depth-2">)</span>  &lt;&lt; <span class="org-string">"invoke(object, "</span>
                                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; kv.first &lt;&lt; <span class="org-string">")"</span>
                                  &lt;&lt; <span class="org-string">" = "</span> &lt;&lt; <span class="org-rainbow-delimiters-depth-2">(</span>d.*<span class="org-rainbow-delimiters-depth-3">(</span>kv.second<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)()</span> &lt;&lt; nl;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 7 - Template "</span> &lt;&lt; nl;
        <span class="org-type">DummyB</span> <span class="org-variable-name">b</span>;
        invokeMemberFun3<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun3<span class="org-rainbow-delimiters-depth-2">(</span>b, &amp;<span class="org-constant">DummyB</span>::getName<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun3<span class="org-rainbow-delimiters-depth-2">(</span>d, &amp;<span class="org-constant">Dummy</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;
        invokeMemberFun3<span class="org-rainbow-delimiters-depth-2">(</span>b, &amp;<span class="org-constant">DummyB</span>::getLocation<span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"=== Experiment 8 - Template "</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; line;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"d.getName()         = "</span> &lt;&lt; invokeMemfn<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::getName, d<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"d.compute(3.0, 4.0) = "</span> &lt;&lt; invokeMemfn<span class="org-rainbow-delimiters-depth-2">(</span>&amp;<span class="org-constant">Dummy</span>::compute, d, 3.0, 4.0<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; nl;

        <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ member-function-pointer.cpp -o <span class="org-keyword">member-function-pointer.bin</span> -std=c++1z -Wall -Wextra  &amp;&amp; ./member-function-pointer.bin

=== Experiment 1 ===============

--------------------------------------------------
 [INFO] Pointer not initilialized yet.
Name     = I am a dummy class named &lt;DUMMY&gt;

 [INFO] Pointer initilialized OK.
Location = Unknown location

=== Experiment 2 - Using typedef ===============
--------------------------------------------------
<span class="org-function-name">d.getName</span>() == I am a dummy class named &lt;DUMMY&gt;

=== Experiment 3 - Invoking member <span class="org-keyword">function</span> <span class="org-function-name">with</span> free <span class="org-keyword">function</span> =
--------------------------------------------------
 [1] Method invocation returned value: I am a dummy class named &lt;DUMMY&gt;
 [1] Method invocation returned value: Unknown location
 [1] Method invocation returned value: I am a function-object called: &lt;DUMMY&gt;

=== Experiment 4 - Invoking member <span class="org-keyword">function</span> <span class="org-function-name">with</span> free <span class="org-keyword">function</span> <span class="org-function-name">C</span>++11
--------------------------------------------------
 [2] Method invocation returned value: I am a dummy class named &lt;DUMMY&gt;
 [2] Method invocation returned value: Unknown location
 [2] Method invocation returned value: I am a function-object called: &lt;DUMMY&gt;

=== Experiment 5 - Pointer to member functions<span class="org-keyword"> in</span> STL deque collection
 (+) Calll returned = I am a dummy class named &lt;DUMMY&gt;
 (+) Calll returned = Unknown location
 (+) Calll returned = I am a function-object called: &lt;DUMMY&gt;

=== Experiment 6 - Pointer to member functions<span class="org-keyword"> in</span> map collection
     invoke(object,          callme) = I am a function-object called: &lt;DUMMY&gt;
     invoke(object,     getLocation) = Unknown location
     invoke(object,         getName) = I am a dummy class named &lt;DUMMY&gt;

=== Experiment 7 - Template 
 [3] Method invocation returned value: I am a dummy class named &lt;DUMMY&gt;
 [3] Method invocation returned value: My name is DummyB
 [3] Method invocation returned value: Unknown location
 [3] Method invocation returned value: Location of dummyB location

=== Experiment 8 - Template 
--------------------------------------------------
<span class="org-function-name">d.getName</span>()         = I am a dummy class named &lt;DUMMY&gt;
<span class="org-function-name">d.compute</span>(3.0, 4.0) = 32

</pre>
</div>
</div>
</div>
<div id="outline-container-orgf158a15" class="outline-3">
<h3 id="orgf158a15"><span class="section-number-3">1.18</span> Template Metaprogramming or Generic Programming</h3>
<div class="outline-text-3" id="text-1-18">
</div>
<div id="outline-container-org1367f1d" class="outline-4">
<h4 id="org1367f1d"><span class="section-number-4">1.18.1</span> Overview</h4>
<div class="outline-text-4" id="text-1-18-1">
<p>
<b>C++ Metaprogramming Features:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Templates</span>
<ul class="org-ul">
<li>Use case:
<ul class="org-ul">
<li>Template metaprogramming or generic programming</li>
<li>Generic classes and containers</li>
<li>Generic algorithms</li>
<li>Compile-time optmization</li>
<li>Write high performance code by eliminating virtual member
function calls.</li>
</ul></li>
<li>Limitation: Unfortunately, the C++ templates cannot manipulate
the AST and generate code in the way that LISP-like languages
do.</li>
</ul></li>

<li>C++11 <span class="underline">Constexpr</span>
<ul class="org-ul">
<li>Use cases:
<ul class="org-ul">
<li>Compile-time computations such as look up tables, math
constants, CRC32, hash, string encryption and obfuscation at
compile-time and so on.</li>
</ul></li>
</ul></li>

<li><span class="underline">Inline functions</span>
<ul class="org-ul">
<li>Use cases:
<ul class="org-ul">
<li>Removing function-calls. The function code is inserted at the
call-site by the compiler allowing a more efficient and
perfomant code.</li>
</ul></li>
</ul></li>

<li><span class="underline">Pre-processor macros</span>
<ul class="org-ul">
<li>Use-cases:
<ul class="org-ul">
<li>Debugging, print line number, file, current function, function
signature and so on.</li>
<li>Conditional compilation</li>
<li>Conditional compilation for cross platform compatibility</li>
<li>Boilerplate code generation which cannot be done with templates
or anything else.</li>
<li>Generation of reflection data.</li>
</ul></li>
</ul></li>
</ul>

<p>
<b>Generic Programming / Template Metaprogramming Design Patterns:</b>
</p>

<ul class="org-ul">
<li><span class="underline">Generic Functions, algorithms and containers</span>
<ul class="org-ul">
<li>Some known use cases:
<ul class="org-ul">
<li>C++ STL introduced by Alexander Stepanov.</li>
<li>Boost Libraries</li>
</ul></li>
</ul></li>
<li><span class="underline">CRTP =&gt; Curious Recurring Template Pattern</span>
<ul class="org-ul">
<li>Eliminates virtual function-calls overhead by emulating
inheritance or dynamic polymorphism with static polymorphism or
template metaprogramming.</li>
</ul></li>
<li><span class="underline">Type Erasure</span> 
<ul class="org-ul">
<li>Despite the high performance and the ability to operate ony type
regardless of the class hierarchy, the main shortcoming of
generic programming is that, it is not possible to store
unrelated types in the same containers or access them by the same
pointer. The type erasure technique address those downsides by
combining generic programmign and generic programming.</li>
<li>Known uses:
<ul class="org-ul">
<li>std::function (C++11)</li>
<li>std::any (C++17), Boost.any, std::variant (C++17) and Boost.variant</li>
</ul></li>
</ul></li>
<li><span class="underline">EP =&gt; Expression Template</span> =&gt; Technique used by many scientific
library for encoding DSL - Domain Specific Languages with
templates.
<ul class="org-ul">
<li>Some known uses of this design pattern are:
<ul class="org-ul">
<li>Linear Algebra: librareis Blitz++, Eigen and Armadillo</li>
<li>Automatic Differentiation.</li>
</ul></li>
</ul></li>
<li><span class="underline">Meta Functions</span> =&gt; "Functions" emualted with structs and static
methods or members that can manipulate types or query information
about types using template specialisation.</li>
<li><span class="underline">Policy Based Design</span></li>
<li><span class="underline">SFINAE</span></li>
</ul>

<p>
<b>Libraries and Frameworks for metaprogramming:</b>
</p>

<ul class="org-ul">
<li><a href="https://www.boost.org/doc/libs/1_61_0/libs/hana/doc/html/index.html">Boost.Hana</a></li>
<li><a href="https://www.boost.org/doc/libs/1_68_0/libs/fusion/doc/html/fusion/preface.html">Boost.Fusion</a></li>
<li><a href="https://www.boost.org/doc/libs/1_68_0/libs/mpl/doc/index.html">Boost.MPL</a></li>
</ul>

<p>
<b>Tool for testing templates online</b> 
</p>

<ul class="org-ul">
<li><a href="http://metashell.org/index.html">Home - Metashell</a> - "The goal of this project is to provide an
interactive template metaprogramming shell."</li>
</ul>


<p>
<b>Template Metaprogramming Reference</b> 
</p>

<ul class="org-ul">
<li>Andrei Alexandrescu's <b>Loki Library</b> (<a href="http://loki-lib.sourceforge.net/">http://loki-lib.sourceforge.net/</a>)
<ul class="org-ul">
<li>type list</li>
<li>functor</li>
<li>singleton</li>
<li>object factory</li>
<li>visitor</li>
<li>multi methods</li>
<li>pimpl - pointer to implementation.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org5f8da86" class="outline-4">
<h4 id="org5f8da86"><span class="section-number-4">1.18.2</span> Template type-safe duck-typing or structural typing</h4>
<div class="outline-text-4" id="text-1-18-2">
<p>
In dynamically programming languages like Python, Ruby and etc, a
function or method can accept any object implementing the methods
referred in the function body regardless of the object base or
interface. For instance, in the code below the function describeArea
will work with any class implementing the methods .area() and .name()
not matter the object's base class. 
</p>

<p>
This ability to work with any object which has that requested types,
in this case .area() and .name() is called <span class="underline">duck-typying</span>. Other
languages with duck-typing ability are Smalltalk, Groovy, C#, Scala
and Objective-C. The advantage of duck-typing is that function or
methods can work with classes without an inheritance hierarchy or a
common base class.
</p>

<div class="org-src-container">
<pre class="src src-python"><span class="org-keyword">def</span> <span class="org-function-name">describeArea</span>(shape):
    <span class="org-keyword">print</span>(<span class="org-string">"Shape is      = "</span> + shape.name())
    <span class="org-keyword">print</span>(<span class="org-string">"Shape area is = "</span> + <span class="org-builtin">str</span>(shape.area()))

<span class="org-keyword">class</span> <span class="org-type">Square</span>:
    <span class="org-keyword">def</span> <span class="org-function-name">__init__</span>(<span class="org-keyword">self</span>, side):
        <span class="org-keyword">self</span>.side = side 
    <span class="org-keyword">def</span> <span class="org-function-name">area</span>(<span class="org-keyword">self</span>):
        <span class="org-keyword">return</span> <span class="org-keyword">self</span>.side * <span class="org-keyword">self</span>.side
    <span class="org-keyword">def</span> <span class="org-function-name">name</span>(<span class="org-keyword">self</span>):
        <span class="org-keyword">return</span> <span class="org-string">"square"</span>

<span class="org-keyword">class</span> <span class="org-type">Circle</span>:
    <span class="org-keyword">def</span> <span class="org-function-name">__init__</span>(<span class="org-keyword">self</span>, radius):
        <span class="org-keyword">self</span>.radius = radius
    <span class="org-keyword">def</span> <span class="org-function-name">area</span>(<span class="org-keyword">self</span>):
        <span class="org-keyword">return</span> <span class="org-keyword">self</span>.radius * <span class="org-keyword">self</span>.radius  * 3.1415
    <span class="org-keyword">def</span> <span class="org-function-name">name</span>(<span class="org-keyword">self</span>):
        <span class="org-keyword">return</span> <span class="org-string">"circle"</span>    
</pre>
</div>

<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-python">&gt;&gt;&gt; <span class="org-variable-name">s</span> = Square(10)
&gt;&gt;&gt; <span class="org-variable-name">c</span> = Circle(3)
&gt;&gt;&gt;

&gt;&gt;&gt; describeArea(s)
Shape <span class="org-keyword">is</span>      = square
Shape area <span class="org-keyword">is</span> = 100
&gt;&gt;&gt; 
&gt;&gt;&gt; describeArea(c)
Shape <span class="org-keyword">is</span>      = circle
Shape area <span class="org-keyword">is</span> = 28.273500000000002
&gt;&gt;&gt; 
&gt;&gt;&gt; 
</pre>
</div>


<p>
<b>C++ "Duck-typing" or type-safe structural typing</b>
</p>

<p>
C++ templates feature supports a more type-safe duck-typing as the
feature allows to write functions or methods which works with any
object implementing the methods requested in the template code
regardless of passed types have a common class hierarchy or a base
class. However, unlike Python or Scala's duck typing, C++'s template
doesn't have performance penalty due to dynamic polymorphism or
reflection as it generates code at compile-time for each parameter
type. 
</p>

<p>
The C++'s template duck-typing is also called static polymorphism as a
contrast to dynamic polymorphism which requires that all objects
passed to a function or method implement the same base class.
</p>

<p>
Example: The function describeArea works with any object implementing
the methods area() and name(), however unlike Python and other
dynamically typed languages, if an object that doesn't implement none
of those mentioned methods is passed as argument, a compile error will
be generated rather than a runtime error. 
</p>

<p>
The advantage of C++ template is that it eliminates the runtime
overhead of dynamic polymorphism or virtual function calls, therefore
makes the code more performant and loosely coupled as it can work with
any class without any inheritance hierarchy.  
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Works with any type T which implements .name() or .area()</span>
<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">describeArea</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">T</span>&amp; <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Shape is = "</span> &lt;&lt; obj.name<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Area is  = "</span> &lt;&lt; obj.area<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-constant">std</span>::endl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"---------"</span> &lt;&lt; <span class="org-constant">std</span>::endl;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">class</span> <span class="org-type">Circle</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
        <span class="org-type">double</span> <span class="org-variable-name">m_radius</span>;
<span class="org-function-name">public</span>:
        <span class="org-function-name">Circle</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">radius</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_radius</span><span class="org-rainbow-delimiters-depth-2">(</span>radius<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>;
        <span class="org-type">double</span> <span class="org-function-name">area</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> 3.1415 * m_radius * m_radius;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">name</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"circle"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>   
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">class</span> <span class="org-type">Square</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
        <span class="org-type">double</span> <span class="org-variable-name">m_side</span>;
<span class="org-function-name">public</span>:
        <span class="org-function-name">Square</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">double</span> <span class="org-variable-name">side</span><span class="org-rainbow-delimiters-depth-2">)</span>: <span class="org-function-name">m_side</span><span class="org-rainbow-delimiters-depth-2">(</span>side<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{}</span>;
        <span class="org-type">double</span> <span class="org-function-name">area</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> m_side * m_side;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">name</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-string">"square"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-type">Square</span> <span class="org-variable-name">s</span><span class="org-rainbow-delimiters-depth-2">(</span>4.0<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-type">Circle</span> <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-2">(</span>3.0<span class="org-rainbow-delimiters-depth-2">)</span>;
        describeArea<span class="org-rainbow-delimiters-depth-2">(</span>s<span class="org-rainbow-delimiters-depth-2">)</span>;
        describeArea<span class="org-rainbow-delimiters-depth-2">(</span>c<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Running: 
</p>

<ul class="org-ul">
<li>The template generates multiple versions of the function
describeArea specific for each type, for instance, it generates,
describeArea(const Circle&amp;) and describeArea(const Square&amp;). The
static polymorphism is a high performance alternative to the use of
dynamic polymorphism, inheritance, and virtual methods since the
methods that will be called are resolved at compile-time.</li>
</ul>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ -std=c++11 templateDuckTyping.cpp -o <span class="org-keyword">out.bin</span> &amp;&amp; ./out.bin
Shape is = square
Area is  = 16
---------
Shape is = circle
Area is  = 28.2735
---------
</pre>
</div>

<p>
Summary: 
</p>

<ul class="org-ul">
<li>C++ Templates works in similar fashion to dynamically typed
languages' duck typing.</li>

<li>Templates can make the code more loosely coupled as they works with
any class or type implementing the requested methods.</li>

<li>Templates have zero cost and follows the C++ motto, "don't pay for
what you don't use" they only generate code when requested or
instantiated.</li>

<li>Templates are widely used in the STL (Standard Template Library)
and the Boost Library.</li>
</ul>
</div>
</div>
<div id="outline-container-orgc7f1584" class="outline-4">
<h4 id="orgc7f1584"><span class="section-number-4">1.18.3</span> Class Templates</h4>
<div class="outline-text-4" id="text-1-18-3">
</div>
<ol class="org-ol">
<li><a id="orgc7caf0f"></a>Example: Generic stack class<br />
<div class="outline-text-5" id="text-1-18-3-1">
<p>
Note: 
</p>

<ul class="org-ul">
<li>A class template is not a class, it is factory of classes and has
zero cost until it is used or instantiated. For instance,
Stack&lt;int&gt; and Stack&lt;std::string&gt; are different classes and cannot
be stored in containers or accessed with the same pointer.</li>

<li>When Stack&lt;int&gt; or Stack&lt;double&gt; appears in the code, the compiler
generates an unique object code for each of those template
instantiation. The C++ generics doesn't have type erasure like
java where all objects can be casted to an instance of Object.</li>

<li>All the template code must be always in the header files.</li>
</ul>

<p>
Class Template Example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">class</span> <span class="org-type">Stack</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
        <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">_stack</span>;
<span class="org-function-name">public</span>:
        <span class="org-keyword">struct</span> <span class="org-type">stack_empty_error</span>: <span class="org-keyword">public</span> <span class="org-constant">std</span>::<span class="org-type">exception</span><span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">what</span><span class="org-rainbow-delimiters-depth-3">()</span> <span class="org-keyword">const</span> <span class="org-keyword">throw</span><span class="org-rainbow-delimiters-depth-3">(){</span>
                        <span class="org-keyword">return</span> <span class="org-string">" ==&gt; Error: stack empty."</span> ;
                <span class="org-rainbow-delimiters-depth-3">}</span>
        <span class="org-rainbow-delimiters-depth-2">}</span>;
        <span class="org-type">void</span> <span class="org-function-name">push</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">T</span>&amp; <span class="org-variable-name">t</span><span class="org-rainbow-delimiters-depth-2">){</span>
                _stack.push_back<span class="org-rainbow-delimiters-depth-3">(</span>t<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">T</span> <span class="org-function-name">pop</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>_stack.empty<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-keyword">throw</span> stack_empty_error<span class="org-rainbow-delimiters-depth-3">()</span>;
                <span class="org-keyword">auto</span> <span class="org-variable-name">x</span> = _stack.back<span class="org-rainbow-delimiters-depth-3">()</span>;
                _stack.pop_back<span class="org-rainbow-delimiters-depth-3">()</span>;
                <span class="org-keyword">return</span> x;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">T</span> <span class="org-function-name">peek</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-3">(</span>_stack.empty<span class="org-rainbow-delimiters-depth-4">()</span><span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-keyword">throw</span> stack_empty_error<span class="org-rainbow-delimiters-depth-3">()</span>;
                <span class="org-keyword">return</span> _stack.back<span class="org-rainbow-delimiters-depth-3">()</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">size_t</span> <span class="org-function-name">size</span><span class="org-rainbow-delimiters-depth-2">(){</span>  <span class="org-keyword">return</span> _stack.size<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">bool</span>   <span class="org-function-name">empty</span><span class="org-rainbow-delimiters-depth-2">(){</span> <span class="org-keyword">return</span> _stack.empty<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">void</span>   <span class="org-function-name">clear</span><span class="org-rainbow-delimiters-depth-2">(){</span> _stack.clear<span class="org-rainbow-delimiters-depth-3">()</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">void</span> <span class="org-function-name">print</span><span class="org-rainbow-delimiters-depth-2">(){</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" stack: "</span>;
                <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: _stack<span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" "</span> &lt;&lt; x ;
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

</pre>
</div>

<p>
Usage example: 
</p>

<ul class="org-ul">
<li>Instantiate class template with int parameter.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">Stack</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> s1;
&gt;&gt; s1.push<span class="org-rainbow-delimiters-depth-1">(</span>10<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; s1.push<span class="org-rainbow-delimiters-depth-1">(</span>20<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; s1.push<span class="org-rainbow-delimiters-depth-1">(</span>-30<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; s1.push<span class="org-rainbow-delimiters-depth-1">(</span>15<span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; 
&gt;&gt; s1.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; 
&gt;&gt; s1.empty<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>

&gt;&gt; s1.print<span class="org-rainbow-delimiters-depth-1">()</span>
 stack:  10 20 -30 15

&gt;&gt; s1.peek<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 15

&gt;&gt; s1.pop<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 15
&gt;&gt; s1.pop<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> -30
&gt;&gt; s1.pop<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 20
&gt;&gt; s1.pop<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span> 10
&gt;&gt; s1.pop<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-type">Error</span> <span class="org-type">in</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">TRint</span>::HandleTermInput<span class="org-rainbow-delimiters-depth-2">()</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>: <span class="org-constant">Stack</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::stack_empty_error caught:  ==&gt; Error: stack empty.
&gt;&gt; 

&gt;&gt; s1.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 0
&gt;&gt; s1.empty<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
&gt;&gt;
</pre>
</div>

<ul class="org-ul">
<li>Instantiate class template with std::string parameter.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt; <span class="org-type">Stack</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> sd;
&gt;&gt; sd.push<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; sd.push<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"c++"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; sd.push<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"templates"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; sd.push<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"test"</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; 
&gt;&gt; sd.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; sd.empty<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; sd.peek<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"test"</span>
&gt;&gt; 
&gt;&gt; sd.print<span class="org-rainbow-delimiters-depth-1">()</span>
 stack:  hello c++ templates test
&gt;&gt; 
&gt;&gt; sd.pop<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"test"</span>
&gt;&gt; sd.pop<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"templates"</span>
&gt;&gt; sd.pop<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"c++"</span>
&gt;&gt; sd.pop<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"hello"</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Generic client code for the class stack:</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Non-destructive print -&gt; Creates a copy invoking copy constructor </span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">printStack</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Stack</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">t</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-keyword">while</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-negation-char">!</span>t.empty<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; t.pop<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">" "</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">std</span>::cout.flush<span class="org-rainbow-delimiters-depth-2">()</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">fillStack</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">Stack</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-variable-name">t</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp; <span class="org-variable-name">data</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">d</span>: data<span class="org-rainbow-delimiters-depth-2">)</span>
                t.push<span class="org-rainbow-delimiters-depth-2">(</span>d<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<ul class="org-ul">
<li>Running client code.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">Stack</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> stack_double1;
&gt;&gt; fillStack<span class="org-rainbow-delimiters-depth-1">(</span>stack_double1, <span class="org-rainbow-delimiters-depth-2">{</span>2.0, 5.0, 6.0, 9.0<span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>
&gt;&gt; 
&gt;&gt; stack_double1.size<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span> 4
&gt;&gt; stack_double1.peek<span class="org-rainbow-delimiters-depth-1">()</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 9.0000000
&gt;&gt; 

&gt;&gt; printStack<span class="org-rainbow-delimiters-depth-1">(</span>stack_double1<span class="org-rainbow-delimiters-depth-1">)</span>
9 6 5 2 
&gt;&gt; 
&gt;&gt; printStack<span class="org-rainbow-delimiters-depth-1">(</span>stack_double1<span class="org-rainbow-delimiters-depth-1">)</span>
9 6 5 2 

&gt;&gt; <span class="org-type">Stack</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> stack_string;
&gt;&gt; fillStack<span class="org-rainbow-delimiters-depth-1">(</span>stack_string, <span class="org-rainbow-delimiters-depth-2">{</span><span class="org-string">"hello"</span>, <span class="org-string">"hpc"</span>, <span class="org-string">"C++"</span>, <span class="org-string">"RULEZ"</span>, <span class="org-string">"peformance"</span>, <span class="org-string">"matters"</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; printStack<span class="org-rainbow-delimiters-depth-1">(</span>stack_string<span class="org-rainbow-delimiters-depth-1">)</span>
matters peformance <span class="org-type">RULEZ</span> <span class="org-variable-name">C</span>++ hpc hello

&gt;&gt; printStack<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-type">stack_string</span><span class="org-rainbow-delimiters-depth-1">)</span>
matters peformance <span class="org-type">RULEZ</span> <span class="org-function-name">C</span>++ hpc hello 
&gt;&gt; 

&gt;&gt; stack_string.clear<span class="org-rainbow-delimiters-depth-1">()</span>
&gt;&gt; printStack3<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;(</span>stack_string<span class="org-rainbow-delimiters-depth-1">)</span>

&gt;&gt; 
</pre>
</div>
</div>
</li>
<li><a id="org135c673"></a>Example: Tuple of three elements<br />
<div class="outline-text-5" id="text-1-18-3-2">
<p>
Code: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">A</span>, <span class="org-keyword">class</span> <span class="org-type">B</span>, <span class="org-keyword">class</span> <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">tuple3</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Empty constructor - necessary to store by value the tuple</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">in STL containers.</span>
        <span class="org-function-name">tuple3</span><span class="org-rainbow-delimiters-depth-2">(){}</span>
        <span class="org-function-name">tuple3</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">A</span>&amp; <span class="org-variable-name">a</span>, <span class="org-keyword">const</span> <span class="org-type">B</span>&amp; <span class="org-variable-name">b</span>, <span class="org-keyword">const</span> <span class="org-type">C</span>&amp; <span class="org-variable-name">c</span><span class="org-rainbow-delimiters-depth-2">)</span>
                : a<span class="org-rainbow-delimiters-depth-2">(</span>a<span class="org-rainbow-delimiters-depth-2">)</span>, b<span class="org-rainbow-delimiters-depth-2">(</span>b<span class="org-rainbow-delimiters-depth-2">)</span>, c<span class="org-rainbow-delimiters-depth-2">(</span>c<span class="org-rainbow-delimiters-depth-2">){</span>     
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-type">A</span> <span class="org-variable-name">a</span>;
        <span class="org-type">B</span> <span class="org-variable-name">b</span>;
        <span class="org-type">C</span> <span class="org-variable-name">c</span>;    
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">A</span>, <span class="org-keyword">class</span> <span class="org-type">B</span>, <span class="org-keyword">class</span> <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">getA</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">tuple3</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">A</span>, <span class="org-type">B</span>, <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp;  <span class="org-variable-name">t</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">return</span> t.a;     
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">A</span>, <span class="org-keyword">class</span> <span class="org-type">B</span>, <span class="org-keyword">class</span> <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">getB</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">tuple3</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">A</span>, <span class="org-type">B</span>, <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp;  <span class="org-variable-name">t</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">B</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">return</span> t.b;     
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">A</span>, <span class="org-keyword">class</span> <span class="org-type">B</span>, <span class="org-keyword">class</span> <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">getC</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">tuple3</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">A</span>, <span class="org-type">B</span>, <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp;  <span class="org-variable-name">t</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">return</span> t.c;     
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">A</span>, <span class="org-keyword">class</span> <span class="org-type">B</span>, <span class="org-keyword">class</span> <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">printTuple1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">tuple3</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">A</span>, <span class="org-type">B</span>, <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp; <span class="org-variable-name">t</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"tuple3{"</span>
                          &lt;&lt; <span class="org-string">" a = "</span> &lt;&lt; t.a
                          &lt;&lt; <span class="org-string">" b = "</span> &lt;&lt; t.b
                          &lt;&lt; <span class="org-string">" c = "</span> &lt;&lt; t.c
                          &lt;&lt; <span class="org-string">" } "</span>
                          &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">A</span>, <span class="org-keyword">class</span> <span class="org-type">B</span>, <span class="org-keyword">class</span> <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">printTuple2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">tuple3</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">A</span>, <span class="org-type">B</span>, <span class="org-type">C</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp; <span class="org-variable-name">t</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"tuple3{"</span>
                          &lt;&lt; <span class="org-string">" a = "</span> &lt;&lt; t.a
                          &lt;&lt; <span class="org-string">" b = "</span> &lt;&lt; t.b
                          &lt;&lt; <span class="org-string">" c = "</span> &lt;&lt; t.c
                          &lt;&lt; <span class="org-string">" } "</span>
                          &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>


<p>
Running: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-type">tuple3</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>, <span class="org-type">char</span>, <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;</span> h<span class="org-rainbow-delimiters-depth-1">(</span>100.23, <span class="org-string">'x'</span>, <span class="org-string">"world"</span><span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span>tuple3&lt;<span class="org-type">double</span>, <span class="org-type">char</span>, <span class="org-constant">std</span>::string&gt; &amp;<span class="org-rainbow-delimiters-depth-1">)</span> @0x7f3ea8607010
&gt;&gt; 
&gt;&gt; h.a
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.23000
&gt;&gt; h.b
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'x'</span>
&gt;&gt; h.c
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span> &amp;<span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"world"</span>
&gt;&gt; 

&gt;&gt; getA<span class="org-rainbow-delimiters-depth-1">(</span>h<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span> 100.23000
&gt;&gt; getB<span class="org-rainbow-delimiters-depth-1">(</span>h<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">'x'</span>
&gt;&gt; getC<span class="org-rainbow-delimiters-depth-1">(</span>h<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::<span class="org-type">basic_string</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-constant">std</span>::<span class="org-type">char_traits</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>, <span class="org-constant">std</span>::<span class="org-type">allocator</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-3">&gt;</span> <span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-string">"world"</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Types parameter are deduced by the compiler.</span>
&gt;&gt; printTuple1<span class="org-rainbow-delimiters-depth-1">(</span>h<span class="org-rainbow-delimiters-depth-1">)</span>
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 100.23 b = x c = world <span class="org-rainbow-delimiters-depth-1">}</span> 

&gt;&gt; printTuple2<span class="org-rainbow-delimiters-depth-1">(</span>h<span class="org-rainbow-delimiters-depth-1">)</span>
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 100.23 b = x c = world <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

&gt;&gt; printTuple1<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>, <span class="org-type">char</span>, <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">&gt;(</span><span class="org-type">h</span><span class="org-rainbow-delimiters-depth-1">)</span>
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = -100 b = x c = world <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt;

<span class="org-keyword">auto</span> tdata = <span class="org-constant">std</span>::<span class="org-type">deque</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">tuple3</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span>, <span class="org-type">char</span>, <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
        <span class="org-rainbow-delimiters-depth-2">{</span>100, <span class="org-string">'x'</span>, <span class="org-string">"C++"</span><span class="org-rainbow-delimiters-depth-2">}</span>,
        <span class="org-rainbow-delimiters-depth-2">{</span>200, <span class="org-string">'z'</span>, <span class="org-string">"Forth"</span><span class="org-rainbow-delimiters-depth-2">}</span>,
        <span class="org-rainbow-delimiters-depth-2">{</span>-900, <span class="org-string">'k'</span>, <span class="org-string">"Lisp"</span><span class="org-rainbow-delimiters-depth-2">}</span>,
        <span class="org-rainbow-delimiters-depth-2">{</span>66, <span class="org-string">'p'</span>, <span class="org-string">"route"</span><span class="org-rainbow-delimiters-depth-2">}</span><span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">t</span>: tlist<span class="org-rainbow-delimiters-depth-1">)</span> printTuple1<span class="org-rainbow-delimiters-depth-1">(</span>t<span class="org-rainbow-delimiters-depth-1">)</span>;

&gt;&gt; <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">t</span>: tdata<span class="org-rainbow-delimiters-depth-1">)</span> printTuple1<span class="org-rainbow-delimiters-depth-1">(</span>t<span class="org-rainbow-delimiters-depth-1">)</span>;
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 100 b = x c = C++ <span class="org-rainbow-delimiters-depth-1">}</span> 
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 200 b = z c = Forth <span class="org-rainbow-delimiters-depth-1">}</span> 
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = -900 b = k c = Lisp <span class="org-rainbow-delimiters-depth-1">}</span> 
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 66 b = p c = route <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

<span class="org-comment-delimiter">// </span><span class="org-comment">Compiler fails to deduce arguments </span>
&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>tdata.begin<span class="org-rainbow-delimiters-depth-2">()</span>, tdata.end<span class="org-rainbow-delimiters-depth-2">()</span>, printTuple1<span class="org-rainbow-delimiters-depth-1">)</span>
<span class="org-function-name">ROOT_prompt_32</span>:1:1: error: no matching function <span class="org-keyword">for</span> call to <span class="org-warning">'</span>for_each<span class="org-warning">'</span>
<span class="org-function-name">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>tdata.begin<span class="org-rainbow-delimiters-depth-2">()</span>, tdata.end<span class="org-rainbow-delimiters-depth-2">()</span>, printTuple1<span class="org-rainbow-delimiters-depth-1">)</span>
^~~~~~~~~

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>tdata.begin<span class="org-rainbow-delimiters-depth-2">()</span>, tdata.end<span class="org-rainbow-delimiters-depth-2">()</span>, printTuple1&lt;<span class="org-type">int</span>, <span class="org-type">char</span>, <span class="org-constant">std</span>::string&gt;<span class="org-rainbow-delimiters-depth-1">)</span>;
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 100 b = x c = C++ <span class="org-rainbow-delimiters-depth-1">}</span> 
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 200 b = z c = Forth <span class="org-rainbow-delimiters-depth-1">}</span> 
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = -900 b = k c = Lisp <span class="org-rainbow-delimiters-depth-1">}</span> 
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 66 b = p c = route <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt;

&gt;&gt; <span class="org-constant">std</span>::for_each<span class="org-rainbow-delimiters-depth-1">(</span>tdata.begin<span class="org-rainbow-delimiters-depth-2">()</span>, tdata.end<span class="org-rainbow-delimiters-depth-2">()</span>, &amp;<span class="org-type">printTuple1</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span>, <span class="org-type">char</span>, <span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">)</span>;
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 100 b = x c = C++ <span class="org-rainbow-delimiters-depth-1">}</span> 
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 200 b = z c = Forth <span class="org-rainbow-delimiters-depth-1">}</span> 
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = -900 b = k c = Lisp <span class="org-rainbow-delimiters-depth-1">}</span> 
tuple3<span class="org-rainbow-delimiters-depth-1">{</span> a = 66 b = p c = route <span class="org-rainbow-delimiters-depth-1">}</span> 
&gt;&gt; 

</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org482ff0a" class="outline-4">
<h4 id="org482ff0a"><span class="section-number-4">1.18.4</span> Templates and C++ iterators</h4>
<div class="outline-text-4" id="text-1-18-4">
<p>
Templates can be used for writing more generic and resuable code which
operates like functions or STL algorithms on  any type of iterator or
container. 
</p>

<p>
This example shows how to implement generic code which operates on any
type of container or iterator in modern C++.
</p>

<ul class="org-ul">
<li>File: <a href="src/template-iterator-container.cpp">file:src/template-iterator-container.cpp</a></li>
</ul>

<p>
Code highlights:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">namespace</span> <span class="org-constant">IterUtils</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">class</span> <span class="org-type">Iterator</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
        <span class="org-type">double</span> <span class="org-function-name">sumContainer</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Iterator</span>&amp; <span class="org-variable-name">begin</span>, <span class="org-keyword">const</span> <span class="org-type">Iterator</span>&amp; <span class="org-variable-name">end</span><span class="org-rainbow-delimiters-depth-2">){</span>
                <span class="org-type">double</span> <span class="org-variable-name">sum</span> = 0.0;
                <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">Iterator</span> <span class="org-variable-name">it</span> = begin; it != end; ++it<span class="org-rainbow-delimiters-depth-3">)</span>
                        sum += *it;
                <span class="org-keyword">return</span> sum;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Sum elements of any type &lt;Container&gt; with methods .begin() and .end()</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">returnign iterators.</span>
        <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">class</span> <span class="org-type">U</span>, <span class="org-keyword">class</span> <span class="org-type">Container</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">sumContainer2</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Container</span>&amp; <span class="org-variable-name">container</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">U</span><span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-type">U</span> <span class="org-variable-name">sum</span><span class="org-rainbow-delimiters-depth-3">{}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">Uniform initialization</span>
                <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">it</span> = container.begin<span class="org-rainbow-delimiters-depth-4">()</span>; it != container.end<span class="org-rainbow-delimiters-depth-4">()</span>; ++it<span class="org-rainbow-delimiters-depth-3">)</span>
                        sum += *it;
                <span class="org-keyword">return</span> sum;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">class</span> <span class="org-type">Iterator</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">printContainer</span><span class="org-rainbow-delimiters-depth-2">(</span>
                <span class="org-keyword">const</span> <span class="org-type">Iterator</span>&amp; <span class="org-variable-name">begin</span>,
                <span class="org-keyword">const</span> <span class="org-type">Iterator</span>&amp; <span class="org-variable-name">end</span>,
                <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">sep</span> = <span class="org-string">", "</span> <span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span>
        <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">Iterator</span> <span class="org-variable-name">it</span> = begin; it != end; ++it<span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-constant">std</span>::cout &lt;&lt;  *it &lt;&lt; sep;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">class</span> <span class="org-type">Container</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">printContainer2</span><span class="org-rainbow-delimiters-depth-2">(</span>
                  <span class="org-keyword">const</span> <span class="org-type">Container</span>&amp; <span class="org-variable-name">cont</span>
                 ,<span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">sep</span> = <span class="org-string">", "</span>
                <span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span>
        <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-comment-delimiter">// </span><span class="org-comment">C++11 For-range based loop</span>
                <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: cont<span class="org-rainbow-delimiters-depth-3">)</span>
                        <span class="org-constant">std</span>::cout &lt;&lt;  x &lt;&lt; sep;
        <span class="org-rainbow-delimiters-depth-2">}</span>

        <span class="org-comment-delimiter">// </span><span class="org-comment">Higher order function</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">The parameter actions accepts any type which can be called like</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">a function returning void.</span>
        <span class="org-comment-delimiter">//</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Note: It doesn't matter as it is possible to use both class T or typename T.</span>
        <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Container</span>, <span class="org-keyword">typename</span> <span class="org-type">Function</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">for_each</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Container</span> <span class="org-variable-name">cont</span>, <span class="org-type">Function</span> <span class="org-variable-name">action</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span>
        <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">const</span> <span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: cont<span class="org-rainbow-delimiters-depth-3">)</span> action<span class="org-rainbow-delimiters-depth-3">(</span>x<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>

<span class="org-rainbow-delimiters-depth-1">}</span>; <span class="org-comment-delimiter">// </span><span class="org-comment">----- End of namespace IterUtils ----- //</span>
</pre>
</div>

<p>
Program output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ template-iterator-container.cpp -o <span class="org-keyword">template-iterator-container.bin</span> -g -std=c++11 -Wall -Wextra 
$ ./template-iterator-container.bin

=========== Experiment 1 - sumContainer
<span class="org-function-name">template-iterator-container.cpp</span>:95: ; iu::sumContainer(&amp;carray[0], &amp;carray[0] + arrsize) = 16
<span class="org-function-name">template-iterator-container.cpp</span>:96: ; iu::sumContainer(vec1.begin(), vec1.end()) = 16
<span class="org-function-name">template-iterator-container.cpp</span>:97: ; iu::sumContainer(list1.begin(), list1.end()) = 16
<span class="org-function-name">template-iterator-container.cpp</span>:98: ; iu::sumContainer(deque1.begin(), deque1.end()) = 16

=========== Experiment 2 - sumContainer2 
<span class="org-function-name">template-iterator-container.cpp</span>:101: ; iu::sumContainer2&lt;double&gt;(vec1) = 16
<span class="org-function-name">template-iterator-container.cpp</span>:102: ; iu::sumContainer2&lt;int&gt;(vec1) = 15
<span class="org-function-name">template-iterator-container.cpp</span>:103: ; iu::sumContainer2&lt;double&gt;(list1) = 16
<span class="org-function-name">template-iterator-container.cpp</span>:104: ; iu::sumContainer2&lt;int&gt;(list2) = 114

=========== Experiment 3 - printContainer 

Contents of carray  = 1, 2, 4.5, 2.5, 6, 
Contents of vec1  = 1, 2, 4.5, 2.5, 6, 
Contents of vec2  = c++, templates, awesome, binary, 
Contents of list1 = 1, 2, 4.5, 2.5, 6, 

=========== Experiment 4 - printContainer2 

Contents of vec1  = 1, 2, 4.5, 2.5, 6, 
Contents of vec2  = c++, templates, awesome, binary, 
Contents of list1 = 1, 2, 4.5, 2.5, 6, 

=========== Experiment 5 - for_each higher order <span class="org-keyword">function</span> 

Contents of vec1  = 1, 2, 4.5, 2.5, 6, 
Contents of vec2  = c++, templates, awesome, binary, c++, templates, awesome, binary, 
Contents of m1  = 
  earth-gravity     9.810
          euler     2.718
             pi     3.142
              x     2.345

</pre>
</div>
</div>
</div>

<div id="outline-container-org4ba928d" class="outline-4">
<h4 id="org4ba928d"><a id="ID-80f3766a-39eb-47ef-a3f5-5a49ef183db0"></a><span class="section-number-4">1.18.5</span> Basic Template Specialization</h4>
<div class="outline-text-4" id="text-1-18-5">
<p>
Code example showing template specialization. As the code shows, the
template specilization can be used for type introspection, type
identification and implement reflection.
</p>

<ul class="org-ul">
<li>File: <a href="src/template-specialization1.cpp">file:src/template-specialization1.cpp</a></li>
<li>Online compiler: <a href="http://rextester.com/BKG53705">http://rextester.com/BKG53705</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Stream manipulator std::fixed, std::setw ... </span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>      <span class="org-comment-delimiter">// </span><span class="org-comment">sin, cos, tan, exp ... M_PI, M_E ...</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> <span class="org-comment-delimiter">// </span><span class="org-comment">std::function </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">============= Example 1 ===============================//</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Check whether type is float point </span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">isFPNumber</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-type">bool</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">return</span> <span class="org-constant">false</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Template specialization of isFPNumber for type float</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> <span class="org-keyword">auto</span> <span class="org-function-name">isFPNumber</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">&gt;()</span> -&gt; <span class="org-type">bool</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">return</span> <span class="org-constant">true</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Template specialization of isFPNumber for type double </span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> <span class="org-keyword">auto</span> <span class="org-function-name">isFPNumber</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;()</span> -&gt; <span class="org-type">bool</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">return</span> <span class="org-constant">true</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">============= Example 2 - Template specialization for runtime type identification ====//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Note: this technique can be used for implemeting custom C++ reflection </span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Return name of a given type </span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">Type</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">TypeName</span><span class="org-rainbow-delimiters-depth-1">()</span> -&gt; <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">return</span> <span class="org-string">"unknown"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-preprocessor">#define</span> <span class="org-function-name">REGISTER_TYPE</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">type</span><span class="org-rainbow-delimiters-depth-1">)</span>  <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> \
        <span class="org-keyword">auto</span> <span class="org-variable-name">TypeName</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>type<span class="org-rainbow-delimiters-depth-1">&gt;()</span> -&gt; <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">return</span> #type; <span class="org-rainbow-delimiters-depth-1">}</span> 

<span class="org-comment-delimiter">// </span><span class="org-comment">Specialization for int type </span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">TypeName</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;()</span> -&gt; <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-rainbow-delimiters-depth-1">{</span> <span class="org-keyword">return</span> <span class="org-string">"int"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">Automate boilerplate code using macros.</span>
REGISTER_TYPE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span>;
REGISTER_TYPE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-1">)</span>;
REGISTER_TYPE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">)</span>;
REGISTER_TYPE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">)</span>;
REGISTER_TYPE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">)</span>;
REGISTER_TYPE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span>;
REGISTER_TYPE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">unsigned</span><span class="org-rainbow-delimiters-depth-1">)</span>;
REGISTER_TYPE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">)</span>;
REGISTER_TYPE<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">long</span> <span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">============= Example 3 - Template with int argument specialization ===//</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">getNumberName</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-keyword">return</span> <span class="org-string">"I down't known"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">getNumberName</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>0<span class="org-rainbow-delimiters-depth-1">&gt;(){</span> <span class="org-keyword">return</span> <span class="org-string">"zero"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">getNumberName</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>1<span class="org-rainbow-delimiters-depth-1">&gt;(){</span> <span class="org-keyword">return</span> <span class="org-string">"one"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">getNumberName</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>2<span class="org-rainbow-delimiters-depth-1">&gt;(){</span> <span class="org-keyword">return</span> <span class="org-string">"two"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-function-name">getNumberName</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>3<span class="org-rainbow-delimiters-depth-1">&gt;(){</span> <span class="org-keyword">return</span> <span class="org-string">"three"</span>; <span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">// </span><span class="org-comment">============= Example 4 - Template with bool argument specialization ====//</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">boolTemplate</span>;

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> <span class="org-keyword">struct</span> <span class="org-type">boolTemplate</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
        <span class="org-keyword">static</span> <span class="org-keyword">auto</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> <span class="org-string">"false"</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> <span class="org-keyword">struct</span> <span class="org-type">boolTemplate</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
        <span class="org-keyword">static</span> <span class="org-keyword">auto</span> <span class="org-function-name">getName</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> <span class="org-string">"true"</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">============= Example 5 - Check whether types are equal ====//</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Partial template specialization </span>

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">A</span>, <span class="org-keyword">class</span> <span class="org-type">B</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">type_equal</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">static</span> <span class="org-type">bool</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-2">(){</span> <span class="org-keyword">return</span> <span class="org-constant">false</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">enum</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-variable-name">value</span> = 0 <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Partial specialisation</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">type_equal</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">A</span>, <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span>
        <span class="org-keyword">static</span> <span class="org-type">bool</span> <span class="org-function-name">get</span><span class="org-rainbow-delimiters-depth-2">(){</span> <span class="org-keyword">return</span> <span class="org-constant">true</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">enum</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-variable-name">value</span> = 1<span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-keyword">const</span> <span class="org-type">char</span> <span class="org-variable-name">nl</span> = <span class="org-string">'\n'</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::boolalpha;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"EXPERIMENT 1 - Check whether type is float pointer"</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------"</span> &lt;&lt; nl;  
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"is float point type&lt;int&gt;    ? = "</span> &lt;&lt; isFPNumber<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"is float point type&lt;char&gt;   ? = "</span> &lt;&lt; isFPNumber<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"is float point type&lt;float&gt;  ? = "</span> &lt;&lt; isFPNumber<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"is float point type&lt;double&gt; ? = "</span> &lt;&lt; isFPNumber<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"EXPERIMENT 2 - Type introspection"</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------"</span> &lt;&lt; nl;  
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type = "</span> &lt;&lt; TypeName<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type = "</span> &lt;&lt; TypeName<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type = "</span> &lt;&lt; TypeName<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type = "</span> &lt;&lt; TypeName<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type = "</span> &lt;&lt; TypeName<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::string<span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;    

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"EXPERIMENT 3 - Templates with integers as arguments"</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------"</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"getNumberName&lt;0&gt;() = "</span> &lt;&lt; getNumberName<span class="org-rainbow-delimiters-depth-2">&lt;</span>0<span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"getNumberName&lt;1&gt;() = "</span> &lt;&lt; getNumberName<span class="org-rainbow-delimiters-depth-2">&lt;</span>1<span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"getNumberName&lt;2&gt;() = "</span> &lt;&lt; getNumberName<span class="org-rainbow-delimiters-depth-2">&lt;</span>2<span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"getNumberName&lt;10&gt;() = "</span> &lt;&lt; getNumberName<span class="org-rainbow-delimiters-depth-2">&lt;</span>10<span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"getNumberName&lt;14&gt;() = "</span> &lt;&lt; getNumberName<span class="org-rainbow-delimiters-depth-2">&lt;</span>14<span class="org-rainbow-delimiters-depth-2">&gt;()</span> &lt;&lt; nl;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"EXPERIMENT 4 - Templates with bool as arguments"</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"--------------------------------------------"</span> &lt;&lt; nl;  
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"boolTemplate&lt;false&gt;::getName&gt;()  = "</span> &lt;&lt; <span class="org-constant">boolTemplate</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"boolTemplate&lt;true&gt;::getName&gt;()   = "</span> &lt;&lt; <span class="org-constant">boolTemplate</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">true</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::getName<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; nl;

        <span class="org-constant">std</span>::cout &lt;&lt; nl &lt;&lt; <span class="org-string">"Check whether types are equal"</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type_equal&lt;int, char&gt;::get()       = "</span>  &lt;&lt; <span class="org-constant">type_equal</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span>, <span class="org-type">char</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::get<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; nl;    
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type_equal&lt;char, double&gt;::get()    = "</span>  &lt;&lt; <span class="org-constant">type_equal</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">char</span>, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::get<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type_equal&lt;double, double&gt;::get()  = "</span>  &lt;&lt; <span class="org-constant">type_equal</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span>, <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::get<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; nl;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"type_equal&lt;int, int&gt;::get()        = "</span>  &lt;&lt; <span class="org-constant">type_equal</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::get<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; nl;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type_equal&lt;<span class="org-type">int</span>, <span class="org-type">double</span>&gt;::value<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[1] Types are equal\n"</span>;
        <span class="org-keyword">else</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[1] Types are not equal\n"</span>;

        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>type_equal&lt;<span class="org-type">double</span>, <span class="org-type">double</span>&gt;::value<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[2] Types are equal\n"</span>;
        <span class="org-keyword">else</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"[2] Types are not equal\n"</span>;


        <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Program output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">$ clang++ template-specialization1.cpp -o <span class="org-keyword">template-specialization1.bin</span> -g -std=c++11 -Wall -Wextra 
$ ./template-specialization1.bin

EXPERIMENT 1 - Check whether type is float pointer
--------------------------------------------
is float point type&lt;int&gt;    ? = false
is float point type&lt;char&gt;   ? = false
is float point type&lt;float&gt;  ? = true
is float point type&lt;double&gt; ? = true

EXPERIMENT 2 - Type introspection
--------------------------------------------
<span class="org-builtin">type</span> = int
<span class="org-builtin">type</span> = char
<span class="org-builtin">type</span> = float
<span class="org-builtin">type</span> = const char*
<span class="org-builtin">type</span> = std::string

EXPERIMENT 3 - Templates with integers as arguments
--------------------------------------------
getNumberName&lt;0&gt;() = zero
getNumberName&lt;1&gt;() = one
getNumberName&lt;2&gt;() = two
getNumberName&lt;10&gt;() = I down<span class="org-string">'t known</span>
<span class="org-string">getNumberName&lt;14&gt;() = I down'</span>t known

EXPERIMENT 4 - Templates with bool as arguments
--------------------------------------------
boolTemplate&lt;false&gt;::getName&gt;()  = false
boolTemplate&lt;true&gt;::getName&gt;()   = true

Check whether types are equal
type_equal&lt;int, char&gt;::get()       = false
type_equal&lt;char, double&gt;::get()    = false
type_equal&lt;double, double&gt;::get()  = true
type_equal&lt;int, int&gt;::get()        = true
[1] Types are not equal
[2] Types are equal
</pre>
</div>
</div>
</div>
<div id="outline-container-orged509c8" class="outline-4">
<h4 id="orged509c8"><span class="section-number-4">1.18.6</span> Templates with default arguments</h4>
<div class="outline-text-4" id="text-1-18-6">
<p>
Example: Array allocated on the stack memory.
</p>

<ul class="org-ul">
<li>File: default-template-args.C</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">ostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 

<span class="org-comment-delimiter">// </span><span class="org-comment">Array allocated on stack with size 10.</span>
<span class="org-keyword">template</span> <span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Element</span>, <span class="org-type">size_t</span> <span class="org-variable-name">Size</span> = 10<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">class</span> <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">private</span>:
        <span class="org-type">Element</span> <span class="org-variable-name">m_data</span> <span class="org-rainbow-delimiters-depth-2">[</span>Size<span class="org-rainbow-delimiters-depth-2">]</span>;
<span class="org-function-name">public</span>:
        <span class="org-keyword">auto</span> <span class="org-function-name">size</span><span class="org-rainbow-delimiters-depth-2">()</span> -&gt; <span class="org-type">size_t</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> Size;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">fill</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-type">Element</span>&amp; <span class="org-variable-name">t</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">size_t</span> <span class="org-variable-name">i</span> = 0; i &lt; Size; i++<span class="org-rainbow-delimiters-depth-3">)</span>
                        m_data<span class="org-rainbow-delimiters-depth-3">[</span>i<span class="org-rainbow-delimiters-depth-3">]</span> = t;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-keyword">operator</span> <span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">[]</span></span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">size_t</span> <span class="org-variable-name">index</span><span class="org-rainbow-delimiters-depth-2">)</span> -&gt; Element&amp; <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> m_data<span class="org-rainbow-delimiters-depth-3">[</span>index<span class="org-rainbow-delimiters-depth-3">]</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">begin</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-keyword">decltype</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::begin<span class="org-rainbow-delimiters-depth-3">(</span>m_data<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-constant">std</span>::begin<span class="org-rainbow-delimiters-depth-3">(</span>m_data<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">end</span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> -&gt; <span class="org-keyword">decltype</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::end<span class="org-rainbow-delimiters-depth-3">(</span>m_data<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">{</span>
                <span class="org-keyword">return</span> <span class="org-constant">std</span>::end<span class="org-rainbow-delimiters-depth-3">(</span>m_data<span class="org-rainbow-delimiters-depth-3">)</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
        <span class="org-keyword">auto</span> <span class="org-function-name">print</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">name</span>, <span class="org-constant">std</span>::<span class="org-type">ostream</span>&amp; <span class="org-variable-name">os</span> = <span class="org-constant">std</span>::cout<span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-keyword">const</span> -&gt; <span class="org-type">void</span><span class="org-rainbow-delimiters-depth-2">{</span>
                os &lt;&lt; name &lt;&lt; <span class="org-string">" = "</span>;
                <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">auto</span>&amp; <span class="org-variable-name">x</span>: *<span class="org-keyword">this</span><span class="org-rainbow-delimiters-depth-3">)</span>
                        os &lt;&lt; x &lt;&lt; <span class="org-string">" "</span> &lt;&lt; <span class="org-constant">std</span>::flush;
                os &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-type">void</span> <span class="org-function-name">default_template_args</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">s1</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"s1.size() = "</span> &lt;&lt; s1.size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
        s1.fill<span class="org-rainbow-delimiters-depth-2">(</span>3.0<span class="org-rainbow-delimiters-depth-2">)</span>;
        s1<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> = 8.23;
        s1<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> = -10.2;
        s1<span class="org-rainbow-delimiters-depth-2">[</span>3<span class="org-rainbow-delimiters-depth-2">]</span> = 0.0;
        s1.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"s1"</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-type">Array</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">std</span>::<span class="org-type">string</span>, 4<span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">s2</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"s2.size() = "</span> &lt;&lt; s2.size<span class="org-rainbow-delimiters-depth-2">()</span> &lt;&lt; <span class="org-string">"\n"</span>;
        s2.fill<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"C++"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        s2.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"s2"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        s2<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-string">"PlusPlus"</span>;
        s2<span class="org-rainbow-delimiters-depth-2">[</span>1<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-string">"CPP"</span>;
        s2<span class="org-rainbow-delimiters-depth-2">[</span>2<span class="org-rainbow-delimiters-depth-2">]</span> = <span class="org-string">"ASM"</span>;
        s2.print<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-string">"s2"</span><span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Running on CLING REPL:
</p>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; .X <span class="org-keyword">default</span>-<span class="org-keyword">template</span>-args.C 
s1.size<span class="org-rainbow-delimiters-depth-1">()</span> = 10
s1 = 8.23 -10.2 3 0 3 3 3 3 3 3 
s2.size<span class="org-rainbow-delimiters-depth-1">()</span> = 4
s2 = C++ C++ C++ C++ 
s2 = PlusPlus CPP ASM C++ 
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf706234" class="outline-4">
<h4 id="orgf706234"><a id="ID-20156a12-aa32-407d-8cc0-5c4b85ba9021"></a><span class="section-number-4">1.18.7</span> Implementing Higher Order Functions with templates</h4>
<div class="outline-text-4" id="text-1-18-7">
<ul class="org-ul">
<li>File: <a href="src/template-hof1.cpp">file:src/template-hof1.cpp</a></li>
<li>Online Compiler: <a href="https://rextester.com/ZAT8950">https://rextester.com/ZAT8950</a></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/**   </span><span class="org-comment">File:     template-hof1.cpp </span>
<span class="org-comment">  *  Brief:    Shows how to implement template higher order functions which operates on containers.</span>
<span class="org-comment">  *  Features: Template metaprogramming, C++11, functional programming and STL.</span>
<span class="org-comment">  ****************************************************************************/</span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">cmath</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">list</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">deque</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">vector</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">functional</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iomanip</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Apply a function to every element of a container */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">ELEM</span>, <span class="org-keyword">class</span> <span class="org-type">ALLOC</span>, <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-keyword">class</span>, <span class="org-keyword">class</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-keyword">class</span> <span class="org-type">CONTAINER</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">forRange1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">CONTAINER</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">ELEM</span>, <span class="org-type">ALLOC</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>&amp; <span class="org-variable-name">cont</span>, <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">ELEM</span>&amp;<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">fn</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">i</span> =  <span class="org-constant">std</span>::begin<span class="org-rainbow-delimiters-depth-3">(</span>cont<span class="org-rainbow-delimiters-depth-3">)</span>; i != <span class="org-constant">std</span>::end<span class="org-rainbow-delimiters-depth-3">(</span>cont<span class="org-rainbow-delimiters-depth-3">)</span>; i++<span class="org-rainbow-delimiters-depth-2">)</span>
                fn<span class="org-rainbow-delimiters-depth-2">(</span>*i<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Apply a function to every element of a container */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">CONTAINER</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">forRange2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">CONTAINER</span>&amp; <span class="org-variable-name">cont</span>, <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-keyword">decltype</span><span class="org-rainbow-delimiters-depth-4">(</span>cont.front<span class="org-rainbow-delimiters-depth-5">()</span><span class="org-rainbow-delimiters-depth-4">)</span><span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">fn</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">i</span> =  <span class="org-constant">std</span>::begin<span class="org-rainbow-delimiters-depth-3">(</span>cont<span class="org-rainbow-delimiters-depth-3">)</span>; i != <span class="org-constant">std</span>::end<span class="org-rainbow-delimiters-depth-3">(</span>cont<span class="org-rainbow-delimiters-depth-3">)</span>; i++<span class="org-rainbow-delimiters-depth-2">)</span>
                fn<span class="org-rainbow-delimiters-depth-2">(</span>*i<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Template for folding over a container in a similar way to the higher order function fold. </span>
<span class="org-comment"> * Note: </span>
<span class="org-comment"> * + CONTAINER parameter accepts any argument which has .begin() and .end() methods </span>
<span class="org-comment"> *   returning iterators. </span>
<span class="org-comment"> * + STEPFN type parameters accepts any function-object, function pointer or lambda </span>
<span class="org-comment"> *   whith the following signature: (ACC, X) =&gt; ACC where ACC is the accumulator type </span>
<span class="org-comment"> *   and X is the type of the container element. </span>
<span class="org-comment"> */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">CONTAINER</span>, <span class="org-keyword">class</span> <span class="org-type">ACC</span>, <span class="org-keyword">class</span> <span class="org-type">STEPFN</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">foldRange</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">CONTAINER</span>&amp; <span class="org-variable-name">cont</span>, <span class="org-keyword">const</span> <span class="org-type">ACC</span>&amp; <span class="org-variable-name">init</span>, <span class="org-type">STEPFN</span> <span class="org-variable-name">fn</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">ACC</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-type">ACC</span> <span class="org-variable-name">acc</span><span class="org-rainbow-delimiters-depth-2">{</span>init<span class="org-rainbow-delimiters-depth-2">}</span>;
        <span class="org-keyword">for</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-keyword">auto</span> <span class="org-variable-name">i</span> =  <span class="org-constant">std</span>::begin<span class="org-rainbow-delimiters-depth-3">(</span>cont<span class="org-rainbow-delimiters-depth-3">)</span>; i != <span class="org-constant">std</span>::end<span class="org-rainbow-delimiters-depth-3">(</span>cont<span class="org-rainbow-delimiters-depth-3">)</span>; i++<span class="org-rainbow-delimiters-depth-2">)</span>
                acc = fn<span class="org-rainbow-delimiters-depth-2">(</span>*i, acc<span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">return</span> acc;
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-type">int</span> <span class="org-function-name">main</span><span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-constant">std</span>::<span class="org-constant">ios_base</span>::sync_with_stdio<span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-2">)</span>;

        <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span> <span class="org-variable-name">vec</span><span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 400, 100<span class="org-rainbow-delimiters-depth-2">}</span>;
        <span class="org-constant">std</span>::<span class="org-type">list</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>   <span class="org-variable-name">lst</span><span class="org-rainbow-delimiters-depth-2">{</span>1, 2, 400, 100<span class="org-rainbow-delimiters-depth-2">}</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Requires template argument </span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"===== EXPERIMENT 1 =================\n"</span>;
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"forRange1 - Vector"</span> &lt;&lt; <span class="org-string">"\n"</span>;
        forRange1<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>vec, <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>5<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"forRange1 - List"</span> &lt;&lt; <span class="org-string">"\n"</span>;
        forRange1<span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">&gt;(</span>lst, <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>5<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;

        <span class="org-comment-delimiter">// </span><span class="org-comment">Doesn't require the template argument as the compiler can infer its type.</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"===== EXPERIMENT 2 =================\n"</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"forRange1 - Vector"</span> &lt;&lt; <span class="org-string">"\n"</span>;
        forRange2<span class="org-rainbow-delimiters-depth-2">(</span>vec, <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>5<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"forRange1 - list"</span> &lt;&lt; <span class="org-string">"\n"</span>;
        forRange2<span class="org-rainbow-delimiters-depth-2">(</span>lst, <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-3">){</span> <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-4">(</span>5<span class="org-rainbow-delimiters-depth-4">)</span> &lt;&lt; x &lt;&lt; <span class="org-string">" "</span>; <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"\n"</span>;

        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"===== EXPERIMENT 3 =================\n"</span>;
        <span class="org-type">int</span> <span class="org-variable-name">result1</span> = foldRange<span class="org-rainbow-delimiters-depth-2">(</span>vec, 0, <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">int</span> <span class="org-variable-name">x</span>, <span class="org-type">int</span> <span class="org-variable-name">acc</span><span class="org-rainbow-delimiters-depth-3">){</span>
                                                <span class="org-keyword">return</span> x + acc;
                                          <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;   
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"sum(vec1) = "</span> &lt;&lt; result1 &lt;&lt; <span class="org-string">"\n"</span> ;
        <span class="org-type">int</span> <span class="org-variable-name">result2</span> = foldRange<span class="org-rainbow-delimiters-depth-2">(</span>lst, 0, <span class="org-constant">std</span>::plus<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span><span class="org-rainbow-delimiters-depth-2">)</span>;  
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"sum(lst) = "</span> &lt;&lt; result2 &lt;&lt; <span class="org-string">"\n"</span> ;

        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"product(lst) = "</span> &lt;&lt; foldRange<span class="org-rainbow-delimiters-depth-2">(</span>lst, 1, <span class="org-constant">std</span>::multiplies<span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-3">&gt;()</span><span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span> ;
        <span class="org-keyword">return</span> 0;
<span class="org-rainbow-delimiters-depth-1">}</span>

</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-sh">clang++ template-hof1.cpp -o <span class="org-keyword">template-hof1.bin</span> -g -std=c++11 -Wall -Wextra &amp;&amp; ./template-hof1.bin
===== EXPERIMENT 1 =================
forRange1 - Vector
    1     2   400   100 
forRange1 - List
    1     2   400   100 
===== EXPERIMENT 2 =================
forRange1 - Vector
    1     2   400   100 
forRange1 - list
    1     2   400   100 
===== EXPERIMENT 3 =================
<span class="org-function-name">sum</span>(vec1) = 503
<span class="org-function-name">sum</span>(lst) = 503
<span class="org-function-name">product</span>(lst) = 80000
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd6198f1" class="outline-4">
<h4 id="orgd6198f1"><span class="section-number-4">1.18.8</span> Metafunctions or type traits</h4>
<div class="outline-text-4" id="text-1-18-8">
</div>
<ol class="org-ol">
<li><a id="orgeb33560"></a>Overview<br />
<div class="outline-text-5" id="text-1-18-8-1">
<p>
Metafunction (aka type traits) is a template metaprogramming technique
for type introspection, type manipulation and type computation. This
idiom uses templates, template specialization, structs (classes with
everything public) and constexpr in C++11.
</p>

<p>
This section contains examples about template metafunctions. For more
information about this subject and further reading, see: 
</p>
<ul class="org-ul">
<li><a href="https://en.wikibooks.org/wiki/More_C++_Idioms/Metafunction">More C++ Idioms/Metafunction - Wikibooks, open books for an open world</a></li>
<li><a href="https://en.wikibooks.org/wiki/More_C++_Idioms/Type_Generator">More C++ Idioms/Type Generator - Wikibooks, open books for an open world</a></li>
<li><a href="https://akrzemi1.wordpress.com/2012/03/19/meta-functions-in-c11/">Meta-functions in C++11 | Andrzej's C++ blog</a></li>
<li><a href="https://accu.org/index.php/journals/442">ACCU - An introduction to C++ Traits</a></li>
</ul>


<p>
A meta function has the forms: 
</p>

<ul class="org-ul">
<li>Meta function which returns type.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Doesn't matter using typename T1, typename T2</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">or using class T1, class T2 ..</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T1</span>, <span class="org-keyword">class</span> <span class="org-type">T2</span> ...<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">meta_function</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Before C++11</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Meta function which returns type </span>
        <span class="org-keyword">using</span> <span class="org-type">type</span> = ... ;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T1</span>, <span class="org-keyword">typename</span> <span class="org-type">T2</span> ...<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">meta_function</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Before C++11</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Meta function which returns type </span>
        <span class="org-keyword">using</span> <span class="org-type">type</span> = ... ;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Before C++11 </span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T1</span>, <span class="org-keyword">class</span> <span class="org-type">T2</span> ...<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">meta_function</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">typedef</span> ... ... <span class="org-type">type</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Usage: </span>
<span class="org-keyword">using</span> <span class="org-type">type_synonym</span> =  <span class="org-constant">meta_function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T1</span>, <span class="org-type">T2</span>, ...<span class="org-rainbow-delimiters-depth-1">&gt;</span>::type ;
<span class="org-comment-delimiter">// </span><span class="org-comment">Or in before C++11</span>
<span class="org-keyword">typedef</span>  <span class="org-constant">meta_function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T1</span>, <span class="org-type">T2</span>, ...<span class="org-rainbow-delimiters-depth-1">&gt;</span>::<span class="org-type">type</span> <span class="org-type">type_synonym</span>;
</pre>
</div>

<ul class="org-ul">
<li>Meta function which returns value.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">At least C++11</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T1</span>, <span class="org-keyword">class</span> <span class="org-type">T2</span> ...<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">meta_function</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Requires at aleast C++11</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Meta function which returns type </span>
        <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">TYPE</span> <span class="org-variable-name">value</span> = ... 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Before C++11</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T1</span>, <span class="org-keyword">class</span> <span class="org-type">T2</span> ...<span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">meta_function</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Requires at aleast C++11</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Meta function which returns type </span>
        <span class="org-keyword">static</span> <span class="org-keyword">const</span> <span class="org-type">TYPE</span> <span class="org-variable-name">value</span> = ... 
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Usage:</span>
<span class="org-type">TYPE</span> <span class="org-variable-name">result</span> = <span class="org-constant">meta_function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T1</span>, <span class="org-type">T2</span>, ..<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value;
</pre>
</div>

<p>
Further References: 
</p>

<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/header/type_traits">Standard library header &lt;type_traits&gt; - cppreference.com</a></li>
<li><a href="https://www.youtube.com/watch?v=eVtLOHoDbTo">Type Traits - CopperSpice video</a></li>
</ul>
</div>
</li>

<li><a id="orgf201604"></a>Example<br />
<div class="outline-text-5" id="text-1-18-8-2">
<p>
<b>Example</b>
</p>

<p>
Example in:
</p>
<ul class="org-ul">
<li>file:            <a href="src/template-metafunction.cpp">file:src/template-metafunction.cpp</a></li>
<li>Online compiler: <a href="http://rextester.com/TAT89158">http://rextester.com/TAT89158</a></li>
<li>The code in the example demonstrates how to query types using
template specialization, catalog type information and display the
user as well.</li>
</ul>

<p>
Highlights: 
</p>

<ul class="org-ul">
<li>The <b>metafunction isPointer</b> checks whether a given type is a
pointer.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">isPointer</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">bool</span> <span class="org-variable-name">value</span> = <span class="org-constant">false</span>;
        <span class="org-keyword">constexpr</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> <span class="org-constant">false</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">isPointer</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>*<span class="org-rainbow-delimiters-depth-1">&gt;{</span>
        <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">bool</span> <span class="org-variable-name">value</span> = <span class="org-constant">true</span>;
        <span class="org-keyword">constexpr</span> <span class="org-type">bool</span> <span class="org-keyword">operator</span><span class="org-function-name"><span class="org-rainbow-delimiters-depth-2">()</span></span><span class="org-rainbow-delimiters-depth-2">()</span> <span class="org-keyword">const</span> <span class="org-rainbow-delimiters-depth-2">{</span> <span class="org-keyword">return</span> <span class="org-constant">true</span>; <span class="org-rainbow-delimiters-depth-2">}</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Sample usage:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"isPointer&lt;short*&gt;::value  = "</span> &lt;&lt; <span class="org-constant">isPointer</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">short</span>*<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"isPointer&lt;short&gt;::value   = "</span> &lt;&lt; <span class="org-constant">isPointer</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">short</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"isPointer&lt;double&gt;::value  = "</span> &lt;&lt; <span class="org-constant">isPointer</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"isPointer&lt;double*&gt;::value = "</span> &lt;&lt; <span class="org-constant">isPointer</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value &lt;&lt; <span class="org-string">"\n"</span>;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">isPointer&lt;short*&gt;::value  = true
isPointer&lt;short&gt;::value   = false
isPointer&lt;double&gt;::value  = false
isPointer&lt;double*&gt;::value = true
</pre>
</div>

<ul class="org-ul">
<li>The <b>meta function removePointer</b> turns any pointer type into a
non-pointer type removing the star operator.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Partial specilization</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-keyword">struct</span> <span class="org-type">removePointer</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">typedef</span> <span class="org-type">T</span> <span class="org-type">type</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-keyword">struct</span> <span class="org-type">removePointer</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">T</span>*<span class="org-rainbow-delimiters-depth-1">&gt;{</span>
        <span class="org-keyword">typedef</span> <span class="org-type">T</span> <span class="org-type">type</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>;
</pre>
</div>

<p>
Usage: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Typeinfo</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">removePointer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>::type<span class="org-rainbow-delimiters-depth-2">&gt;</span>::name<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Typeinfo</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">removePointer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-3">&gt;</span>::type<span class="org-rainbow-delimiters-depth-2">&gt;</span>::name<span class="org-rainbow-delimiters-depth-1">)</span>;
disp<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-constant">Typeinfo</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-constant">removePointer</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-3">&gt;</span>::type<span class="org-rainbow-delimiters-depth-2">&gt;</span>::name<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text">template-metafunction.cpp:175: ; Typeinfo&lt;removePointer&lt;double&gt;::type&gt;::name = double
template-metafunction.cpp:176: ; Typeinfo&lt;removePointer&lt;double*&gt;::type&gt;::name = double
template-metafunction.cpp:177: ; Typeinfo&lt;removePointer&lt;const char*&gt;::type&gt;::name = const char
</pre>
</div>

<ul class="org-ul">
<li><b>The metafunction Typeinfo</b> computes basic information about types at
compile-time. As this "metafunction" relies on template
specialization, it requires defining template specialization for
all supported types what can be cumbersome. In order to avoid the
specialization boilerplate code, the macro <code>REGISTER_TYPE_INFO</code> is
used to register the supported types.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">struct</span> <span class="org-type">Typeinfo</span><span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">name</span>    = <span class="org-string">"unknown"</span>;
        <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">size_t</span>      <span class="org-variable-name">size</span>    = <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">bool</span>        <span class="org-variable-name">isNumber</span>    = <span class="org-constant">false</span>;
        <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">bool</span>        <span class="org-variable-name">isPointer</span> = ::<span class="org-constant">isPointer</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::value;
        <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">bool</span>        <span class="org-variable-name">isConst</span>     = ::<span class="org-constant">isConst</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-2">&gt;</span>::value;     
<span class="org-rainbow-delimiters-depth-1">}</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">Macro for type registration </span>
<span class="org-preprocessor">#define</span> <span class="org-function-name">REGISTER_TYPE_INFO</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-variable-name">type</span>, <span class="org-variable-name">isNumberFlag</span><span class="org-rainbow-delimiters-depth-1">)</span> \
        <span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;&gt;</span> <span class="org-keyword">struct</span> <span class="org-type">Typeinfo</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>type<span class="org-rainbow-delimiters-depth-1">&gt;{</span> \
                <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-keyword">const</span> <span class="org-type">char</span>* <span class="org-variable-name">name</span>       = #type; \
                <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">size_t</span>      <span class="org-variable-name">size</span>       = <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-2">(</span>type<span class="org-rainbow-delimiters-depth-2">)</span>; \
                <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">bool</span>        <span class="org-variable-name">isNumber</span>   = isNumberFlag; \
                <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">bool</span>        <span class="org-variable-name">isPointer</span>  = ::<span class="org-constant">isPointer</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>type<span class="org-rainbow-delimiters-depth-2">&gt;</span>::value; \
                <span class="org-keyword">static</span> <span class="org-keyword">constexpr</span> <span class="org-type">bool</span>        <span class="org-variable-name">isConst</span>    = ::<span class="org-constant">isConst</span><span class="org-rainbow-delimiters-depth-2">&lt;</span>type<span class="org-rainbow-delimiters-depth-2">&gt;</span>::value;   \
        <span class="org-rainbow-delimiters-depth-1">}</span>

 <span class="org-comment-delimiter">// </span><span class="org-comment">Type registration </span>
 REGISTER_TYPE_INFO<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">bool</span>, <span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-1">)</span>;
 REGISTER_TYPE_INFO<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">char</span>, <span class="org-constant">false</span><span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Usage example: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-function-name">std</span>::cout &lt;&lt; <span class="org-string">"Type info for "</span> &lt;&lt; <span class="org-type">Typeinfo</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>&gt;::name 
          &lt;&lt; <span class="org-string">" size = "</span> &lt;&lt; <span class="org-constant">Typeinfo</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::size 
          &lt;&lt; <span class="org-string">" isPointer = "</span> &lt;&lt; <span class="org-constant">Typeinfo</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::isPointer 
          &lt;&lt; <span class="org-string">"\n"</span>;
</pre>
</div>


<p>
<b>Complete Program output:</b> (<a href="src/template-metafunction.cpp">file:src/template-metafunction.cpp</a>)
</p>

<div class="org-src-container">
<pre class="src src-text">$ clang++ template-metafunction.cpp -o template-metafunction.bin -g -std=c++11 -Wall -Wextra  
./template-metafunction.bin

isPointerOLD&lt;short*&gt;::value  = 1
isPointerOLD&lt;short&gt;::value   = 0
isPointerOLD&lt;double&gt;::value  = 0
isPointerOLD&lt;double*&gt;::value = 1
isPointer&lt;short*&gt;::value  = true
isPointer&lt;short&gt;::value   = false
isPointer&lt;double&gt;::value  = false
isPointer&lt;double*&gt;::value = true
isPointer&lt;short*&gt;()()  = true
isPointer&lt;short&gt;()()   = false
isPointer&lt;double&gt;()()  = false
isPointer&lt;double*&gt;()() = true
Type Info: name =            bool ; bytes =    1 ; isNumber = false ; isPointer = false ; isConst = false
Type Info: name =            char ; bytes =    1 ; isNumber = false ; isPointer = false ; isConst = false
Type Info: name =     std::string ; bytes =   32 ; isNumber = false ; isPointer = false ; isConst = false
Type Info: name =             int ; bytes =    4 ; isNumber =  true ; isPointer = false ; isConst = false
Type Info: name =           short ; bytes =    2 ; isNumber =  true ; isPointer = false ; isConst = false
Type Info: name =           float ; bytes =    4 ; isNumber =  true ; isPointer = false ; isConst = false
Type Info: name =          double ; bytes =    8 ; isNumber =  true ; isPointer = false ; isConst = false
Type Info: name =     const char* ; bytes =    8 ; isNumber =  true ; isPointer =  true ; isConst =  true
Type Info: name =          float* ; bytes =    8 ; isNumber = false ; isPointer =  true ; isConst = false
Type Info: name =         double* ; bytes =    8 ; isNumber = false ; isPointer =  true ; isConst = false
Type Info: name =   const double&amp; ; bytes =    8 ; isNumber = false ; isPointer = false ; isConst =  true
template-metafunction.cpp:175: ; Typeinfo&lt;removePointer&lt;double&gt;::type&gt;::name = double
template-metafunction.cpp:176: ; Typeinfo&lt;removePointer&lt;double*&gt;::type&gt;::name = double
template-metafunction.cpp:177: ; Typeinfo&lt;removePointer&lt;const char*&gt;::type&gt;::name = const char
</pre>
</div>
</div>
</li>
</ol>
</div>
<div id="outline-container-org13b91bb" class="outline-4">
<h4 id="org13b91bb"><span class="section-number-4">1.18.9</span> Predefined type traits in &lt;type_traits&gt;</h4>
<div class="outline-text-4" id="text-1-18-9">
<p>
The C++11 header <code>&lt;type_traits&gt;</code> (before <code>boost.type_traits</code>) provide many
useful type traits, also known as metafunction, for querying and
transforming types at compile-time. In addition to those operations,
the type traits available in this header can also be used for
optimizing templates by specializing them for specific types.
</p>

<p>
Documentation: 
</p>

<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/header/type_traits">Standard library header &lt;type_traits&gt; - cppreference.com</a></li>
<li><a href="https://www.boost.org/doc/libs/1_68_0/libs/type_traits/doc/html/index.html">Chapter 1. Boost.TypeTraits - 1.68.0</a></li>
</ul>

<p>
Examples: 
</p>

<ul class="org-ul">
<li>To use the C++11's type traits, it is necessary to include the
header <code>&lt;type_traits&gt;</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">iostream</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">string</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
<span class="org-preprocessor">#include</span> <span class="org-string"><span class="org-rainbow-delimiters-depth-1">&lt;</span></span><span class="org-string">type_traits</span><span class="org-string"><span class="org-rainbow-delimiters-depth-1">&gt;</span></span> 
</pre>
</div>

<ul class="org-ul">
<li>Type trait <code>std::is_void</code>
<ul class="org-ul">
<li>Checks whether type is void.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_void</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_void</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_void</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_void</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 

<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> inspectType<span class="org-rainbow-delimiters-depth-1">(){</span>
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">std</span>::<span class="org-constant">is_void</span><span class="org-rainbow-delimiters-depth-3">&lt;</span><span class="org-type">T</span><span class="org-rainbow-delimiters-depth-3">&gt;</span>::value<span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Type is void"</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-keyword">else</span>
                <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">"Type is not void"</span> &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>

&gt;&gt; 
&gt;&gt; inspectType<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">&gt;()</span>
Type <span class="org-type">is</span> <span class="org-type">void</span>
&gt;&gt; inspectType<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">&gt;()</span>
<span class="org-type">Type</span> <span class="org-variable-name">is</span> <span class="org-keyword">not</span> <span class="org-type">void</span>
&gt;&gt; inspectType<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;()</span>
<span class="org-type">Type</span> <span class="org-variable-name">is</span> <span class="org-keyword">not</span> <span class="org-type">void</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Check whether type is float point: <code>std::is_floating_point</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_floating_point</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_floating_point</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_floating_point</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">long</span> <span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_floating_point</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_floating_point</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Check whether type is interger: <code>std::is_integral</code></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_integral</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_integral</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">long</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_integral</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_integral</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">unsigned</span> <span class="org-type">char</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_integral</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_integral</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_integral</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Check whether type is const</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_const</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_const</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">const</span> <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_const</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">const</span> <span class="org-type">char</span>*<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_const</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
</pre>
</div>

<ul class="org-ul">
<li>Check whether type is a reference (&amp;)</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp">&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_reference</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_reference</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">const</span> <span class="org-type">int</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_reference</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>&amp;<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_reference</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_reference</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span>*<span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 
</pre>
</div>

<p>
<b>Type relationship</b>
</p>

<ul class="org-ul">
<li>Check whether type are equal.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">Returns true if types are the same </span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_same</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_same</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">int</span>, <span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_same</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">float</span>, <span class="org-type">float</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; 
</pre>
</div>

<ul class="org-ul">
<li>Checks whether types are derived.
<ul class="org-ul">
<li><code>std::is_base_of&lt;A, B&gt;::value</code> returns true if A is a base type (superclass) of
B or B is derived class of A.</li>
</ul></li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">class</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">class</span> <span class="org-type">B</span>: <span class="org-keyword">public</span> <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-function-name">public</span>:
<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">class</span> <span class="org-type">Z</span><span class="org-rainbow-delimiters-depth-1">{</span>
<span class="org-rainbow-delimiters-depth-1">}</span>;

&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_base_of</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">A</span>, <span class="org-type">B</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">true</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_base_of</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">B</span>, <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_base_of</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">B</span>, <span class="org-type">Z</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; <span class="org-constant">std</span>::<span class="org-constant">is_base_of</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">Z</span>, <span class="org-type">A</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>::value
<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">bool</span><span class="org-rainbow-delimiters-depth-1">)</span> <span class="org-constant">false</span>
&gt;&gt; 

</pre>
</div>
</div>
</div>
<div id="outline-container-orgbc9532f" class="outline-4">
<h4 id="orgbc9532f"><span class="section-number-4">1.18.10</span> Variadic Templates</h4>
<div class="outline-text-4" id="text-1-18-10">
<p>
This code shows examples about variadic templates in C++11 and
newer standards.
</p>

<p>
File: <a href="src/template-variadic.cpp">file:src/template-variadic.cpp</a>
</p>

<p>
Code Highlights:
</p>


<ul class="org-ul">
<li>Print a sequence of heterogenous arguments.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">printTypes</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">T</span>&amp; <span class="org-variable-name">x</span><span class="org-rainbow-delimiters-depth-1">){</span>    
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::left &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; x
                                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-string">" size = "</span>
                                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>2<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
        <span class="org-constant">std</span>::clog &lt;&lt; <span class="org-string">" [TRACE] Base case =&gt; x = "</span> &lt;&lt; x &lt;&lt; <span class="org-string">"\n"</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
<span class="org-comment-delimiter">// </span><span class="org-comment">Variadic template arguments </span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">T</span>, <span class="org-keyword">typename</span> ... <span class="org-type">Types</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-type">void</span> <span class="org-function-name">printTypes</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">T</span>&amp; <span class="org-variable-name">x</span>, <span class="org-keyword">const</span> <span class="org-type">Types</span> ... <span class="org-variable-name">args</span><span class="org-rainbow-delimiters-depth-1">){</span>
        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-constant">std</span>::left &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>15<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; x
                                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>10<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-constant">std</span>::right &lt;&lt; <span class="org-string">" size = "</span>
                                  &lt;&lt; <span class="org-constant">std</span>::setw<span class="org-rainbow-delimiters-depth-2">(</span>2<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-keyword">sizeof</span><span class="org-rainbow-delimiters-depth-2">(</span>x<span class="org-rainbow-delimiters-depth-2">)</span> &lt;&lt; <span class="org-string">"\n"</span>;
        printTypes<span class="org-rainbow-delimiters-depth-2">(</span>args ...<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Usage: 
</p>

<div class="org-src-container">
<pre class="src src-cpp">printTypes<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"hello world"</span>, 10, <span class="org-string">'x'</span>, 20.23f, <span class="org-constant">true</span>, NAN<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Ouput: 
</p>

<div class="org-src-container">
<pre class="src src-text">hello world       size = 12
10                size =  4
x                 size =  1
20.23             size =  4
1                 size =  1
nan               size =  4
</pre>
</div>


<ul class="org-ul">
<li>Create a function that applies a member function to a given object.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">class</span> <span class="org-type">T</span>, <span class="org-keyword">class</span> <span class="org-type">R</span>, <span class="org-keyword">class</span> ... <span class="org-type">Args</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">makeCommand</span><span class="org-rainbow-delimiters-depth-1">(</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Pointer to member function </span>
        <span class="org-type">R</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-constant">T</span>::* <span class="org-function-name">pMemfn</span><span class="org-rainbow-delimiters-depth-2">)</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">Args</span> ... <span class="org-variable-name">args</span><span class="org-rainbow-delimiters-depth-2">)</span>,
        <span class="org-comment-delimiter">// </span><span class="org-comment">Member function arguments </span>
        <span class="org-type">Args</span> ... <span class="org-variable-name">arglist</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-1">&lt;</span>R <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">T</span>&amp; <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-2">[</span>=<span class="org-rainbow-delimiters-depth-2">](</span><span class="org-type">T</span>&amp; <span class="org-variable-name">obj</span><span class="org-rainbow-delimiters-depth-2">){</span> <span class="org-keyword">return</span> <span class="org-rainbow-delimiters-depth-3">(</span>obj.*pMemfn<span class="org-rainbow-delimiters-depth-3">)(</span>arglist ...<span class="org-rainbow-delimiters-depth-3">)</span>; <span class="org-rainbow-delimiters-depth-2">}</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Usage:
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-type">CNCMachine</span> <span class="org-variable-name">mach1</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"7Z9FA"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-type">CNCMachine</span> <span class="org-variable-name">mach2</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"MY9FT"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">setSpeed10</span> = makeCommand<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">CNCMachine</span>::setSpeed, 10<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">shutdown</span>   = makeCommand<span class="org-rainbow-delimiters-depth-1">(</span>&amp;<span class="org-constant">CNCMachine</span>::shutdown<span class="org-rainbow-delimiters-depth-1">)</span>;
setSpeed10<span class="org-rainbow-delimiters-depth-1">(</span>mach1<span class="org-rainbow-delimiters-depth-1">)</span>;
setSpeed10<span class="org-rainbow-delimiters-depth-1">(</span>mach2<span class="org-rainbow-delimiters-depth-1">)</span>;
shutdown<span class="org-rainbow-delimiters-depth-1">(</span>mach2<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<ul class="org-ul">
<li>Dynamic load an [U] nix-shared library or shared object.</li>
</ul>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">/** </span><span class="org-comment">Type synonym for shared library handler </span>
<span class="org-comment"> *  Requires: #include &lt;dlfcn.h&gt; and -ldl linker flag */</span>
<span class="org-keyword">using</span> <span class="org-type">LibHandle</span> = <span class="org-constant">std</span>::<span class="org-type">unique_ptr</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span>, <span class="org-constant">std</span>::<span class="org-type">function</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-3">(</span><span class="org-type">void</span>*<span class="org-rainbow-delimiters-depth-3">)</span><span class="org-rainbow-delimiters-depth-2">&gt;</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>;

<span class="org-keyword">auto</span> <span class="org-function-name">loadDLL</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">libPath</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">LibHandle</span> <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">Return unique_ptr for RAAI -&gt; Resource Acquisition is Initialization</span>
        <span class="org-comment-delimiter">// </span><span class="org-comment">releasing closing handle when the unique_ptr goes out of scope. </span>
        <span class="org-keyword">return</span> LibHandle<span class="org-rainbow-delimiters-depth-2">(</span>
                dlopen<span class="org-rainbow-delimiters-depth-3">(</span>libPath.c_str<span class="org-rainbow-delimiters-depth-4">()</span>, RTLD_LAZY<span class="org-rainbow-delimiters-depth-3">)</span>,
                <span class="org-rainbow-delimiters-depth-3">[](</span><span class="org-type">void</span>* <span class="org-variable-name">h</span><span class="org-rainbow-delimiters-depth-3">){</span>
                        <span class="org-constant">std</span>::cout &lt;&lt; <span class="org-string">" [INFO] Shared library handle released OK."</span> &lt;&lt; <span class="org-string">"\n"</span>;
                        dlclose<span class="org-rainbow-delimiters-depth-4">(</span>h<span class="org-rainbow-delimiters-depth-4">)</span>;
                <span class="org-rainbow-delimiters-depth-3">}</span><span class="org-rainbow-delimiters-depth-2">)</span>;     
<span class="org-rainbow-delimiters-depth-1">}</span>

<span class="org-comment-delimiter">/** </span><span class="org-comment">Load symbol from shared library </span>
<span class="org-comment">  *  Requires: #include &lt;dlfcn.h&gt; and -ldl linker flag */</span>
<span class="org-keyword">template</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-keyword">typename</span> <span class="org-type">Function</span><span class="org-rainbow-delimiters-depth-1">&gt;</span>
<span class="org-keyword">auto</span> <span class="org-function-name">loadSymbol</span><span class="org-rainbow-delimiters-depth-1">(</span><span class="org-keyword">const</span> <span class="org-type">LibHandle</span>&amp; <span class="org-variable-name">handle</span>, <span class="org-keyword">const</span> <span class="org-constant">std</span>::<span class="org-type">string</span>&amp; <span class="org-variable-name">symbol</span><span class="org-rainbow-delimiters-depth-1">)</span> -&gt; <span class="org-type">Function</span>* <span class="org-rainbow-delimiters-depth-1">{</span>
        <span class="org-type">void</span>* <span class="org-variable-name">voidptr</span> = dlsym<span class="org-rainbow-delimiters-depth-2">(</span>handle.get<span class="org-rainbow-delimiters-depth-3">()</span>, symbol.c_str<span class="org-rainbow-delimiters-depth-3">()</span><span class="org-rainbow-delimiters-depth-2">)</span>;
        <span class="org-keyword">if</span><span class="org-rainbow-delimiters-depth-2">(</span>voidptr == <span class="org-constant">nullptr</span><span class="org-rainbow-delimiters-depth-2">)</span>
                <span class="org-keyword">return</span> <span class="org-constant">nullptr</span>;
        <span class="org-keyword">return</span> <span class="org-keyword">reinterpret_cast</span><span class="org-rainbow-delimiters-depth-2">&lt;</span><span class="org-type">Function</span>*<span class="org-rainbow-delimiters-depth-2">&gt;(</span>voidptr<span class="org-rainbow-delimiters-depth-2">)</span>;
<span class="org-rainbow-delimiters-depth-1">}</span>
</pre>
</div>

<p>
Usage: 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span class="org-comment-delimiter">// </span><span class="org-comment">GNU Scientific Library - Linear Algebra CBLAS </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">handle1</span> = loadDLL<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"/usr/lib64/libgslcblas.so"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">using</span> <span class="org-type">cblas_daxpy_type</span> = <span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-1">(</span><span class="org-type">int</span>, <span class="org-type">double</span>, <span class="org-keyword">const</span> <span class="org-type">double</span>*, <span class="org-type">int</span>, <span class="org-type">double</span>*, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">cblas_daxpy</span> = loadSymbol<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">cblas_daxpy_type</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>handle1, <span class="org-string">"cblas_daxpy"</span><span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Or </span>
<span class="org-keyword">auto</span> <span class="org-variable-name">cblas_daxpy</span> = loadSymbol<span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">void</span> <span class="org-rainbow-delimiters-depth-2">(</span><span class="org-type">int</span>, <span class="org-type">double</span>, <span class="org-keyword">const</span> <span class="org-type">double</span>*, <span class="org-type">int</span>, <span class="org-type">double</span>*, <span class="org-type">int</span><span class="org-rainbow-delimiters-depth-2">)</span><span class="org-rainbow-delimiters-depth-1">&gt;(</span>handle1, <span class="org-string">"cblas_daxpy"</span><span class="org-rainbow-delimiters-depth-1">)</span>;

<span class="org-keyword">auto</span> <span class="org-variable-name">xs</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span> 3.0, 5.0, 6.0, 10.0, 8.0<span class="org-rainbow-delimiters-depth-1">}</span>;
<span class="org-keyword">auto</span> <span class="org-variable-name">ys</span> = <span class="org-constant">std</span>::<span class="org-type">vector</span><span class="org-rainbow-delimiters-depth-1">&lt;</span><span class="org-type">double</span><span class="org-rainbow-delimiters-depth-1">&gt;{</span> 2.0, 2.0, 2.0,  2.0, 2.0<span class="org-rainbow-delimiters-depth-1">}</span>;
printContainer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"xs"</span>, xs<span class="org-rainbow-delimiters-depth-1">)</span>;
printContainer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"ys"</span>, ys<span class="org-rainbow-delimiters-depth-1">)</span>;
<span class="org-comment-delimiter">// </span><span class="org-comment">Compute xs * 4.0 + ys</span>
cblas_daxpy<span class="org-rainbow-delimiters-depth-1">(</span>xs.size<span class="org-rainbow-delimiters-depth-2">()</span>, 4.0, &amp;xs<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span>, 1, &amp;ys<span class="org-rainbow-delimiters-depth-2">[</span>0<span class="org-rainbow-delimiters-depth-2">]</span>, 1<span class="org-rainbow-delimiters-depth-1">)</span>;
printContainer<span class="org-rainbow-delimiters-depth-1">(</span><span class="org-string">"ys"</span>, ys<span class="org-rainbow-delimiters-depth-1">)</span>;
</pre>
</div>

<p>
Output: 
</p>

<div class="org-src-container">
<pre class="src src-text"> [INFO]  Loaded clblas_daxpy OK!
xs = 3, 5, 6, 10, 8, 
ys = 2, 2, 2, 2, 2, 
ys = 14, 22, 26, 42, 34, 
 [INFO] Shared library handle released OK.
</pre>
</div>


<p>
Complete Output: 
</p>

<div class="org-src-container">
<pre class="src src-txt">$ g++ template-variadic.cpp -o template-variadic.bin -g -std=c++11 -Wall -Wextra -ldl 
$ ./template-variadic.bin

EXPERIMENT 1 = Function of many argument for printing all of them
---------------------------------------
hello world       size = 12
10                size =  4
x                 size =  1
20.23             size =  4
1                 size =  1
nan               size =  4
 [TRACE] Base case =&gt; x = nan

EXPERIMENT 2 = Indirect method invocation
--------------------------------------
[MACHINE] id = 7Z9FA Set machine speed to level 10
[MACHINE] id = MY9FT Set machine speed to level 10
[MACHINE] id = 7Z9FA  Equipment to position set to  x = 10 ; y = -20
[MACHINE] id = MY9FT  Equipment to position set to  x = 10 ; y = -20
[MACHINE] id = 7Z9FA Shutdown equipment
[MACHINE] id = MY9FT Shutdown equipment

EXPERIMENT 3 = Dynamic Loading from shared library (libgslcblas.so) 
--------------------------------------
 [INFO]  Loaded clblas_daxpy OK!
xs = 3, 5, 6, 10, 8, 
ys = 2, 2, 2, 2, 2, 
ys = 14, 22, 26, 42, 34, 
 [INFO] Shared library handle released OK.
</pre>
</div>

<p>
References:  
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/27604128/c-stdfunction-like-template-syntax">c++11 - C++ std::function-like template syntax - Stack Overflow</a></li>
<li><a href="https://www.nag.com/numeric/FL/nagdoc_fl24/html/F06/f06ecf.html">F06ECF (DAXPY) : NAG Library, Mark 24</a></li>
<li><a href="https://dwheeler.com/program-library/Program-Library-HOWTO/x172.html">Dynamically Loaded (DL) Libraries</a></li>
<li><a href="https://www.gnu.org/software/gsl/doc/html/cblas.html">GSL CBLAS Library — GSL 2.5 documentation</a></li>
</ul>
</div>
</div>

<div id="outline-container-org313c8de" class="outline-4">
<h4 id="org313c8de"><span class="section-number-4">1.18.11</span> References and Bookmarks</h4>
<div class="outline-text-4" id="text-1-18-11">
<p>
General 
</p>

<ul class="org-ul">
<li><a href="https://en.cppreference.com/w/cpp/language/templates">Templates - cppreference.com</a></li>

<li><a href="https://en.cppreference.com/w/cpp/header/type_traits">Standard library header &lt;type_traits&gt; - cppreference.com</a></li>

<li><a href="https://en.cppreference.com/w/cpp/language/class_template">Class template - cppreference.com</a></li>
</ul>


<p>
Templates and Iterators: 
</p>
<ul class="org-ul">
<li><a href="https://www.fluentcpp.com/2018/05/08/std-iterator-deprecated/">std::iterator is deprecated: Why, What It Was, and What to Use Instead - Fluent C++</a></li>
</ul>

<p>
Dependent Type Names: 
</p>
<ul class="org-ul">
<li><a href="http://www.enseignement.polytechnique.fr/informatique/INF478/docs/Cpp/en/cpp/language/dependent_name.html">Dependent names - cppreference.com</a></li>
</ul>

<p>
Variadic Templates:
</p>
<ul class="org-ul">
<li><a href="http://www.cplusplus.com/articles/EhvU7k9E/">C++11 - New features - Variadic template - C++ Articles</a></li>
<li><a href="http://kevinushey.github.io/blog/2016/01/27/introduction-to-c++-variadic-templates/">Introduction to C++ Variadic Templates · R and C++</a></li>
<li><a href="https://docs.microsoft.com/en-gb/cpp/cpp/ellipses-and-variadic-templates?view=vs-2017">Ellipses and Variadic Templates | Microsoft Docs</a></li>
<li><a href="https://stackoverflow.com/questions/27604128/c-stdfunction-like-template-syntax">c++11 - C++ std::function-like template syntax - Stack Overflow</a></li>
</ul>

<p>
Papers and technical documents about Generic Programming and Template Metaprogramming 
</p>

<ul class="org-ul">
<li>Alexander Stepanov and David R. Musser - <b>Generic Programming</b> -
<a href="http://stepanovpapers.com/genprog.pdf">http://stepanovpapers.com/genprog.pdf</a></li>

<li>Alexander Stepanov and Meng Lee. <b>The Standard Template Library</b>
<ul class="org-ul">
<li><a href="http://stepanovpapers.com/STL/DOC.PDF">http://stepanovpapers.com/STL/DOC.PDF</a></li>
</ul></li>

<li>Alexandre Duret-Lutz et al. <b>Design Patterns for Generic Programming in C++</b>
<ul class="org-ul">
<li><a href="https://www.lrde.epita.fr/dload/papers/coots01.html">https://www.lrde.epita.fr/dload/papers/coots01.html</a></li>
</ul></li>

<li>Alexandre Duret-Lutz et al. <b>Design Patterns for Generic Programming in C++</b>
<ul class="org-ul">
<li><a href="https://www.usenix.org/legacy/events/coots01/full_papers/duret/duret_html/index.html">https://www.usenix.org/legacy/events/coots01/full_papers/duret/duret_html/index.html</a></li>
</ul></li>

<li>James C. Dehnert and Alexander Stepanov. <b>Fundamentals of Generic Programming</b>
<ul class="org-ul">
<li><a href="http://stepanovpapers.com/DeSt98.pdf">http://stepanovpapers.com/DeSt98.pdf</a></li>
</ul></li>

<li>Jeremy Gibbons. <b>Patterns in Datatype-Generic Programming</b>
<ul class="org-ul">
<li><a href="http://www.cs.ox.ac.uk/jeremy.gibbons/publications/patterns.pdf">http://www.cs.ox.ac.uk/jeremy.gibbons/publications/patterns.pdf</a></li>
</ul></li>

<li>Giuseppe Lipari. <b>Design Patterns in C++ Template metaprogramming</b>
<ul class="org-ul">
<li><a href="http://retis.sssup.it/~lipari/courses/oosd2010-2/07.metaprogramming-handout.pdf">http://retis.sssup.it/~lipari/courses/oosd2010-2/07.metaprogramming-handout.pdf</a></li>
</ul></li>

<li>Gabriel Dos Reis and Jaakko Jarvi. <b>What is Generic Programming?</b>
<ul class="org-ul">
<li><a href="https://pdfs.semanticscholar.org/e730/3991015a041e50c7bdabbe4cb4678531e35b.pdf">https://pdfs.semanticscholar.org/e730/3991015a041e50c7bdabbe4cb4678531e35b.pdf</a></li>
</ul></li>

<li><b>Functional Programming with C++ Template Metaprograms</b>
<ul class="org-ul">
<li><a href="https://pdfs.semanticscholar.org/c7f3/a67b78dabd5aa6c4599a127583c07bb8c032.pdf">https://pdfs.semanticscholar.org/c7f3/a67b78dabd5aa6c4599a127583c07bb8c032.pdf</a></li>
</ul></li>

<li><b>Implementing Monads for C++ Template Metaprograms</b>
<ul class="org-ul">
<li><a href="http://plcportal.inf.elte.hu/en/publications/TechnicalReports/monad-tr.pdf">http://plcportal.inf.elte.hu/en/publications/TechnicalReports/monad-tr.pdf</a></li>
</ul></li>

<li>Angelika Langer. <b>C++ Expression Templates - An Introduction to the</b>
<b>Principles of Expression Templates</b>
<ul class="org-ul">
<li><a href="http://www.angelikalanger.com/Articles/Cuj/ExpressionTemplates/ExpressionTemplates.htm">http://www.angelikalanger.com/Articles/Cuj/ExpressionTemplates/ExpressionTemplates.htm</a></li>
</ul></li>

<li><b>Advanced C++ Template Techniques: An Introduction to Meta-Programming for Scientific Computing</b>
<ul class="org-ul">
<li><a href="https://conradsanderson.id.au/misc/sanderson_templates_lecture_uqcomp7305.pdf">https://conradsanderson.id.au/misc/sanderson_templates_lecture_uqcomp7305.pdf</a></li>
</ul></li>

<li><a href="http://people.cs.uchicago.edu/~jacobm/pubs/templates.html">What's Wrong with C++ Templates?</a></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgdc65937" class="outline-3">
<h3 id="orgdc65937"><span class="section-number-3">1.19</span> Books</h3>
<div class="outline-text-3" id="text-1-19">
<ul class="org-ul">
<li>Bruce Eckel. <b>Thinking in C++</b>. 1995
<ul class="org-ul">
<li>Notes: Despite being an old book, it has a step-by-step coverage
of C++ main concepts and some design patterns.</li>
</ul></li>

<li>Andrei Alexandrescu. <b>Modern C++ Design: Generic Programming and</b>
<b>Design Patterns Applied 1st Edition</b>. 2001 
<ul class="org-ul">
<li>Notes: Provides a comprehensive and broad coverage of C++
generic/template metaprogramming.</li>
<li>Link: <a href="https://www.amazon.com/Modern-Design-Generic-Programming-Patterns/dp/0201704315">Amazon</a></li>
</ul></li>

<li>Scott Meyers. <b>Effective C++ Third Edition, 55 Specific Ways to Improve Your</b>
<b>Programs and Designs</b></li>

<li>Andrew Koenig and Barbara E. Moo. <b>Accelerated C++: Practical Programming by Example</b></li>

<li>Bjarne Stroustrup. <b>Tour of C++ second edition</b></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2018-10-16 Tue 21:32</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
